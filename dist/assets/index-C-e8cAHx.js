function gS(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in n)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(n,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();function ip(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function yS(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var s=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:function(){return n[r]}})}),t}var ph={exports:{}},Ho={},mh={exports:{}},we={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hy;function xS(){if(Hy)return we;Hy=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),g=Symbol.iterator;function x(T){return T===null||typeof T!="object"?null:(T=g&&T[g]||T["@@iterator"],typeof T=="function"?T:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,k={};function C(T,$,me){this.props=T,this.context=$,this.refs=k,this.updater=me||w}C.prototype.isReactComponent={},C.prototype.setState=function(T,$){if(typeof T!="object"&&typeof T!="function"&&T!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,T,$,"setState")},C.prototype.forceUpdate=function(T){this.updater.enqueueForceUpdate(this,T,"forceUpdate")};function N(){}N.prototype=C.prototype;function M(T,$,me){this.props=T,this.context=$,this.refs=k,this.updater=me||w}var I=M.prototype=new N;I.constructor=M,b(I,C.prototype),I.isPureReactComponent=!0;var V=Array.isArray,U=Object.prototype.hasOwnProperty,D={current:null},B={key:!0,ref:!0,__self:!0,__source:!0};function oe(T,$,me){var ye,be={},ke=null,_e=null;if($!=null)for(ye in $.ref!==void 0&&(_e=$.ref),$.key!==void 0&&(ke=""+$.key),$)U.call($,ye)&&!B.hasOwnProperty(ye)&&(be[ye]=$[ye]);var Ne=arguments.length-2;if(Ne===1)be.children=me;else if(1<Ne){for(var Pe=Array(Ne),vt=0;vt<Ne;vt++)Pe[vt]=arguments[vt+2];be.children=Pe}if(T&&T.defaultProps)for(ye in Ne=T.defaultProps,Ne)be[ye]===void 0&&(be[ye]=Ne[ye]);return{$$typeof:n,type:T,key:ke,ref:_e,props:be,_owner:D.current}}function se(T,$){return{$$typeof:n,type:T.type,key:$,ref:T.ref,props:T.props,_owner:T._owner}}function Te(T){return typeof T=="object"&&T!==null&&T.$$typeof===n}function Ze(T){var $={"=":"=0",":":"=2"};return"$"+T.replace(/[=:]/g,function(me){return $[me]})}var Re=/\/+/g;function He(T,$){return typeof T=="object"&&T!==null&&T.key!=null?Ze(""+T.key):$.toString(36)}function Ke(T,$,me,ye,be){var ke=typeof T;(ke==="undefined"||ke==="boolean")&&(T=null);var _e=!1;if(T===null)_e=!0;else switch(ke){case"string":case"number":_e=!0;break;case"object":switch(T.$$typeof){case n:case e:_e=!0}}if(_e)return _e=T,be=be(_e),T=ye===""?"."+He(_e,0):ye,V(be)?(me="",T!=null&&(me=T.replace(Re,"$&/")+"/"),Ke(be,$,me,"",function(vt){return vt})):be!=null&&(Te(be)&&(be=se(be,me+(!be.key||_e&&_e.key===be.key?"":(""+be.key).replace(Re,"$&/")+"/")+T)),$.push(be)),1;if(_e=0,ye=ye===""?".":ye+":",V(T))for(var Ne=0;Ne<T.length;Ne++){ke=T[Ne];var Pe=ye+He(ke,Ne);_e+=Ke(ke,$,me,Pe,be)}else if(Pe=x(T),typeof Pe=="function")for(T=Pe.call(T),Ne=0;!(ke=T.next()).done;)ke=ke.value,Pe=ye+He(ke,Ne++),_e+=Ke(ke,$,me,Pe,be);else if(ke==="object")throw $=String(T),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(T).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.");return _e}function Ve(T,$,me){if(T==null)return T;var ye=[],be=0;return Ke(T,ye,"","",function(ke){return $.call(me,ke,be++)}),ye}function Ae(T){if(T._status===-1){var $=T._result;$=$(),$.then(function(me){(T._status===0||T._status===-1)&&(T._status=1,T._result=me)},function(me){(T._status===0||T._status===-1)&&(T._status=2,T._result=me)}),T._status===-1&&(T._status=0,T._result=$)}if(T._status===1)return T._result.default;throw T._result}var Se={current:null},F={transition:null},le={ReactCurrentDispatcher:Se,ReactCurrentBatchConfig:F,ReactCurrentOwner:D};function X(){throw Error("act(...) is not supported in production builds of React.")}return we.Children={map:Ve,forEach:function(T,$,me){Ve(T,function(){$.apply(this,arguments)},me)},count:function(T){var $=0;return Ve(T,function(){$++}),$},toArray:function(T){return Ve(T,function($){return $})||[]},only:function(T){if(!Te(T))throw Error("React.Children.only expected to receive a single React element child.");return T}},we.Component=C,we.Fragment=t,we.Profiler=s,we.PureComponent=M,we.StrictMode=r,we.Suspense=u,we.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=le,we.act=X,we.cloneElement=function(T,$,me){if(T==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+T+".");var ye=b({},T.props),be=T.key,ke=T.ref,_e=T._owner;if($!=null){if($.ref!==void 0&&(ke=$.ref,_e=D.current),$.key!==void 0&&(be=""+$.key),T.type&&T.type.defaultProps)var Ne=T.type.defaultProps;for(Pe in $)U.call($,Pe)&&!B.hasOwnProperty(Pe)&&(ye[Pe]=$[Pe]===void 0&&Ne!==void 0?Ne[Pe]:$[Pe])}var Pe=arguments.length-2;if(Pe===1)ye.children=me;else if(1<Pe){Ne=Array(Pe);for(var vt=0;vt<Pe;vt++)Ne[vt]=arguments[vt+2];ye.children=Ne}return{$$typeof:n,type:T.type,key:be,ref:ke,props:ye,_owner:_e}},we.createContext=function(T){return T={$$typeof:l,_currentValue:T,_currentValue2:T,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},T.Provider={$$typeof:i,_context:T},T.Consumer=T},we.createElement=oe,we.createFactory=function(T){var $=oe.bind(null,T);return $.type=T,$},we.createRef=function(){return{current:null}},we.forwardRef=function(T){return{$$typeof:c,render:T}},we.isValidElement=Te,we.lazy=function(T){return{$$typeof:f,_payload:{_status:-1,_result:T},_init:Ae}},we.memo=function(T,$){return{$$typeof:h,type:T,compare:$===void 0?null:$}},we.startTransition=function(T){var $=F.transition;F.transition={};try{T()}finally{F.transition=$}},we.unstable_act=X,we.useCallback=function(T,$){return Se.current.useCallback(T,$)},we.useContext=function(T){return Se.current.useContext(T)},we.useDebugValue=function(){},we.useDeferredValue=function(T){return Se.current.useDeferredValue(T)},we.useEffect=function(T,$){return Se.current.useEffect(T,$)},we.useId=function(){return Se.current.useId()},we.useImperativeHandle=function(T,$,me){return Se.current.useImperativeHandle(T,$,me)},we.useInsertionEffect=function(T,$){return Se.current.useInsertionEffect(T,$)},we.useLayoutEffect=function(T,$){return Se.current.useLayoutEffect(T,$)},we.useMemo=function(T,$){return Se.current.useMemo(T,$)},we.useReducer=function(T,$,me){return Se.current.useReducer(T,$,me)},we.useRef=function(T){return Se.current.useRef(T)},we.useState=function(T){return Se.current.useState(T)},we.useSyncExternalStore=function(T,$,me){return Se.current.useSyncExternalStore(T,$,me)},we.useTransition=function(){return Se.current.useTransition()},we.version="18.3.1",we}var Vy;function op(){return Vy||(Vy=1,mh.exports=xS()),mh.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wy;function vS(){if(Wy)return Ho;Wy=1;var n=op(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function l(c,u,h){var f,g={},x=null,w=null;h!==void 0&&(x=""+h),u.key!==void 0&&(x=""+u.key),u.ref!==void 0&&(w=u.ref);for(f in u)r.call(u,f)&&!i.hasOwnProperty(f)&&(g[f]=u[f]);if(c&&c.defaultProps)for(f in u=c.defaultProps,u)g[f]===void 0&&(g[f]=u[f]);return{$$typeof:e,type:c,key:x,ref:w,props:g,_owner:s.current}}return Ho.Fragment=t,Ho.jsx=l,Ho.jsxs=l,Ho}var qy;function wS(){return qy||(qy=1,ph.exports=vS()),ph.exports}var p=wS(),A=op();const Mt=ip(A),bS=gS({__proto__:null,default:Mt},[A]);var qa={},gh={exports:{}},Jt={},yh={exports:{}},xh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ky;function kS(){return Ky||(Ky=1,function(n){function e(F,le){var X=F.length;F.push(le);e:for(;0<X;){var T=X-1>>>1,$=F[T];if(0<s($,le))F[T]=le,F[X]=$,X=T;else break e}}function t(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var le=F[0],X=F.pop();if(X!==le){F[0]=X;e:for(var T=0,$=F.length,me=$>>>1;T<me;){var ye=2*(T+1)-1,be=F[ye],ke=ye+1,_e=F[ke];if(0>s(be,X))ke<$&&0>s(_e,be)?(F[T]=_e,F[ke]=X,T=ke):(F[T]=be,F[ye]=X,T=ye);else if(ke<$&&0>s(_e,X))F[T]=_e,F[ke]=X,T=ke;else break e}}return le}function s(F,le){var X=F.sortIndex-le.sortIndex;return X!==0?X:F.id-le.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;n.unstable_now=function(){return i.now()}}else{var l=Date,c=l.now();n.unstable_now=function(){return l.now()-c}}var u=[],h=[],f=1,g=null,x=3,w=!1,b=!1,k=!1,C=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(F){for(var le=t(h);le!==null;){if(le.callback===null)r(h);else if(le.startTime<=F)r(h),le.sortIndex=le.expirationTime,e(u,le);else break;le=t(h)}}function V(F){if(k=!1,I(F),!b)if(t(u)!==null)b=!0,Ae(U);else{var le=t(h);le!==null&&Se(V,le.startTime-F)}}function U(F,le){b=!1,k&&(k=!1,N(oe),oe=-1),w=!0;var X=x;try{for(I(le),g=t(u);g!==null&&(!(g.expirationTime>le)||F&&!Ze());){var T=g.callback;if(typeof T=="function"){g.callback=null,x=g.priorityLevel;var $=T(g.expirationTime<=le);le=n.unstable_now(),typeof $=="function"?g.callback=$:g===t(u)&&r(u),I(le)}else r(u);g=t(u)}if(g!==null)var me=!0;else{var ye=t(h);ye!==null&&Se(V,ye.startTime-le),me=!1}return me}finally{g=null,x=X,w=!1}}var D=!1,B=null,oe=-1,se=5,Te=-1;function Ze(){return!(n.unstable_now()-Te<se)}function Re(){if(B!==null){var F=n.unstable_now();Te=F;var le=!0;try{le=B(!0,F)}finally{le?He():(D=!1,B=null)}}else D=!1}var He;if(typeof M=="function")He=function(){M(Re)};else if(typeof MessageChannel<"u"){var Ke=new MessageChannel,Ve=Ke.port2;Ke.port1.onmessage=Re,He=function(){Ve.postMessage(null)}}else He=function(){C(Re,0)};function Ae(F){B=F,D||(D=!0,He())}function Se(F,le){oe=C(function(){F(n.unstable_now())},le)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(F){F.callback=null},n.unstable_continueExecution=function(){b||w||(b=!0,Ae(U))},n.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):se=0<F?Math.floor(1e3/F):5},n.unstable_getCurrentPriorityLevel=function(){return x},n.unstable_getFirstCallbackNode=function(){return t(u)},n.unstable_next=function(F){switch(x){case 1:case 2:case 3:var le=3;break;default:le=x}var X=x;x=le;try{return F()}finally{x=X}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(F,le){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var X=x;x=F;try{return le()}finally{x=X}},n.unstable_scheduleCallback=function(F,le,X){var T=n.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?T+X:T):X=T,F){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=X+$,F={id:f++,callback:le,priorityLevel:F,startTime:X,expirationTime:$,sortIndex:-1},X>T?(F.sortIndex=X,e(h,F),t(u)===null&&F===t(h)&&(k?(N(oe),oe=-1):k=!0,Se(V,X-T))):(F.sortIndex=$,e(u,F),b||w||(b=!0,Ae(U))),F},n.unstable_shouldYield=Ze,n.unstable_wrapCallback=function(F){var le=x;return function(){var X=x;x=le;try{return F.apply(this,arguments)}finally{x=X}}}}(xh)),xh}var Jy;function SS(){return Jy||(Jy=1,yh.exports=kS()),yh.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gy;function CS(){if(Gy)return Jt;Gy=1;var n=op(),e=SS();function t(o){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+o,d=1;d<arguments.length;d++)a+="&args[]="+encodeURIComponent(arguments[d]);return"Minified React error #"+o+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function i(o,a){l(o,a),l(o+"Capture",a)}function l(o,a){for(s[o]=a,o=0;o<a.length;o++)r.add(a[o])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),u=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},g={};function x(o){return u.call(g,o)?!0:u.call(f,o)?!1:h.test(o)?g[o]=!0:(f[o]=!0,!1)}function w(o,a,d,m){if(d!==null&&d.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return m?!1:d!==null?!d.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function b(o,a,d,m){if(a===null||typeof a>"u"||w(o,a,d,m))return!0;if(m)return!1;if(d!==null)switch(d.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function k(o,a,d,m,y,v,S){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=m,this.attributeNamespace=y,this.mustUseProperty=d,this.propertyName=o,this.type=a,this.sanitizeURL=v,this.removeEmptyString=S}var C={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){C[o]=new k(o,0,!1,o,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var a=o[0];C[a]=new k(a,1,!1,o[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(o){C[o]=new k(o,2,!1,o.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){C[o]=new k(o,2,!1,o,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){C[o]=new k(o,3,!1,o.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(o){C[o]=new k(o,3,!0,o,null,!1,!1)}),["capture","download"].forEach(function(o){C[o]=new k(o,4,!1,o,null,!1,!1)}),["cols","rows","size","span"].forEach(function(o){C[o]=new k(o,6,!1,o,null,!1,!1)}),["rowSpan","start"].forEach(function(o){C[o]=new k(o,5,!1,o.toLowerCase(),null,!1,!1)});var N=/[\-:]([a-z])/g;function M(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var a=o.replace(N,M);C[a]=new k(a,1,!1,o,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var a=o.replace(N,M);C[a]=new k(a,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(o){var a=o.replace(N,M);C[a]=new k(a,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(o){C[o]=new k(o,1,!1,o.toLowerCase(),null,!1,!1)}),C.xlinkHref=new k("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(o){C[o]=new k(o,1,!1,o.toLowerCase(),null,!0,!0)});function I(o,a,d,m){var y=C.hasOwnProperty(a)?C[a]:null;(y!==null?y.type!==0:m||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(b(a,d,y,m)&&(d=null),m||y===null?x(a)&&(d===null?o.removeAttribute(a):o.setAttribute(a,""+d)):y.mustUseProperty?o[y.propertyName]=d===null?y.type===3?!1:"":d:(a=y.attributeName,m=y.attributeNamespace,d===null?o.removeAttribute(a):(y=y.type,d=y===3||y===4&&d===!0?"":""+d,m?o.setAttributeNS(m,a,d):o.setAttribute(a,d))))}var V=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,U=Symbol.for("react.element"),D=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),oe=Symbol.for("react.strict_mode"),se=Symbol.for("react.profiler"),Te=Symbol.for("react.provider"),Ze=Symbol.for("react.context"),Re=Symbol.for("react.forward_ref"),He=Symbol.for("react.suspense"),Ke=Symbol.for("react.suspense_list"),Ve=Symbol.for("react.memo"),Ae=Symbol.for("react.lazy"),Se=Symbol.for("react.offscreen"),F=Symbol.iterator;function le(o){return o===null||typeof o!="object"?null:(o=F&&o[F]||o["@@iterator"],typeof o=="function"?o:null)}var X=Object.assign,T;function $(o){if(T===void 0)try{throw Error()}catch(d){var a=d.stack.trim().match(/\n( *(at )?)/);T=a&&a[1]||""}return`
`+T+o}var me=!1;function ye(o,a){if(!o||me)return"";me=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(P){var m=P}Reflect.construct(o,[],a)}else{try{a.call()}catch(P){m=P}o.call(a.prototype)}else{try{throw Error()}catch(P){m=P}o()}}catch(P){if(P&&m&&typeof P.stack=="string"){for(var y=P.stack.split(`
`),v=m.stack.split(`
`),S=y.length-1,E=v.length-1;1<=S&&0<=E&&y[S]!==v[E];)E--;for(;1<=S&&0<=E;S--,E--)if(y[S]!==v[E]){if(S!==1||E!==1)do if(S--,E--,0>E||y[S]!==v[E]){var j=`
`+y[S].replace(" at new "," at ");return o.displayName&&j.includes("<anonymous>")&&(j=j.replace("<anonymous>",o.displayName)),j}while(1<=S&&0<=E);break}}}finally{me=!1,Error.prepareStackTrace=d}return(o=o?o.displayName||o.name:"")?$(o):""}function be(o){switch(o.tag){case 5:return $(o.type);case 16:return $("Lazy");case 13:return $("Suspense");case 19:return $("SuspenseList");case 0:case 2:case 15:return o=ye(o.type,!1),o;case 11:return o=ye(o.type.render,!1),o;case 1:return o=ye(o.type,!0),o;default:return""}}function ke(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case B:return"Fragment";case D:return"Portal";case se:return"Profiler";case oe:return"StrictMode";case He:return"Suspense";case Ke:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case Ze:return(o.displayName||"Context")+".Consumer";case Te:return(o._context.displayName||"Context")+".Provider";case Re:var a=o.render;return o=o.displayName,o||(o=a.displayName||a.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case Ve:return a=o.displayName||null,a!==null?a:ke(o.type)||"Memo";case Ae:a=o._payload,o=o._init;try{return ke(o(a))}catch{}}return null}function _e(o){var a=o.type;switch(o.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=a.render,o=o.displayName||o.name||"",a.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ke(a);case 8:return a===oe?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function Ne(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function Pe(o){var a=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function vt(o){var a=Pe(o)?"checked":"value",d=Object.getOwnPropertyDescriptor(o.constructor.prototype,a),m=""+o[a];if(!o.hasOwnProperty(a)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var y=d.get,v=d.set;return Object.defineProperty(o,a,{configurable:!0,get:function(){return y.call(this)},set:function(S){m=""+S,v.call(this,S)}}),Object.defineProperty(o,a,{enumerable:d.enumerable}),{getValue:function(){return m},setValue:function(S){m=""+S},stopTracking:function(){o._valueTracker=null,delete o[a]}}}}function On(o){o._valueTracker||(o._valueTracker=vt(o))}function to(o){if(!o)return!1;var a=o._valueTracker;if(!a)return!0;var d=a.getValue(),m="";return o&&(m=Pe(o)?o.checked?"true":"false":o.value),o=m,o!==d?(a.setValue(o),!0):!1}function us(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}function ds(o,a){var d=a.checked;return X({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:d??o._wrapperState.initialChecked})}function hs(o,a){var d=a.defaultValue==null?"":a.defaultValue,m=a.checked!=null?a.checked:a.defaultChecked;d=Ne(a.value!=null?a.value:d),o._wrapperState={initialChecked:m,initialValue:d,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function pr(o,a){a=a.checked,a!=null&&I(o,"checked",a,!1)}function no(o,a){pr(o,a);var d=Ne(a.value),m=a.type;if(d!=null)m==="number"?(d===0&&o.value===""||o.value!=d)&&(o.value=""+d):o.value!==""+d&&(o.value=""+d);else if(m==="submit"||m==="reset"){o.removeAttribute("value");return}a.hasOwnProperty("value")?Qs(o,a.type,d):a.hasOwnProperty("defaultValue")&&Qs(o,a.type,Ne(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(o.defaultChecked=!!a.defaultChecked)}function Pl(o,a,d){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var m=a.type;if(!(m!=="submit"&&m!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+o._wrapperState.initialValue,d||a===o.value||(o.value=a),o.defaultValue=a}d=o.name,d!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,d!==""&&(o.name=d)}function Qs(o,a,d){(a!=="number"||us(o.ownerDocument)!==o)&&(d==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+d&&(o.defaultValue=""+d))}var mr=Array.isArray;function Jn(o,a,d,m){if(o=o.options,a){a={};for(var y=0;y<d.length;y++)a["$"+d[y]]=!0;for(d=0;d<o.length;d++)y=a.hasOwnProperty("$"+o[d].value),o[d].selected!==y&&(o[d].selected=y),y&&m&&(o[d].defaultSelected=!0)}else{for(d=""+Ne(d),a=null,y=0;y<o.length;y++){if(o[y].value===d){o[y].selected=!0,m&&(o[y].defaultSelected=!0);return}a!==null||o[y].disabled||(a=o[y])}a!==null&&(a.selected=!0)}}function ro(o,a){if(a.dangerouslySetInnerHTML!=null)throw Error(t(91));return X({},a,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function Il(o,a){var d=a.value;if(d==null){if(d=a.children,a=a.defaultValue,d!=null){if(a!=null)throw Error(t(92));if(mr(d)){if(1<d.length)throw Error(t(93));d=d[0]}a=d}a==null&&(a=""),d=a}o._wrapperState={initialValue:Ne(d)}}function so(o,a){var d=Ne(a.value),m=Ne(a.defaultValue);d!=null&&(d=""+d,d!==o.value&&(o.value=d),a.defaultValue==null&&o.defaultValue!==d&&(o.defaultValue=d)),m!=null&&(o.defaultValue=""+m)}function Ll(o){var a=o.textContent;a===o._wrapperState.initialValue&&a!==""&&a!==null&&(o.value=a)}function Dl(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ln(o,a){return o==null||o==="http://www.w3.org/1999/xhtml"?Dl(a):o==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var Ys,io=function(o){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,d,m,y){MSApp.execUnsafeLocalFunction(function(){return o(a,d,m,y)})}:o}(function(o,a){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=a;else{for(Ys=Ys||document.createElement("div"),Ys.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=Ys.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;a.firstChild;)o.appendChild(a.firstChild)}});function Z(o,a){if(a){var d=o.firstChild;if(d&&d===o.lastChild&&d.nodeType===3){d.nodeValue=a;return}}o.textContent=a}var L={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ut=["Webkit","ms","Moz","O"];Object.keys(L).forEach(function(o){Ut.forEach(function(a){a=a+o.charAt(0).toUpperCase()+o.substring(1),L[a]=L[o]})});function Rn(o,a,d){return a==null||typeof a=="boolean"||a===""?"":d||typeof a!="number"||a===0||L.hasOwnProperty(o)&&L[o]?(""+a).trim():a+"px"}function zl(o,a){o=o.style;for(var d in a)if(a.hasOwnProperty(d)){var m=d.indexOf("--")===0,y=Rn(d,a[d],m);d==="float"&&(d="cssFloat"),m?o.setProperty(d,y):o[d]=y}}var bb=X({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Eu(o,a){if(a){if(bb[o]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(t(137,o));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(t(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(t(61))}if(a.style!=null&&typeof a.style!="object")throw Error(t(62))}}function ju(o,a){if(o.indexOf("-")===-1)return typeof a.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Tu=null;function _u(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Au=null,Xs=null,Zs=null;function om(o){if(o=To(o)){if(typeof Au!="function")throw Error(t(280));var a=o.stateNode;a&&(a=la(a),Au(o.stateNode,o.type,a))}}function lm(o){Xs?Zs?Zs.push(o):Zs=[o]:Xs=o}function am(){if(Xs){var o=Xs,a=Zs;if(Zs=Xs=null,om(o),a)for(o=0;o<a.length;o++)om(a[o])}}function cm(o,a){return o(a)}function um(){}var Mu=!1;function dm(o,a,d){if(Mu)return o(a,d);Mu=!0;try{return cm(o,a,d)}finally{Mu=!1,(Xs!==null||Zs!==null)&&(um(),am())}}function oo(o,a){var d=o.stateNode;if(d===null)return null;var m=la(d);if(m===null)return null;d=m[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(o=o.type,m=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!m;break e;default:o=!1}if(o)return null;if(d&&typeof d!="function")throw Error(t(231,a,typeof d));return d}var Ou=!1;if(c)try{var lo={};Object.defineProperty(lo,"passive",{get:function(){Ou=!0}}),window.addEventListener("test",lo,lo),window.removeEventListener("test",lo,lo)}catch{Ou=!1}function kb(o,a,d,m,y,v,S,E,j){var P=Array.prototype.slice.call(arguments,3);try{a.apply(d,P)}catch(W){this.onError(W)}}var ao=!1,$l=null,Bl=!1,Ru=null,Sb={onError:function(o){ao=!0,$l=o}};function Cb(o,a,d,m,y,v,S,E,j){ao=!1,$l=null,kb.apply(Sb,arguments)}function Nb(o,a,d,m,y,v,S,E,j){if(Cb.apply(this,arguments),ao){if(ao){var P=$l;ao=!1,$l=null}else throw Error(t(198));Bl||(Bl=!0,Ru=P)}}function fs(o){var a=o,d=o;if(o.alternate)for(;a.return;)a=a.return;else{o=a;do a=o,(a.flags&4098)!==0&&(d=a.return),o=a.return;while(o)}return a.tag===3?d:null}function hm(o){if(o.tag===13){var a=o.memoizedState;if(a===null&&(o=o.alternate,o!==null&&(a=o.memoizedState)),a!==null)return a.dehydrated}return null}function fm(o){if(fs(o)!==o)throw Error(t(188))}function Eb(o){var a=o.alternate;if(!a){if(a=fs(o),a===null)throw Error(t(188));return a!==o?null:o}for(var d=o,m=a;;){var y=d.return;if(y===null)break;var v=y.alternate;if(v===null){if(m=y.return,m!==null){d=m;continue}break}if(y.child===v.child){for(v=y.child;v;){if(v===d)return fm(y),o;if(v===m)return fm(y),a;v=v.sibling}throw Error(t(188))}if(d.return!==m.return)d=y,m=v;else{for(var S=!1,E=y.child;E;){if(E===d){S=!0,d=y,m=v;break}if(E===m){S=!0,m=y,d=v;break}E=E.sibling}if(!S){for(E=v.child;E;){if(E===d){S=!0,d=v,m=y;break}if(E===m){S=!0,m=v,d=y;break}E=E.sibling}if(!S)throw Error(t(189))}}if(d.alternate!==m)throw Error(t(190))}if(d.tag!==3)throw Error(t(188));return d.stateNode.current===d?o:a}function pm(o){return o=Eb(o),o!==null?mm(o):null}function mm(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var a=mm(o);if(a!==null)return a;o=o.sibling}return null}var gm=e.unstable_scheduleCallback,ym=e.unstable_cancelCallback,jb=e.unstable_shouldYield,Tb=e.unstable_requestPaint,et=e.unstable_now,_b=e.unstable_getCurrentPriorityLevel,Pu=e.unstable_ImmediatePriority,xm=e.unstable_UserBlockingPriority,Fl=e.unstable_NormalPriority,Ab=e.unstable_LowPriority,vm=e.unstable_IdlePriority,Ul=null,Pn=null;function Mb(o){if(Pn&&typeof Pn.onCommitFiberRoot=="function")try{Pn.onCommitFiberRoot(Ul,o,void 0,(o.current.flags&128)===128)}catch{}}var bn=Math.clz32?Math.clz32:Pb,Ob=Math.log,Rb=Math.LN2;function Pb(o){return o>>>=0,o===0?32:31-(Ob(o)/Rb|0)|0}var Hl=64,Vl=4194304;function co(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function Wl(o,a){var d=o.pendingLanes;if(d===0)return 0;var m=0,y=o.suspendedLanes,v=o.pingedLanes,S=d&268435455;if(S!==0){var E=S&~y;E!==0?m=co(E):(v&=S,v!==0&&(m=co(v)))}else S=d&~y,S!==0?m=co(S):v!==0&&(m=co(v));if(m===0)return 0;if(a!==0&&a!==m&&(a&y)===0&&(y=m&-m,v=a&-a,y>=v||y===16&&(v&4194240)!==0))return a;if((m&4)!==0&&(m|=d&16),a=o.entangledLanes,a!==0)for(o=o.entanglements,a&=m;0<a;)d=31-bn(a),y=1<<d,m|=o[d],a&=~y;return m}function Ib(o,a){switch(o){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Lb(o,a){for(var d=o.suspendedLanes,m=o.pingedLanes,y=o.expirationTimes,v=o.pendingLanes;0<v;){var S=31-bn(v),E=1<<S,j=y[S];j===-1?((E&d)===0||(E&m)!==0)&&(y[S]=Ib(E,a)):j<=a&&(o.expiredLanes|=E),v&=~E}}function Iu(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function wm(){var o=Hl;return Hl<<=1,(Hl&4194240)===0&&(Hl=64),o}function Lu(o){for(var a=[],d=0;31>d;d++)a.push(o);return a}function uo(o,a,d){o.pendingLanes|=a,a!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,a=31-bn(a),o[a]=d}function Db(o,a){var d=o.pendingLanes&~a;o.pendingLanes=a,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=a,o.mutableReadLanes&=a,o.entangledLanes&=a,a=o.entanglements;var m=o.eventTimes;for(o=o.expirationTimes;0<d;){var y=31-bn(d),v=1<<y;a[y]=0,m[y]=-1,o[y]=-1,d&=~v}}function Du(o,a){var d=o.entangledLanes|=a;for(o=o.entanglements;d;){var m=31-bn(d),y=1<<m;y&a|o[m]&a&&(o[m]|=a),d&=~y}}var Me=0;function bm(o){return o&=-o,1<o?4<o?(o&268435455)!==0?16:536870912:4:1}var km,zu,Sm,Cm,Nm,$u=!1,ql=[],gr=null,yr=null,xr=null,ho=new Map,fo=new Map,vr=[],zb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Em(o,a){switch(o){case"focusin":case"focusout":gr=null;break;case"dragenter":case"dragleave":yr=null;break;case"mouseover":case"mouseout":xr=null;break;case"pointerover":case"pointerout":ho.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":fo.delete(a.pointerId)}}function po(o,a,d,m,y,v){return o===null||o.nativeEvent!==v?(o={blockedOn:a,domEventName:d,eventSystemFlags:m,nativeEvent:v,targetContainers:[y]},a!==null&&(a=To(a),a!==null&&zu(a)),o):(o.eventSystemFlags|=m,a=o.targetContainers,y!==null&&a.indexOf(y)===-1&&a.push(y),o)}function $b(o,a,d,m,y){switch(a){case"focusin":return gr=po(gr,o,a,d,m,y),!0;case"dragenter":return yr=po(yr,o,a,d,m,y),!0;case"mouseover":return xr=po(xr,o,a,d,m,y),!0;case"pointerover":var v=y.pointerId;return ho.set(v,po(ho.get(v)||null,o,a,d,m,y)),!0;case"gotpointercapture":return v=y.pointerId,fo.set(v,po(fo.get(v)||null,o,a,d,m,y)),!0}return!1}function jm(o){var a=ps(o.target);if(a!==null){var d=fs(a);if(d!==null){if(a=d.tag,a===13){if(a=hm(d),a!==null){o.blockedOn=a,Nm(o.priority,function(){Sm(d)});return}}else if(a===3&&d.stateNode.current.memoizedState.isDehydrated){o.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}o.blockedOn=null}function Kl(o){if(o.blockedOn!==null)return!1;for(var a=o.targetContainers;0<a.length;){var d=Fu(o.domEventName,o.eventSystemFlags,a[0],o.nativeEvent);if(d===null){d=o.nativeEvent;var m=new d.constructor(d.type,d);Tu=m,d.target.dispatchEvent(m),Tu=null}else return a=To(d),a!==null&&zu(a),o.blockedOn=d,!1;a.shift()}return!0}function Tm(o,a,d){Kl(o)&&d.delete(a)}function Bb(){$u=!1,gr!==null&&Kl(gr)&&(gr=null),yr!==null&&Kl(yr)&&(yr=null),xr!==null&&Kl(xr)&&(xr=null),ho.forEach(Tm),fo.forEach(Tm)}function mo(o,a){o.blockedOn===a&&(o.blockedOn=null,$u||($u=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Bb)))}function go(o){function a(y){return mo(y,o)}if(0<ql.length){mo(ql[0],o);for(var d=1;d<ql.length;d++){var m=ql[d];m.blockedOn===o&&(m.blockedOn=null)}}for(gr!==null&&mo(gr,o),yr!==null&&mo(yr,o),xr!==null&&mo(xr,o),ho.forEach(a),fo.forEach(a),d=0;d<vr.length;d++)m=vr[d],m.blockedOn===o&&(m.blockedOn=null);for(;0<vr.length&&(d=vr[0],d.blockedOn===null);)jm(d),d.blockedOn===null&&vr.shift()}var ei=V.ReactCurrentBatchConfig,Jl=!0;function Fb(o,a,d,m){var y=Me,v=ei.transition;ei.transition=null;try{Me=1,Bu(o,a,d,m)}finally{Me=y,ei.transition=v}}function Ub(o,a,d,m){var y=Me,v=ei.transition;ei.transition=null;try{Me=4,Bu(o,a,d,m)}finally{Me=y,ei.transition=v}}function Bu(o,a,d,m){if(Jl){var y=Fu(o,a,d,m);if(y===null)sd(o,a,m,Gl,d),Em(o,m);else if($b(y,o,a,d,m))m.stopPropagation();else if(Em(o,m),a&4&&-1<zb.indexOf(o)){for(;y!==null;){var v=To(y);if(v!==null&&km(v),v=Fu(o,a,d,m),v===null&&sd(o,a,m,Gl,d),v===y)break;y=v}y!==null&&m.stopPropagation()}else sd(o,a,m,null,d)}}var Gl=null;function Fu(o,a,d,m){if(Gl=null,o=_u(m),o=ps(o),o!==null)if(a=fs(o),a===null)o=null;else if(d=a.tag,d===13){if(o=hm(a),o!==null)return o;o=null}else if(d===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;o=null}else a!==o&&(o=null);return Gl=o,null}function _m(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(_b()){case Pu:return 1;case xm:return 4;case Fl:case Ab:return 16;case vm:return 536870912;default:return 16}default:return 16}}var wr=null,Uu=null,Ql=null;function Am(){if(Ql)return Ql;var o,a=Uu,d=a.length,m,y="value"in wr?wr.value:wr.textContent,v=y.length;for(o=0;o<d&&a[o]===y[o];o++);var S=d-o;for(m=1;m<=S&&a[d-m]===y[v-m];m++);return Ql=y.slice(o,1<m?1-m:void 0)}function Yl(o){var a=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&a===13&&(o=13)):o=a,o===10&&(o=13),32<=o||o===13?o:0}function Xl(){return!0}function Mm(){return!1}function Xt(o){function a(d,m,y,v,S){this._reactName=d,this._targetInst=y,this.type=m,this.nativeEvent=v,this.target=S,this.currentTarget=null;for(var E in o)o.hasOwnProperty(E)&&(d=o[E],this[E]=d?d(v):v[E]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Xl:Mm,this.isPropagationStopped=Mm,this}return X(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=Xl)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=Xl)},persist:function(){},isPersistent:Xl}),a}var ti={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Hu=Xt(ti),yo=X({},ti,{view:0,detail:0}),Hb=Xt(yo),Vu,Wu,xo,Zl=X({},yo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ku,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==xo&&(xo&&o.type==="mousemove"?(Vu=o.screenX-xo.screenX,Wu=o.screenY-xo.screenY):Wu=Vu=0,xo=o),Vu)},movementY:function(o){return"movementY"in o?o.movementY:Wu}}),Om=Xt(Zl),Vb=X({},Zl,{dataTransfer:0}),Wb=Xt(Vb),qb=X({},yo,{relatedTarget:0}),qu=Xt(qb),Kb=X({},ti,{animationName:0,elapsedTime:0,pseudoElement:0}),Jb=Xt(Kb),Gb=X({},ti,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),Qb=Xt(Gb),Yb=X({},ti,{data:0}),Rm=Xt(Yb),Xb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Zb={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ek={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tk(o){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(o):(o=ek[o])?!!a[o]:!1}function Ku(){return tk}var nk=X({},yo,{key:function(o){if(o.key){var a=Xb[o.key]||o.key;if(a!=="Unidentified")return a}return o.type==="keypress"?(o=Yl(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?Zb[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ku,charCode:function(o){return o.type==="keypress"?Yl(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?Yl(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),rk=Xt(nk),sk=X({},Zl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Pm=Xt(sk),ik=X({},yo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ku}),ok=Xt(ik),lk=X({},ti,{propertyName:0,elapsedTime:0,pseudoElement:0}),ak=Xt(lk),ck=X({},Zl,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),uk=Xt(ck),dk=[9,13,27,32],Ju=c&&"CompositionEvent"in window,vo=null;c&&"documentMode"in document&&(vo=document.documentMode);var hk=c&&"TextEvent"in window&&!vo,Im=c&&(!Ju||vo&&8<vo&&11>=vo),Lm=" ",Dm=!1;function zm(o,a){switch(o){case"keyup":return dk.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $m(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var ni=!1;function fk(o,a){switch(o){case"compositionend":return $m(a);case"keypress":return a.which!==32?null:(Dm=!0,Lm);case"textInput":return o=a.data,o===Lm&&Dm?null:o;default:return null}}function pk(o,a){if(ni)return o==="compositionend"||!Ju&&zm(o,a)?(o=Am(),Ql=Uu=wr=null,ni=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Im&&a.locale!=="ko"?null:a.data;default:return null}}var mk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bm(o){var a=o&&o.nodeName&&o.nodeName.toLowerCase();return a==="input"?!!mk[o.type]:a==="textarea"}function Fm(o,a,d,m){lm(m),a=sa(a,"onChange"),0<a.length&&(d=new Hu("onChange","change",null,d,m),o.push({event:d,listeners:a}))}var wo=null,bo=null;function gk(o){ig(o,0)}function ea(o){var a=li(o);if(to(a))return o}function yk(o,a){if(o==="change")return a}var Um=!1;if(c){var Gu;if(c){var Qu="oninput"in document;if(!Qu){var Hm=document.createElement("div");Hm.setAttribute("oninput","return;"),Qu=typeof Hm.oninput=="function"}Gu=Qu}else Gu=!1;Um=Gu&&(!document.documentMode||9<document.documentMode)}function Vm(){wo&&(wo.detachEvent("onpropertychange",Wm),bo=wo=null)}function Wm(o){if(o.propertyName==="value"&&ea(bo)){var a=[];Fm(a,bo,o,_u(o)),dm(gk,a)}}function xk(o,a,d){o==="focusin"?(Vm(),wo=a,bo=d,wo.attachEvent("onpropertychange",Wm)):o==="focusout"&&Vm()}function vk(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return ea(bo)}function wk(o,a){if(o==="click")return ea(a)}function bk(o,a){if(o==="input"||o==="change")return ea(a)}function kk(o,a){return o===a&&(o!==0||1/o===1/a)||o!==o&&a!==a}var kn=typeof Object.is=="function"?Object.is:kk;function ko(o,a){if(kn(o,a))return!0;if(typeof o!="object"||o===null||typeof a!="object"||a===null)return!1;var d=Object.keys(o),m=Object.keys(a);if(d.length!==m.length)return!1;for(m=0;m<d.length;m++){var y=d[m];if(!u.call(a,y)||!kn(o[y],a[y]))return!1}return!0}function qm(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function Km(o,a){var d=qm(o);o=0;for(var m;d;){if(d.nodeType===3){if(m=o+d.textContent.length,o<=a&&m>=a)return{node:d,offset:a-o};o=m}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=qm(d)}}function Jm(o,a){return o&&a?o===a?!0:o&&o.nodeType===3?!1:a&&a.nodeType===3?Jm(o,a.parentNode):"contains"in o?o.contains(a):o.compareDocumentPosition?!!(o.compareDocumentPosition(a)&16):!1:!1}function Gm(){for(var o=window,a=us();a instanceof o.HTMLIFrameElement;){try{var d=typeof a.contentWindow.location.href=="string"}catch{d=!1}if(d)o=a.contentWindow;else break;a=us(o.document)}return a}function Yu(o){var a=o&&o.nodeName&&o.nodeName.toLowerCase();return a&&(a==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||a==="textarea"||o.contentEditable==="true")}function Sk(o){var a=Gm(),d=o.focusedElem,m=o.selectionRange;if(a!==d&&d&&d.ownerDocument&&Jm(d.ownerDocument.documentElement,d)){if(m!==null&&Yu(d)){if(a=m.start,o=m.end,o===void 0&&(o=a),"selectionStart"in d)d.selectionStart=a,d.selectionEnd=Math.min(o,d.value.length);else if(o=(a=d.ownerDocument||document)&&a.defaultView||window,o.getSelection){o=o.getSelection();var y=d.textContent.length,v=Math.min(m.start,y);m=m.end===void 0?v:Math.min(m.end,y),!o.extend&&v>m&&(y=m,m=v,v=y),y=Km(d,v);var S=Km(d,m);y&&S&&(o.rangeCount!==1||o.anchorNode!==y.node||o.anchorOffset!==y.offset||o.focusNode!==S.node||o.focusOffset!==S.offset)&&(a=a.createRange(),a.setStart(y.node,y.offset),o.removeAllRanges(),v>m?(o.addRange(a),o.extend(S.node,S.offset)):(a.setEnd(S.node,S.offset),o.addRange(a)))}}for(a=[],o=d;o=o.parentNode;)o.nodeType===1&&a.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof d.focus=="function"&&d.focus(),d=0;d<a.length;d++)o=a[d],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var Ck=c&&"documentMode"in document&&11>=document.documentMode,ri=null,Xu=null,So=null,Zu=!1;function Qm(o,a,d){var m=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;Zu||ri==null||ri!==us(m)||(m=ri,"selectionStart"in m&&Yu(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),So&&ko(So,m)||(So=m,m=sa(Xu,"onSelect"),0<m.length&&(a=new Hu("onSelect","select",null,a,d),o.push({event:a,listeners:m}),a.target=ri)))}function ta(o,a){var d={};return d[o.toLowerCase()]=a.toLowerCase(),d["Webkit"+o]="webkit"+a,d["Moz"+o]="moz"+a,d}var si={animationend:ta("Animation","AnimationEnd"),animationiteration:ta("Animation","AnimationIteration"),animationstart:ta("Animation","AnimationStart"),transitionend:ta("Transition","TransitionEnd")},ed={},Ym={};c&&(Ym=document.createElement("div").style,"AnimationEvent"in window||(delete si.animationend.animation,delete si.animationiteration.animation,delete si.animationstart.animation),"TransitionEvent"in window||delete si.transitionend.transition);function na(o){if(ed[o])return ed[o];if(!si[o])return o;var a=si[o],d;for(d in a)if(a.hasOwnProperty(d)&&d in Ym)return ed[o]=a[d];return o}var Xm=na("animationend"),Zm=na("animationiteration"),eg=na("animationstart"),tg=na("transitionend"),ng=new Map,rg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function br(o,a){ng.set(o,a),i(a,[o])}for(var td=0;td<rg.length;td++){var nd=rg[td],Nk=nd.toLowerCase(),Ek=nd[0].toUpperCase()+nd.slice(1);br(Nk,"on"+Ek)}br(Xm,"onAnimationEnd"),br(Zm,"onAnimationIteration"),br(eg,"onAnimationStart"),br("dblclick","onDoubleClick"),br("focusin","onFocus"),br("focusout","onBlur"),br(tg,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Co="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jk=new Set("cancel close invalid load scroll toggle".split(" ").concat(Co));function sg(o,a,d){var m=o.type||"unknown-event";o.currentTarget=d,Nb(m,a,void 0,o),o.currentTarget=null}function ig(o,a){a=(a&4)!==0;for(var d=0;d<o.length;d++){var m=o[d],y=m.event;m=m.listeners;e:{var v=void 0;if(a)for(var S=m.length-1;0<=S;S--){var E=m[S],j=E.instance,P=E.currentTarget;if(E=E.listener,j!==v&&y.isPropagationStopped())break e;sg(y,E,P),v=j}else for(S=0;S<m.length;S++){if(E=m[S],j=E.instance,P=E.currentTarget,E=E.listener,j!==v&&y.isPropagationStopped())break e;sg(y,E,P),v=j}}}if(Bl)throw o=Ru,Bl=!1,Ru=null,o}function $e(o,a){var d=a[ud];d===void 0&&(d=a[ud]=new Set);var m=o+"__bubble";d.has(m)||(og(a,o,2,!1),d.add(m))}function rd(o,a,d){var m=0;a&&(m|=4),og(d,o,m,a)}var ra="_reactListening"+Math.random().toString(36).slice(2);function No(o){if(!o[ra]){o[ra]=!0,r.forEach(function(d){d!=="selectionchange"&&(jk.has(d)||rd(d,!1,o),rd(d,!0,o))});var a=o.nodeType===9?o:o.ownerDocument;a===null||a[ra]||(a[ra]=!0,rd("selectionchange",!1,a))}}function og(o,a,d,m){switch(_m(a)){case 1:var y=Fb;break;case 4:y=Ub;break;default:y=Bu}d=y.bind(null,a,d,o),y=void 0,!Ou||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(y=!0),m?y!==void 0?o.addEventListener(a,d,{capture:!0,passive:y}):o.addEventListener(a,d,!0):y!==void 0?o.addEventListener(a,d,{passive:y}):o.addEventListener(a,d,!1)}function sd(o,a,d,m,y){var v=m;if((a&1)===0&&(a&2)===0&&m!==null)e:for(;;){if(m===null)return;var S=m.tag;if(S===3||S===4){var E=m.stateNode.containerInfo;if(E===y||E.nodeType===8&&E.parentNode===y)break;if(S===4)for(S=m.return;S!==null;){var j=S.tag;if((j===3||j===4)&&(j=S.stateNode.containerInfo,j===y||j.nodeType===8&&j.parentNode===y))return;S=S.return}for(;E!==null;){if(S=ps(E),S===null)return;if(j=S.tag,j===5||j===6){m=v=S;continue e}E=E.parentNode}}m=m.return}dm(function(){var P=v,W=_u(d),q=[];e:{var H=ng.get(o);if(H!==void 0){var Y=Hu,te=o;switch(o){case"keypress":if(Yl(d)===0)break e;case"keydown":case"keyup":Y=rk;break;case"focusin":te="focus",Y=qu;break;case"focusout":te="blur",Y=qu;break;case"beforeblur":case"afterblur":Y=qu;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Y=Om;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Y=Wb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Y=ok;break;case Xm:case Zm:case eg:Y=Jb;break;case tg:Y=ak;break;case"scroll":Y=Hb;break;case"wheel":Y=uk;break;case"copy":case"cut":case"paste":Y=Qb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Y=Pm}var re=(a&4)!==0,tt=!re&&o==="scroll",O=re?H!==null?H+"Capture":null:H;re=[];for(var _=P,R;_!==null;){R=_;var J=R.stateNode;if(R.tag===5&&J!==null&&(R=J,O!==null&&(J=oo(_,O),J!=null&&re.push(Eo(_,J,R)))),tt)break;_=_.return}0<re.length&&(H=new Y(H,te,null,d,W),q.push({event:H,listeners:re}))}}if((a&7)===0){e:{if(H=o==="mouseover"||o==="pointerover",Y=o==="mouseout"||o==="pointerout",H&&d!==Tu&&(te=d.relatedTarget||d.fromElement)&&(ps(te)||te[Gn]))break e;if((Y||H)&&(H=W.window===W?W:(H=W.ownerDocument)?H.defaultView||H.parentWindow:window,Y?(te=d.relatedTarget||d.toElement,Y=P,te=te?ps(te):null,te!==null&&(tt=fs(te),te!==tt||te.tag!==5&&te.tag!==6)&&(te=null)):(Y=null,te=P),Y!==te)){if(re=Om,J="onMouseLeave",O="onMouseEnter",_="mouse",(o==="pointerout"||o==="pointerover")&&(re=Pm,J="onPointerLeave",O="onPointerEnter",_="pointer"),tt=Y==null?H:li(Y),R=te==null?H:li(te),H=new re(J,_+"leave",Y,d,W),H.target=tt,H.relatedTarget=R,J=null,ps(W)===P&&(re=new re(O,_+"enter",te,d,W),re.target=R,re.relatedTarget=tt,J=re),tt=J,Y&&te)t:{for(re=Y,O=te,_=0,R=re;R;R=ii(R))_++;for(R=0,J=O;J;J=ii(J))R++;for(;0<_-R;)re=ii(re),_--;for(;0<R-_;)O=ii(O),R--;for(;_--;){if(re===O||O!==null&&re===O.alternate)break t;re=ii(re),O=ii(O)}re=null}else re=null;Y!==null&&lg(q,H,Y,re,!1),te!==null&&tt!==null&&lg(q,tt,te,re,!0)}}e:{if(H=P?li(P):window,Y=H.nodeName&&H.nodeName.toLowerCase(),Y==="select"||Y==="input"&&H.type==="file")var ie=yk;else if(Bm(H))if(Um)ie=bk;else{ie=vk;var ue=xk}else(Y=H.nodeName)&&Y.toLowerCase()==="input"&&(H.type==="checkbox"||H.type==="radio")&&(ie=wk);if(ie&&(ie=ie(o,P))){Fm(q,ie,d,W);break e}ue&&ue(o,H,P),o==="focusout"&&(ue=H._wrapperState)&&ue.controlled&&H.type==="number"&&Qs(H,"number",H.value)}switch(ue=P?li(P):window,o){case"focusin":(Bm(ue)||ue.contentEditable==="true")&&(ri=ue,Xu=P,So=null);break;case"focusout":So=Xu=ri=null;break;case"mousedown":Zu=!0;break;case"contextmenu":case"mouseup":case"dragend":Zu=!1,Qm(q,d,W);break;case"selectionchange":if(Ck)break;case"keydown":case"keyup":Qm(q,d,W)}var de;if(Ju)e:{switch(o){case"compositionstart":var fe="onCompositionStart";break e;case"compositionend":fe="onCompositionEnd";break e;case"compositionupdate":fe="onCompositionUpdate";break e}fe=void 0}else ni?zm(o,d)&&(fe="onCompositionEnd"):o==="keydown"&&d.keyCode===229&&(fe="onCompositionStart");fe&&(Im&&d.locale!=="ko"&&(ni||fe!=="onCompositionStart"?fe==="onCompositionEnd"&&ni&&(de=Am()):(wr=W,Uu="value"in wr?wr.value:wr.textContent,ni=!0)),ue=sa(P,fe),0<ue.length&&(fe=new Rm(fe,o,null,d,W),q.push({event:fe,listeners:ue}),de?fe.data=de:(de=$m(d),de!==null&&(fe.data=de)))),(de=hk?fk(o,d):pk(o,d))&&(P=sa(P,"onBeforeInput"),0<P.length&&(W=new Rm("onBeforeInput","beforeinput",null,d,W),q.push({event:W,listeners:P}),W.data=de))}ig(q,a)})}function Eo(o,a,d){return{instance:o,listener:a,currentTarget:d}}function sa(o,a){for(var d=a+"Capture",m=[];o!==null;){var y=o,v=y.stateNode;y.tag===5&&v!==null&&(y=v,v=oo(o,d),v!=null&&m.unshift(Eo(o,v,y)),v=oo(o,a),v!=null&&m.push(Eo(o,v,y))),o=o.return}return m}function ii(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function lg(o,a,d,m,y){for(var v=a._reactName,S=[];d!==null&&d!==m;){var E=d,j=E.alternate,P=E.stateNode;if(j!==null&&j===m)break;E.tag===5&&P!==null&&(E=P,y?(j=oo(d,v),j!=null&&S.unshift(Eo(d,j,E))):y||(j=oo(d,v),j!=null&&S.push(Eo(d,j,E)))),d=d.return}S.length!==0&&o.push({event:a,listeners:S})}var Tk=/\r\n?/g,_k=/\u0000|\uFFFD/g;function ag(o){return(typeof o=="string"?o:""+o).replace(Tk,`
`).replace(_k,"")}function ia(o,a,d){if(a=ag(a),ag(o)!==a&&d)throw Error(t(425))}function oa(){}var id=null,od=null;function ld(o,a){return o==="textarea"||o==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var ad=typeof setTimeout=="function"?setTimeout:void 0,Ak=typeof clearTimeout=="function"?clearTimeout:void 0,cg=typeof Promise=="function"?Promise:void 0,Mk=typeof queueMicrotask=="function"?queueMicrotask:typeof cg<"u"?function(o){return cg.resolve(null).then(o).catch(Ok)}:ad;function Ok(o){setTimeout(function(){throw o})}function cd(o,a){var d=a,m=0;do{var y=d.nextSibling;if(o.removeChild(d),y&&y.nodeType===8)if(d=y.data,d==="/$"){if(m===0){o.removeChild(y),go(a);return}m--}else d!=="$"&&d!=="$?"&&d!=="$!"||m++;d=y}while(d);go(a)}function kr(o){for(;o!=null;o=o.nextSibling){var a=o.nodeType;if(a===1||a===3)break;if(a===8){if(a=o.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return o}function ug(o){o=o.previousSibling;for(var a=0;o;){if(o.nodeType===8){var d=o.data;if(d==="$"||d==="$!"||d==="$?"){if(a===0)return o;a--}else d==="/$"&&a++}o=o.previousSibling}return null}var oi=Math.random().toString(36).slice(2),In="__reactFiber$"+oi,jo="__reactProps$"+oi,Gn="__reactContainer$"+oi,ud="__reactEvents$"+oi,Rk="__reactListeners$"+oi,Pk="__reactHandles$"+oi;function ps(o){var a=o[In];if(a)return a;for(var d=o.parentNode;d;){if(a=d[Gn]||d[In]){if(d=a.alternate,a.child!==null||d!==null&&d.child!==null)for(o=ug(o);o!==null;){if(d=o[In])return d;o=ug(o)}return a}o=d,d=o.parentNode}return null}function To(o){return o=o[In]||o[Gn],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function li(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(t(33))}function la(o){return o[jo]||null}var dd=[],ai=-1;function Sr(o){return{current:o}}function Be(o){0>ai||(o.current=dd[ai],dd[ai]=null,ai--)}function Ie(o,a){ai++,dd[ai]=o.current,o.current=a}var Cr={},Nt=Sr(Cr),Ht=Sr(!1),ms=Cr;function ci(o,a){var d=o.type.contextTypes;if(!d)return Cr;var m=o.stateNode;if(m&&m.__reactInternalMemoizedUnmaskedChildContext===a)return m.__reactInternalMemoizedMaskedChildContext;var y={},v;for(v in d)y[v]=a[v];return m&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=a,o.__reactInternalMemoizedMaskedChildContext=y),y}function Vt(o){return o=o.childContextTypes,o!=null}function aa(){Be(Ht),Be(Nt)}function dg(o,a,d){if(Nt.current!==Cr)throw Error(t(168));Ie(Nt,a),Ie(Ht,d)}function hg(o,a,d){var m=o.stateNode;if(a=a.childContextTypes,typeof m.getChildContext!="function")return d;m=m.getChildContext();for(var y in m)if(!(y in a))throw Error(t(108,_e(o)||"Unknown",y));return X({},d,m)}function ca(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||Cr,ms=Nt.current,Ie(Nt,o),Ie(Ht,Ht.current),!0}function fg(o,a,d){var m=o.stateNode;if(!m)throw Error(t(169));d?(o=hg(o,a,ms),m.__reactInternalMemoizedMergedChildContext=o,Be(Ht),Be(Nt),Ie(Nt,o)):Be(Ht),Ie(Ht,d)}var Qn=null,ua=!1,hd=!1;function pg(o){Qn===null?Qn=[o]:Qn.push(o)}function Ik(o){ua=!0,pg(o)}function Nr(){if(!hd&&Qn!==null){hd=!0;var o=0,a=Me;try{var d=Qn;for(Me=1;o<d.length;o++){var m=d[o];do m=m(!0);while(m!==null)}Qn=null,ua=!1}catch(y){throw Qn!==null&&(Qn=Qn.slice(o+1)),gm(Pu,Nr),y}finally{Me=a,hd=!1}}return null}var ui=[],di=0,da=null,ha=0,an=[],cn=0,gs=null,Yn=1,Xn="";function ys(o,a){ui[di++]=ha,ui[di++]=da,da=o,ha=a}function mg(o,a,d){an[cn++]=Yn,an[cn++]=Xn,an[cn++]=gs,gs=o;var m=Yn;o=Xn;var y=32-bn(m)-1;m&=~(1<<y),d+=1;var v=32-bn(a)+y;if(30<v){var S=y-y%5;v=(m&(1<<S)-1).toString(32),m>>=S,y-=S,Yn=1<<32-bn(a)+y|d<<y|m,Xn=v+o}else Yn=1<<v|d<<y|m,Xn=o}function fd(o){o.return!==null&&(ys(o,1),mg(o,1,0))}function pd(o){for(;o===da;)da=ui[--di],ui[di]=null,ha=ui[--di],ui[di]=null;for(;o===gs;)gs=an[--cn],an[cn]=null,Xn=an[--cn],an[cn]=null,Yn=an[--cn],an[cn]=null}var Zt=null,en=null,Ue=!1,Sn=null;function gg(o,a){var d=fn(5,null,null,0);d.elementType="DELETED",d.stateNode=a,d.return=o,a=o.deletions,a===null?(o.deletions=[d],o.flags|=16):a.push(d)}function yg(o,a){switch(o.tag){case 5:var d=o.type;return a=a.nodeType!==1||d.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(o.stateNode=a,Zt=o,en=kr(a.firstChild),!0):!1;case 6:return a=o.pendingProps===""||a.nodeType!==3?null:a,a!==null?(o.stateNode=a,Zt=o,en=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(d=gs!==null?{id:Yn,overflow:Xn}:null,o.memoizedState={dehydrated:a,treeContext:d,retryLane:1073741824},d=fn(18,null,null,0),d.stateNode=a,d.return=o,o.child=d,Zt=o,en=null,!0):!1;default:return!1}}function md(o){return(o.mode&1)!==0&&(o.flags&128)===0}function gd(o){if(Ue){var a=en;if(a){var d=a;if(!yg(o,a)){if(md(o))throw Error(t(418));a=kr(d.nextSibling);var m=Zt;a&&yg(o,a)?gg(m,d):(o.flags=o.flags&-4097|2,Ue=!1,Zt=o)}}else{if(md(o))throw Error(t(418));o.flags=o.flags&-4097|2,Ue=!1,Zt=o}}}function xg(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;Zt=o}function fa(o){if(o!==Zt)return!1;if(!Ue)return xg(o),Ue=!0,!1;var a;if((a=o.tag!==3)&&!(a=o.tag!==5)&&(a=o.type,a=a!=="head"&&a!=="body"&&!ld(o.type,o.memoizedProps)),a&&(a=en)){if(md(o))throw vg(),Error(t(418));for(;a;)gg(o,a),a=kr(a.nextSibling)}if(xg(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(t(317));e:{for(o=o.nextSibling,a=0;o;){if(o.nodeType===8){var d=o.data;if(d==="/$"){if(a===0){en=kr(o.nextSibling);break e}a--}else d!=="$"&&d!=="$!"&&d!=="$?"||a++}o=o.nextSibling}en=null}}else en=Zt?kr(o.stateNode.nextSibling):null;return!0}function vg(){for(var o=en;o;)o=kr(o.nextSibling)}function hi(){en=Zt=null,Ue=!1}function yd(o){Sn===null?Sn=[o]:Sn.push(o)}var Lk=V.ReactCurrentBatchConfig;function _o(o,a,d){if(o=d.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(d._owner){if(d=d._owner,d){if(d.tag!==1)throw Error(t(309));var m=d.stateNode}if(!m)throw Error(t(147,o));var y=m,v=""+o;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===v?a.ref:(a=function(S){var E=y.refs;S===null?delete E[v]:E[v]=S},a._stringRef=v,a)}if(typeof o!="string")throw Error(t(284));if(!d._owner)throw Error(t(290,o))}return o}function pa(o,a){throw o=Object.prototype.toString.call(a),Error(t(31,o==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":o))}function wg(o){var a=o._init;return a(o._payload)}function bg(o){function a(O,_){if(o){var R=O.deletions;R===null?(O.deletions=[_],O.flags|=16):R.push(_)}}function d(O,_){if(!o)return null;for(;_!==null;)a(O,_),_=_.sibling;return null}function m(O,_){for(O=new Map;_!==null;)_.key!==null?O.set(_.key,_):O.set(_.index,_),_=_.sibling;return O}function y(O,_){return O=Rr(O,_),O.index=0,O.sibling=null,O}function v(O,_,R){return O.index=R,o?(R=O.alternate,R!==null?(R=R.index,R<_?(O.flags|=2,_):R):(O.flags|=2,_)):(O.flags|=1048576,_)}function S(O){return o&&O.alternate===null&&(O.flags|=2),O}function E(O,_,R,J){return _===null||_.tag!==6?(_=ah(R,O.mode,J),_.return=O,_):(_=y(_,R),_.return=O,_)}function j(O,_,R,J){var ie=R.type;return ie===B?W(O,_,R.props.children,J,R.key):_!==null&&(_.elementType===ie||typeof ie=="object"&&ie!==null&&ie.$$typeof===Ae&&wg(ie)===_.type)?(J=y(_,R.props),J.ref=_o(O,_,R),J.return=O,J):(J=za(R.type,R.key,R.props,null,O.mode,J),J.ref=_o(O,_,R),J.return=O,J)}function P(O,_,R,J){return _===null||_.tag!==4||_.stateNode.containerInfo!==R.containerInfo||_.stateNode.implementation!==R.implementation?(_=ch(R,O.mode,J),_.return=O,_):(_=y(_,R.children||[]),_.return=O,_)}function W(O,_,R,J,ie){return _===null||_.tag!==7?(_=Ns(R,O.mode,J,ie),_.return=O,_):(_=y(_,R),_.return=O,_)}function q(O,_,R){if(typeof _=="string"&&_!==""||typeof _=="number")return _=ah(""+_,O.mode,R),_.return=O,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case U:return R=za(_.type,_.key,_.props,null,O.mode,R),R.ref=_o(O,null,_),R.return=O,R;case D:return _=ch(_,O.mode,R),_.return=O,_;case Ae:var J=_._init;return q(O,J(_._payload),R)}if(mr(_)||le(_))return _=Ns(_,O.mode,R,null),_.return=O,_;pa(O,_)}return null}function H(O,_,R,J){var ie=_!==null?_.key:null;if(typeof R=="string"&&R!==""||typeof R=="number")return ie!==null?null:E(O,_,""+R,J);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case U:return R.key===ie?j(O,_,R,J):null;case D:return R.key===ie?P(O,_,R,J):null;case Ae:return ie=R._init,H(O,_,ie(R._payload),J)}if(mr(R)||le(R))return ie!==null?null:W(O,_,R,J,null);pa(O,R)}return null}function Y(O,_,R,J,ie){if(typeof J=="string"&&J!==""||typeof J=="number")return O=O.get(R)||null,E(_,O,""+J,ie);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case U:return O=O.get(J.key===null?R:J.key)||null,j(_,O,J,ie);case D:return O=O.get(J.key===null?R:J.key)||null,P(_,O,J,ie);case Ae:var ue=J._init;return Y(O,_,R,ue(J._payload),ie)}if(mr(J)||le(J))return O=O.get(R)||null,W(_,O,J,ie,null);pa(_,J)}return null}function te(O,_,R,J){for(var ie=null,ue=null,de=_,fe=_=0,ht=null;de!==null&&fe<R.length;fe++){de.index>fe?(ht=de,de=null):ht=de.sibling;var je=H(O,de,R[fe],J);if(je===null){de===null&&(de=ht);break}o&&de&&je.alternate===null&&a(O,de),_=v(je,_,fe),ue===null?ie=je:ue.sibling=je,ue=je,de=ht}if(fe===R.length)return d(O,de),Ue&&ys(O,fe),ie;if(de===null){for(;fe<R.length;fe++)de=q(O,R[fe],J),de!==null&&(_=v(de,_,fe),ue===null?ie=de:ue.sibling=de,ue=de);return Ue&&ys(O,fe),ie}for(de=m(O,de);fe<R.length;fe++)ht=Y(de,O,fe,R[fe],J),ht!==null&&(o&&ht.alternate!==null&&de.delete(ht.key===null?fe:ht.key),_=v(ht,_,fe),ue===null?ie=ht:ue.sibling=ht,ue=ht);return o&&de.forEach(function(Pr){return a(O,Pr)}),Ue&&ys(O,fe),ie}function re(O,_,R,J){var ie=le(R);if(typeof ie!="function")throw Error(t(150));if(R=ie.call(R),R==null)throw Error(t(151));for(var ue=ie=null,de=_,fe=_=0,ht=null,je=R.next();de!==null&&!je.done;fe++,je=R.next()){de.index>fe?(ht=de,de=null):ht=de.sibling;var Pr=H(O,de,je.value,J);if(Pr===null){de===null&&(de=ht);break}o&&de&&Pr.alternate===null&&a(O,de),_=v(Pr,_,fe),ue===null?ie=Pr:ue.sibling=Pr,ue=Pr,de=ht}if(je.done)return d(O,de),Ue&&ys(O,fe),ie;if(de===null){for(;!je.done;fe++,je=R.next())je=q(O,je.value,J),je!==null&&(_=v(je,_,fe),ue===null?ie=je:ue.sibling=je,ue=je);return Ue&&ys(O,fe),ie}for(de=m(O,de);!je.done;fe++,je=R.next())je=Y(de,O,fe,je.value,J),je!==null&&(o&&je.alternate!==null&&de.delete(je.key===null?fe:je.key),_=v(je,_,fe),ue===null?ie=je:ue.sibling=je,ue=je);return o&&de.forEach(function(mS){return a(O,mS)}),Ue&&ys(O,fe),ie}function tt(O,_,R,J){if(typeof R=="object"&&R!==null&&R.type===B&&R.key===null&&(R=R.props.children),typeof R=="object"&&R!==null){switch(R.$$typeof){case U:e:{for(var ie=R.key,ue=_;ue!==null;){if(ue.key===ie){if(ie=R.type,ie===B){if(ue.tag===7){d(O,ue.sibling),_=y(ue,R.props.children),_.return=O,O=_;break e}}else if(ue.elementType===ie||typeof ie=="object"&&ie!==null&&ie.$$typeof===Ae&&wg(ie)===ue.type){d(O,ue.sibling),_=y(ue,R.props),_.ref=_o(O,ue,R),_.return=O,O=_;break e}d(O,ue);break}else a(O,ue);ue=ue.sibling}R.type===B?(_=Ns(R.props.children,O.mode,J,R.key),_.return=O,O=_):(J=za(R.type,R.key,R.props,null,O.mode,J),J.ref=_o(O,_,R),J.return=O,O=J)}return S(O);case D:e:{for(ue=R.key;_!==null;){if(_.key===ue)if(_.tag===4&&_.stateNode.containerInfo===R.containerInfo&&_.stateNode.implementation===R.implementation){d(O,_.sibling),_=y(_,R.children||[]),_.return=O,O=_;break e}else{d(O,_);break}else a(O,_);_=_.sibling}_=ch(R,O.mode,J),_.return=O,O=_}return S(O);case Ae:return ue=R._init,tt(O,_,ue(R._payload),J)}if(mr(R))return te(O,_,R,J);if(le(R))return re(O,_,R,J);pa(O,R)}return typeof R=="string"&&R!==""||typeof R=="number"?(R=""+R,_!==null&&_.tag===6?(d(O,_.sibling),_=y(_,R),_.return=O,O=_):(d(O,_),_=ah(R,O.mode,J),_.return=O,O=_),S(O)):d(O,_)}return tt}var fi=bg(!0),kg=bg(!1),ma=Sr(null),ga=null,pi=null,xd=null;function vd(){xd=pi=ga=null}function wd(o){var a=ma.current;Be(ma),o._currentValue=a}function bd(o,a,d){for(;o!==null;){var m=o.alternate;if((o.childLanes&a)!==a?(o.childLanes|=a,m!==null&&(m.childLanes|=a)):m!==null&&(m.childLanes&a)!==a&&(m.childLanes|=a),o===d)break;o=o.return}}function mi(o,a){ga=o,xd=pi=null,o=o.dependencies,o!==null&&o.firstContext!==null&&((o.lanes&a)!==0&&(Wt=!0),o.firstContext=null)}function un(o){var a=o._currentValue;if(xd!==o)if(o={context:o,memoizedValue:a,next:null},pi===null){if(ga===null)throw Error(t(308));pi=o,ga.dependencies={lanes:0,firstContext:o}}else pi=pi.next=o;return a}var xs=null;function kd(o){xs===null?xs=[o]:xs.push(o)}function Sg(o,a,d,m){var y=a.interleaved;return y===null?(d.next=d,kd(a)):(d.next=y.next,y.next=d),a.interleaved=d,Zn(o,m)}function Zn(o,a){o.lanes|=a;var d=o.alternate;for(d!==null&&(d.lanes|=a),d=o,o=o.return;o!==null;)o.childLanes|=a,d=o.alternate,d!==null&&(d.childLanes|=a),d=o,o=o.return;return d.tag===3?d.stateNode:null}var Er=!1;function Sd(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Cg(o,a){o=o.updateQueue,a.updateQueue===o&&(a.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function er(o,a){return{eventTime:o,lane:a,tag:0,payload:null,callback:null,next:null}}function jr(o,a,d){var m=o.updateQueue;if(m===null)return null;if(m=m.shared,(Ee&2)!==0){var y=m.pending;return y===null?a.next=a:(a.next=y.next,y.next=a),m.pending=a,Zn(o,d)}return y=m.interleaved,y===null?(a.next=a,kd(m)):(a.next=y.next,y.next=a),m.interleaved=a,Zn(o,d)}function ya(o,a,d){if(a=a.updateQueue,a!==null&&(a=a.shared,(d&4194240)!==0)){var m=a.lanes;m&=o.pendingLanes,d|=m,a.lanes=d,Du(o,d)}}function Ng(o,a){var d=o.updateQueue,m=o.alternate;if(m!==null&&(m=m.updateQueue,d===m)){var y=null,v=null;if(d=d.firstBaseUpdate,d!==null){do{var S={eventTime:d.eventTime,lane:d.lane,tag:d.tag,payload:d.payload,callback:d.callback,next:null};v===null?y=v=S:v=v.next=S,d=d.next}while(d!==null);v===null?y=v=a:v=v.next=a}else y=v=a;d={baseState:m.baseState,firstBaseUpdate:y,lastBaseUpdate:v,shared:m.shared,effects:m.effects},o.updateQueue=d;return}o=d.lastBaseUpdate,o===null?d.firstBaseUpdate=a:o.next=a,d.lastBaseUpdate=a}function xa(o,a,d,m){var y=o.updateQueue;Er=!1;var v=y.firstBaseUpdate,S=y.lastBaseUpdate,E=y.shared.pending;if(E!==null){y.shared.pending=null;var j=E,P=j.next;j.next=null,S===null?v=P:S.next=P,S=j;var W=o.alternate;W!==null&&(W=W.updateQueue,E=W.lastBaseUpdate,E!==S&&(E===null?W.firstBaseUpdate=P:E.next=P,W.lastBaseUpdate=j))}if(v!==null){var q=y.baseState;S=0,W=P=j=null,E=v;do{var H=E.lane,Y=E.eventTime;if((m&H)===H){W!==null&&(W=W.next={eventTime:Y,lane:0,tag:E.tag,payload:E.payload,callback:E.callback,next:null});e:{var te=o,re=E;switch(H=a,Y=d,re.tag){case 1:if(te=re.payload,typeof te=="function"){q=te.call(Y,q,H);break e}q=te;break e;case 3:te.flags=te.flags&-65537|128;case 0:if(te=re.payload,H=typeof te=="function"?te.call(Y,q,H):te,H==null)break e;q=X({},q,H);break e;case 2:Er=!0}}E.callback!==null&&E.lane!==0&&(o.flags|=64,H=y.effects,H===null?y.effects=[E]:H.push(E))}else Y={eventTime:Y,lane:H,tag:E.tag,payload:E.payload,callback:E.callback,next:null},W===null?(P=W=Y,j=q):W=W.next=Y,S|=H;if(E=E.next,E===null){if(E=y.shared.pending,E===null)break;H=E,E=H.next,H.next=null,y.lastBaseUpdate=H,y.shared.pending=null}}while(!0);if(W===null&&(j=q),y.baseState=j,y.firstBaseUpdate=P,y.lastBaseUpdate=W,a=y.shared.interleaved,a!==null){y=a;do S|=y.lane,y=y.next;while(y!==a)}else v===null&&(y.shared.lanes=0);bs|=S,o.lanes=S,o.memoizedState=q}}function Eg(o,a,d){if(o=a.effects,a.effects=null,o!==null)for(a=0;a<o.length;a++){var m=o[a],y=m.callback;if(y!==null){if(m.callback=null,m=d,typeof y!="function")throw Error(t(191,y));y.call(m)}}}var Ao={},Ln=Sr(Ao),Mo=Sr(Ao),Oo=Sr(Ao);function vs(o){if(o===Ao)throw Error(t(174));return o}function Cd(o,a){switch(Ie(Oo,a),Ie(Mo,o),Ie(Ln,Ao),o=a.nodeType,o){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:ln(null,"");break;default:o=o===8?a.parentNode:a,a=o.namespaceURI||null,o=o.tagName,a=ln(a,o)}Be(Ln),Ie(Ln,a)}function gi(){Be(Ln),Be(Mo),Be(Oo)}function jg(o){vs(Oo.current);var a=vs(Ln.current),d=ln(a,o.type);a!==d&&(Ie(Mo,o),Ie(Ln,d))}function Nd(o){Mo.current===o&&(Be(Ln),Be(Mo))}var We=Sr(0);function va(o){for(var a=o;a!==null;){if(a.tag===13){var d=a.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||d.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===o)break;for(;a.sibling===null;){if(a.return===null||a.return===o)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Ed=[];function jd(){for(var o=0;o<Ed.length;o++)Ed[o]._workInProgressVersionPrimary=null;Ed.length=0}var wa=V.ReactCurrentDispatcher,Td=V.ReactCurrentBatchConfig,ws=0,qe=null,ot=null,ut=null,ba=!1,Ro=!1,Po=0,Dk=0;function Et(){throw Error(t(321))}function _d(o,a){if(a===null)return!1;for(var d=0;d<a.length&&d<o.length;d++)if(!kn(o[d],a[d]))return!1;return!0}function Ad(o,a,d,m,y,v){if(ws=v,qe=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,wa.current=o===null||o.memoizedState===null?Fk:Uk,o=d(m,y),Ro){v=0;do{if(Ro=!1,Po=0,25<=v)throw Error(t(301));v+=1,ut=ot=null,a.updateQueue=null,wa.current=Hk,o=d(m,y)}while(Ro)}if(wa.current=Ca,a=ot!==null&&ot.next!==null,ws=0,ut=ot=qe=null,ba=!1,a)throw Error(t(300));return o}function Md(){var o=Po!==0;return Po=0,o}function Dn(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ut===null?qe.memoizedState=ut=o:ut=ut.next=o,ut}function dn(){if(ot===null){var o=qe.alternate;o=o!==null?o.memoizedState:null}else o=ot.next;var a=ut===null?qe.memoizedState:ut.next;if(a!==null)ut=a,ot=o;else{if(o===null)throw Error(t(310));ot=o,o={memoizedState:ot.memoizedState,baseState:ot.baseState,baseQueue:ot.baseQueue,queue:ot.queue,next:null},ut===null?qe.memoizedState=ut=o:ut=ut.next=o}return ut}function Io(o,a){return typeof a=="function"?a(o):a}function Od(o){var a=dn(),d=a.queue;if(d===null)throw Error(t(311));d.lastRenderedReducer=o;var m=ot,y=m.baseQueue,v=d.pending;if(v!==null){if(y!==null){var S=y.next;y.next=v.next,v.next=S}m.baseQueue=y=v,d.pending=null}if(y!==null){v=y.next,m=m.baseState;var E=S=null,j=null,P=v;do{var W=P.lane;if((ws&W)===W)j!==null&&(j=j.next={lane:0,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null}),m=P.hasEagerState?P.eagerState:o(m,P.action);else{var q={lane:W,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null};j===null?(E=j=q,S=m):j=j.next=q,qe.lanes|=W,bs|=W}P=P.next}while(P!==null&&P!==v);j===null?S=m:j.next=E,kn(m,a.memoizedState)||(Wt=!0),a.memoizedState=m,a.baseState=S,a.baseQueue=j,d.lastRenderedState=m}if(o=d.interleaved,o!==null){y=o;do v=y.lane,qe.lanes|=v,bs|=v,y=y.next;while(y!==o)}else y===null&&(d.lanes=0);return[a.memoizedState,d.dispatch]}function Rd(o){var a=dn(),d=a.queue;if(d===null)throw Error(t(311));d.lastRenderedReducer=o;var m=d.dispatch,y=d.pending,v=a.memoizedState;if(y!==null){d.pending=null;var S=y=y.next;do v=o(v,S.action),S=S.next;while(S!==y);kn(v,a.memoizedState)||(Wt=!0),a.memoizedState=v,a.baseQueue===null&&(a.baseState=v),d.lastRenderedState=v}return[v,m]}function Tg(){}function _g(o,a){var d=qe,m=dn(),y=a(),v=!kn(m.memoizedState,y);if(v&&(m.memoizedState=y,Wt=!0),m=m.queue,Pd(Og.bind(null,d,m,o),[o]),m.getSnapshot!==a||v||ut!==null&&ut.memoizedState.tag&1){if(d.flags|=2048,Lo(9,Mg.bind(null,d,m,y,a),void 0,null),dt===null)throw Error(t(349));(ws&30)!==0||Ag(d,a,y)}return y}function Ag(o,a,d){o.flags|=16384,o={getSnapshot:a,value:d},a=qe.updateQueue,a===null?(a={lastEffect:null,stores:null},qe.updateQueue=a,a.stores=[o]):(d=a.stores,d===null?a.stores=[o]:d.push(o))}function Mg(o,a,d,m){a.value=d,a.getSnapshot=m,Rg(a)&&Pg(o)}function Og(o,a,d){return d(function(){Rg(a)&&Pg(o)})}function Rg(o){var a=o.getSnapshot;o=o.value;try{var d=a();return!kn(o,d)}catch{return!0}}function Pg(o){var a=Zn(o,1);a!==null&&jn(a,o,1,-1)}function Ig(o){var a=Dn();return typeof o=="function"&&(o=o()),a.memoizedState=a.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Io,lastRenderedState:o},a.queue=o,o=o.dispatch=Bk.bind(null,qe,o),[a.memoizedState,o]}function Lo(o,a,d,m){return o={tag:o,create:a,destroy:d,deps:m,next:null},a=qe.updateQueue,a===null?(a={lastEffect:null,stores:null},qe.updateQueue=a,a.lastEffect=o.next=o):(d=a.lastEffect,d===null?a.lastEffect=o.next=o:(m=d.next,d.next=o,o.next=m,a.lastEffect=o)),o}function Lg(){return dn().memoizedState}function ka(o,a,d,m){var y=Dn();qe.flags|=o,y.memoizedState=Lo(1|a,d,void 0,m===void 0?null:m)}function Sa(o,a,d,m){var y=dn();m=m===void 0?null:m;var v=void 0;if(ot!==null){var S=ot.memoizedState;if(v=S.destroy,m!==null&&_d(m,S.deps)){y.memoizedState=Lo(a,d,v,m);return}}qe.flags|=o,y.memoizedState=Lo(1|a,d,v,m)}function Dg(o,a){return ka(8390656,8,o,a)}function Pd(o,a){return Sa(2048,8,o,a)}function zg(o,a){return Sa(4,2,o,a)}function $g(o,a){return Sa(4,4,o,a)}function Bg(o,a){if(typeof a=="function")return o=o(),a(o),function(){a(null)};if(a!=null)return o=o(),a.current=o,function(){a.current=null}}function Fg(o,a,d){return d=d!=null?d.concat([o]):null,Sa(4,4,Bg.bind(null,a,o),d)}function Id(){}function Ug(o,a){var d=dn();a=a===void 0?null:a;var m=d.memoizedState;return m!==null&&a!==null&&_d(a,m[1])?m[0]:(d.memoizedState=[o,a],o)}function Hg(o,a){var d=dn();a=a===void 0?null:a;var m=d.memoizedState;return m!==null&&a!==null&&_d(a,m[1])?m[0]:(o=o(),d.memoizedState=[o,a],o)}function Vg(o,a,d){return(ws&21)===0?(o.baseState&&(o.baseState=!1,Wt=!0),o.memoizedState=d):(kn(d,a)||(d=wm(),qe.lanes|=d,bs|=d,o.baseState=!0),a)}function zk(o,a){var d=Me;Me=d!==0&&4>d?d:4,o(!0);var m=Td.transition;Td.transition={};try{o(!1),a()}finally{Me=d,Td.transition=m}}function Wg(){return dn().memoizedState}function $k(o,a,d){var m=Mr(o);if(d={lane:m,action:d,hasEagerState:!1,eagerState:null,next:null},qg(o))Kg(a,d);else if(d=Sg(o,a,d,m),d!==null){var y=Dt();jn(d,o,m,y),Jg(d,a,m)}}function Bk(o,a,d){var m=Mr(o),y={lane:m,action:d,hasEagerState:!1,eagerState:null,next:null};if(qg(o))Kg(a,y);else{var v=o.alternate;if(o.lanes===0&&(v===null||v.lanes===0)&&(v=a.lastRenderedReducer,v!==null))try{var S=a.lastRenderedState,E=v(S,d);if(y.hasEagerState=!0,y.eagerState=E,kn(E,S)){var j=a.interleaved;j===null?(y.next=y,kd(a)):(y.next=j.next,j.next=y),a.interleaved=y;return}}catch{}finally{}d=Sg(o,a,y,m),d!==null&&(y=Dt(),jn(d,o,m,y),Jg(d,a,m))}}function qg(o){var a=o.alternate;return o===qe||a!==null&&a===qe}function Kg(o,a){Ro=ba=!0;var d=o.pending;d===null?a.next=a:(a.next=d.next,d.next=a),o.pending=a}function Jg(o,a,d){if((d&4194240)!==0){var m=a.lanes;m&=o.pendingLanes,d|=m,a.lanes=d,Du(o,d)}}var Ca={readContext:un,useCallback:Et,useContext:Et,useEffect:Et,useImperativeHandle:Et,useInsertionEffect:Et,useLayoutEffect:Et,useMemo:Et,useReducer:Et,useRef:Et,useState:Et,useDebugValue:Et,useDeferredValue:Et,useTransition:Et,useMutableSource:Et,useSyncExternalStore:Et,useId:Et,unstable_isNewReconciler:!1},Fk={readContext:un,useCallback:function(o,a){return Dn().memoizedState=[o,a===void 0?null:a],o},useContext:un,useEffect:Dg,useImperativeHandle:function(o,a,d){return d=d!=null?d.concat([o]):null,ka(4194308,4,Bg.bind(null,a,o),d)},useLayoutEffect:function(o,a){return ka(4194308,4,o,a)},useInsertionEffect:function(o,a){return ka(4,2,o,a)},useMemo:function(o,a){var d=Dn();return a=a===void 0?null:a,o=o(),d.memoizedState=[o,a],o},useReducer:function(o,a,d){var m=Dn();return a=d!==void 0?d(a):a,m.memoizedState=m.baseState=a,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:a},m.queue=o,o=o.dispatch=$k.bind(null,qe,o),[m.memoizedState,o]},useRef:function(o){var a=Dn();return o={current:o},a.memoizedState=o},useState:Ig,useDebugValue:Id,useDeferredValue:function(o){return Dn().memoizedState=o},useTransition:function(){var o=Ig(!1),a=o[0];return o=zk.bind(null,o[1]),Dn().memoizedState=o,[a,o]},useMutableSource:function(){},useSyncExternalStore:function(o,a,d){var m=qe,y=Dn();if(Ue){if(d===void 0)throw Error(t(407));d=d()}else{if(d=a(),dt===null)throw Error(t(349));(ws&30)!==0||Ag(m,a,d)}y.memoizedState=d;var v={value:d,getSnapshot:a};return y.queue=v,Dg(Og.bind(null,m,v,o),[o]),m.flags|=2048,Lo(9,Mg.bind(null,m,v,d,a),void 0,null),d},useId:function(){var o=Dn(),a=dt.identifierPrefix;if(Ue){var d=Xn,m=Yn;d=(m&~(1<<32-bn(m)-1)).toString(32)+d,a=":"+a+"R"+d,d=Po++,0<d&&(a+="H"+d.toString(32)),a+=":"}else d=Dk++,a=":"+a+"r"+d.toString(32)+":";return o.memoizedState=a},unstable_isNewReconciler:!1},Uk={readContext:un,useCallback:Ug,useContext:un,useEffect:Pd,useImperativeHandle:Fg,useInsertionEffect:zg,useLayoutEffect:$g,useMemo:Hg,useReducer:Od,useRef:Lg,useState:function(){return Od(Io)},useDebugValue:Id,useDeferredValue:function(o){var a=dn();return Vg(a,ot.memoizedState,o)},useTransition:function(){var o=Od(Io)[0],a=dn().memoizedState;return[o,a]},useMutableSource:Tg,useSyncExternalStore:_g,useId:Wg,unstable_isNewReconciler:!1},Hk={readContext:un,useCallback:Ug,useContext:un,useEffect:Pd,useImperativeHandle:Fg,useInsertionEffect:zg,useLayoutEffect:$g,useMemo:Hg,useReducer:Rd,useRef:Lg,useState:function(){return Rd(Io)},useDebugValue:Id,useDeferredValue:function(o){var a=dn();return ot===null?a.memoizedState=o:Vg(a,ot.memoizedState,o)},useTransition:function(){var o=Rd(Io)[0],a=dn().memoizedState;return[o,a]},useMutableSource:Tg,useSyncExternalStore:_g,useId:Wg,unstable_isNewReconciler:!1};function Cn(o,a){if(o&&o.defaultProps){a=X({},a),o=o.defaultProps;for(var d in o)a[d]===void 0&&(a[d]=o[d]);return a}return a}function Ld(o,a,d,m){a=o.memoizedState,d=d(m,a),d=d==null?a:X({},a,d),o.memoizedState=d,o.lanes===0&&(o.updateQueue.baseState=d)}var Na={isMounted:function(o){return(o=o._reactInternals)?fs(o)===o:!1},enqueueSetState:function(o,a,d){o=o._reactInternals;var m=Dt(),y=Mr(o),v=er(m,y);v.payload=a,d!=null&&(v.callback=d),a=jr(o,v,y),a!==null&&(jn(a,o,y,m),ya(a,o,y))},enqueueReplaceState:function(o,a,d){o=o._reactInternals;var m=Dt(),y=Mr(o),v=er(m,y);v.tag=1,v.payload=a,d!=null&&(v.callback=d),a=jr(o,v,y),a!==null&&(jn(a,o,y,m),ya(a,o,y))},enqueueForceUpdate:function(o,a){o=o._reactInternals;var d=Dt(),m=Mr(o),y=er(d,m);y.tag=2,a!=null&&(y.callback=a),a=jr(o,y,m),a!==null&&(jn(a,o,m,d),ya(a,o,m))}};function Gg(o,a,d,m,y,v,S){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(m,v,S):a.prototype&&a.prototype.isPureReactComponent?!ko(d,m)||!ko(y,v):!0}function Qg(o,a,d){var m=!1,y=Cr,v=a.contextType;return typeof v=="object"&&v!==null?v=un(v):(y=Vt(a)?ms:Nt.current,m=a.contextTypes,v=(m=m!=null)?ci(o,y):Cr),a=new a(d,v),o.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=Na,o.stateNode=a,a._reactInternals=o,m&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=y,o.__reactInternalMemoizedMaskedChildContext=v),a}function Yg(o,a,d,m){o=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(d,m),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(d,m),a.state!==o&&Na.enqueueReplaceState(a,a.state,null)}function Dd(o,a,d,m){var y=o.stateNode;y.props=d,y.state=o.memoizedState,y.refs={},Sd(o);var v=a.contextType;typeof v=="object"&&v!==null?y.context=un(v):(v=Vt(a)?ms:Nt.current,y.context=ci(o,v)),y.state=o.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(Ld(o,a,v,d),y.state=o.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(a=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),a!==y.state&&Na.enqueueReplaceState(y,y.state,null),xa(o,d,y,m),y.state=o.memoizedState),typeof y.componentDidMount=="function"&&(o.flags|=4194308)}function yi(o,a){try{var d="",m=a;do d+=be(m),m=m.return;while(m);var y=d}catch(v){y=`
Error generating stack: `+v.message+`
`+v.stack}return{value:o,source:a,stack:y,digest:null}}function zd(o,a,d){return{value:o,source:null,stack:d??null,digest:a??null}}function $d(o,a){try{console.error(a.value)}catch(d){setTimeout(function(){throw d})}}var Vk=typeof WeakMap=="function"?WeakMap:Map;function Xg(o,a,d){d=er(-1,d),d.tag=3,d.payload={element:null};var m=a.value;return d.callback=function(){Oa||(Oa=!0,eh=m),$d(o,a)},d}function Zg(o,a,d){d=er(-1,d),d.tag=3;var m=o.type.getDerivedStateFromError;if(typeof m=="function"){var y=a.value;d.payload=function(){return m(y)},d.callback=function(){$d(o,a)}}var v=o.stateNode;return v!==null&&typeof v.componentDidCatch=="function"&&(d.callback=function(){$d(o,a),typeof m!="function"&&(_r===null?_r=new Set([this]):_r.add(this));var S=a.stack;this.componentDidCatch(a.value,{componentStack:S!==null?S:""})}),d}function ey(o,a,d){var m=o.pingCache;if(m===null){m=o.pingCache=new Vk;var y=new Set;m.set(a,y)}else y=m.get(a),y===void 0&&(y=new Set,m.set(a,y));y.has(d)||(y.add(d),o=sS.bind(null,o,a,d),a.then(o,o))}function ty(o){do{var a;if((a=o.tag===13)&&(a=o.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return o;o=o.return}while(o!==null);return null}function ny(o,a,d,m,y){return(o.mode&1)===0?(o===a?o.flags|=65536:(o.flags|=128,d.flags|=131072,d.flags&=-52805,d.tag===1&&(d.alternate===null?d.tag=17:(a=er(-1,1),a.tag=2,jr(d,a,1))),d.lanes|=1),o):(o.flags|=65536,o.lanes=y,o)}var Wk=V.ReactCurrentOwner,Wt=!1;function Lt(o,a,d,m){a.child=o===null?kg(a,null,d,m):fi(a,o.child,d,m)}function ry(o,a,d,m,y){d=d.render;var v=a.ref;return mi(a,y),m=Ad(o,a,d,m,v,y),d=Md(),o!==null&&!Wt?(a.updateQueue=o.updateQueue,a.flags&=-2053,o.lanes&=~y,tr(o,a,y)):(Ue&&d&&fd(a),a.flags|=1,Lt(o,a,m,y),a.child)}function sy(o,a,d,m,y){if(o===null){var v=d.type;return typeof v=="function"&&!lh(v)&&v.defaultProps===void 0&&d.compare===null&&d.defaultProps===void 0?(a.tag=15,a.type=v,iy(o,a,v,m,y)):(o=za(d.type,null,m,a,a.mode,y),o.ref=a.ref,o.return=a,a.child=o)}if(v=o.child,(o.lanes&y)===0){var S=v.memoizedProps;if(d=d.compare,d=d!==null?d:ko,d(S,m)&&o.ref===a.ref)return tr(o,a,y)}return a.flags|=1,o=Rr(v,m),o.ref=a.ref,o.return=a,a.child=o}function iy(o,a,d,m,y){if(o!==null){var v=o.memoizedProps;if(ko(v,m)&&o.ref===a.ref)if(Wt=!1,a.pendingProps=m=v,(o.lanes&y)!==0)(o.flags&131072)!==0&&(Wt=!0);else return a.lanes=o.lanes,tr(o,a,y)}return Bd(o,a,d,m,y)}function oy(o,a,d){var m=a.pendingProps,y=m.children,v=o!==null?o.memoizedState:null;if(m.mode==="hidden")if((a.mode&1)===0)a.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ie(vi,tn),tn|=d;else{if((d&1073741824)===0)return o=v!==null?v.baseLanes|d:d,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:o,cachePool:null,transitions:null},a.updateQueue=null,Ie(vi,tn),tn|=o,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},m=v!==null?v.baseLanes:d,Ie(vi,tn),tn|=m}else v!==null?(m=v.baseLanes|d,a.memoizedState=null):m=d,Ie(vi,tn),tn|=m;return Lt(o,a,y,d),a.child}function ly(o,a){var d=a.ref;(o===null&&d!==null||o!==null&&o.ref!==d)&&(a.flags|=512,a.flags|=2097152)}function Bd(o,a,d,m,y){var v=Vt(d)?ms:Nt.current;return v=ci(a,v),mi(a,y),d=Ad(o,a,d,m,v,y),m=Md(),o!==null&&!Wt?(a.updateQueue=o.updateQueue,a.flags&=-2053,o.lanes&=~y,tr(o,a,y)):(Ue&&m&&fd(a),a.flags|=1,Lt(o,a,d,y),a.child)}function ay(o,a,d,m,y){if(Vt(d)){var v=!0;ca(a)}else v=!1;if(mi(a,y),a.stateNode===null)ja(o,a),Qg(a,d,m),Dd(a,d,m,y),m=!0;else if(o===null){var S=a.stateNode,E=a.memoizedProps;S.props=E;var j=S.context,P=d.contextType;typeof P=="object"&&P!==null?P=un(P):(P=Vt(d)?ms:Nt.current,P=ci(a,P));var W=d.getDerivedStateFromProps,q=typeof W=="function"||typeof S.getSnapshotBeforeUpdate=="function";q||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(E!==m||j!==P)&&Yg(a,S,m,P),Er=!1;var H=a.memoizedState;S.state=H,xa(a,m,S,y),j=a.memoizedState,E!==m||H!==j||Ht.current||Er?(typeof W=="function"&&(Ld(a,d,W,m),j=a.memoizedState),(E=Er||Gg(a,d,E,m,H,j,P))?(q||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(a.flags|=4194308)):(typeof S.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=m,a.memoizedState=j),S.props=m,S.state=j,S.context=P,m=E):(typeof S.componentDidMount=="function"&&(a.flags|=4194308),m=!1)}else{S=a.stateNode,Cg(o,a),E=a.memoizedProps,P=a.type===a.elementType?E:Cn(a.type,E),S.props=P,q=a.pendingProps,H=S.context,j=d.contextType,typeof j=="object"&&j!==null?j=un(j):(j=Vt(d)?ms:Nt.current,j=ci(a,j));var Y=d.getDerivedStateFromProps;(W=typeof Y=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(E!==q||H!==j)&&Yg(a,S,m,j),Er=!1,H=a.memoizedState,S.state=H,xa(a,m,S,y);var te=a.memoizedState;E!==q||H!==te||Ht.current||Er?(typeof Y=="function"&&(Ld(a,d,Y,m),te=a.memoizedState),(P=Er||Gg(a,d,P,m,H,te,j)||!1)?(W||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(m,te,j),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(m,te,j)),typeof S.componentDidUpdate=="function"&&(a.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof S.componentDidUpdate!="function"||E===o.memoizedProps&&H===o.memoizedState||(a.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||E===o.memoizedProps&&H===o.memoizedState||(a.flags|=1024),a.memoizedProps=m,a.memoizedState=te),S.props=m,S.state=te,S.context=j,m=P):(typeof S.componentDidUpdate!="function"||E===o.memoizedProps&&H===o.memoizedState||(a.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||E===o.memoizedProps&&H===o.memoizedState||(a.flags|=1024),m=!1)}return Fd(o,a,d,m,v,y)}function Fd(o,a,d,m,y,v){ly(o,a);var S=(a.flags&128)!==0;if(!m&&!S)return y&&fg(a,d,!1),tr(o,a,v);m=a.stateNode,Wk.current=a;var E=S&&typeof d.getDerivedStateFromError!="function"?null:m.render();return a.flags|=1,o!==null&&S?(a.child=fi(a,o.child,null,v),a.child=fi(a,null,E,v)):Lt(o,a,E,v),a.memoizedState=m.state,y&&fg(a,d,!0),a.child}function cy(o){var a=o.stateNode;a.pendingContext?dg(o,a.pendingContext,a.pendingContext!==a.context):a.context&&dg(o,a.context,!1),Cd(o,a.containerInfo)}function uy(o,a,d,m,y){return hi(),yd(y),a.flags|=256,Lt(o,a,d,m),a.child}var Ud={dehydrated:null,treeContext:null,retryLane:0};function Hd(o){return{baseLanes:o,cachePool:null,transitions:null}}function dy(o,a,d){var m=a.pendingProps,y=We.current,v=!1,S=(a.flags&128)!==0,E;if((E=S)||(E=o!==null&&o.memoizedState===null?!1:(y&2)!==0),E?(v=!0,a.flags&=-129):(o===null||o.memoizedState!==null)&&(y|=1),Ie(We,y&1),o===null)return gd(a),o=a.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?((a.mode&1)===0?a.lanes=1:o.data==="$!"?a.lanes=8:a.lanes=1073741824,null):(S=m.children,o=m.fallback,v?(m=a.mode,v=a.child,S={mode:"hidden",children:S},(m&1)===0&&v!==null?(v.childLanes=0,v.pendingProps=S):v=$a(S,m,0,null),o=Ns(o,m,d,null),v.return=a,o.return=a,v.sibling=o,a.child=v,a.child.memoizedState=Hd(d),a.memoizedState=Ud,o):Vd(a,S));if(y=o.memoizedState,y!==null&&(E=y.dehydrated,E!==null))return qk(o,a,S,m,E,y,d);if(v){v=m.fallback,S=a.mode,y=o.child,E=y.sibling;var j={mode:"hidden",children:m.children};return(S&1)===0&&a.child!==y?(m=a.child,m.childLanes=0,m.pendingProps=j,a.deletions=null):(m=Rr(y,j),m.subtreeFlags=y.subtreeFlags&14680064),E!==null?v=Rr(E,v):(v=Ns(v,S,d,null),v.flags|=2),v.return=a,m.return=a,m.sibling=v,a.child=m,m=v,v=a.child,S=o.child.memoizedState,S=S===null?Hd(d):{baseLanes:S.baseLanes|d,cachePool:null,transitions:S.transitions},v.memoizedState=S,v.childLanes=o.childLanes&~d,a.memoizedState=Ud,m}return v=o.child,o=v.sibling,m=Rr(v,{mode:"visible",children:m.children}),(a.mode&1)===0&&(m.lanes=d),m.return=a,m.sibling=null,o!==null&&(d=a.deletions,d===null?(a.deletions=[o],a.flags|=16):d.push(o)),a.child=m,a.memoizedState=null,m}function Vd(o,a){return a=$a({mode:"visible",children:a},o.mode,0,null),a.return=o,o.child=a}function Ea(o,a,d,m){return m!==null&&yd(m),fi(a,o.child,null,d),o=Vd(a,a.pendingProps.children),o.flags|=2,a.memoizedState=null,o}function qk(o,a,d,m,y,v,S){if(d)return a.flags&256?(a.flags&=-257,m=zd(Error(t(422))),Ea(o,a,S,m)):a.memoizedState!==null?(a.child=o.child,a.flags|=128,null):(v=m.fallback,y=a.mode,m=$a({mode:"visible",children:m.children},y,0,null),v=Ns(v,y,S,null),v.flags|=2,m.return=a,v.return=a,m.sibling=v,a.child=m,(a.mode&1)!==0&&fi(a,o.child,null,S),a.child.memoizedState=Hd(S),a.memoizedState=Ud,v);if((a.mode&1)===0)return Ea(o,a,S,null);if(y.data==="$!"){if(m=y.nextSibling&&y.nextSibling.dataset,m)var E=m.dgst;return m=E,v=Error(t(419)),m=zd(v,m,void 0),Ea(o,a,S,m)}if(E=(S&o.childLanes)!==0,Wt||E){if(m=dt,m!==null){switch(S&-S){case 4:y=2;break;case 16:y=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:y=32;break;case 536870912:y=268435456;break;default:y=0}y=(y&(m.suspendedLanes|S))!==0?0:y,y!==0&&y!==v.retryLane&&(v.retryLane=y,Zn(o,y),jn(m,o,y,-1))}return oh(),m=zd(Error(t(421))),Ea(o,a,S,m)}return y.data==="$?"?(a.flags|=128,a.child=o.child,a=iS.bind(null,o),y._reactRetry=a,null):(o=v.treeContext,en=kr(y.nextSibling),Zt=a,Ue=!0,Sn=null,o!==null&&(an[cn++]=Yn,an[cn++]=Xn,an[cn++]=gs,Yn=o.id,Xn=o.overflow,gs=a),a=Vd(a,m.children),a.flags|=4096,a)}function hy(o,a,d){o.lanes|=a;var m=o.alternate;m!==null&&(m.lanes|=a),bd(o.return,a,d)}function Wd(o,a,d,m,y){var v=o.memoizedState;v===null?o.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:m,tail:d,tailMode:y}:(v.isBackwards=a,v.rendering=null,v.renderingStartTime=0,v.last=m,v.tail=d,v.tailMode=y)}function fy(o,a,d){var m=a.pendingProps,y=m.revealOrder,v=m.tail;if(Lt(o,a,m.children,d),m=We.current,(m&2)!==0)m=m&1|2,a.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=a.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&hy(o,d,a);else if(o.tag===19)hy(o,d,a);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break e;for(;o.sibling===null;){if(o.return===null||o.return===a)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}m&=1}if(Ie(We,m),(a.mode&1)===0)a.memoizedState=null;else switch(y){case"forwards":for(d=a.child,y=null;d!==null;)o=d.alternate,o!==null&&va(o)===null&&(y=d),d=d.sibling;d=y,d===null?(y=a.child,a.child=null):(y=d.sibling,d.sibling=null),Wd(a,!1,y,d,v);break;case"backwards":for(d=null,y=a.child,a.child=null;y!==null;){if(o=y.alternate,o!==null&&va(o)===null){a.child=y;break}o=y.sibling,y.sibling=d,d=y,y=o}Wd(a,!0,d,null,v);break;case"together":Wd(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function ja(o,a){(a.mode&1)===0&&o!==null&&(o.alternate=null,a.alternate=null,a.flags|=2)}function tr(o,a,d){if(o!==null&&(a.dependencies=o.dependencies),bs|=a.lanes,(d&a.childLanes)===0)return null;if(o!==null&&a.child!==o.child)throw Error(t(153));if(a.child!==null){for(o=a.child,d=Rr(o,o.pendingProps),a.child=d,d.return=a;o.sibling!==null;)o=o.sibling,d=d.sibling=Rr(o,o.pendingProps),d.return=a;d.sibling=null}return a.child}function Kk(o,a,d){switch(a.tag){case 3:cy(a),hi();break;case 5:jg(a);break;case 1:Vt(a.type)&&ca(a);break;case 4:Cd(a,a.stateNode.containerInfo);break;case 10:var m=a.type._context,y=a.memoizedProps.value;Ie(ma,m._currentValue),m._currentValue=y;break;case 13:if(m=a.memoizedState,m!==null)return m.dehydrated!==null?(Ie(We,We.current&1),a.flags|=128,null):(d&a.child.childLanes)!==0?dy(o,a,d):(Ie(We,We.current&1),o=tr(o,a,d),o!==null?o.sibling:null);Ie(We,We.current&1);break;case 19:if(m=(d&a.childLanes)!==0,(o.flags&128)!==0){if(m)return fy(o,a,d);a.flags|=128}if(y=a.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),Ie(We,We.current),m)break;return null;case 22:case 23:return a.lanes=0,oy(o,a,d)}return tr(o,a,d)}var py,qd,my,gy;py=function(o,a){for(var d=a.child;d!==null;){if(d.tag===5||d.tag===6)o.appendChild(d.stateNode);else if(d.tag!==4&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===a)break;for(;d.sibling===null;){if(d.return===null||d.return===a)return;d=d.return}d.sibling.return=d.return,d=d.sibling}},qd=function(){},my=function(o,a,d,m){var y=o.memoizedProps;if(y!==m){o=a.stateNode,vs(Ln.current);var v=null;switch(d){case"input":y=ds(o,y),m=ds(o,m),v=[];break;case"select":y=X({},y,{value:void 0}),m=X({},m,{value:void 0}),v=[];break;case"textarea":y=ro(o,y),m=ro(o,m),v=[];break;default:typeof y.onClick!="function"&&typeof m.onClick=="function"&&(o.onclick=oa)}Eu(d,m);var S;d=null;for(P in y)if(!m.hasOwnProperty(P)&&y.hasOwnProperty(P)&&y[P]!=null)if(P==="style"){var E=y[P];for(S in E)E.hasOwnProperty(S)&&(d||(d={}),d[S]="")}else P!=="dangerouslySetInnerHTML"&&P!=="children"&&P!=="suppressContentEditableWarning"&&P!=="suppressHydrationWarning"&&P!=="autoFocus"&&(s.hasOwnProperty(P)?v||(v=[]):(v=v||[]).push(P,null));for(P in m){var j=m[P];if(E=y!=null?y[P]:void 0,m.hasOwnProperty(P)&&j!==E&&(j!=null||E!=null))if(P==="style")if(E){for(S in E)!E.hasOwnProperty(S)||j&&j.hasOwnProperty(S)||(d||(d={}),d[S]="");for(S in j)j.hasOwnProperty(S)&&E[S]!==j[S]&&(d||(d={}),d[S]=j[S])}else d||(v||(v=[]),v.push(P,d)),d=j;else P==="dangerouslySetInnerHTML"?(j=j?j.__html:void 0,E=E?E.__html:void 0,j!=null&&E!==j&&(v=v||[]).push(P,j)):P==="children"?typeof j!="string"&&typeof j!="number"||(v=v||[]).push(P,""+j):P!=="suppressContentEditableWarning"&&P!=="suppressHydrationWarning"&&(s.hasOwnProperty(P)?(j!=null&&P==="onScroll"&&$e("scroll",o),v||E===j||(v=[])):(v=v||[]).push(P,j))}d&&(v=v||[]).push("style",d);var P=v;(a.updateQueue=P)&&(a.flags|=4)}},gy=function(o,a,d,m){d!==m&&(a.flags|=4)};function Do(o,a){if(!Ue)switch(o.tailMode){case"hidden":a=o.tail;for(var d=null;a!==null;)a.alternate!==null&&(d=a),a=a.sibling;d===null?o.tail=null:d.sibling=null;break;case"collapsed":d=o.tail;for(var m=null;d!==null;)d.alternate!==null&&(m=d),d=d.sibling;m===null?a||o.tail===null?o.tail=null:o.tail.sibling=null:m.sibling=null}}function jt(o){var a=o.alternate!==null&&o.alternate.child===o.child,d=0,m=0;if(a)for(var y=o.child;y!==null;)d|=y.lanes|y.childLanes,m|=y.subtreeFlags&14680064,m|=y.flags&14680064,y.return=o,y=y.sibling;else for(y=o.child;y!==null;)d|=y.lanes|y.childLanes,m|=y.subtreeFlags,m|=y.flags,y.return=o,y=y.sibling;return o.subtreeFlags|=m,o.childLanes=d,a}function Jk(o,a,d){var m=a.pendingProps;switch(pd(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return jt(a),null;case 1:return Vt(a.type)&&aa(),jt(a),null;case 3:return m=a.stateNode,gi(),Be(Ht),Be(Nt),jd(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(o===null||o.child===null)&&(fa(a)?a.flags|=4:o===null||o.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Sn!==null&&(rh(Sn),Sn=null))),qd(o,a),jt(a),null;case 5:Nd(a);var y=vs(Oo.current);if(d=a.type,o!==null&&a.stateNode!=null)my(o,a,d,m,y),o.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!m){if(a.stateNode===null)throw Error(t(166));return jt(a),null}if(o=vs(Ln.current),fa(a)){m=a.stateNode,d=a.type;var v=a.memoizedProps;switch(m[In]=a,m[jo]=v,o=(a.mode&1)!==0,d){case"dialog":$e("cancel",m),$e("close",m);break;case"iframe":case"object":case"embed":$e("load",m);break;case"video":case"audio":for(y=0;y<Co.length;y++)$e(Co[y],m);break;case"source":$e("error",m);break;case"img":case"image":case"link":$e("error",m),$e("load",m);break;case"details":$e("toggle",m);break;case"input":hs(m,v),$e("invalid",m);break;case"select":m._wrapperState={wasMultiple:!!v.multiple},$e("invalid",m);break;case"textarea":Il(m,v),$e("invalid",m)}Eu(d,v),y=null;for(var S in v)if(v.hasOwnProperty(S)){var E=v[S];S==="children"?typeof E=="string"?m.textContent!==E&&(v.suppressHydrationWarning!==!0&&ia(m.textContent,E,o),y=["children",E]):typeof E=="number"&&m.textContent!==""+E&&(v.suppressHydrationWarning!==!0&&ia(m.textContent,E,o),y=["children",""+E]):s.hasOwnProperty(S)&&E!=null&&S==="onScroll"&&$e("scroll",m)}switch(d){case"input":On(m),Pl(m,v,!0);break;case"textarea":On(m),Ll(m);break;case"select":case"option":break;default:typeof v.onClick=="function"&&(m.onclick=oa)}m=y,a.updateQueue=m,m!==null&&(a.flags|=4)}else{S=y.nodeType===9?y:y.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=Dl(d)),o==="http://www.w3.org/1999/xhtml"?d==="script"?(o=S.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof m.is=="string"?o=S.createElement(d,{is:m.is}):(o=S.createElement(d),d==="select"&&(S=o,m.multiple?S.multiple=!0:m.size&&(S.size=m.size))):o=S.createElementNS(o,d),o[In]=a,o[jo]=m,py(o,a,!1,!1),a.stateNode=o;e:{switch(S=ju(d,m),d){case"dialog":$e("cancel",o),$e("close",o),y=m;break;case"iframe":case"object":case"embed":$e("load",o),y=m;break;case"video":case"audio":for(y=0;y<Co.length;y++)$e(Co[y],o);y=m;break;case"source":$e("error",o),y=m;break;case"img":case"image":case"link":$e("error",o),$e("load",o),y=m;break;case"details":$e("toggle",o),y=m;break;case"input":hs(o,m),y=ds(o,m),$e("invalid",o);break;case"option":y=m;break;case"select":o._wrapperState={wasMultiple:!!m.multiple},y=X({},m,{value:void 0}),$e("invalid",o);break;case"textarea":Il(o,m),y=ro(o,m),$e("invalid",o);break;default:y=m}Eu(d,y),E=y;for(v in E)if(E.hasOwnProperty(v)){var j=E[v];v==="style"?zl(o,j):v==="dangerouslySetInnerHTML"?(j=j?j.__html:void 0,j!=null&&io(o,j)):v==="children"?typeof j=="string"?(d!=="textarea"||j!=="")&&Z(o,j):typeof j=="number"&&Z(o,""+j):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(s.hasOwnProperty(v)?j!=null&&v==="onScroll"&&$e("scroll",o):j!=null&&I(o,v,j,S))}switch(d){case"input":On(o),Pl(o,m,!1);break;case"textarea":On(o),Ll(o);break;case"option":m.value!=null&&o.setAttribute("value",""+Ne(m.value));break;case"select":o.multiple=!!m.multiple,v=m.value,v!=null?Jn(o,!!m.multiple,v,!1):m.defaultValue!=null&&Jn(o,!!m.multiple,m.defaultValue,!0);break;default:typeof y.onClick=="function"&&(o.onclick=oa)}switch(d){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}}m&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return jt(a),null;case 6:if(o&&a.stateNode!=null)gy(o,a,o.memoizedProps,m);else{if(typeof m!="string"&&a.stateNode===null)throw Error(t(166));if(d=vs(Oo.current),vs(Ln.current),fa(a)){if(m=a.stateNode,d=a.memoizedProps,m[In]=a,(v=m.nodeValue!==d)&&(o=Zt,o!==null))switch(o.tag){case 3:ia(m.nodeValue,d,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&ia(m.nodeValue,d,(o.mode&1)!==0)}v&&(a.flags|=4)}else m=(d.nodeType===9?d:d.ownerDocument).createTextNode(m),m[In]=a,a.stateNode=m}return jt(a),null;case 13:if(Be(We),m=a.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(Ue&&en!==null&&(a.mode&1)!==0&&(a.flags&128)===0)vg(),hi(),a.flags|=98560,v=!1;else if(v=fa(a),m!==null&&m.dehydrated!==null){if(o===null){if(!v)throw Error(t(318));if(v=a.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(t(317));v[In]=a}else hi(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;jt(a),v=!1}else Sn!==null&&(rh(Sn),Sn=null),v=!0;if(!v)return a.flags&65536?a:null}return(a.flags&128)!==0?(a.lanes=d,a):(m=m!==null,m!==(o!==null&&o.memoizedState!==null)&&m&&(a.child.flags|=8192,(a.mode&1)!==0&&(o===null||(We.current&1)!==0?lt===0&&(lt=3):oh())),a.updateQueue!==null&&(a.flags|=4),jt(a),null);case 4:return gi(),qd(o,a),o===null&&No(a.stateNode.containerInfo),jt(a),null;case 10:return wd(a.type._context),jt(a),null;case 17:return Vt(a.type)&&aa(),jt(a),null;case 19:if(Be(We),v=a.memoizedState,v===null)return jt(a),null;if(m=(a.flags&128)!==0,S=v.rendering,S===null)if(m)Do(v,!1);else{if(lt!==0||o!==null&&(o.flags&128)!==0)for(o=a.child;o!==null;){if(S=va(o),S!==null){for(a.flags|=128,Do(v,!1),m=S.updateQueue,m!==null&&(a.updateQueue=m,a.flags|=4),a.subtreeFlags=0,m=d,d=a.child;d!==null;)v=d,o=m,v.flags&=14680066,S=v.alternate,S===null?(v.childLanes=0,v.lanes=o,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=S.childLanes,v.lanes=S.lanes,v.child=S.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=S.memoizedProps,v.memoizedState=S.memoizedState,v.updateQueue=S.updateQueue,v.type=S.type,o=S.dependencies,v.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),d=d.sibling;return Ie(We,We.current&1|2),a.child}o=o.sibling}v.tail!==null&&et()>wi&&(a.flags|=128,m=!0,Do(v,!1),a.lanes=4194304)}else{if(!m)if(o=va(S),o!==null){if(a.flags|=128,m=!0,d=o.updateQueue,d!==null&&(a.updateQueue=d,a.flags|=4),Do(v,!0),v.tail===null&&v.tailMode==="hidden"&&!S.alternate&&!Ue)return jt(a),null}else 2*et()-v.renderingStartTime>wi&&d!==1073741824&&(a.flags|=128,m=!0,Do(v,!1),a.lanes=4194304);v.isBackwards?(S.sibling=a.child,a.child=S):(d=v.last,d!==null?d.sibling=S:a.child=S,v.last=S)}return v.tail!==null?(a=v.tail,v.rendering=a,v.tail=a.sibling,v.renderingStartTime=et(),a.sibling=null,d=We.current,Ie(We,m?d&1|2:d&1),a):(jt(a),null);case 22:case 23:return ih(),m=a.memoizedState!==null,o!==null&&o.memoizedState!==null!==m&&(a.flags|=8192),m&&(a.mode&1)!==0?(tn&1073741824)!==0&&(jt(a),a.subtreeFlags&6&&(a.flags|=8192)):jt(a),null;case 24:return null;case 25:return null}throw Error(t(156,a.tag))}function Gk(o,a){switch(pd(a),a.tag){case 1:return Vt(a.type)&&aa(),o=a.flags,o&65536?(a.flags=o&-65537|128,a):null;case 3:return gi(),Be(Ht),Be(Nt),jd(),o=a.flags,(o&65536)!==0&&(o&128)===0?(a.flags=o&-65537|128,a):null;case 5:return Nd(a),null;case 13:if(Be(We),o=a.memoizedState,o!==null&&o.dehydrated!==null){if(a.alternate===null)throw Error(t(340));hi()}return o=a.flags,o&65536?(a.flags=o&-65537|128,a):null;case 19:return Be(We),null;case 4:return gi(),null;case 10:return wd(a.type._context),null;case 22:case 23:return ih(),null;case 24:return null;default:return null}}var Ta=!1,Tt=!1,Qk=typeof WeakSet=="function"?WeakSet:Set,ee=null;function xi(o,a){var d=o.ref;if(d!==null)if(typeof d=="function")try{d(null)}catch(m){Je(o,a,m)}else d.current=null}function Kd(o,a,d){try{d()}catch(m){Je(o,a,m)}}var yy=!1;function Yk(o,a){if(id=Jl,o=Gm(),Yu(o)){if("selectionStart"in o)var d={start:o.selectionStart,end:o.selectionEnd};else e:{d=(d=o.ownerDocument)&&d.defaultView||window;var m=d.getSelection&&d.getSelection();if(m&&m.rangeCount!==0){d=m.anchorNode;var y=m.anchorOffset,v=m.focusNode;m=m.focusOffset;try{d.nodeType,v.nodeType}catch{d=null;break e}var S=0,E=-1,j=-1,P=0,W=0,q=o,H=null;t:for(;;){for(var Y;q!==d||y!==0&&q.nodeType!==3||(E=S+y),q!==v||m!==0&&q.nodeType!==3||(j=S+m),q.nodeType===3&&(S+=q.nodeValue.length),(Y=q.firstChild)!==null;)H=q,q=Y;for(;;){if(q===o)break t;if(H===d&&++P===y&&(E=S),H===v&&++W===m&&(j=S),(Y=q.nextSibling)!==null)break;q=H,H=q.parentNode}q=Y}d=E===-1||j===-1?null:{start:E,end:j}}else d=null}d=d||{start:0,end:0}}else d=null;for(od={focusedElem:o,selectionRange:d},Jl=!1,ee=a;ee!==null;)if(a=ee,o=a.child,(a.subtreeFlags&1028)!==0&&o!==null)o.return=a,ee=o;else for(;ee!==null;){a=ee;try{var te=a.alternate;if((a.flags&1024)!==0)switch(a.tag){case 0:case 11:case 15:break;case 1:if(te!==null){var re=te.memoizedProps,tt=te.memoizedState,O=a.stateNode,_=O.getSnapshotBeforeUpdate(a.elementType===a.type?re:Cn(a.type,re),tt);O.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var R=a.stateNode.containerInfo;R.nodeType===1?R.textContent="":R.nodeType===9&&R.documentElement&&R.removeChild(R.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(J){Je(a,a.return,J)}if(o=a.sibling,o!==null){o.return=a.return,ee=o;break}ee=a.return}return te=yy,yy=!1,te}function zo(o,a,d){var m=a.updateQueue;if(m=m!==null?m.lastEffect:null,m!==null){var y=m=m.next;do{if((y.tag&o)===o){var v=y.destroy;y.destroy=void 0,v!==void 0&&Kd(a,d,v)}y=y.next}while(y!==m)}}function _a(o,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var d=a=a.next;do{if((d.tag&o)===o){var m=d.create;d.destroy=m()}d=d.next}while(d!==a)}}function Jd(o){var a=o.ref;if(a!==null){var d=o.stateNode;switch(o.tag){case 5:o=d;break;default:o=d}typeof a=="function"?a(o):a.current=o}}function xy(o){var a=o.alternate;a!==null&&(o.alternate=null,xy(a)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(a=o.stateNode,a!==null&&(delete a[In],delete a[jo],delete a[ud],delete a[Rk],delete a[Pk])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function vy(o){return o.tag===5||o.tag===3||o.tag===4}function wy(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||vy(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function Gd(o,a,d){var m=o.tag;if(m===5||m===6)o=o.stateNode,a?d.nodeType===8?d.parentNode.insertBefore(o,a):d.insertBefore(o,a):(d.nodeType===8?(a=d.parentNode,a.insertBefore(o,d)):(a=d,a.appendChild(o)),d=d._reactRootContainer,d!=null||a.onclick!==null||(a.onclick=oa));else if(m!==4&&(o=o.child,o!==null))for(Gd(o,a,d),o=o.sibling;o!==null;)Gd(o,a,d),o=o.sibling}function Qd(o,a,d){var m=o.tag;if(m===5||m===6)o=o.stateNode,a?d.insertBefore(o,a):d.appendChild(o);else if(m!==4&&(o=o.child,o!==null))for(Qd(o,a,d),o=o.sibling;o!==null;)Qd(o,a,d),o=o.sibling}var wt=null,Nn=!1;function Tr(o,a,d){for(d=d.child;d!==null;)by(o,a,d),d=d.sibling}function by(o,a,d){if(Pn&&typeof Pn.onCommitFiberUnmount=="function")try{Pn.onCommitFiberUnmount(Ul,d)}catch{}switch(d.tag){case 5:Tt||xi(d,a);case 6:var m=wt,y=Nn;wt=null,Tr(o,a,d),wt=m,Nn=y,wt!==null&&(Nn?(o=wt,d=d.stateNode,o.nodeType===8?o.parentNode.removeChild(d):o.removeChild(d)):wt.removeChild(d.stateNode));break;case 18:wt!==null&&(Nn?(o=wt,d=d.stateNode,o.nodeType===8?cd(o.parentNode,d):o.nodeType===1&&cd(o,d),go(o)):cd(wt,d.stateNode));break;case 4:m=wt,y=Nn,wt=d.stateNode.containerInfo,Nn=!0,Tr(o,a,d),wt=m,Nn=y;break;case 0:case 11:case 14:case 15:if(!Tt&&(m=d.updateQueue,m!==null&&(m=m.lastEffect,m!==null))){y=m=m.next;do{var v=y,S=v.destroy;v=v.tag,S!==void 0&&((v&2)!==0||(v&4)!==0)&&Kd(d,a,S),y=y.next}while(y!==m)}Tr(o,a,d);break;case 1:if(!Tt&&(xi(d,a),m=d.stateNode,typeof m.componentWillUnmount=="function"))try{m.props=d.memoizedProps,m.state=d.memoizedState,m.componentWillUnmount()}catch(E){Je(d,a,E)}Tr(o,a,d);break;case 21:Tr(o,a,d);break;case 22:d.mode&1?(Tt=(m=Tt)||d.memoizedState!==null,Tr(o,a,d),Tt=m):Tr(o,a,d);break;default:Tr(o,a,d)}}function ky(o){var a=o.updateQueue;if(a!==null){o.updateQueue=null;var d=o.stateNode;d===null&&(d=o.stateNode=new Qk),a.forEach(function(m){var y=oS.bind(null,o,m);d.has(m)||(d.add(m),m.then(y,y))})}}function En(o,a){var d=a.deletions;if(d!==null)for(var m=0;m<d.length;m++){var y=d[m];try{var v=o,S=a,E=S;e:for(;E!==null;){switch(E.tag){case 5:wt=E.stateNode,Nn=!1;break e;case 3:wt=E.stateNode.containerInfo,Nn=!0;break e;case 4:wt=E.stateNode.containerInfo,Nn=!0;break e}E=E.return}if(wt===null)throw Error(t(160));by(v,S,y),wt=null,Nn=!1;var j=y.alternate;j!==null&&(j.return=null),y.return=null}catch(P){Je(y,a,P)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)Sy(a,o),a=a.sibling}function Sy(o,a){var d=o.alternate,m=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(En(a,o),zn(o),m&4){try{zo(3,o,o.return),_a(3,o)}catch(re){Je(o,o.return,re)}try{zo(5,o,o.return)}catch(re){Je(o,o.return,re)}}break;case 1:En(a,o),zn(o),m&512&&d!==null&&xi(d,d.return);break;case 5:if(En(a,o),zn(o),m&512&&d!==null&&xi(d,d.return),o.flags&32){var y=o.stateNode;try{Z(y,"")}catch(re){Je(o,o.return,re)}}if(m&4&&(y=o.stateNode,y!=null)){var v=o.memoizedProps,S=d!==null?d.memoizedProps:v,E=o.type,j=o.updateQueue;if(o.updateQueue=null,j!==null)try{E==="input"&&v.type==="radio"&&v.name!=null&&pr(y,v),ju(E,S);var P=ju(E,v);for(S=0;S<j.length;S+=2){var W=j[S],q=j[S+1];W==="style"?zl(y,q):W==="dangerouslySetInnerHTML"?io(y,q):W==="children"?Z(y,q):I(y,W,q,P)}switch(E){case"input":no(y,v);break;case"textarea":so(y,v);break;case"select":var H=y._wrapperState.wasMultiple;y._wrapperState.wasMultiple=!!v.multiple;var Y=v.value;Y!=null?Jn(y,!!v.multiple,Y,!1):H!==!!v.multiple&&(v.defaultValue!=null?Jn(y,!!v.multiple,v.defaultValue,!0):Jn(y,!!v.multiple,v.multiple?[]:"",!1))}y[jo]=v}catch(re){Je(o,o.return,re)}}break;case 6:if(En(a,o),zn(o),m&4){if(o.stateNode===null)throw Error(t(162));y=o.stateNode,v=o.memoizedProps;try{y.nodeValue=v}catch(re){Je(o,o.return,re)}}break;case 3:if(En(a,o),zn(o),m&4&&d!==null&&d.memoizedState.isDehydrated)try{go(a.containerInfo)}catch(re){Je(o,o.return,re)}break;case 4:En(a,o),zn(o);break;case 13:En(a,o),zn(o),y=o.child,y.flags&8192&&(v=y.memoizedState!==null,y.stateNode.isHidden=v,!v||y.alternate!==null&&y.alternate.memoizedState!==null||(Zd=et())),m&4&&ky(o);break;case 22:if(W=d!==null&&d.memoizedState!==null,o.mode&1?(Tt=(P=Tt)||W,En(a,o),Tt=P):En(a,o),zn(o),m&8192){if(P=o.memoizedState!==null,(o.stateNode.isHidden=P)&&!W&&(o.mode&1)!==0)for(ee=o,W=o.child;W!==null;){for(q=ee=W;ee!==null;){switch(H=ee,Y=H.child,H.tag){case 0:case 11:case 14:case 15:zo(4,H,H.return);break;case 1:xi(H,H.return);var te=H.stateNode;if(typeof te.componentWillUnmount=="function"){m=H,d=H.return;try{a=m,te.props=a.memoizedProps,te.state=a.memoizedState,te.componentWillUnmount()}catch(re){Je(m,d,re)}}break;case 5:xi(H,H.return);break;case 22:if(H.memoizedState!==null){Ey(q);continue}}Y!==null?(Y.return=H,ee=Y):Ey(q)}W=W.sibling}e:for(W=null,q=o;;){if(q.tag===5){if(W===null){W=q;try{y=q.stateNode,P?(v=y.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none"):(E=q.stateNode,j=q.memoizedProps.style,S=j!=null&&j.hasOwnProperty("display")?j.display:null,E.style.display=Rn("display",S))}catch(re){Je(o,o.return,re)}}}else if(q.tag===6){if(W===null)try{q.stateNode.nodeValue=P?"":q.memoizedProps}catch(re){Je(o,o.return,re)}}else if((q.tag!==22&&q.tag!==23||q.memoizedState===null||q===o)&&q.child!==null){q.child.return=q,q=q.child;continue}if(q===o)break e;for(;q.sibling===null;){if(q.return===null||q.return===o)break e;W===q&&(W=null),q=q.return}W===q&&(W=null),q.sibling.return=q.return,q=q.sibling}}break;case 19:En(a,o),zn(o),m&4&&ky(o);break;case 21:break;default:En(a,o),zn(o)}}function zn(o){var a=o.flags;if(a&2){try{e:{for(var d=o.return;d!==null;){if(vy(d)){var m=d;break e}d=d.return}throw Error(t(160))}switch(m.tag){case 5:var y=m.stateNode;m.flags&32&&(Z(y,""),m.flags&=-33);var v=wy(o);Qd(o,v,y);break;case 3:case 4:var S=m.stateNode.containerInfo,E=wy(o);Gd(o,E,S);break;default:throw Error(t(161))}}catch(j){Je(o,o.return,j)}o.flags&=-3}a&4096&&(o.flags&=-4097)}function Xk(o,a,d){ee=o,Cy(o)}function Cy(o,a,d){for(var m=(o.mode&1)!==0;ee!==null;){var y=ee,v=y.child;if(y.tag===22&&m){var S=y.memoizedState!==null||Ta;if(!S){var E=y.alternate,j=E!==null&&E.memoizedState!==null||Tt;E=Ta;var P=Tt;if(Ta=S,(Tt=j)&&!P)for(ee=y;ee!==null;)S=ee,j=S.child,S.tag===22&&S.memoizedState!==null?jy(y):j!==null?(j.return=S,ee=j):jy(y);for(;v!==null;)ee=v,Cy(v),v=v.sibling;ee=y,Ta=E,Tt=P}Ny(o)}else(y.subtreeFlags&8772)!==0&&v!==null?(v.return=y,ee=v):Ny(o)}}function Ny(o){for(;ee!==null;){var a=ee;if((a.flags&8772)!==0){var d=a.alternate;try{if((a.flags&8772)!==0)switch(a.tag){case 0:case 11:case 15:Tt||_a(5,a);break;case 1:var m=a.stateNode;if(a.flags&4&&!Tt)if(d===null)m.componentDidMount();else{var y=a.elementType===a.type?d.memoizedProps:Cn(a.type,d.memoizedProps);m.componentDidUpdate(y,d.memoizedState,m.__reactInternalSnapshotBeforeUpdate)}var v=a.updateQueue;v!==null&&Eg(a,v,m);break;case 3:var S=a.updateQueue;if(S!==null){if(d=null,a.child!==null)switch(a.child.tag){case 5:d=a.child.stateNode;break;case 1:d=a.child.stateNode}Eg(a,S,d)}break;case 5:var E=a.stateNode;if(d===null&&a.flags&4){d=E;var j=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":j.autoFocus&&d.focus();break;case"img":j.src&&(d.src=j.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var P=a.alternate;if(P!==null){var W=P.memoizedState;if(W!==null){var q=W.dehydrated;q!==null&&go(q)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Tt||a.flags&512&&Jd(a)}catch(H){Je(a,a.return,H)}}if(a===o){ee=null;break}if(d=a.sibling,d!==null){d.return=a.return,ee=d;break}ee=a.return}}function Ey(o){for(;ee!==null;){var a=ee;if(a===o){ee=null;break}var d=a.sibling;if(d!==null){d.return=a.return,ee=d;break}ee=a.return}}function jy(o){for(;ee!==null;){var a=ee;try{switch(a.tag){case 0:case 11:case 15:var d=a.return;try{_a(4,a)}catch(j){Je(a,d,j)}break;case 1:var m=a.stateNode;if(typeof m.componentDidMount=="function"){var y=a.return;try{m.componentDidMount()}catch(j){Je(a,y,j)}}var v=a.return;try{Jd(a)}catch(j){Je(a,v,j)}break;case 5:var S=a.return;try{Jd(a)}catch(j){Je(a,S,j)}}}catch(j){Je(a,a.return,j)}if(a===o){ee=null;break}var E=a.sibling;if(E!==null){E.return=a.return,ee=E;break}ee=a.return}}var Zk=Math.ceil,Aa=V.ReactCurrentDispatcher,Yd=V.ReactCurrentOwner,hn=V.ReactCurrentBatchConfig,Ee=0,dt=null,nt=null,bt=0,tn=0,vi=Sr(0),lt=0,$o=null,bs=0,Ma=0,Xd=0,Bo=null,qt=null,Zd=0,wi=1/0,nr=null,Oa=!1,eh=null,_r=null,Ra=!1,Ar=null,Pa=0,Fo=0,th=null,Ia=-1,La=0;function Dt(){return(Ee&6)!==0?et():Ia!==-1?Ia:Ia=et()}function Mr(o){return(o.mode&1)===0?1:(Ee&2)!==0&&bt!==0?bt&-bt:Lk.transition!==null?(La===0&&(La=wm()),La):(o=Me,o!==0||(o=window.event,o=o===void 0?16:_m(o.type)),o)}function jn(o,a,d,m){if(50<Fo)throw Fo=0,th=null,Error(t(185));uo(o,d,m),((Ee&2)===0||o!==dt)&&(o===dt&&((Ee&2)===0&&(Ma|=d),lt===4&&Or(o,bt)),Kt(o,m),d===1&&Ee===0&&(a.mode&1)===0&&(wi=et()+500,ua&&Nr()))}function Kt(o,a){var d=o.callbackNode;Lb(o,a);var m=Wl(o,o===dt?bt:0);if(m===0)d!==null&&ym(d),o.callbackNode=null,o.callbackPriority=0;else if(a=m&-m,o.callbackPriority!==a){if(d!=null&&ym(d),a===1)o.tag===0?Ik(_y.bind(null,o)):pg(_y.bind(null,o)),Mk(function(){(Ee&6)===0&&Nr()}),d=null;else{switch(bm(m)){case 1:d=Pu;break;case 4:d=xm;break;case 16:d=Fl;break;case 536870912:d=vm;break;default:d=Fl}d=Dy(d,Ty.bind(null,o))}o.callbackPriority=a,o.callbackNode=d}}function Ty(o,a){if(Ia=-1,La=0,(Ee&6)!==0)throw Error(t(327));var d=o.callbackNode;if(bi()&&o.callbackNode!==d)return null;var m=Wl(o,o===dt?bt:0);if(m===0)return null;if((m&30)!==0||(m&o.expiredLanes)!==0||a)a=Da(o,m);else{a=m;var y=Ee;Ee|=2;var v=My();(dt!==o||bt!==a)&&(nr=null,wi=et()+500,Ss(o,a));do try{nS();break}catch(E){Ay(o,E)}while(!0);vd(),Aa.current=v,Ee=y,nt!==null?a=0:(dt=null,bt=0,a=lt)}if(a!==0){if(a===2&&(y=Iu(o),y!==0&&(m=y,a=nh(o,y))),a===1)throw d=$o,Ss(o,0),Or(o,m),Kt(o,et()),d;if(a===6)Or(o,m);else{if(y=o.current.alternate,(m&30)===0&&!eS(y)&&(a=Da(o,m),a===2&&(v=Iu(o),v!==0&&(m=v,a=nh(o,v))),a===1))throw d=$o,Ss(o,0),Or(o,m),Kt(o,et()),d;switch(o.finishedWork=y,o.finishedLanes=m,a){case 0:case 1:throw Error(t(345));case 2:Cs(o,qt,nr);break;case 3:if(Or(o,m),(m&130023424)===m&&(a=Zd+500-et(),10<a)){if(Wl(o,0)!==0)break;if(y=o.suspendedLanes,(y&m)!==m){Dt(),o.pingedLanes|=o.suspendedLanes&y;break}o.timeoutHandle=ad(Cs.bind(null,o,qt,nr),a);break}Cs(o,qt,nr);break;case 4:if(Or(o,m),(m&4194240)===m)break;for(a=o.eventTimes,y=-1;0<m;){var S=31-bn(m);v=1<<S,S=a[S],S>y&&(y=S),m&=~v}if(m=y,m=et()-m,m=(120>m?120:480>m?480:1080>m?1080:1920>m?1920:3e3>m?3e3:4320>m?4320:1960*Zk(m/1960))-m,10<m){o.timeoutHandle=ad(Cs.bind(null,o,qt,nr),m);break}Cs(o,qt,nr);break;case 5:Cs(o,qt,nr);break;default:throw Error(t(329))}}}return Kt(o,et()),o.callbackNode===d?Ty.bind(null,o):null}function nh(o,a){var d=Bo;return o.current.memoizedState.isDehydrated&&(Ss(o,a).flags|=256),o=Da(o,a),o!==2&&(a=qt,qt=d,a!==null&&rh(a)),o}function rh(o){qt===null?qt=o:qt.push.apply(qt,o)}function eS(o){for(var a=o;;){if(a.flags&16384){var d=a.updateQueue;if(d!==null&&(d=d.stores,d!==null))for(var m=0;m<d.length;m++){var y=d[m],v=y.getSnapshot;y=y.value;try{if(!kn(v(),y))return!1}catch{return!1}}}if(d=a.child,a.subtreeFlags&16384&&d!==null)d.return=a,a=d;else{if(a===o)break;for(;a.sibling===null;){if(a.return===null||a.return===o)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Or(o,a){for(a&=~Xd,a&=~Ma,o.suspendedLanes|=a,o.pingedLanes&=~a,o=o.expirationTimes;0<a;){var d=31-bn(a),m=1<<d;o[d]=-1,a&=~m}}function _y(o){if((Ee&6)!==0)throw Error(t(327));bi();var a=Wl(o,0);if((a&1)===0)return Kt(o,et()),null;var d=Da(o,a);if(o.tag!==0&&d===2){var m=Iu(o);m!==0&&(a=m,d=nh(o,m))}if(d===1)throw d=$o,Ss(o,0),Or(o,a),Kt(o,et()),d;if(d===6)throw Error(t(345));return o.finishedWork=o.current.alternate,o.finishedLanes=a,Cs(o,qt,nr),Kt(o,et()),null}function sh(o,a){var d=Ee;Ee|=1;try{return o(a)}finally{Ee=d,Ee===0&&(wi=et()+500,ua&&Nr())}}function ks(o){Ar!==null&&Ar.tag===0&&(Ee&6)===0&&bi();var a=Ee;Ee|=1;var d=hn.transition,m=Me;try{if(hn.transition=null,Me=1,o)return o()}finally{Me=m,hn.transition=d,Ee=a,(Ee&6)===0&&Nr()}}function ih(){tn=vi.current,Be(vi)}function Ss(o,a){o.finishedWork=null,o.finishedLanes=0;var d=o.timeoutHandle;if(d!==-1&&(o.timeoutHandle=-1,Ak(d)),nt!==null)for(d=nt.return;d!==null;){var m=d;switch(pd(m),m.tag){case 1:m=m.type.childContextTypes,m!=null&&aa();break;case 3:gi(),Be(Ht),Be(Nt),jd();break;case 5:Nd(m);break;case 4:gi();break;case 13:Be(We);break;case 19:Be(We);break;case 10:wd(m.type._context);break;case 22:case 23:ih()}d=d.return}if(dt=o,nt=o=Rr(o.current,null),bt=tn=a,lt=0,$o=null,Xd=Ma=bs=0,qt=Bo=null,xs!==null){for(a=0;a<xs.length;a++)if(d=xs[a],m=d.interleaved,m!==null){d.interleaved=null;var y=m.next,v=d.pending;if(v!==null){var S=v.next;v.next=y,m.next=S}d.pending=m}xs=null}return o}function Ay(o,a){do{var d=nt;try{if(vd(),wa.current=Ca,ba){for(var m=qe.memoizedState;m!==null;){var y=m.queue;y!==null&&(y.pending=null),m=m.next}ba=!1}if(ws=0,ut=ot=qe=null,Ro=!1,Po=0,Yd.current=null,d===null||d.return===null){lt=1,$o=a,nt=null;break}e:{var v=o,S=d.return,E=d,j=a;if(a=bt,E.flags|=32768,j!==null&&typeof j=="object"&&typeof j.then=="function"){var P=j,W=E,q=W.tag;if((W.mode&1)===0&&(q===0||q===11||q===15)){var H=W.alternate;H?(W.updateQueue=H.updateQueue,W.memoizedState=H.memoizedState,W.lanes=H.lanes):(W.updateQueue=null,W.memoizedState=null)}var Y=ty(S);if(Y!==null){Y.flags&=-257,ny(Y,S,E,v,a),Y.mode&1&&ey(v,P,a),a=Y,j=P;var te=a.updateQueue;if(te===null){var re=new Set;re.add(j),a.updateQueue=re}else te.add(j);break e}else{if((a&1)===0){ey(v,P,a),oh();break e}j=Error(t(426))}}else if(Ue&&E.mode&1){var tt=ty(S);if(tt!==null){(tt.flags&65536)===0&&(tt.flags|=256),ny(tt,S,E,v,a),yd(yi(j,E));break e}}v=j=yi(j,E),lt!==4&&(lt=2),Bo===null?Bo=[v]:Bo.push(v),v=S;do{switch(v.tag){case 3:v.flags|=65536,a&=-a,v.lanes|=a;var O=Xg(v,j,a);Ng(v,O);break e;case 1:E=j;var _=v.type,R=v.stateNode;if((v.flags&128)===0&&(typeof _.getDerivedStateFromError=="function"||R!==null&&typeof R.componentDidCatch=="function"&&(_r===null||!_r.has(R)))){v.flags|=65536,a&=-a,v.lanes|=a;var J=Zg(v,E,a);Ng(v,J);break e}}v=v.return}while(v!==null)}Ry(d)}catch(ie){a=ie,nt===d&&d!==null&&(nt=d=d.return);continue}break}while(!0)}function My(){var o=Aa.current;return Aa.current=Ca,o===null?Ca:o}function oh(){(lt===0||lt===3||lt===2)&&(lt=4),dt===null||(bs&268435455)===0&&(Ma&268435455)===0||Or(dt,bt)}function Da(o,a){var d=Ee;Ee|=2;var m=My();(dt!==o||bt!==a)&&(nr=null,Ss(o,a));do try{tS();break}catch(y){Ay(o,y)}while(!0);if(vd(),Ee=d,Aa.current=m,nt!==null)throw Error(t(261));return dt=null,bt=0,lt}function tS(){for(;nt!==null;)Oy(nt)}function nS(){for(;nt!==null&&!jb();)Oy(nt)}function Oy(o){var a=Ly(o.alternate,o,tn);o.memoizedProps=o.pendingProps,a===null?Ry(o):nt=a,Yd.current=null}function Ry(o){var a=o;do{var d=a.alternate;if(o=a.return,(a.flags&32768)===0){if(d=Jk(d,a,tn),d!==null){nt=d;return}}else{if(d=Gk(d,a),d!==null){d.flags&=32767,nt=d;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{lt=6,nt=null;return}}if(a=a.sibling,a!==null){nt=a;return}nt=a=o}while(a!==null);lt===0&&(lt=5)}function Cs(o,a,d){var m=Me,y=hn.transition;try{hn.transition=null,Me=1,rS(o,a,d,m)}finally{hn.transition=y,Me=m}return null}function rS(o,a,d,m){do bi();while(Ar!==null);if((Ee&6)!==0)throw Error(t(327));d=o.finishedWork;var y=o.finishedLanes;if(d===null)return null;if(o.finishedWork=null,o.finishedLanes=0,d===o.current)throw Error(t(177));o.callbackNode=null,o.callbackPriority=0;var v=d.lanes|d.childLanes;if(Db(o,v),o===dt&&(nt=dt=null,bt=0),(d.subtreeFlags&2064)===0&&(d.flags&2064)===0||Ra||(Ra=!0,Dy(Fl,function(){return bi(),null})),v=(d.flags&15990)!==0,(d.subtreeFlags&15990)!==0||v){v=hn.transition,hn.transition=null;var S=Me;Me=1;var E=Ee;Ee|=4,Yd.current=null,Yk(o,d),Sy(d,o),Sk(od),Jl=!!id,od=id=null,o.current=d,Xk(d),Tb(),Ee=E,Me=S,hn.transition=v}else o.current=d;if(Ra&&(Ra=!1,Ar=o,Pa=y),v=o.pendingLanes,v===0&&(_r=null),Mb(d.stateNode),Kt(o,et()),a!==null)for(m=o.onRecoverableError,d=0;d<a.length;d++)y=a[d],m(y.value,{componentStack:y.stack,digest:y.digest});if(Oa)throw Oa=!1,o=eh,eh=null,o;return(Pa&1)!==0&&o.tag!==0&&bi(),v=o.pendingLanes,(v&1)!==0?o===th?Fo++:(Fo=0,th=o):Fo=0,Nr(),null}function bi(){if(Ar!==null){var o=bm(Pa),a=hn.transition,d=Me;try{if(hn.transition=null,Me=16>o?16:o,Ar===null)var m=!1;else{if(o=Ar,Ar=null,Pa=0,(Ee&6)!==0)throw Error(t(331));var y=Ee;for(Ee|=4,ee=o.current;ee!==null;){var v=ee,S=v.child;if((ee.flags&16)!==0){var E=v.deletions;if(E!==null){for(var j=0;j<E.length;j++){var P=E[j];for(ee=P;ee!==null;){var W=ee;switch(W.tag){case 0:case 11:case 15:zo(8,W,v)}var q=W.child;if(q!==null)q.return=W,ee=q;else for(;ee!==null;){W=ee;var H=W.sibling,Y=W.return;if(xy(W),W===P){ee=null;break}if(H!==null){H.return=Y,ee=H;break}ee=Y}}}var te=v.alternate;if(te!==null){var re=te.child;if(re!==null){te.child=null;do{var tt=re.sibling;re.sibling=null,re=tt}while(re!==null)}}ee=v}}if((v.subtreeFlags&2064)!==0&&S!==null)S.return=v,ee=S;else e:for(;ee!==null;){if(v=ee,(v.flags&2048)!==0)switch(v.tag){case 0:case 11:case 15:zo(9,v,v.return)}var O=v.sibling;if(O!==null){O.return=v.return,ee=O;break e}ee=v.return}}var _=o.current;for(ee=_;ee!==null;){S=ee;var R=S.child;if((S.subtreeFlags&2064)!==0&&R!==null)R.return=S,ee=R;else e:for(S=_;ee!==null;){if(E=ee,(E.flags&2048)!==0)try{switch(E.tag){case 0:case 11:case 15:_a(9,E)}}catch(ie){Je(E,E.return,ie)}if(E===S){ee=null;break e}var J=E.sibling;if(J!==null){J.return=E.return,ee=J;break e}ee=E.return}}if(Ee=y,Nr(),Pn&&typeof Pn.onPostCommitFiberRoot=="function")try{Pn.onPostCommitFiberRoot(Ul,o)}catch{}m=!0}return m}finally{Me=d,hn.transition=a}}return!1}function Py(o,a,d){a=yi(d,a),a=Xg(o,a,1),o=jr(o,a,1),a=Dt(),o!==null&&(uo(o,1,a),Kt(o,a))}function Je(o,a,d){if(o.tag===3)Py(o,o,d);else for(;a!==null;){if(a.tag===3){Py(a,o,d);break}else if(a.tag===1){var m=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(_r===null||!_r.has(m))){o=yi(d,o),o=Zg(a,o,1),a=jr(a,o,1),o=Dt(),a!==null&&(uo(a,1,o),Kt(a,o));break}}a=a.return}}function sS(o,a,d){var m=o.pingCache;m!==null&&m.delete(a),a=Dt(),o.pingedLanes|=o.suspendedLanes&d,dt===o&&(bt&d)===d&&(lt===4||lt===3&&(bt&130023424)===bt&&500>et()-Zd?Ss(o,0):Xd|=d),Kt(o,a)}function Iy(o,a){a===0&&((o.mode&1)===0?a=1:(a=Vl,Vl<<=1,(Vl&130023424)===0&&(Vl=4194304)));var d=Dt();o=Zn(o,a),o!==null&&(uo(o,a,d),Kt(o,d))}function iS(o){var a=o.memoizedState,d=0;a!==null&&(d=a.retryLane),Iy(o,d)}function oS(o,a){var d=0;switch(o.tag){case 13:var m=o.stateNode,y=o.memoizedState;y!==null&&(d=y.retryLane);break;case 19:m=o.stateNode;break;default:throw Error(t(314))}m!==null&&m.delete(a),Iy(o,d)}var Ly;Ly=function(o,a,d){if(o!==null)if(o.memoizedProps!==a.pendingProps||Ht.current)Wt=!0;else{if((o.lanes&d)===0&&(a.flags&128)===0)return Wt=!1,Kk(o,a,d);Wt=(o.flags&131072)!==0}else Wt=!1,Ue&&(a.flags&1048576)!==0&&mg(a,ha,a.index);switch(a.lanes=0,a.tag){case 2:var m=a.type;ja(o,a),o=a.pendingProps;var y=ci(a,Nt.current);mi(a,d),y=Ad(null,a,m,o,y,d);var v=Md();return a.flags|=1,typeof y=="object"&&y!==null&&typeof y.render=="function"&&y.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,Vt(m)?(v=!0,ca(a)):v=!1,a.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,Sd(a),y.updater=Na,a.stateNode=y,y._reactInternals=a,Dd(a,m,o,d),a=Fd(null,a,m,!0,v,d)):(a.tag=0,Ue&&v&&fd(a),Lt(null,a,y,d),a=a.child),a;case 16:m=a.elementType;e:{switch(ja(o,a),o=a.pendingProps,y=m._init,m=y(m._payload),a.type=m,y=a.tag=aS(m),o=Cn(m,o),y){case 0:a=Bd(null,a,m,o,d);break e;case 1:a=ay(null,a,m,o,d);break e;case 11:a=ry(null,a,m,o,d);break e;case 14:a=sy(null,a,m,Cn(m.type,o),d);break e}throw Error(t(306,m,""))}return a;case 0:return m=a.type,y=a.pendingProps,y=a.elementType===m?y:Cn(m,y),Bd(o,a,m,y,d);case 1:return m=a.type,y=a.pendingProps,y=a.elementType===m?y:Cn(m,y),ay(o,a,m,y,d);case 3:e:{if(cy(a),o===null)throw Error(t(387));m=a.pendingProps,v=a.memoizedState,y=v.element,Cg(o,a),xa(a,m,null,d);var S=a.memoizedState;if(m=S.element,v.isDehydrated)if(v={element:m,isDehydrated:!1,cache:S.cache,pendingSuspenseBoundaries:S.pendingSuspenseBoundaries,transitions:S.transitions},a.updateQueue.baseState=v,a.memoizedState=v,a.flags&256){y=yi(Error(t(423)),a),a=uy(o,a,m,d,y);break e}else if(m!==y){y=yi(Error(t(424)),a),a=uy(o,a,m,d,y);break e}else for(en=kr(a.stateNode.containerInfo.firstChild),Zt=a,Ue=!0,Sn=null,d=kg(a,null,m,d),a.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(hi(),m===y){a=tr(o,a,d);break e}Lt(o,a,m,d)}a=a.child}return a;case 5:return jg(a),o===null&&gd(a),m=a.type,y=a.pendingProps,v=o!==null?o.memoizedProps:null,S=y.children,ld(m,y)?S=null:v!==null&&ld(m,v)&&(a.flags|=32),ly(o,a),Lt(o,a,S,d),a.child;case 6:return o===null&&gd(a),null;case 13:return dy(o,a,d);case 4:return Cd(a,a.stateNode.containerInfo),m=a.pendingProps,o===null?a.child=fi(a,null,m,d):Lt(o,a,m,d),a.child;case 11:return m=a.type,y=a.pendingProps,y=a.elementType===m?y:Cn(m,y),ry(o,a,m,y,d);case 7:return Lt(o,a,a.pendingProps,d),a.child;case 8:return Lt(o,a,a.pendingProps.children,d),a.child;case 12:return Lt(o,a,a.pendingProps.children,d),a.child;case 10:e:{if(m=a.type._context,y=a.pendingProps,v=a.memoizedProps,S=y.value,Ie(ma,m._currentValue),m._currentValue=S,v!==null)if(kn(v.value,S)){if(v.children===y.children&&!Ht.current){a=tr(o,a,d);break e}}else for(v=a.child,v!==null&&(v.return=a);v!==null;){var E=v.dependencies;if(E!==null){S=v.child;for(var j=E.firstContext;j!==null;){if(j.context===m){if(v.tag===1){j=er(-1,d&-d),j.tag=2;var P=v.updateQueue;if(P!==null){P=P.shared;var W=P.pending;W===null?j.next=j:(j.next=W.next,W.next=j),P.pending=j}}v.lanes|=d,j=v.alternate,j!==null&&(j.lanes|=d),bd(v.return,d,a),E.lanes|=d;break}j=j.next}}else if(v.tag===10)S=v.type===a.type?null:v.child;else if(v.tag===18){if(S=v.return,S===null)throw Error(t(341));S.lanes|=d,E=S.alternate,E!==null&&(E.lanes|=d),bd(S,d,a),S=v.sibling}else S=v.child;if(S!==null)S.return=v;else for(S=v;S!==null;){if(S===a){S=null;break}if(v=S.sibling,v!==null){v.return=S.return,S=v;break}S=S.return}v=S}Lt(o,a,y.children,d),a=a.child}return a;case 9:return y=a.type,m=a.pendingProps.children,mi(a,d),y=un(y),m=m(y),a.flags|=1,Lt(o,a,m,d),a.child;case 14:return m=a.type,y=Cn(m,a.pendingProps),y=Cn(m.type,y),sy(o,a,m,y,d);case 15:return iy(o,a,a.type,a.pendingProps,d);case 17:return m=a.type,y=a.pendingProps,y=a.elementType===m?y:Cn(m,y),ja(o,a),a.tag=1,Vt(m)?(o=!0,ca(a)):o=!1,mi(a,d),Qg(a,m,y),Dd(a,m,y,d),Fd(null,a,m,!0,o,d);case 19:return fy(o,a,d);case 22:return oy(o,a,d)}throw Error(t(156,a.tag))};function Dy(o,a){return gm(o,a)}function lS(o,a,d,m){this.tag=o,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fn(o,a,d,m){return new lS(o,a,d,m)}function lh(o){return o=o.prototype,!(!o||!o.isReactComponent)}function aS(o){if(typeof o=="function")return lh(o)?1:0;if(o!=null){if(o=o.$$typeof,o===Re)return 11;if(o===Ve)return 14}return 2}function Rr(o,a){var d=o.alternate;return d===null?(d=fn(o.tag,a,o.key,o.mode),d.elementType=o.elementType,d.type=o.type,d.stateNode=o.stateNode,d.alternate=o,o.alternate=d):(d.pendingProps=a,d.type=o.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=o.flags&14680064,d.childLanes=o.childLanes,d.lanes=o.lanes,d.child=o.child,d.memoizedProps=o.memoizedProps,d.memoizedState=o.memoizedState,d.updateQueue=o.updateQueue,a=o.dependencies,d.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},d.sibling=o.sibling,d.index=o.index,d.ref=o.ref,d}function za(o,a,d,m,y,v){var S=2;if(m=o,typeof o=="function")lh(o)&&(S=1);else if(typeof o=="string")S=5;else e:switch(o){case B:return Ns(d.children,y,v,a);case oe:S=8,y|=8;break;case se:return o=fn(12,d,a,y|2),o.elementType=se,o.lanes=v,o;case He:return o=fn(13,d,a,y),o.elementType=He,o.lanes=v,o;case Ke:return o=fn(19,d,a,y),o.elementType=Ke,o.lanes=v,o;case Se:return $a(d,y,v,a);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case Te:S=10;break e;case Ze:S=9;break e;case Re:S=11;break e;case Ve:S=14;break e;case Ae:S=16,m=null;break e}throw Error(t(130,o==null?o:typeof o,""))}return a=fn(S,d,a,y),a.elementType=o,a.type=m,a.lanes=v,a}function Ns(o,a,d,m){return o=fn(7,o,m,a),o.lanes=d,o}function $a(o,a,d,m){return o=fn(22,o,m,a),o.elementType=Se,o.lanes=d,o.stateNode={isHidden:!1},o}function ah(o,a,d){return o=fn(6,o,null,a),o.lanes=d,o}function ch(o,a,d){return a=fn(4,o.children!==null?o.children:[],o.key,a),a.lanes=d,a.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},a}function cS(o,a,d,m,y){this.tag=a,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Lu(0),this.expirationTimes=Lu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Lu(0),this.identifierPrefix=m,this.onRecoverableError=y,this.mutableSourceEagerHydrationData=null}function uh(o,a,d,m,y,v,S,E,j){return o=new cS(o,a,d,E,j),a===1?(a=1,v===!0&&(a|=8)):a=0,v=fn(3,null,null,a),o.current=v,v.stateNode=o,v.memoizedState={element:m,isDehydrated:d,cache:null,transitions:null,pendingSuspenseBoundaries:null},Sd(v),o}function uS(o,a,d){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:D,key:m==null?null:""+m,children:o,containerInfo:a,implementation:d}}function zy(o){if(!o)return Cr;o=o._reactInternals;e:{if(fs(o)!==o||o.tag!==1)throw Error(t(170));var a=o;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(Vt(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(t(171))}if(o.tag===1){var d=o.type;if(Vt(d))return hg(o,d,a)}return a}function $y(o,a,d,m,y,v,S,E,j){return o=uh(d,m,!0,o,y,v,S,E,j),o.context=zy(null),d=o.current,m=Dt(),y=Mr(d),v=er(m,y),v.callback=a??null,jr(d,v,y),o.current.lanes=y,uo(o,y,m),Kt(o,m),o}function Ba(o,a,d,m){var y=a.current,v=Dt(),S=Mr(y);return d=zy(d),a.context===null?a.context=d:a.pendingContext=d,a=er(v,S),a.payload={element:o},m=m===void 0?null:m,m!==null&&(a.callback=m),o=jr(y,a,S),o!==null&&(jn(o,y,S,v),ya(o,y,S)),S}function Fa(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 5:return o.child.stateNode;default:return o.child.stateNode}}function By(o,a){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var d=o.retryLane;o.retryLane=d!==0&&d<a?d:a}}function dh(o,a){By(o,a),(o=o.alternate)&&By(o,a)}function dS(){return null}var Fy=typeof reportError=="function"?reportError:function(o){console.error(o)};function hh(o){this._internalRoot=o}Ua.prototype.render=hh.prototype.render=function(o){var a=this._internalRoot;if(a===null)throw Error(t(409));Ba(o,a,null,null)},Ua.prototype.unmount=hh.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var a=o.containerInfo;ks(function(){Ba(null,o,null,null)}),a[Gn]=null}};function Ua(o){this._internalRoot=o}Ua.prototype.unstable_scheduleHydration=function(o){if(o){var a=Cm();o={blockedOn:null,target:o,priority:a};for(var d=0;d<vr.length&&a!==0&&a<vr[d].priority;d++);vr.splice(d,0,o),d===0&&jm(o)}};function fh(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function Ha(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function Uy(){}function hS(o,a,d,m,y){if(y){if(typeof m=="function"){var v=m;m=function(){var P=Fa(S);v.call(P)}}var S=$y(a,m,o,0,null,!1,!1,"",Uy);return o._reactRootContainer=S,o[Gn]=S.current,No(o.nodeType===8?o.parentNode:o),ks(),S}for(;y=o.lastChild;)o.removeChild(y);if(typeof m=="function"){var E=m;m=function(){var P=Fa(j);E.call(P)}}var j=uh(o,0,!1,null,null,!1,!1,"",Uy);return o._reactRootContainer=j,o[Gn]=j.current,No(o.nodeType===8?o.parentNode:o),ks(function(){Ba(a,j,d,m)}),j}function Va(o,a,d,m,y){var v=d._reactRootContainer;if(v){var S=v;if(typeof y=="function"){var E=y;y=function(){var j=Fa(S);E.call(j)}}Ba(a,S,o,y)}else S=hS(d,a,o,y,m);return Fa(S)}km=function(o){switch(o.tag){case 3:var a=o.stateNode;if(a.current.memoizedState.isDehydrated){var d=co(a.pendingLanes);d!==0&&(Du(a,d|1),Kt(a,et()),(Ee&6)===0&&(wi=et()+500,Nr()))}break;case 13:ks(function(){var m=Zn(o,1);if(m!==null){var y=Dt();jn(m,o,1,y)}}),dh(o,1)}},zu=function(o){if(o.tag===13){var a=Zn(o,134217728);if(a!==null){var d=Dt();jn(a,o,134217728,d)}dh(o,134217728)}},Sm=function(o){if(o.tag===13){var a=Mr(o),d=Zn(o,a);if(d!==null){var m=Dt();jn(d,o,a,m)}dh(o,a)}},Cm=function(){return Me},Nm=function(o,a){var d=Me;try{return Me=o,a()}finally{Me=d}},Au=function(o,a,d){switch(a){case"input":if(no(o,d),a=d.name,d.type==="radio"&&a!=null){for(d=o;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<d.length;a++){var m=d[a];if(m!==o&&m.form===o.form){var y=la(m);if(!y)throw Error(t(90));to(m),no(m,y)}}}break;case"textarea":so(o,d);break;case"select":a=d.value,a!=null&&Jn(o,!!d.multiple,a,!1)}},cm=sh,um=ks;var fS={usingClientEntryPoint:!1,Events:[To,li,la,lm,am,sh]},Uo={findFiberByHostInstance:ps,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},pS={bundleType:Uo.bundleType,version:Uo.version,rendererPackageName:Uo.rendererPackageName,rendererConfig:Uo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:V.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=pm(o),o===null?null:o.stateNode},findFiberByHostInstance:Uo.findFiberByHostInstance||dS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wa.isDisabled&&Wa.supportsFiber)try{Ul=Wa.inject(pS),Pn=Wa}catch{}}return Jt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fS,Jt.createPortal=function(o,a){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!fh(a))throw Error(t(200));return uS(o,a,null,d)},Jt.createRoot=function(o,a){if(!fh(o))throw Error(t(299));var d=!1,m="",y=Fy;return a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(m=a.identifierPrefix),a.onRecoverableError!==void 0&&(y=a.onRecoverableError)),a=uh(o,1,!1,null,null,d,!1,m,y),o[Gn]=a.current,No(o.nodeType===8?o.parentNode:o),new hh(a)},Jt.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var a=o._reactInternals;if(a===void 0)throw typeof o.render=="function"?Error(t(188)):(o=Object.keys(o).join(","),Error(t(268,o)));return o=pm(a),o=o===null?null:o.stateNode,o},Jt.flushSync=function(o){return ks(o)},Jt.hydrate=function(o,a,d){if(!Ha(a))throw Error(t(200));return Va(null,o,a,!0,d)},Jt.hydrateRoot=function(o,a,d){if(!fh(o))throw Error(t(405));var m=d!=null&&d.hydratedSources||null,y=!1,v="",S=Fy;if(d!=null&&(d.unstable_strictMode===!0&&(y=!0),d.identifierPrefix!==void 0&&(v=d.identifierPrefix),d.onRecoverableError!==void 0&&(S=d.onRecoverableError)),a=$y(a,null,o,1,d??null,y,!1,v,S),o[Gn]=a.current,No(o),m)for(o=0;o<m.length;o++)d=m[o],y=d._getVersion,y=y(d._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[d,y]:a.mutableSourceEagerHydrationData.push(d,y);return new Ua(a)},Jt.render=function(o,a,d){if(!Ha(a))throw Error(t(200));return Va(null,o,a,!1,d)},Jt.unmountComponentAtNode=function(o){if(!Ha(o))throw Error(t(40));return o._reactRootContainer?(ks(function(){Va(null,null,o,!1,function(){o._reactRootContainer=null,o[Gn]=null})}),!0):!1},Jt.unstable_batchedUpdates=sh,Jt.unstable_renderSubtreeIntoContainer=function(o,a,d,m){if(!Ha(d))throw Error(t(200));if(o==null||o._reactInternals===void 0)throw Error(t(38));return Va(o,a,d,!1,m)},Jt.version="18.3.1-next-f1338f8080-20240426",Jt}var Qy;function wv(){if(Qy)return gh.exports;Qy=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),gh.exports=CS(),gh.exports}var Yy;function NS(){if(Yy)return qa;Yy=1;var n=wv();return qa.createRoot=n.createRoot,qa.hydrateRoot=n.hydrateRoot,qa}var ES=NS(),jS=wv();const TS=ip(jS);/**
 * @remix-run/router v1.22.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function dl(){return dl=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},dl.apply(this,arguments)}var Kr;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Kr||(Kr={}));const Xy="popstate";function _S(n){n===void 0&&(n={});function e(r,s){let{pathname:i,search:l,hash:c}=r.location;return ef("",{pathname:i,search:l,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(r,s){return typeof s=="string"?s:wc(s)}return MS(e,t,null,n)}function st(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function bv(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function AS(){return Math.random().toString(36).substr(2,8)}function Zy(n,e){return{usr:n.state,key:n.key,idx:e}}function ef(n,e,t,r){return t===void 0&&(t=null),dl({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Ji(e):e,{state:t,key:e&&e.key||r||AS()})}function wc(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Ji(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function MS(n,e,t,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,l=s.history,c=Kr.Pop,u=null,h=f();h==null&&(h=0,l.replaceState(dl({},l.state,{idx:h}),""));function f(){return(l.state||{idx:null}).idx}function g(){c=Kr.Pop;let C=f(),N=C==null?null:C-h;h=C,u&&u({action:c,location:k.location,delta:N})}function x(C,N){c=Kr.Push;let M=ef(k.location,C,N);h=f()+1;let I=Zy(M,h),V=k.createHref(M);try{l.pushState(I,"",V)}catch(U){if(U instanceof DOMException&&U.name==="DataCloneError")throw U;s.location.assign(V)}i&&u&&u({action:c,location:k.location,delta:1})}function w(C,N){c=Kr.Replace;let M=ef(k.location,C,N);h=f();let I=Zy(M,h),V=k.createHref(M);l.replaceState(I,"",V),i&&u&&u({action:c,location:k.location,delta:0})}function b(C){let N=s.location.origin!=="null"?s.location.origin:s.location.href,M=typeof C=="string"?C:wc(C);return M=M.replace(/ $/,"%20"),st(N,"No window.location.(origin|href) available to create URL for href: "+M),new URL(M,N)}let k={get action(){return c},get location(){return n(s,l)},listen(C){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(Xy,g),u=C,()=>{s.removeEventListener(Xy,g),u=null}},createHref(C){return e(s,C)},createURL:b,encodeLocation(C){let N=b(C);return{pathname:N.pathname,search:N.search,hash:N.hash}},push:x,replace:w,go(C){return l.go(C)}};return k}var e0;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(e0||(e0={}));function OS(n,e,t){return t===void 0&&(t="/"),RS(n,e,t)}function RS(n,e,t,r){let s=typeof e=="string"?Ji(e):e,i=lp(s.pathname||"/",t);if(i==null)return null;let l=kv(n);PS(l);let c=null;for(let u=0;c==null&&u<l.length;++u){let h=qS(i);c=HS(l[u],h)}return c}function kv(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let s=(i,l,c)=>{let u={relativePath:c===void 0?i.path||"":c,caseSensitive:i.caseSensitive===!0,childrenIndex:l,route:i};u.relativePath.startsWith("/")&&(st(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let h=Yr([r,u.relativePath]),f=t.concat(u);i.children&&i.children.length>0&&(st(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),kv(i.children,e,f,h)),!(i.path==null&&!i.index)&&e.push({path:h,score:FS(h,i.index),routesMeta:f})};return n.forEach((i,l)=>{var c;if(i.path===""||!((c=i.path)!=null&&c.includes("?")))s(i,l);else for(let u of Sv(i.path))s(i,l,u)}),e}function Sv(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,s=t.endsWith("?"),i=t.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let l=Sv(r.join("/")),c=[];return c.push(...l.map(u=>u===""?i:[i,u].join("/"))),s&&c.push(...l),c.map(u=>n.startsWith("/")&&u===""?"/":u)}function PS(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:US(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const IS=/^:[\w-]+$/,LS=3,DS=2,zS=1,$S=10,BS=-2,t0=n=>n==="*";function FS(n,e){let t=n.split("/"),r=t.length;return t.some(t0)&&(r+=BS),e&&(r+=DS),t.filter(s=>!t0(s)).reduce((s,i)=>s+(IS.test(i)?LS:i===""?zS:$S),r)}function US(n,e){return n.length===e.length&&n.slice(0,-1).every((r,s)=>r===e[s])?n[n.length-1]-e[e.length-1]:0}function HS(n,e,t){let{routesMeta:r}=n,s={},i="/",l=[];for(let c=0;c<r.length;++c){let u=r[c],h=c===r.length-1,f=i==="/"?e:e.slice(i.length)||"/",g=VS({path:u.relativePath,caseSensitive:u.caseSensitive,end:h},f),x=u.route;if(!g)return null;Object.assign(s,g.params),l.push({params:s,pathname:Yr([i,g.pathname]),pathnameBase:QS(Yr([i,g.pathnameBase])),route:x}),g.pathnameBase!=="/"&&(i=Yr([i,g.pathnameBase]))}return l}function VS(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=WS(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let i=s[0],l=i.replace(/(.)\/+$/,"$1"),c=s.slice(1);return{params:r.reduce((h,f,g)=>{let{paramName:x,isOptional:w}=f;if(x==="*"){let k=c[g]||"";l=i.slice(0,i.length-k.length).replace(/(.)\/+$/,"$1")}const b=c[g];return w&&!b?h[x]=void 0:h[x]=(b||"").replace(/%2F/g,"/"),h},{}),pathname:i,pathnameBase:l,pattern:n}}function WS(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),bv(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,c,u)=>(r.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function qS(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return bv(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function lp(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function KS(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:s=""}=typeof n=="string"?Ji(n):n;return{pathname:t?t.startsWith("/")?t:JS(t,e):e,search:YS(r),hash:XS(s)}}function JS(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function vh(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function GS(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Cv(n,e){let t=GS(n);return e?t.map((r,s)=>s===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function Nv(n,e,t,r){r===void 0&&(r=!1);let s;typeof n=="string"?s=Ji(n):(s=dl({},n),st(!s.pathname||!s.pathname.includes("?"),vh("?","pathname","search",s)),st(!s.pathname||!s.pathname.includes("#"),vh("#","pathname","hash",s)),st(!s.search||!s.search.includes("#"),vh("#","search","hash",s)));let i=n===""||s.pathname==="",l=i?"/":s.pathname,c;if(l==null)c=t;else{let g=e.length-1;if(!r&&l.startsWith("..")){let x=l.split("/");for(;x[0]==="..";)x.shift(),g-=1;s.pathname=x.join("/")}c=g>=0?e[g]:"/"}let u=KS(s,c),h=l&&l!=="/"&&l.endsWith("/"),f=(i||l===".")&&t.endsWith("/");return!u.pathname.endsWith("/")&&(h||f)&&(u.pathname+="/"),u}const Yr=n=>n.join("/").replace(/\/\/+/g,"/"),QS=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),YS=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,XS=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function ZS(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const Ev=["post","put","patch","delete"];new Set(Ev);const e2=["get",...Ev];new Set(e2);/**
 * React Router v6.29.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function hl(){return hl=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},hl.apply(this,arguments)}const ap=A.createContext(null),t2=A.createContext(null),qs=A.createContext(null),au=A.createContext(null),is=A.createContext({outlet:null,matches:[],isDataRoute:!1}),jv=A.createContext(null);function n2(n,e){let{relative:t}=e===void 0?{}:e;Tl()||st(!1);let{basename:r,navigator:s}=A.useContext(qs),{hash:i,pathname:l,search:c}=_v(n,{relative:t}),u=l;return r!=="/"&&(u=l==="/"?r:Yr([r,l])),s.createHref({pathname:u,search:c,hash:i})}function Tl(){return A.useContext(au)!=null}function Gi(){return Tl()||st(!1),A.useContext(au).location}function Tv(n){A.useContext(qs).static||A.useLayoutEffect(n)}function cp(){let{isDataRoute:n}=A.useContext(is);return n?m2():r2()}function r2(){Tl()||st(!1);let n=A.useContext(ap),{basename:e,future:t,navigator:r}=A.useContext(qs),{matches:s}=A.useContext(is),{pathname:i}=Gi(),l=JSON.stringify(Cv(s,t.v7_relativeSplatPath)),c=A.useRef(!1);return Tv(()=>{c.current=!0}),A.useCallback(function(h,f){if(f===void 0&&(f={}),!c.current)return;if(typeof h=="number"){r.go(h);return}let g=Nv(h,JSON.parse(l),i,f.relative==="path");n==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:Yr([e,g.pathname])),(f.replace?r.replace:r.push)(g,f.state,f)},[e,r,l,i,n])}function up(){let{matches:n}=A.useContext(is),e=n[n.length-1];return e?e.params:{}}function _v(n,e){let{relative:t}=e===void 0?{}:e,{future:r}=A.useContext(qs),{matches:s}=A.useContext(is),{pathname:i}=Gi(),l=JSON.stringify(Cv(s,r.v7_relativeSplatPath));return A.useMemo(()=>Nv(n,JSON.parse(l),i,t==="path"),[n,l,i,t])}function s2(n,e){return i2(n,e)}function i2(n,e,t,r){Tl()||st(!1);let{navigator:s,static:i}=A.useContext(qs),{matches:l}=A.useContext(is),c=l[l.length-1],u=c?c.params:{};c&&c.pathname;let h=c?c.pathnameBase:"/";c&&c.route;let f=Gi(),g;if(e){var x;let N=typeof e=="string"?Ji(e):e;h==="/"||(x=N.pathname)!=null&&x.startsWith(h)||st(!1),g=N}else g=f;let w=g.pathname||"/",b=w;if(h!=="/"){let N=h.replace(/^\//,"").split("/");b="/"+w.replace(/^\//,"").split("/").slice(N.length).join("/")}let k=OS(n,{pathname:b}),C=u2(k&&k.map(N=>Object.assign({},N,{params:Object.assign({},u,N.params),pathname:Yr([h,s.encodeLocation?s.encodeLocation(N.pathname).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?h:Yr([h,s.encodeLocation?s.encodeLocation(N.pathnameBase).pathname:N.pathnameBase])})),l,t,r);return e&&C?A.createElement(au.Provider,{value:{location:hl({pathname:"/",search:"",hash:"",state:null,key:"default"},g),navigationType:Kr.Pop}},C):C}function o2(){let n=p2(),e=ZS(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},e),t?A.createElement("pre",{style:s},t):null,null)}const l2=A.createElement(o2,null);class a2 extends A.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?A.createElement(is.Provider,{value:this.props.routeContext},A.createElement(jv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function c2(n){let{routeContext:e,match:t,children:r}=n,s=A.useContext(ap);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),A.createElement(is.Provider,{value:e},r)}function u2(n,e,t,r){var s;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var i;if(!t)return null;if(t.errors)n=t.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let l=n,c=(s=t)==null?void 0:s.errors;if(c!=null){let f=l.findIndex(g=>g.route.id&&(c==null?void 0:c[g.route.id])!==void 0);f>=0||st(!1),l=l.slice(0,Math.min(l.length,f+1))}let u=!1,h=-1;if(t&&r&&r.v7_partialHydration)for(let f=0;f<l.length;f++){let g=l[f];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(h=f),g.route.id){let{loaderData:x,errors:w}=t,b=g.route.loader&&x[g.route.id]===void 0&&(!w||w[g.route.id]===void 0);if(g.route.lazy||b){u=!0,h>=0?l=l.slice(0,h+1):l=[l[0]];break}}}return l.reduceRight((f,g,x)=>{let w,b=!1,k=null,C=null;t&&(w=c&&g.route.id?c[g.route.id]:void 0,k=g.route.errorElement||l2,u&&(h<0&&x===0?(g2("route-fallback"),b=!0,C=null):h===x&&(b=!0,C=g.route.hydrateFallbackElement||null)));let N=e.concat(l.slice(0,x+1)),M=()=>{let I;return w?I=k:b?I=C:g.route.Component?I=A.createElement(g.route.Component,null):g.route.element?I=g.route.element:I=f,A.createElement(c2,{match:g,routeContext:{outlet:f,matches:N,isDataRoute:t!=null},children:I})};return t&&(g.route.ErrorBoundary||g.route.errorElement||x===0)?A.createElement(a2,{location:t.location,revalidation:t.revalidation,component:k,error:w,children:M(),routeContext:{outlet:null,matches:N,isDataRoute:!0}}):M()},null)}var Av=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(Av||{}),Mv=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(Mv||{});function d2(n){let e=A.useContext(ap);return e||st(!1),e}function h2(n){let e=A.useContext(t2);return e||st(!1),e}function f2(n){let e=A.useContext(is);return e||st(!1),e}function Ov(n){let e=f2(),t=e.matches[e.matches.length-1];return t.route.id||st(!1),t.route.id}function p2(){var n;let e=A.useContext(jv),t=h2(),r=Ov();return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function m2(){let{router:n}=d2(Av.UseNavigateStable),e=Ov(Mv.UseNavigateStable),t=A.useRef(!1);return Tv(()=>{t.current=!0}),A.useCallback(function(s,i){i===void 0&&(i={}),t.current&&(typeof s=="number"?n.navigate(s):n.navigate(s,hl({fromRouteId:e},i)))},[n,e])}const n0={};function g2(n,e,t){n0[n]||(n0[n]=!0)}function y2(n,e){n==null||n.v7_startTransition,n==null||n.v7_relativeSplatPath}function mn(n){st(!1)}function x2(n){let{basename:e="/",children:t=null,location:r,navigationType:s=Kr.Pop,navigator:i,static:l=!1,future:c}=n;Tl()&&st(!1);let u=e.replace(/^\/*/,"/"),h=A.useMemo(()=>({basename:u,navigator:i,static:l,future:hl({v7_relativeSplatPath:!1},c)}),[u,c,i,l]);typeof r=="string"&&(r=Ji(r));let{pathname:f="/",search:g="",hash:x="",state:w=null,key:b="default"}=r,k=A.useMemo(()=>{let C=lp(f,u);return C==null?null:{location:{pathname:C,search:g,hash:x,state:w,key:b},navigationType:s}},[u,f,g,x,w,b,s]);return k==null?null:A.createElement(qs.Provider,{value:h},A.createElement(au.Provider,{children:t,value:k}))}function v2(n){let{children:e,location:t}=n;return s2(tf(e),t)}new Promise(()=>{});function tf(n,e){e===void 0&&(e=[]);let t=[];return A.Children.forEach(n,(r,s)=>{if(!A.isValidElement(r))return;let i=[...e,s];if(r.type===A.Fragment){t.push.apply(t,tf(r.props.children,i));return}r.type!==mn&&st(!1),!r.props.index||!r.props.children||st(!1);let l={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=tf(r.props.children,i)),t.push(l)}),t}/**
 * React Router DOM v6.29.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function nf(){return nf=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},nf.apply(this,arguments)}function w2(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}function b2(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function k2(n,e){return n.button===0&&(!e||e==="_self")&&!b2(n)}const S2=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],C2="6";try{window.__reactRouterVersion=C2}catch{}const N2="startTransition",r0=bS[N2];function E2(n){let{basename:e,children:t,future:r,window:s}=n,i=A.useRef();i.current==null&&(i.current=_S({window:s,v5Compat:!0}));let l=i.current,[c,u]=A.useState({action:l.action,location:l.location}),{v7_startTransition:h}=r||{},f=A.useCallback(g=>{h&&r0?r0(()=>u(g)):u(g)},[u,h]);return A.useLayoutEffect(()=>l.listen(f),[l,f]),A.useEffect(()=>y2(r),[r]),A.createElement(x2,{basename:e,children:t,location:c.location,navigationType:c.action,navigator:l,future:r})}const j2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",T2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,At=A.forwardRef(function(e,t){let{onClick:r,relative:s,reloadDocument:i,replace:l,state:c,target:u,to:h,preventScrollReset:f,viewTransition:g}=e,x=w2(e,S2),{basename:w}=A.useContext(qs),b,k=!1;if(typeof h=="string"&&T2.test(h)&&(b=h,j2))try{let I=new URL(window.location.href),V=h.startsWith("//")?new URL(I.protocol+h):new URL(h),U=lp(V.pathname,w);V.origin===I.origin&&U!=null?h=U+V.search+V.hash:k=!0}catch{}let C=n2(h,{relative:s}),N=_2(h,{replace:l,state:c,target:u,preventScrollReset:f,relative:s,viewTransition:g});function M(I){r&&r(I),I.defaultPrevented||N(I)}return A.createElement("a",nf({},x,{href:b||C,onClick:k||i?r:M,ref:t,target:u}))});var s0;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(s0||(s0={}));var i0;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(i0||(i0={}));function _2(n,e){let{target:t,replace:r,state:s,preventScrollReset:i,relative:l,viewTransition:c}=e===void 0?{}:e,u=cp(),h=Gi(),f=_v(n,{relative:l});return A.useCallback(g=>{if(k2(g,t)){g.preventDefault();let x=r!==void 0?r:wc(h)===wc(f);u(n,{replace:x,state:s,preventScrollReset:i,relative:l,viewTransition:c})}},[h,u,f,r,s,t,n,i,l,c])}const A2="modulepreload",M2=function(n){return"/"+n},o0={},Fi=function(e,t,r){let s=Promise.resolve();if(t&&t.length>0){let l=function(h){return Promise.all(h.map(f=>Promise.resolve(f).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),u=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));s=l(t.map(h=>{if(h=M2(h),h in o0)return;o0[h]=!0;const f=h.endsWith(".css"),g=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${g}`))return;const x=document.createElement("link");if(x.rel=f?"stylesheet":A2,f||(x.as="script"),x.crossOrigin="",x.href=h,u&&x.setAttribute("nonce",u),document.head.appendChild(x),f)return new Promise((w,b)=>{x.addEventListener("load",w),x.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${h}`)))})}))}function i(l){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=l,window.dispatchEvent(c),!c.defaultPrevented)throw l}return s.then(l=>{for(const c of l||[])c.status==="rejected"&&i(c.reason);return e().catch(i)})},O2=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Fi(async()=>{const{default:r}=await Promise.resolve().then(()=>Qi);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)};class dp extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class R2 extends dp{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class P2 extends dp{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class I2 extends dp{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var rf;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(rf||(rf={}));var L2=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(l){l(i)})}return new(t||(t=Promise))(function(i,l){function c(f){try{h(r.next(f))}catch(g){l(g)}}function u(f){try{h(r.throw(f))}catch(g){l(g)}}function h(f){f.done?i(f.value):s(f.value).then(c,u)}h((r=r.apply(n,e||[])).next())})};class D2{constructor(e,{headers:t={},customFetch:r,region:s=rf.Any}={}){this.url=e,this.headers=t,this.region=s,this.fetch=O2(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var r;return L2(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:l}=t;let c={},{region:u}=t;u||(u=this.region),u&&u!=="any"&&(c["x-region"]=u);let h;l&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(c["Content-Type"]="application/octet-stream",h=l):typeof l=="string"?(c["Content-Type"]="text/plain",h=l):typeof FormData<"u"&&l instanceof FormData?h=l:(c["Content-Type"]="application/json",h=JSON.stringify(l)));const f=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},c),this.headers),s),body:h}).catch(b=>{throw new R2(b)}),g=f.headers.get("x-relay-error");if(g&&g==="true")throw new P2(f);if(!f.ok)throw new I2(f);let x=((r=f.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),w;return x==="application/json"?w=yield f.json():x==="application/octet-stream"?w=yield f.blob():x==="text/event-stream"?w=f:x==="multipart/form-data"?w=yield f.formData():w=yield f.text(),{data:w,error:null}}catch(s){return{data:null,error:s}}})}}var ft={},ki={},Si={},Ci={},Ni={},Ei={},z2=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Ui=z2();const $2=Ui.fetch,Rv=Ui.fetch.bind(Ui),Pv=Ui.Headers,B2=Ui.Request,F2=Ui.Response,Qi=Object.freeze(Object.defineProperty({__proto__:null,Headers:Pv,Request:B2,Response:F2,default:Rv,fetch:$2},Symbol.toStringTag,{value:"Module"})),U2=yS(Qi);var Ka={},l0;function Iv(){if(l0)return Ka;l0=1,Object.defineProperty(Ka,"__esModule",{value:!0});class n extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return Ka.default=n,Ka}var a0;function Lv(){if(a0)return Ei;a0=1;var n=Ei&&Ei.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Ei,"__esModule",{value:!0});const e=n(U2),t=n(Iv());class r{constructor(i){this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=i.headers,this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=i.shouldThrowOnError,this.signal=i.signal,this.isMaybeSingle=i.isMaybeSingle,i.fetch?this.fetch=i.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,l){return this.headers=Object.assign({},this.headers),this.headers[i]=l,this}then(i,l){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const c=this.fetch;let u=c(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async h=>{var f,g,x;let w=null,b=null,k=null,C=h.status,N=h.statusText;if(h.ok){if(this.method!=="HEAD"){const U=await h.text();U===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?b=U:b=JSON.parse(U))}const I=(f=this.headers.Prefer)===null||f===void 0?void 0:f.match(/count=(exact|planned|estimated)/),V=(g=h.headers.get("content-range"))===null||g===void 0?void 0:g.split("/");I&&V&&V.length>1&&(k=parseInt(V[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(b)&&(b.length>1?(w={code:"PGRST116",details:`Results contain ${b.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},b=null,k=null,C=406,N="Not Acceptable"):b.length===1?b=b[0]:b=null)}else{const I=await h.text();try{w=JSON.parse(I),Array.isArray(w)&&h.status===404&&(b=[],w=null,C=200,N="OK")}catch{h.status===404&&I===""?(C=204,N="No Content"):w={message:I}}if(w&&this.isMaybeSingle&&(!((x=w==null?void 0:w.details)===null||x===void 0)&&x.includes("0 rows"))&&(w=null,C=200,N="OK"),w&&this.shouldThrowOnError)throw new t.default(w)}return{error:w,data:b,count:k,status:C,statusText:N}});return this.shouldThrowOnError||(u=u.catch(h=>{var f,g,x;return{error:{message:`${(f=h==null?void 0:h.name)!==null&&f!==void 0?f:"FetchError"}: ${h==null?void 0:h.message}`,details:`${(g=h==null?void 0:h.stack)!==null&&g!==void 0?g:""}`,hint:"",code:`${(x=h==null?void 0:h.code)!==null&&x!==void 0?x:""}`},data:null,count:null,status:0,statusText:""}})),u.then(i,l)}}return Ei.default=r,Ei}var c0;function Dv(){if(c0)return Ni;c0=1;var n=Ni&&Ni.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ni,"__esModule",{value:!0});const e=n(Lv());class t extends e.default{select(s){let i=!1;const l=(s??"*").split("").map(c=>/\s/.test(c)&&!i?"":(c==='"'&&(i=!i),c)).join("");return this.url.searchParams.set("select",l),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(s,{ascending:i=!0,nullsFirst:l,foreignTable:c,referencedTable:u=c}={}){const h=u?`${u}.order`:"order",f=this.url.searchParams.get(h);return this.url.searchParams.set(h,`${f?`${f},`:""}${s}.${i?"asc":"desc"}${l===void 0?"":l?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:i,referencedTable:l=i}={}){const c=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(c,`${s}`),this}range(s,i,{foreignTable:l,referencedTable:c=l}={}){const u=typeof c>"u"?"offset":`${c}.offset`,h=typeof c>"u"?"limit":`${c}.limit`;return this.url.searchParams.set(u,`${s}`),this.url.searchParams.set(h,`${i-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:s=!1,verbose:i=!1,settings:l=!1,buffers:c=!1,wal:u=!1,format:h="text"}={}){var f;const g=[s?"analyze":null,i?"verbose":null,l?"settings":null,c?"buffers":null,u?"wal":null].filter(Boolean).join("|"),x=(f=this.headers.Accept)!==null&&f!==void 0?f:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${h}; for="${x}"; options=${g};`,h==="json"?this:this}rollback(){var s;return((s=this.headers.Prefer)!==null&&s!==void 0?s:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return Ni.default=t,Ni}var u0;function hp(){if(u0)return Ci;u0=1;var n=Ci&&Ci.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ci,"__esModule",{value:!0});const e=n(Dv());class t extends e.default{eq(s,i){return this.url.searchParams.append(s,`eq.${i}`),this}neq(s,i){return this.url.searchParams.append(s,`neq.${i}`),this}gt(s,i){return this.url.searchParams.append(s,`gt.${i}`),this}gte(s,i){return this.url.searchParams.append(s,`gte.${i}`),this}lt(s,i){return this.url.searchParams.append(s,`lt.${i}`),this}lte(s,i){return this.url.searchParams.append(s,`lte.${i}`),this}like(s,i){return this.url.searchParams.append(s,`like.${i}`),this}likeAllOf(s,i){return this.url.searchParams.append(s,`like(all).{${i.join(",")}}`),this}likeAnyOf(s,i){return this.url.searchParams.append(s,`like(any).{${i.join(",")}}`),this}ilike(s,i){return this.url.searchParams.append(s,`ilike.${i}`),this}ilikeAllOf(s,i){return this.url.searchParams.append(s,`ilike(all).{${i.join(",")}}`),this}ilikeAnyOf(s,i){return this.url.searchParams.append(s,`ilike(any).{${i.join(",")}}`),this}is(s,i){return this.url.searchParams.append(s,`is.${i}`),this}in(s,i){const l=Array.from(new Set(i)).map(c=>typeof c=="string"&&new RegExp("[,()]").test(c)?`"${c}"`:`${c}`).join(",");return this.url.searchParams.append(s,`in.(${l})`),this}contains(s,i){return typeof i=="string"?this.url.searchParams.append(s,`cs.${i}`):Array.isArray(i)?this.url.searchParams.append(s,`cs.{${i.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(i)}`),this}containedBy(s,i){return typeof i=="string"?this.url.searchParams.append(s,`cd.${i}`):Array.isArray(i)?this.url.searchParams.append(s,`cd.{${i.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(i)}`),this}rangeGt(s,i){return this.url.searchParams.append(s,`sr.${i}`),this}rangeGte(s,i){return this.url.searchParams.append(s,`nxl.${i}`),this}rangeLt(s,i){return this.url.searchParams.append(s,`sl.${i}`),this}rangeLte(s,i){return this.url.searchParams.append(s,`nxr.${i}`),this}rangeAdjacent(s,i){return this.url.searchParams.append(s,`adj.${i}`),this}overlaps(s,i){return typeof i=="string"?this.url.searchParams.append(s,`ov.${i}`):this.url.searchParams.append(s,`ov.{${i.join(",")}}`),this}textSearch(s,i,{config:l,type:c}={}){let u="";c==="plain"?u="pl":c==="phrase"?u="ph":c==="websearch"&&(u="w");const h=l===void 0?"":`(${l})`;return this.url.searchParams.append(s,`${u}fts${h}.${i}`),this}match(s){return Object.entries(s).forEach(([i,l])=>{this.url.searchParams.append(i,`eq.${l}`)}),this}not(s,i,l){return this.url.searchParams.append(s,`not.${i}.${l}`),this}or(s,{foreignTable:i,referencedTable:l=i}={}){const c=l?`${l}.or`:"or";return this.url.searchParams.append(c,`(${s})`),this}filter(s,i,l){return this.url.searchParams.append(s,`${i}.${l}`),this}}return Ci.default=t,Ci}var d0;function zv(){if(d0)return Si;d0=1;var n=Si&&Si.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Si,"__esModule",{value:!0});const e=n(hp());class t{constructor(s,{headers:i={},schema:l,fetch:c}){this.url=s,this.headers=i,this.schema=l,this.fetch=c}select(s,{head:i=!1,count:l}={}){const c=i?"HEAD":"GET";let u=!1;const h=(s??"*").split("").map(f=>/\s/.test(f)&&!u?"":(f==='"'&&(u=!u),f)).join("");return this.url.searchParams.set("select",h),l&&(this.headers.Prefer=`count=${l}`),new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(s,{count:i,defaultToNull:l=!0}={}){const c="POST",u=[];if(this.headers.Prefer&&u.push(this.headers.Prefer),i&&u.push(`count=${i}`),l||u.push("missing=default"),this.headers.Prefer=u.join(","),Array.isArray(s)){const h=s.reduce((f,g)=>f.concat(Object.keys(g)),[]);if(h.length>0){const f=[...new Set(h)].map(g=>`"${g}"`);this.url.searchParams.set("columns",f.join(","))}}return new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}upsert(s,{onConflict:i,ignoreDuplicates:l=!1,count:c,defaultToNull:u=!0}={}){const h="POST",f=[`resolution=${l?"ignore":"merge"}-duplicates`];if(i!==void 0&&this.url.searchParams.set("on_conflict",i),this.headers.Prefer&&f.push(this.headers.Prefer),c&&f.push(`count=${c}`),u||f.push("missing=default"),this.headers.Prefer=f.join(","),Array.isArray(s)){const g=s.reduce((x,w)=>x.concat(Object.keys(w)),[]);if(g.length>0){const x=[...new Set(g)].map(w=>`"${w}"`);this.url.searchParams.set("columns",x.join(","))}}return new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}update(s,{count:i}={}){const l="PATCH",c=[];return this.headers.Prefer&&c.push(this.headers.Prefer),i&&c.push(`count=${i}`),this.headers.Prefer=c.join(","),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}delete({count:s}={}){const i="DELETE",l=[];return s&&l.push(`count=${s}`),this.headers.Prefer&&l.unshift(this.headers.Prefer),this.headers.Prefer=l.join(","),new e.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return Si.default=t,Si}var Vo={},Wo={},h0;function H2(){return h0||(h0=1,Object.defineProperty(Wo,"__esModule",{value:!0}),Wo.version=void 0,Wo.version="0.0.0-automated"),Wo}var f0;function V2(){if(f0)return Vo;f0=1,Object.defineProperty(Vo,"__esModule",{value:!0}),Vo.DEFAULT_HEADERS=void 0;const n=H2();return Vo.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${n.version}`},Vo}var p0;function W2(){if(p0)return ki;p0=1;var n=ki&&ki.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(ki,"__esModule",{value:!0});const e=n(zv()),t=n(hp()),r=V2();class s{constructor(l,{headers:c={},schema:u,fetch:h}={}){this.url=l,this.headers=Object.assign(Object.assign({},r.DEFAULT_HEADERS),c),this.schemaName=u,this.fetch=h}from(l){const c=new URL(`${this.url}/${l}`);return new e.default(c,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(l){return new s(this.url,{headers:this.headers,schema:l,fetch:this.fetch})}rpc(l,c={},{head:u=!1,get:h=!1,count:f}={}){let g;const x=new URL(`${this.url}/rpc/${l}`);let w;u||h?(g=u?"HEAD":"GET",Object.entries(c).filter(([k,C])=>C!==void 0).map(([k,C])=>[k,Array.isArray(C)?`{${C.join(",")}}`:`${C}`]).forEach(([k,C])=>{x.searchParams.append(k,C)})):(g="POST",w=c);const b=Object.assign({},this.headers);return f&&(b.Prefer=`count=${f}`),new t.default({method:g,url:x,headers:b,schema:this.schemaName,body:w,fetch:this.fetch,allowEmpty:!1})}}return ki.default=s,ki}var m0;function q2(){if(m0)return ft;m0=1;var n=ft&&ft.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(ft,"__esModule",{value:!0}),ft.PostgrestError=ft.PostgrestBuilder=ft.PostgrestTransformBuilder=ft.PostgrestFilterBuilder=ft.PostgrestQueryBuilder=ft.PostgrestClient=void 0;const e=n(W2());ft.PostgrestClient=e.default;const t=n(zv());ft.PostgrestQueryBuilder=t.default;const r=n(hp());ft.PostgrestFilterBuilder=r.default;const s=n(Dv());ft.PostgrestTransformBuilder=s.default;const i=n(Lv());ft.PostgrestBuilder=i.default;const l=n(Iv());return ft.PostgrestError=l.default,ft.default={PostgrestClient:e.default,PostgrestQueryBuilder:t.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:s.default,PostgrestBuilder:i.default,PostgrestError:l.default},ft}var K2=q2();const J2=ip(K2),{PostgrestClient:G2,PostgrestQueryBuilder:fI,PostgrestFilterBuilder:pI,PostgrestTransformBuilder:mI,PostgrestBuilder:gI,PostgrestError:yI}=J2,Q2="2.11.2",Y2={"X-Client-Info":`realtime-js/${Q2}`},X2="1.0.0",$v=1e4,Z2=1e3;var Di;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(Di||(Di={}));var nn;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(nn||(nn={}));var Tn;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(Tn||(Tn={}));var sf;(function(n){n.websocket="websocket"})(sf||(sf={}));var _s;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(_s||(_s={}));class eC{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const s=t.getUint8(1),i=t.getUint8(2);let l=this.HEADER_LENGTH+2;const c=r.decode(e.slice(l,l+s));l=l+s;const u=r.decode(e.slice(l,l+i));l=l+i;const h=JSON.parse(r.decode(e.slice(l,e.byteLength)));return{ref:null,topic:c,event:u,payload:h}}}class Bv{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Le;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(Le||(Le={}));const g0=(n,e,t={})=>{var r;const s=(r=t.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((i,l)=>(i[l]=tC(l,n,e,s),i),{})},tC=(n,e,t,r)=>{const s=e.find(c=>c.name===n),i=s==null?void 0:s.type,l=t[n];return i&&!r.includes(i)?Fv(i,l):of(l)},Fv=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return iC(e,t)}switch(n){case Le.bool:return nC(e);case Le.float4:case Le.float8:case Le.int2:case Le.int4:case Le.int8:case Le.numeric:case Le.oid:return rC(e);case Le.json:case Le.jsonb:return sC(e);case Le.timestamp:return oC(e);case Le.abstime:case Le.date:case Le.daterange:case Le.int4range:case Le.int8range:case Le.money:case Le.reltime:case Le.text:case Le.time:case Le.timestamptz:case Le.timetz:case Le.tsrange:case Le.tstzrange:return of(e);default:return of(e)}},of=n=>n,nC=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},rC=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},sC=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},iC=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,r=n[t];if(n[0]==="{"&&r==="}"){let i;const l=n.slice(1,t);try{i=JSON.parse("["+l+"]")}catch{i=l?l.split(","):[]}return i.map(c=>Fv(e,c))}return n},oC=n=>typeof n=="string"?n.replace(" ","T"):n,Uv=n=>{let e=n;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class wh{constructor(e,t,r={},s=$v){this.channel=e,this.event=t,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var y0;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(y0||(y0={}));class el{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:l,onSync:c}=this.caller;this.joinRef=this.channel._joinRef(),this.state=el.syncState(this.state,s,i,l),this.pendingDiffs.forEach(u=>{this.state=el.syncDiff(this.state,u,i,l)}),this.pendingDiffs=[],c()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:l,onSync:c}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=el.syncDiff(this.state,s,i,l),c())}),this.onJoin((s,i,l)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:l})}),this.onLeave((s,i,l)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,s){const i=this.cloneDeep(e),l=this.transformState(t),c={},u={};return this.map(i,(h,f)=>{l[h]||(u[h]=f)}),this.map(l,(h,f)=>{const g=i[h];if(g){const x=f.map(C=>C.presence_ref),w=g.map(C=>C.presence_ref),b=f.filter(C=>w.indexOf(C.presence_ref)<0),k=g.filter(C=>x.indexOf(C.presence_ref)<0);b.length>0&&(c[h]=b),k.length>0&&(u[h]=k)}else c[h]=f}),this.syncDiff(i,{joins:c,leaves:u},r,s)}static syncDiff(e,t,r,s){const{joins:i,leaves:l}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(c,u)=>{var h;const f=(h=e[c])!==null&&h!==void 0?h:[];if(e[c]=this.cloneDeep(u),f.length>0){const g=e[c].map(w=>w.presence_ref),x=f.filter(w=>g.indexOf(w.presence_ref)<0);e[c].unshift(...x)}r(c,f,u)}),this.map(l,(c,u)=>{let h=e[c];if(!h)return;const f=u.map(g=>g.presence_ref);h=h.filter(g=>f.indexOf(g.presence_ref)<0),e[c]=h,s(c,h,u),h.length===0&&delete e[c]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const s=e[r];return"metas"in s?t[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):t[r]=s,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var x0;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(x0||(x0={}));var v0;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(v0||(v0={}));var cr;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(cr||(cr={}));class fp{constructor(e,t={config:{}},r){this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=nn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new wh(this,Tn.join,this.params,this.timeout),this.rejoinTimer=new Bv(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=nn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=nn.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=nn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=nn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Tn.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new el(this),this.broadcastEndpointURL=Uv(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:l,private:c}}=this.params;this._onError(f=>e==null?void 0:e(cr.CHANNEL_ERROR,f)),this._onClose(()=>e==null?void 0:e(cr.CLOSED));const u={},h={broadcast:i,presence:l,postgres_changes:(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(f=>f.filter))!==null&&s!==void 0?s:[],private:c};this.socket.accessTokenValue&&(u.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:h},u)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:f})=>{var g;if(this.socket.setAuth(),f===void 0){e==null||e(cr.SUBSCRIBED);return}else{const x=this.bindings.postgres_changes,w=(g=x==null?void 0:x.length)!==null&&g!==void 0?g:0,b=[];for(let k=0;k<w;k++){const C=x[k],{filter:{event:N,schema:M,table:I,filter:V}}=C,U=f&&f[k];if(U&&U.event===N&&U.schema===M&&U.table===I&&U.filter===V)b.push(Object.assign(Object.assign({},C),{id:U.id}));else{this.unsubscribe(),e==null||e(cr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=b,e&&e(cr.SUBSCRIBED);return}}).receive("error",f=>{e==null||e(cr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(cr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this._on(e,t,r)}async send(e,t={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:l}=e,u={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:l,private:this.private}]})};try{const h=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(r=t.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=h.body)===null||s===void 0?void 0:s.cancel()),h.ok?"ok":"error"}catch(h){return h.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var l,c,u;const h=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((u=(c=(l=this.params)===null||l===void 0?void 0:l.config)===null||c===void 0?void 0:c.broadcast)===null||u===void 0)&&u.ack)&&i("ok"),h.receive("ok",()=>i("ok")),h.receive("error",()=>i("error")),h.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=nn.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Tn.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const s=new wh(this,Tn.leave,{},e);s.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),s.send(),this._canPush()||s.trigger("ok",{})})}async _fetchWithTimeout(e,t,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),l=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:s.signal}));return clearTimeout(i),l}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new wh(this,e,t,r);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var s,i;const l=e.toLocaleLowerCase(),{close:c,error:u,leave:h,join:f}=Tn;if(r&&[c,u,h,f].indexOf(l)>=0&&r!==this._joinRef())return;let x=this._onMessage(l,t,r);if(t&&!x)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(w=>{var b,k,C;return((b=w.filter)===null||b===void 0?void 0:b.event)==="*"||((C=(k=w.filter)===null||k===void 0?void 0:k.event)===null||C===void 0?void 0:C.toLocaleLowerCase())===l}).map(w=>w.callback(x,r)):(i=this.bindings[l])===null||i===void 0||i.filter(w=>{var b,k,C,N,M,I;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in w){const V=w.id,U=(b=w.filter)===null||b===void 0?void 0:b.event;return V&&((k=t.ids)===null||k===void 0?void 0:k.includes(V))&&(U==="*"||(U==null?void 0:U.toLocaleLowerCase())===((C=t.data)===null||C===void 0?void 0:C.type.toLocaleLowerCase()))}else{const V=(M=(N=w==null?void 0:w.filter)===null||N===void 0?void 0:N.event)===null||M===void 0?void 0:M.toLocaleLowerCase();return V==="*"||V===((I=t==null?void 0:t.event)===null||I===void 0?void 0:I.toLocaleLowerCase())}else return w.type.toLocaleLowerCase()===l}).map(w=>{if(typeof x=="object"&&"ids"in x){const b=x.data,{schema:k,table:C,commit_timestamp:N,type:M,errors:I}=b;x=Object.assign(Object.assign({},{schema:k,table:C,commit_timestamp:N,eventType:M,new:{},old:{},errors:I}),this._getPayloadRecords(b))}w.callback(x,r)})}_isClosed(){return this.state===nn.closed}_isJoined(){return this.state===nn.joined}_isJoining(){return this.state===nn.joining}_isLeaving(){return this.state===nn.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const s=e.toLocaleLowerCase(),i={type:s,filter:t,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&fp.isEqual(s.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Tn.close,{},e)}_onError(e){this._on(Tn.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=nn.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=g0(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=g0(e.columns,e.old_record)),t}}const lC=()=>{},aC=typeof WebSocket<"u",cC=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class uC{constructor(e,t){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=Y2,this.params={},this.timeout=$v,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=lC,this.conn=null,this.sendBuffer=[],this.serializer=new eC,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let l;return i?l=i:typeof fetch>"u"?l=(...c)=>Fi(async()=>{const{default:u}=await Promise.resolve().then(()=>Qi);return{default:u}},void 0).then(({default:u})=>u(...c)):l=fetch,(...c)=>l(...c)},this.endPoint=`${e}/${sf.websocket}`,this.httpEndpoint=Uv(e),t!=null&&t.transport?this.transport=t.transport:this.transport=null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const s=(r=t==null?void 0:t.params)===null||r===void 0?void 0:r.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(i,l)=>l(JSON.stringify(i)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Bv(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t==null?void 0:t.fetch),t!=null&&t.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(t==null?void 0:t.worker)||!1,this.workerUrl=t==null?void 0:t.workerUrl}this.accessToken=(t==null?void 0:t.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(aC){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new dC(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),Fi(async()=>{const{default:e}=await import("./browser-CB7MyDT6.js").then(t=>t.b);return{default:e}},[]).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:X2}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Di.connecting:return _s.Connecting;case Di.open:return _s.Open;case Di.closing:return _s.Closing;default:return _s.Closed}}isConnected(){return this.connectionState()===_s.Open}channel(e,t={config:{}}){const r=new fp(`realtime:${e}`,t,this);return this.channels.push(r),r}push(e){const{topic:t,event:r,payload:s,ref:i}=e,l=()=>{this.encode(e,c=>{var u;(u=this.conn)===null||u===void 0||u.send(c)})};this.log("push",`${t} ${r} (${i})`,s),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(t){let r=null;try{r=JSON.parse(atob(t.split(".")[1]))}catch{}if(r&&r.exp&&!(Math.floor(Date.now()/1e3)-r.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`);this.accessTokenValue=t,this.channels.forEach(s=>{t&&s.updateJoinPayload({access_token:t}),s.joinedOnce&&s._isJoined()&&s._push(Tn.access_token,{access_token:t})})}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(Z2,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:r,event:s,payload:i,ref:l}=t;l&&l===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${r} ${s} ${l&&"("+l+")"||""}`,i),this.channels.filter(c=>c._isMember(r)).forEach(c=>c._trigger(s,i,l)),this.stateChangeCallbacks.message.forEach(c=>c(t))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Tn.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(t);return`${e}${r}${s}`}_workerObjectUrl(e){let t;if(e)t=e;else{const r=new Blob([cC],{type:"application/javascript"});t=URL.createObjectURL(r)}return t}}class dC{constructor(e,t,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Di.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}class pp extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function pt(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class hC extends pp{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class lf extends pp{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var fC=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(l){l(i)})}return new(t||(t=Promise))(function(i,l){function c(f){try{h(r.next(f))}catch(g){l(g)}}function u(f){try{h(r.throw(f))}catch(g){l(g)}}function h(f){f.done?i(f.value):s(f.value).then(c,u)}h((r=r.apply(n,e||[])).next())})};const Hv=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Fi(async()=>{const{default:r}=await Promise.resolve().then(()=>Qi);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},pC=()=>fC(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Fi(()=>Promise.resolve().then(()=>Qi),void 0)).Response:Response}),af=n=>{if(Array.isArray(n))return n.map(t=>af(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,r])=>{const s=t.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=af(r)}),e};var Ks=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(l){l(i)})}return new(t||(t=Promise))(function(i,l){function c(f){try{h(r.next(f))}catch(g){l(g)}}function u(f){try{h(r.throw(f))}catch(g){l(g)}}function h(f){f.done?i(f.value):s(f.value).then(c,u)}h((r=r.apply(n,e||[])).next())})};const bh=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),mC=(n,e,t)=>Ks(void 0,void 0,void 0,function*(){const r=yield pC();n instanceof r&&!(t!=null&&t.noResolveJson)?n.json().then(s=>{e(new hC(bh(s),n.status||500))}).catch(s=>{e(new lf(bh(s),s))}):e(new lf(bh(n),n))}),gC=(n,e,t,r)=>{const s={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r&&(s.body=JSON.stringify(r)),Object.assign(Object.assign({},s),t))};function _l(n,e,t,r,s,i){return Ks(this,void 0,void 0,function*(){return new Promise((l,c)=>{n(t,gC(e,r,s,i)).then(u=>{if(!u.ok)throw u;return r!=null&&r.noResolveJson?u:u.json()}).then(u=>l(u)).catch(u=>mC(u,c,r))})})}function bc(n,e,t,r){return Ks(this,void 0,void 0,function*(){return _l(n,"GET",e,t,r)})}function $r(n,e,t,r,s){return Ks(this,void 0,void 0,function*(){return _l(n,"POST",e,r,s,t)})}function yC(n,e,t,r,s){return Ks(this,void 0,void 0,function*(){return _l(n,"PUT",e,r,s,t)})}function xC(n,e,t,r){return Ks(this,void 0,void 0,function*(){return _l(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),r)})}function Vv(n,e,t,r,s){return Ks(this,void 0,void 0,function*(){return _l(n,"DELETE",e,r,s,t)})}var Gt=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(l){l(i)})}return new(t||(t=Promise))(function(i,l){function c(f){try{h(r.next(f))}catch(g){l(g)}}function u(f){try{h(r.throw(f))}catch(g){l(g)}}function h(f){f.done?i(f.value):s(f.value).then(c,u)}h((r=r.apply(n,e||[])).next())})};const vC={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},w0={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class wC{constructor(e,t={},r,s){this.url=e,this.headers=t,this.bucketId=r,this.fetch=Hv(s)}uploadOrUpdate(e,t,r,s){return Gt(this,void 0,void 0,function*(){try{let i;const l=Object.assign(Object.assign({},w0),s);let c=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(l.upsert)});const u=l.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",l.cacheControl),u&&i.append("metadata",this.encodeMetadata(u)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",l.cacheControl),u&&i.append("metadata",this.encodeMetadata(u))):(i=r,c["cache-control"]=`max-age=${l.cacheControl}`,c["content-type"]=l.contentType,u&&(c["x-metadata"]=this.toBase64(this.encodeMetadata(u)))),s!=null&&s.headers&&(c=Object.assign(Object.assign({},c),s.headers));const h=this._removeEmptyFolders(t),f=this._getFinalPath(h),g=yield this.fetch(`${this.url}/object/${f}`,Object.assign({method:e,body:i,headers:c},l!=null&&l.duplex?{duplex:l.duplex}:{})),x=yield g.json();return g.ok?{data:{path:h,id:x.Id,fullPath:x.Key},error:null}:{data:null,error:x}}catch(i){if(pt(i))return{data:null,error:i};throw i}})}upload(e,t,r){return Gt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,s){return Gt(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),l=this._getFinalPath(i),c=new URL(this.url+`/object/upload/sign/${l}`);c.searchParams.set("token",t);try{let u;const h=Object.assign({upsert:w0.upsert},s),f=Object.assign(Object.assign({},this.headers),{"x-upsert":String(h.upsert)});typeof Blob<"u"&&r instanceof Blob?(u=new FormData,u.append("cacheControl",h.cacheControl),u.append("",r)):typeof FormData<"u"&&r instanceof FormData?(u=r,u.append("cacheControl",h.cacheControl)):(u=r,f["cache-control"]=`max-age=${h.cacheControl}`,f["content-type"]=h.contentType);const g=yield this.fetch(c.toString(),{method:"PUT",body:u,headers:f}),x=yield g.json();return g.ok?{data:{path:i,fullPath:x.Key},error:null}:{data:null,error:x}}catch(u){if(pt(u))return{data:null,error:u};throw u}})}createSignedUploadUrl(e,t){return Gt(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);t!=null&&t.upsert&&(s["x-upsert"]="true");const i=yield $r(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),l=new URL(this.url+i.url),c=l.searchParams.get("token");if(!c)throw new pp("No token returned by API");return{data:{signedUrl:l.toString(),path:e,token:c},error:null}}catch(r){if(pt(r))return{data:null,error:r};throw r}})}update(e,t,r){return Gt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return Gt(this,void 0,void 0,function*(){try{return{data:yield $r(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(pt(s))return{data:null,error:s};throw s}})}copy(e,t,r){return Gt(this,void 0,void 0,function*(){try{return{data:{path:(yield $r(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(pt(s))return{data:null,error:s};throw s}})}createSignedUrl(e,t,r){return Gt(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield $r(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const l=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${l}`)},{data:i,error:null}}catch(s){if(pt(s))return{data:null,error:s};throw s}})}createSignedUrls(e,t,r){return Gt(this,void 0,void 0,function*(){try{const s=yield $r(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${i}`):null})),error:null}}catch(s){if(pt(s))return{data:null,error:s};throw s}})}download(e,t){return Gt(this,void 0,void 0,function*(){const s=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),l=i?`?${i}`:"";try{const c=this._getFinalPath(e);return{data:yield(yield bc(this.fetch,`${this.url}/${s}/${c}${l}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(c){if(pt(c))return{data:null,error:c};throw c}})}info(e){return Gt(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const r=yield bc(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:af(r),error:null}}catch(r){if(pt(r))return{data:null,error:r};throw r}})}exists(e){return Gt(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield xC(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(pt(r)&&r instanceof lf){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){const r=this._getFinalPath(e),s=[],i=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";i!==""&&s.push(i);const c=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",u=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});u!==""&&s.push(u);let h=s.join("&");return h!==""&&(h=`?${h}`),{data:{publicUrl:encodeURI(`${this.url}/${c}/public/${r}${h}`)}}}remove(e){return Gt(this,void 0,void 0,function*(){try{return{data:yield Vv(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(pt(t))return{data:null,error:t};throw t}})}list(e,t,r){return Gt(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},vC),t),{prefix:e||""});return{data:yield $r(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(pt(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const bC="2.7.1",kC={"X-Client-Info":`storage-js/${bC}`};var ji=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(l){l(i)})}return new(t||(t=Promise))(function(i,l){function c(f){try{h(r.next(f))}catch(g){l(g)}}function u(f){try{h(r.throw(f))}catch(g){l(g)}}function h(f){f.done?i(f.value):s(f.value).then(c,u)}h((r=r.apply(n,e||[])).next())})};class SC{constructor(e,t={},r){this.url=e,this.headers=Object.assign(Object.assign({},kC),t),this.fetch=Hv(r)}listBuckets(){return ji(this,void 0,void 0,function*(){try{return{data:yield bc(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(pt(e))return{data:null,error:e};throw e}})}getBucket(e){return ji(this,void 0,void 0,function*(){try{return{data:yield bc(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(pt(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return ji(this,void 0,void 0,function*(){try{return{data:yield $r(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(pt(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return ji(this,void 0,void 0,function*(){try{return{data:yield yC(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(pt(r))return{data:null,error:r};throw r}})}emptyBucket(e){return ji(this,void 0,void 0,function*(){try{return{data:yield $r(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(pt(t))return{data:null,error:t};throw t}})}deleteBucket(e){return ji(this,void 0,void 0,function*(){try{return{data:yield Vv(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(pt(t))return{data:null,error:t};throw t}})}}class CC extends SC{constructor(e,t={},r){super(e,t,r)}from(e){return new wC(this.url,this.headers,e,this.fetch)}}const NC="2.48.1";let Go="";typeof Deno<"u"?Go="deno":typeof document<"u"?Go="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Go="react-native":Go="node";const EC={"X-Client-Info":`supabase-js-${Go}/${NC}`},jC={headers:EC},TC={schema:"public"},_C={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},AC={};var MC=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(l){l(i)})}return new(t||(t=Promise))(function(i,l){function c(f){try{h(r.next(f))}catch(g){l(g)}}function u(f){try{h(r.throw(f))}catch(g){l(g)}}function h(f){f.done?i(f.value):s(f.value).then(c,u)}h((r=r.apply(n,e||[])).next())})};const OC=n=>{let e;return n?e=n:typeof fetch>"u"?e=Rv:e=fetch,(...t)=>e(...t)},RC=()=>typeof Headers>"u"?Pv:Headers,PC=(n,e,t)=>{const r=OC(t),s=RC();return(i,l)=>MC(void 0,void 0,void 0,function*(){var c;const u=(c=yield e())!==null&&c!==void 0?c:n;let h=new s(l==null?void 0:l.headers);return h.has("apikey")||h.set("apikey",n),h.has("Authorization")||h.set("Authorization",`Bearer ${u}`),r(i,Object.assign(Object.assign({},l),{headers:h}))})};var IC=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(l){l(i)})}return new(t||(t=Promise))(function(i,l){function c(f){try{h(r.next(f))}catch(g){l(g)}}function u(f){try{h(r.throw(f))}catch(g){l(g)}}function h(f){f.done?i(f.value):s(f.value).then(c,u)}h((r=r.apply(n,e||[])).next())})};function LC(n){return n.replace(/\/$/,"")}function DC(n,e){const{db:t,auth:r,realtime:s,global:i}=n,{db:l,auth:c,realtime:u,global:h}=e,f={db:Object.assign(Object.assign({},l),t),auth:Object.assign(Object.assign({},c),r),realtime:Object.assign(Object.assign({},u),s),global:Object.assign(Object.assign({},h),i),accessToken:()=>IC(this,void 0,void 0,function*(){return""})};return n.accessToken?f.accessToken=n.accessToken:delete f.accessToken,f}const Wv="2.67.3",zC="http://localhost:9999",$C="supabase.auth.token",BC={"X-Client-Info":`gotrue-js/${Wv}`},b0=10,cf="X-Supabase-Api-Version",qv={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function FC(n){return Math.round(Date.now()/1e3)+n}function UC(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const $n=()=>typeof window<"u"&&typeof document<"u",Es={tested:!1,writable:!1},tl=()=>{if(!$n())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Es.tested)return Es.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),Es.tested=!0,Es.writable=!0}catch{Es.tested=!0,Es.writable=!1}return Es.writable};function HC(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return t.searchParams.forEach((r,s)=>{e[s]=r}),e}const Kv=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Fi(async()=>{const{default:r}=await Promise.resolve().then(()=>Qi);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},VC=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",Jv=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},Ja=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Ga=async(n,e)=>{await n.removeItem(e)};function WC(n){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let t="",r,s,i,l,c,u,h,f=0;for(n=n.replace("-","+").replace("_","/");f<n.length;)l=e.indexOf(n.charAt(f++)),c=e.indexOf(n.charAt(f++)),u=e.indexOf(n.charAt(f++)),h=e.indexOf(n.charAt(f++)),r=l<<2|c>>4,s=(c&15)<<4|u>>2,i=(u&3)<<6|h,t=t+String.fromCharCode(r),u!=64&&s!=0&&(t=t+String.fromCharCode(s)),h!=64&&i!=0&&(t=t+String.fromCharCode(i));return t}class cu{constructor(){this.promise=new cu.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}cu.promiseConstructor=Promise;function k0(n){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,t=n.split(".");if(t.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(t[1]))throw new Error("JWT is not valid: payload is not in base64url format");const r=t[1];return JSON.parse(WC(r))}async function qC(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function KC(n,e){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const l=await n(i);if(!e(i,null,l)){r(l);return}}catch(l){if(!e(i,l)){s(l);return}}})()})}function JC(n){return("0"+n.toString(16)).substr(-2)}function GC(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let s="";for(let i=0;i<56;i++)s+=t.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,JC).join("")}async function QC(n){const t=new TextEncoder().encode(n),r=await crypto.subtle.digest("SHA-256",t),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}function YC(n){return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function XC(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await QC(n);return YC(t)}async function Ti(n,e,t=!1){const r=GC();let s=r;t&&(s+="/PASSWORD_RECOVERY"),await Jv(n,`${e}-code-verifier`,s);const i=await XC(r);return[i,r===i?"plain":"s256"]}const ZC=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function eN(n){const e=n.headers.get(cf);if(!e||!e.match(ZC))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}class mp extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function ve(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class tN extends mp{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}function nN(n){return ve(n)&&n.name==="AuthApiError"}class Gv extends mp{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Js extends mp{constructor(e,t,r,s){super(e,r,s),this.name=t,this.status=r}}class Lr extends Js{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function rN(n){return ve(n)&&n.name==="AuthSessionMissingError"}class kh extends Js{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Qa extends Js{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Ya extends Js{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function sN(n){return ve(n)&&n.name==="AuthImplicitGrantRedirectError"}class S0 extends Js{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class uf extends Js{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Sh(n){return ve(n)&&n.name==="AuthRetryableFetchError"}class C0 extends Js{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}var iN=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t};const Ts=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),oN=[502,503,504];async function N0(n){var e;if(!VC(n))throw new uf(Ts(n),0);if(oN.includes(n.status))throw new uf(Ts(n),n.status);let t;try{t=await n.json()}catch(i){throw new Gv(Ts(i),i)}let r;const s=eN(n);if(s&&s.getTime()>=qv["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?r=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(r=t.error_code),r){if(r==="weak_password")throw new C0(Ts(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Lr}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((i,l)=>i&&typeof l=="string",!0))throw new C0(Ts(t),n.status,t.weak_password.reasons);throw new tN(Ts(t),n.status||500,r)}const lN=(n,e,t,r)=>{const s={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),t))};async function Ce(n,e,t,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[cf]||(i[cf]=qv["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const l=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(l.redirect_to=r.redirectTo);const c=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",u=await aN(n,e,t+c,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(u):{data:Object.assign({},u),error:null}}async function aN(n,e,t,r,s,i){const l=lN(e,r,s,i);let c;try{c=await n(t,Object.assign({},l))}catch(u){throw console.error(u),new uf(Ts(u),0)}if(c.ok||await N0(c),r!=null&&r.noResolveJson)return c;try{return await c.json()}catch(u){await N0(u)}}function Dr(n){var e;let t=null;hN(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=FC(n.expires_in)));const r=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:r},error:null}}function E0(n){const e=Dr(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)&&(e.data.weak_password=n.weak_password),e}function Hr(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function cN(n){return{data:n,error:null}}function uN(n){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:s,verification_type:i}=n,l=iN(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),c={action_link:e,email_otp:t,hashed_token:r,redirect_to:s,verification_type:i},u=Object.assign({},l);return{data:{properties:c,user:u},error:null}}function dN(n){return n}function hN(n){return n.access_token&&n.refresh_token&&n.expires_in}var fN=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t};class pN{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=Kv(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t="global"){try{return await Ce(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(ve(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await Ce(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Hr})}catch(r){if(ve(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=fN(e,["options"]),s=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await Ce(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:uN,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(ve(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Ce(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Hr})}catch(t){if(ve(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,s,i,l,c,u;try{const h={nextPage:null,lastPage:0,total:0},f=await Ce(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:dN});if(f.error)throw f.error;const g=await f.json(),x=(l=f.headers.get("x-total-count"))!==null&&l!==void 0?l:0,w=(u=(c=f.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&u!==void 0?u:[];return w.length>0&&(w.forEach(b=>{const k=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),C=JSON.parse(b.split(";")[1].split("=")[1]);h[`${C}Page`]=k}),h.total=parseInt(x)),{data:Object.assign(Object.assign({},g),h),error:null}}catch(h){if(ve(h))return{data:{users:[]},error:h};throw h}}async getUserById(e){try{return await Ce(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Hr})}catch(t){if(ve(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){try{return await Ce(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Hr})}catch(r){if(ve(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){try{return await Ce(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Hr})}catch(r){if(ve(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){try{const{data:t,error:r}=await Ce(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:t,error:r}}catch(t){if(ve(t))return{data:null,error:t};throw t}}async _deleteFactor(e){try{return{data:await Ce(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(ve(t))return{data:null,error:t};throw t}}}const mN={getItem:n=>tl()?globalThis.localStorage.getItem(n):null,setItem:(n,e)=>{tl()&&globalThis.localStorage.setItem(n,e)},removeItem:n=>{tl()&&globalThis.localStorage.removeItem(n)}};function j0(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}function gN(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const _i={debug:!!(globalThis&&tl()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Qv extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class yN extends Qv{}async function xN(n,e,t){_i.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),_i.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){_i.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,s.name);try{return await t()}finally{_i.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,s.name)}}else{if(e===0)throw _i.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new yN(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(_i.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}gN();const vN={url:zC,storageKey:$C,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:BC,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1},qo=30*1e3,T0=3;async function _0(n,e,t){return await t()}class fl{constructor(e){var t,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=fl.nextInstanceID,fl.nextInstanceID+=1,this.instanceID>0&&$n()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},vN),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new pN({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=Kv(s.fetch),this.lock=s.lock||_0,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:$n()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=xN:this.lock=_0,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:tl()?this.storage=mN:(this.memoryStorage={},this.storage=j0(this.memoryStorage)):(this.memoryStorage={},this.storage=j0(this.memoryStorage)),$n()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Wv}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=HC(window.location.href);let r="none";if(this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce"),$n()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(t,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),sN(i)){const u=(e=i.details)===null||e===void 0?void 0:e.code;if(u==="identity_already_exists"||u==="identity_not_found"||u==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:l,redirectType:c}=s;return this._debug("#_initialize()","detected session in URL",l,"redirect type",c),await this._saveSession(l),setTimeout(async()=>{c==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return ve(t)?{error:t}:{error:new Gv("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,s;try{const i=await Ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:Dr}),{data:l,error:c}=i;if(c||!l)return{data:{user:null,session:null},error:c};const u=l.session,h=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",u)),{data:{user:h,session:u},error:null}}catch(i){if(ve(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var t,r,s;try{let i;if("email"in e){const{email:f,password:g,options:x}=e;let w=null,b=null;this.flowType==="pkce"&&([w,b]=await Ti(this.storage,this.storageKey)),i=await Ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:x==null?void 0:x.emailRedirectTo,body:{email:f,password:g,data:(t=x==null?void 0:x.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:x==null?void 0:x.captchaToken},code_challenge:w,code_challenge_method:b},xform:Dr})}else if("phone"in e){const{phone:f,password:g,options:x}=e;i=await Ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:f,password:g,data:(r=x==null?void 0:x.data)!==null&&r!==void 0?r:{},channel:(s=x==null?void 0:x.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:x==null?void 0:x.captchaToken}},xform:Dr})}else throw new Qa("You must provide either an email or phone number and a password");const{data:l,error:c}=i;if(c||!l)return{data:{user:null,session:null},error:c};const u=l.session,h=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",u)),{data:{user:h,session:u},error:null}}catch(i){if(ve(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let t;if("email"in e){const{email:i,password:l,options:c}=e;t=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:l,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:E0})}else if("phone"in e){const{phone:i,password:l,options:c}=e;t=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:l,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:E0})}else throw new Qa("You must provide either an email or phone number and a password");const{data:r,error:s}=t;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new kh}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(t){if(ve(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,r,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const t=await Ja(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(t??"").split("/");try{const{data:i,error:l}=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Dr});if(await Ga(this.storage,`${this.storageKey}-code-verifier`),l)throw l;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new kh}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:l})}catch(i){if(ve(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:t,provider:r,token:s,access_token:i,nonce:l}=e,c=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:l,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:Dr}),{data:u,error:h}=c;return h?{data:{user:null,session:null},error:h}:!u||!u.session||!u.user?{data:{user:null,session:null},error:new kh}:(u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),{data:u,error:h})}catch(t){if(ve(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,r,s,i,l;try{if("email"in e){const{email:c,options:u}=e;let h=null,f=null;this.flowType==="pkce"&&([h,f]=await Ti(this.storage,this.storageKey));const{error:g}=await Ce(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:c,data:(t=u==null?void 0:u.data)!==null&&t!==void 0?t:{},create_user:(r=u==null?void 0:u.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken},code_challenge:h,code_challenge_method:f},redirectTo:u==null?void 0:u.emailRedirectTo});return{data:{user:null,session:null},error:g}}if("phone"in e){const{phone:c,options:u}=e,{data:h,error:f}=await Ce(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:c,data:(s=u==null?void 0:u.data)!==null&&s!==void 0?s:{},create_user:(i=u==null?void 0:u.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken},channel:(l=u==null?void 0:u.channel)!==null&&l!==void 0?l:"sms"}});return{data:{user:null,session:null,messageId:h==null?void 0:h.message_id},error:f}}throw new Qa("You must provide either an email or phone number.")}catch(c){if(ve(c))return{data:{user:null,session:null},error:c};throw c}}async verifyOtp(e){var t,r;try{let s,i;"options"in e&&(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:l,error:c}=await Ce(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:Dr});if(c)throw c;if(!l)throw new Error("An error occurred on token verification.");const u=l.session,h=l.user;return u!=null&&u.access_token&&(await this._saveSession(u),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",u)),{data:{user:h,session:u},error:null}}catch(s){if(ve(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var t,r,s;try{let i=null,l=null;return this.flowType==="pkce"&&([i,l]=await Ti(this.storage,this.storageKey)),await Ce(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:l}),headers:this.headers,xform:cN})}catch(i){if(ve(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new Lr;const{error:s}=await Ce(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(ve(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:i}=e,{error:l}=await Ce(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:l}}else if("phone"in e){const{phone:r,type:s,options:i}=e,{data:l,error:c}=await Ce(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:c}}throw new Qa("You must provide either an email or phone number and a type")}catch(t){if(ve(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await t()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=t();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await Ja(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let l=this.suppressGetSessionWarning;e=new Proxy(e,{get:(u,h,f)=>(!l&&h==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),l=!0,this.suppressGetSessionWarning=!0),Reflect.get(u,h,f))})}return{data:{session:e},error:null}}const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Ce(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Hr}):await this._useSession(async t=>{var r,s,i;const{data:l,error:c}=t;if(c)throw c;return!(!((r=l.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Lr}:await Ce(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=l.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Hr})})}catch(t){if(ve(t))return rN(t)&&(await this._removeSession(),await Ga(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new Lr;const l=s.session;let c=null,u=null;this.flowType==="pkce"&&e.email!=null&&([c,u]=await Ti(this.storage,this.storageKey));const{data:h,error:f}=await Ce(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:c,code_challenge_method:u}),jwt:l.access_token,xform:Hr});if(f)throw f;return l.user=h.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}})}catch(r){if(ve(r))return{data:{user:null},error:r};throw r}}_decodeJWT(e){return k0(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Lr;const t=Date.now()/1e3;let r=t,s=!0,i=null;const l=k0(e.access_token);if(l.exp&&(r=l.exp,s=r<=t),s){const{session:c,error:u}=await this._callRefreshToken(e.refresh_token);if(u)return{data:{user:null,session:null},error:u};if(!c)return{data:{user:null,session:null},error:null};i=c}else{const{data:c,error:u}=await this._getUser(e.access_token);if(u)throw u;i={access_token:e.access_token,refresh_token:e.refresh_token,user:c.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(t){if(ve(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:l,error:c}=t;if(c)throw c;e=(r=l.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Lr;const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(ve(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!$n())throw new Ya("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Ya(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new S0("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ya("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new S0("No code detected.");const{data:M,error:I}=await this._exchangeCodeForSession(e.code);if(I)throw I;const V=new URL(window.location.href);return V.searchParams.delete("code"),window.history.replaceState(window.history.state,"",V.toString()),{data:{session:M.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:l,expires_in:c,expires_at:u,token_type:h}=e;if(!i||!c||!l||!h)throw new Ya("No session defined in URL");const f=Math.round(Date.now()/1e3),g=parseInt(c);let x=f+g;u&&(x=parseInt(u));const w=x-f;w*1e3<=qo&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${w}s, should have been closer to ${g}s`);const b=x-g;f-b>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",b,x,f):f-b<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",b,x,f);const{data:k,error:C}=await this._getUser(i);if(C)throw C;const N={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:g,expires_at:x,refresh_token:l,token_type:h,user:k.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:N,redirectType:e.type},error:null}}catch(r){if(ve(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Ja(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:s,error:i}=t;if(i)return{error:i};const l=(r=s.session)===null||r===void 0?void 0:r.access_token;if(l){const{error:c}=await this.admin.signOut(l,e);if(c&&!(nN(c)&&(c.status===404||c.status===401||c.status===403)))return{error:c}}return e!=="others"&&(await this._removeSession(),await Ga(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=UC(),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,s;try{const{data:{session:i},error:l}=t;if(l)throw l;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,t={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await Ti(this.storage,this.storageKey,!0));try{return await Ce(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(ve(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(ve(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:r,error:s}=await this._useSession(async i=>{var l,c,u,h,f;const{data:g,error:x}=i;if(x)throw x;const w=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(l=e.options)===null||l===void 0?void 0:l.redirectTo,scopes:(c=e.options)===null||c===void 0?void 0:c.scopes,queryParams:(u=e.options)===null||u===void 0?void 0:u.queryParams,skipBrowserRedirect:!0});return await Ce(this.fetch,"GET",w,{headers:this.headers,jwt:(f=(h=g.session)===null||h===void 0?void 0:h.access_token)!==null&&f!==void 0?f:void 0})});if(s)throw s;return $n()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(ve(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,s;const{data:i,error:l}=t;if(l)throw l;return await Ce(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(t){if(ve(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await KC(async s=>(s>0&&await qC(200*Math.pow(2,s-1)),this._debug(t,"refreshing attempt",s),await Ce(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Dr})),(s,i)=>{const l=200*Math.pow(2,s);return i&&Sh(i)&&Date.now()+l-r<qo})}catch(r){if(this._debug(t,"error",r),ve(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),$n()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const r=await Ja(this.storage,this.storageKey);if(this._debug(t,"session from storage",r),!this._isValidSession(r)){this._debug(t,"session is not valid"),r!==null&&await this._removeSession();return}const s=Math.round(Date.now()/1e3),i=((e=r.expires_at)!==null&&e!==void 0?e:1/0)<s+b0;if(this._debug(t,`session has${i?"":" not"} expired with margin of ${b0}s`),i){if(this.autoRefreshToken&&r.refresh_token){const{error:l}=await this._callRefreshToken(r.refresh_token);l&&(console.error(l),Sh(l)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(t,"error",r),console.error(r);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new Lr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new cu;const{data:i,error:l}=await this._refreshAccessToken(e);if(l)throw l;if(!i.session)throw new Lr;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const c={session:i.session,error:null};return this.refreshingDeferred.resolve(c),c}catch(i){if(this._debug(s,"error",i),ve(i)){const l={session:null,error:i};return Sh(i)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(l),l}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,t,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const i=[],l=Array.from(this.stateChangeEmitters.values()).map(async c=>{try{await c.callback(e,t)}catch(u){i.push(u)}});if(await Promise.all(l),i.length>0){for(let c=0;c<i.length;c+=1)console.error(i[c]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Jv(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Ga(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&$n()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),qo);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/qo);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${qo}ms, refresh threshold is ${T0} ticks`),s<=T0&&await this._callRefreshToken(r.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Qv)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!$n()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const s=[`provider=${encodeURIComponent(t)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,l]=await Ti(this.storage,this.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(l)}`});s.push(c.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:s,error:i}=t;return i?{data:null,error:i}:await Ce(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(ve(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,s;const{data:i,error:l}=t;if(l)return{data:null,error:l};const c=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:u,error:h}=await Ce(this.fetch,"POST",`${this.url}/factors`,{body:c,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return h?{data:null,error:h}:(e.factorType==="totp"&&(!((s=u==null?void 0:u.totp)===null||s===void 0)&&s.qr_code)&&(u.totp.qr_code=`data:image/svg+xml;utf-8,${u.totp.qr_code}`),{data:u,error:null})})}catch(t){if(ve(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:s,error:i}=t;if(i)return{data:null,error:i};const{data:l,error:c}=await Ce(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return c?{data:null,error:c}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:c})})}catch(t){if(ve(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:s,error:i}=t;return i?{data:null,error:i}:await Ce(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(ve(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const r=(e==null?void 0:e.factors)||[],s=r.filter(l=>l.factor_type==="totp"&&l.status==="verified"),i=r.filter(l=>l.factor_type==="phone"&&l.status==="verified");return{data:{all:r,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,r;const{data:{session:s},error:i}=e;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const l=this._decodeJWT(s.access_token);let c=null;l.aal&&(c=l.aal);let u=c;((r=(t=s.user.factors)===null||t===void 0?void 0:t.filter(g=>g.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(u="aal2");const f=l.amr||[];return{data:{currentLevel:c,nextLevel:u,currentAuthenticationMethods:f},error:null}}))}}fl.nextInstanceID=0;const wN=fl;class bN extends wN{constructor(e){super(e)}}var kN=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(l){l(i)})}return new(t||(t=Promise))(function(i,l){function c(f){try{h(r.next(f))}catch(g){l(g)}}function u(f){try{h(r.throw(f))}catch(g){l(g)}}function h(f){f.done?i(f.value):s(f.value).then(c,u)}h((r=r.apply(n,e||[])).next())})};class SN{constructor(e,t,r){var s,i,l;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const c=LC(e);this.realtimeUrl=`${c}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${c}/auth/v1`,this.storageUrl=`${c}/storage/v1`,this.functionsUrl=`${c}/functions/v1`;const u=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,h={db:TC,realtime:AC,auth:Object.assign(Object.assign({},_C),{storageKey:u}),global:jC},f=DC(r??{},h);this.storageKey=(s=f.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=f.global.headers)!==null&&i!==void 0?i:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(g,x)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(x)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((l=f.auth)!==null&&l!==void 0?l:{},this.headers,f.global.fetch),this.fetch=PC(t,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.rest=new G2(`${c}/rest/v1`,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),f.accessToken||this._listenForAuthEvents()}get functions(){return new D2(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new CC(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return kN(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(t=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:s,storageKey:i,flowType:l,lock:c,debug:u},h,f){const g={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new bN({url:this.authUrl,headers:Object.assign(Object.assign({},g),h),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:s,flowType:l,lock:c,debug:u,fetch:f,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new uC(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const CN=(n,e,t)=>new SN(n,e,t),NN=void 0,EN=void 0,jN=n=>{throw(n.name!=="AuthApiError"||n.message!=="Invalid Refresh Token: Refresh Token Not Found")&&console.error("Supabase operation failed:",n),n},TN=async(n,e=3)=>{for(let t=0;t<e;t++)try{return await n()}catch(r){if(r.name==="AuthApiError"||t===e-1)throw r;await new Promise(s=>setTimeout(s,1e3*Math.pow(2,t)))}};throw new Error("Missing Supabase environment variables");const _N={getItem:n=>{try{const e=localStorage.getItem(n);return e?(JSON.parse(e),e):null}catch(e){return console.warn("Storage error, clearing invalid data:",e),localStorage.removeItem(n),null}},setItem:(n,e)=>{try{localStorage.setItem(n,e)}catch(t){console.error("Error setting storage:",t)}},removeItem:n=>{try{localStorage.removeItem(n)}catch(e){console.error("Error removing from storage:",e)}}},pe=CN(NN,EN,{auth:{autoRefreshToken:!0,persistSession:!1,detectSessionInUrl:!0,storage:_N,storageKey:"supabase-auth-token",flowType:"pkce"},global:{fetch:(...n)=>TN(()=>fetch(...n)).catch(e=>{throw jN(e),e})}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var AN={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MN=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Q=(n,e)=>{const t=A.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:l,className:c="",children:u,...h},f)=>A.createElement("svg",{ref:f,...AN,width:s,height:s,stroke:r,strokeWidth:l?Number(i)*24/Number(s):i,className:["lucide",`lucide-${MN(n)}`,c].join(" "),...h},[...e.map(([g,x])=>A.createElement(g,x)),...Array.isArray(u)?u:[u]]));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ON=Q("AlignCenter",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"17",x2:"7",y1:"12",y2:"12",key:"rsh8ii"}],["line",{x1:"19",x2:"5",y1:"18",y2:"18",key:"1t0tuv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RN=Q("AlignJustify",[["line",{x1:"3",x2:"21",y1:"6",y2:"6",key:"4m8b97"}],["line",{x1:"3",x2:"21",y1:"12",y2:"12",key:"10d38w"}],["line",{x1:"3",x2:"21",y1:"18",y2:"18",key:"kwyyxn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PN=Q("AlignLeft",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}],["line",{x1:"17",x2:"3",y1:"18",y2:"18",key:"1awlsn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IN=Q("AlignRight",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}],["line",{x1:"21",x2:"7",y1:"18",y2:"18",key:"1g9eri"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pl=Q("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uu=Q("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LN=Q("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DN=Q("Bold",[["path",{d:"M14 12a4 4 0 0 0 0-8H6v8",key:"v2sylx"}],["path",{d:"M15 20a4 4 0 0 0 0-8H6v8Z",key:"1ef5ya"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zN=Q("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $N=Q("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BN=Q("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yi=Q("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FN=Q("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A0=Q("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yv=Q("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Al=Q("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UN=Q("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HN=Q("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xv=Q("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zv=Q("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e1=Q("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VN=Q("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t1=Q("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WN=Q("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qN=Q("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KN=Q("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JN=Q("Heading1",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"m17 12 3-2v8",key:"1hhhft"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GN=Q("Heading2",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1",key:"9jr5yi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QN=Q("Highlighter",[["path",{d:"m9 11-6 6v3h9l3-3",key:"1a3l36"}],["path",{d:"m22 12-4.6 4.6a2 2 0 0 1-2.8 0l-5.2-5.2a2 2 0 0 1 0-2.8L14 4",key:"14a9rk"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YN=Q("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gp=Q("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XN=Q("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZN=Q("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eE=Q("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tE=Q("LineChart",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n1=Q("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r1=Q("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nE=Q("ListOrdered",[["line",{x1:"10",x2:"21",y1:"6",y2:"6",key:"76qw6h"}],["line",{x1:"10",x2:"21",y1:"12",y2:"12",key:"16nom4"}],["line",{x1:"10",x2:"21",y1:"18",y2:"18",key:"u3jurt"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rE=Q("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sE=Q("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M0=Q("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s1=Q("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yp=Q("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iE=Q("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oE=Q("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O0=Q("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lE=Q("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aE=Q("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R0=Q("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i1=Q("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rr=Q("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cE=Q("Quote",[["path",{d:"M3 21c3 0 7-1 7-8V5c0-1.25-.756-2.017-2-2H4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2 1 0 1 0 1 1v1c0 1-1 2-2 2s-1 .008-1 1.031V20c0 1 0 1 1 1z",key:"4rm80e"}],["path",{d:"M15 21c3 0 7-1 7-8V5c0-1.25-.757-2.017-2-2h-4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2h.75c0 2.25.25 4-2.75 4v3c0 1 0 1 1 1z",key:"10za9r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uE=Q("Redo",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dE=Q("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hE=Q("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const df=Q("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fE=Q("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o1=Q("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pE=Q("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mE=Q("Table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l1=Q("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gE=Q("Ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P0=Q("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xp=Q("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yE=Q("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I0=Q("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xE=Q("Underline",[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vE=Q("Undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a1=Q("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wE=Q("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vp=Q("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xi=Q("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bE=Q("Workflow",[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qn=Q("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c1=Q("Youtube",[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kE=Q("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function u1(){const n=A.useRef(null),e=A.useRef([]),t=A.useRef();return A.useEffect(()=>{const r=n.current;if(!r)return;const s=r.getContext("2d");if(!s)return;const i=100;function l(){const b=r.parentElement;b&&(r.width=b.clientWidth,r.height=b.clientHeight)}function c(){return{x:Math.random()*r.width,y:Math.random()*r.height,size:Math.random()*3+1,speedX:Math.random()*2-1,speedY:Math.random()*2-1}}function u(){e.current=Array.from({length:i},c)}function h(b){s&&(s.fillStyle="#00CABA",s.beginPath(),s.arc(b.x,b.y,b.size,0,Math.PI*2),s.fill())}function f(b){b.x+=b.speedX,b.y+=b.speedY,b.x>r.width&&(b.x=0),b.x<0&&(b.x=r.width),b.y>r.height&&(b.y=0),b.y<0&&(b.y=r.height)}function g(){if(!s)return;const b=e.current;for(let k=0;k<b.length;k++)for(let C=k;C<b.length;C++){const N=b[k].x-b[C].x,M=b[k].y-b[C].y,I=Math.sqrt(N*N+M*M);if(I<100){const V=(1-I/100)*.2;s.strokeStyle=`rgba(0, 202, 186, ${V})`,s.lineWidth=1,s.beginPath(),s.moveTo(b[k].x,b[k].y),s.lineTo(b[C].x,b[C].y),s.stroke()}}}function x(){s&&(s.clearRect(0,0,r.width,r.height),e.current.forEach(b=>{f(b),h(b)}),g(),t.current=requestAnimationFrame(x))}l(),u(),x();const w=()=>{l(),u()};return window.addEventListener("resize",w),()=>{window.removeEventListener("resize",w),t.current&&cancelAnimationFrame(t.current)}},[]),p.jsx("canvas",{ref:n,className:"absolute inset-0 w-full h-full",style:{background:"transparent"}})}function SE({isOpen:n,onClose:e}){const[t,r]=A.useState({firstName:"",lastName:"",email:"",phone:"",message:""}),[s,i]=A.useState(!1),[l,c]=A.useState(!1),[u,h]=A.useState(0),[f,g]=A.useState(0),x=A.useRef(null),w=M=>{r(I=>({...I,[M.target.name]:M.target.value}))},b=M=>{x.current&&(c(!0),h(M.pageY-x.current.offsetTop),g(x.current.scrollTop))},k=M=>{if(!l||!x.current)return;const V=(M.pageY-x.current.offsetTop-u)*2;x.current.scrollTop=f-V},C=()=>{c(!1)},N=async M=>{M.preventDefault();try{i(!0);const{error:I}=await pe.from("leads").insert([{first_name:t.firstName,last_name:t.lastName,email:t.email,phone:t.phone,message:t.message}]);if(I)throw I;alert("Thank you for your interest! We will be in touch shortly."),e(),r({firstName:"",lastName:"",email:"",phone:"",message:""})}catch(I){console.error("Error submitting form:",I),alert("There was an error submitting your request. Please try again.")}finally{i(!1)}};return n?p.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50",children:p.jsxs("div",{ref:x,className:"absolute left-1/2 transform -translate-x-1/2 mt-[76px] bg-white rounded-xl shadow-xl max-w-lg w-full mx-4 cursor-grab active:cursor-grabbing",style:{maxHeight:"calc(100vh - 96px)",overflowY:"auto",scrollbarWidth:"none",msOverflowStyle:"none"},onMouseDown:b,onMouseMove:k,onMouseUp:C,onMouseLeave:C,children:[p.jsx("div",{className:"sticky top-0 right-0 pt-4 pr-4 flex justify-end bg-white rounded-t-xl",children:p.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors p-1 rounded-lg hover:bg-gray-100",children:p.jsx(qn,{className:"h-6 w-6"})})}),p.jsxs("div",{className:"p-6 pt-0",children:[p.jsx("h2",{className:"text-2xl font-display font-bold text-nexius-navy mb-2",children:"Let's Start Your AI Journey"}),p.jsx("p",{className:"text-nexius-charcoal mb-6",children:"Fill out the form below and our AI consultants will get back to you shortly."}),p.jsxs("form",{onSubmit:N,className:"space-y-4",children:[p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"firstName",className:"block text-sm font-medium text-nexius-navy mb-1",children:"First Name *"}),p.jsx("input",{type:"text",id:"firstName",name:"firstName",required:!0,value:t.firstName,onChange:w,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-nexius-teal focus:border-nexius-teal"})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"lastName",className:"block text-sm font-medium text-nexius-navy mb-1",children:"Last Name"}),p.jsx("input",{type:"text",id:"lastName",name:"lastName",value:t.lastName,onChange:w,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-nexius-teal focus:border-nexius-teal"})]})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-nexius-navy mb-1",children:"Email Address *"}),p.jsx("input",{type:"email",id:"email",name:"email",required:!0,value:t.email,onChange:w,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-nexius-teal focus:border-nexius-teal"})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-nexius-navy mb-1",children:"Phone Number"}),p.jsx("input",{type:"tel",id:"phone",name:"phone",value:t.phone,onChange:w,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-nexius-teal focus:border-nexius-teal"})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"message",className:"block text-sm font-medium text-nexius-navy mb-1",children:"Message"}),p.jsx("textarea",{id:"message",name:"message",rows:4,value:t.message,onChange:w,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-nexius-teal focus:border-nexius-teal"})]}),p.jsx("button",{type:"submit",disabled:s,className:"w-full bg-nexius-teal text-white py-3 rounded-lg hover:bg-nexius-teal/90 transition-colors font-display font-semibold tracking-wide uppercase text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:s?"Submitting...":"Submit"})]})]})]})}):null}const CE={"sme-automation":{title:"How an SME Reduced Manual Work by 60% with AI Automation",description:"A manufacturing company implemented our AI workflow automation solution, resulting in dramatic reduction in manual data entry and processing time.",impact:"60% reduction in manual work",industry:"Manufacturing",image:"https://images.unsplash.com/photo-1581091226825-a6a2a5aee158?auto=format&fit=crop&q=80&w=1600&h=900",fullContent:{challenge:"Serial Company was struggling with time-consuming manual data entry processes across their operations. Their team spent countless hours on repetitive tasks, leading to delays, errors, and reduced productivity. They needed a solution that could automate these processes while maintaining accuracy and compliance.",solution:"We implemented our AI-powered workflow automation platform, which included custom OCR for document processing, intelligent data extraction, and automated validation workflows. The solution seamlessly integrated with their existing ERP system.",implementation:["Conducted thorough process analysis and identified automation opportunities","Developed custom AI models for document recognition and data extraction","Implemented automated validation workflows with human oversight","Integrated with existing systems and databases","Provided comprehensive training and support"],results:[{metric:"60%",value:"Reduction in Manual Work",description:"Automated data entry and validation processes"},{metric:"85%",value:"Faster Processing Time",description:"Reduced document processing from hours to minutes"},{metric:"99.9%",value:"Accuracy Rate",description:"Improved data accuracy with AI validation"},{metric:"$200K",value:"Annual Savings",description:"Reduced operational costs and improved efficiency"}],testimonial:{quote:"NEXIUS Labs' AI automation solution has transformed our operations. What used to take our team hours now happens in minutes, and with better accuracy. This has allowed us to focus on strategic initiatives and growth.",author:"Vincent Sim",title:"Operations Director, Serial Company"},nextSteps:["Expanding automation to additional departments","Implementing predictive maintenance capabilities","Developing real-time performance dashboards","Training more team members on AI-powered tools"]}},"ai-accounting":{title:"AI-Powered Accounting: Saving 20 Hours Per Week for Finance Teams",description:"Our AI solution automated invoice processing, reconciliation, and reporting for a mid-sized accounting firm, freeing up valuable time for strategic tasks.",impact:"20 hours saved weekly",industry:"Finance",image:"https://images.unsplash.com/photo-1554224155-8d04cb21cd6c?auto=format&fit=crop&q=80&w=1600&h=900",fullContent:{challenge:"Daisy Accounting struggled with manual invoice processing and reconciliation, leading to long working hours and delayed reporting. They needed to modernize their operations while maintaining accuracy and compliance.",solution:"We implemented an AI-powered accounting automation system that handles invoice processing, reconciliation, and generates automated reports. The solution includes machine learning for pattern recognition and anomaly detection.",implementation:["Analyzed existing accounting workflows and compliance requirements","Developed custom AI models for invoice processing and categorization","Implemented automated reconciliation with bank feeds","Created automated reporting templates","Provided staff training and transition support"],results:[{metric:"20hrs",value:"Weekly Time Saved",description:"Reduced manual processing time"},{metric:"95%",value:"Automation Rate",description:"For standard invoice processing"},{metric:"40%",value:"Cost Reduction",description:"In processing costs per invoice"},{metric:"100%",value:"Compliance Rate",description:"Maintained full regulatory compliance"}],testimonial:{quote:"The AI solution from NEXIUS Labs has revolutionized our accounting processes. Our team now focuses on analysis and strategy instead of manual data entry.",author:"Sarah Johnson",title:"CFO, Daisy Accounting"},nextSteps:["Implementing predictive cash flow analysis","Expanding automation to tax preparation","Developing custom financial dashboards","Adding machine learning for fraud detection"]}},"ecommerce-growth":{title:"Scaling E-commerce: How AI Helped a Brand Increase Conversions by 35%",description:"An online retailer leveraged our AI-powered customer insights and automation platform to optimize their sales funnel and personalize customer experiences.",impact:"35% increase in conversions",industry:"E-commerce",image:"https://images.unsplash.com/photo-1516321318423-f06f85e504b3?auto=format&fit=crop&q=80&w=1600&h=900",fullContent:{challenge:"GreenCart, a growing e-commerce brand, faced challenges with cart abandonment, customer engagement, and personalization at scale. They needed a solution to understand customer behavior and automate personalized experiences.",solution:"We implemented our AI-powered e-commerce optimization platform, which includes customer behavior analysis, personalized recommendations, and automated marketing campaigns.",implementation:["Integrated AI-powered analytics for customer behavior tracking","Implemented personalized product recommendations","Developed automated email marketing campaigns","Created dynamic pricing strategies","Set up A/B testing frameworks"],results:[{metric:"35%",value:"Conversion Increase",description:"Higher conversion rate across all products"},{metric:"45%",value:"Cart Recovery",description:"Improved abandoned cart recovery"},{metric:"28%",value:"AOV Increase",description:"Higher average order value"},{metric:"3x",value:"ROI",description:"Return on AI implementation"}],testimonial:{quote:"NEXIUS Labs' AI solution has transformed how we understand and serve our customers. The results have exceeded our expectations.",author:"Michael Zhang",title:"CEO, GreenCart"},nextSteps:["Expanding personalization capabilities","Implementing AI-powered inventory management","Developing predictive analytics for trends","Creating automated customer service solutions"]}}};function NE(){const{id:n}=up(),e=n?CE[n]:null;return A.useEffect(()=>{window.scrollTo(0,0)},[]),e?p.jsxs("div",{className:"min-h-screen bg-white",children:[p.jsxs("div",{className:"relative h-[60vh] min-h-[400px] bg-nexius-navy",children:[p.jsxs("div",{className:"absolute inset-0",children:[p.jsx("img",{src:e.image,alt:e.title,className:"w-full h-full object-cover opacity-20"}),p.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-nexius-navy/50 to-nexius-navy"})]}),p.jsxs("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-full",children:[p.jsxs(At,{to:"/",className:"inline-flex items-center text-white/80 hover:text-white pt-8 transition-colors",children:[p.jsx(pl,{className:"h-5 w-5 mr-2"}),"Back to Home"]}),p.jsxs("div",{className:"flex flex-col justify-center h-full pb-16",children:[p.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[p.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-nexius-teal/20 text-nexius-teal border border-nexius-teal/20",children:e.industry}),p.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-white/20 text-white border border-white/20",children:e.impact})]}),p.jsx("h1",{className:"text-4xl md:text-5xl font-display font-bold text-white max-w-4xl",children:e.title})]})]})]}),p.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:p.jsxs("div",{className:"grid lg:grid-cols-3 gap-16",children:[p.jsxs("div",{className:"lg:col-span-2",children:[p.jsxs("section",{className:"mb-16",children:[p.jsx("h2",{className:"text-2xl font-display font-bold text-nexius-navy mb-4",children:"The Challenge"}),p.jsx("p",{className:"text-nexius-charcoal leading-relaxed",children:e.fullContent.challenge})]}),p.jsxs("section",{className:"mb-16",children:[p.jsx("h2",{className:"text-2xl font-display font-bold text-nexius-navy mb-4",children:"Our Solution"}),p.jsx("p",{className:"text-nexius-charcoal leading-relaxed mb-8",children:e.fullContent.solution}),p.jsx("h3",{className:"text-xl font-display font-bold text-nexius-navy mb-4",children:"Implementation Process"}),p.jsx("ul",{className:"space-y-4",children:e.fullContent.implementation.map((t,r)=>p.jsxs("li",{className:"flex items-start",children:[p.jsx(FN,{className:"h-6 w-6 text-nexius-teal shrink-0 mt-0.5 mr-3"}),p.jsx("span",{className:"text-nexius-charcoal",children:t})]},r))})]}),p.jsxs("section",{className:"mb-16",children:[p.jsx("h2",{className:"text-2xl font-display font-bold text-nexius-navy mb-8",children:"The Results"}),p.jsx("div",{className:"grid sm:grid-cols-2 gap-6",children:e.fullContent.results.map((t,r)=>p.jsxs("div",{className:"bg-white rounded-xl p-6 border border-nexius-gray hover:border-nexius-teal/30 transition-colors",children:[p.jsx("div",{className:"text-3xl font-display font-bold text-nexius-teal mb-2",children:t.metric}),p.jsx("div",{className:"font-semibold text-nexius-navy mb-2",children:t.value}),p.jsx("p",{className:"text-sm text-nexius-charcoal",children:t.description})]},r))})]}),p.jsx("section",{className:"mb-16",children:p.jsxs("blockquote",{className:"bg-nexius-navy rounded-xl p-8",children:[p.jsxs("p",{className:"text-xl text-white/90 italic mb-6",children:['"',e.fullContent.testimonial.quote,'"']}),p.jsxs("footer",{children:[p.jsx("div",{className:"text-white font-semibold",children:e.fullContent.testimonial.author}),p.jsx("div",{className:"text-white/80",children:e.fullContent.testimonial.title})]})]})})]}),p.jsx("div",{className:"lg:col-span-1",children:p.jsxs("div",{className:"sticky top-24",children:[p.jsxs("div",{className:"bg-nexius-gray rounded-xl p-6 mb-8",children:[p.jsx("h3",{className:"text-lg font-display font-bold text-nexius-navy mb-4",children:"Key Metrics"}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx(xp,{className:"h-5 w-5 text-nexius-teal"}),p.jsx("span",{className:"text-nexius-charcoal",children:e.impact})]}),p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx(Xi,{className:"h-5 w-5 text-nexius-teal"}),p.jsxs("span",{className:"text-nexius-charcoal",children:[e.industry," Industry"]})]}),p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx(l1,{className:"h-5 w-5 text-nexius-teal"}),p.jsx("span",{className:"text-nexius-charcoal",children:"3-Month Implementation"})]})]})]}),p.jsxs("div",{className:"bg-nexius-gray rounded-xl p-6",children:[p.jsx("h3",{className:"text-lg font-display font-bold text-nexius-navy mb-4",children:"Next Steps"}),p.jsx("ul",{className:"space-y-3",children:e.fullContent.nextSteps.map((t,r)=>p.jsxs("li",{className:"flex items-start",children:[p.jsx(uu,{className:"h-5 w-5 text-nexius-teal shrink-0 mt-0.5 mr-2"}),p.jsx("span",{className:"text-sm text-nexius-charcoal",children:t})]},r))})]})]})})]})})]}):p.jsx("div",{className:"min-h-screen bg-gray-50 py-32",children:p.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[p.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Case Study Not Found"}),p.jsx(At,{to:"/",className:"text-nexius-teal hover:text-nexius-teal/90 mt-4 inline-block",children:"Return Home"})]})})}const EE=[{id:"sme-automation",title:"How an SME Reduced Manual Work by 60% with AI Automation",description:"A manufacturing company implemented our AI workflow automation solution, resulting in dramatic reduction in manual data entry and processing time.",impact:"60% reduction in manual work",industry:"Manufacturing",image:"https://images.unsplash.com/photo-1581091226825-a6a2a5aee158?auto=format&fit=crop&q=80&w=1600&h=900"},{id:"ai-accounting",title:"AI-Powered Accounting: Saving 20 Hours Per Week for Finance Teams",description:"Our AI solution automated invoice processing, reconciliation, and reporting for a mid-sized accounting firm, freeing up valuable time for strategic tasks.",impact:"20 hours saved weekly",industry:"Finance",image:"https://images.unsplash.com/photo-1554224155-8d04cb21cd6c?auto=format&fit=crop&q=80&w=1600&h=900"},{id:"ecommerce-growth",title:"Scaling E-commerce: How AI Helped a Brand Increase Conversions by 35%",description:"An online retailer leveraged our AI-powered customer insights and automation platform to optimize their sales funnel and personalize customer experiences.",impact:"35% increase in conversions",industry:"E-commerce",image:"https://images.unsplash.com/photo-1516321318423-f06f85e504b3?auto=format&fit=crop&q=80&w=1600&h=900"}];function jE(){return p.jsxs("div",{className:"min-h-screen bg-white",children:[p.jsx("section",{className:"relative pt-32 pb-24 bg-gradient-to-b from-nexius-navy to-nexius-navy/95",children:p.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:p.jsxs("div",{className:"text-center",children:[p.jsxs("h1",{className:"text-4xl md:text-5xl font-display font-bold text-white mb-6 tracking-tight",children:["Success Stories:",p.jsx("br",{}),"AI Transformation in Action"]}),p.jsx("p",{className:"text-xl text-white/80 max-w-3xl mx-auto leading-relaxed",children:"Discover how forward-thinking businesses are leveraging our AI solutions to transform their operations and achieve remarkable results."})]})})}),p.jsx("section",{className:"py-16 bg-nexius-gray",children:p.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:p.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[p.jsxs("div",{className:"bg-white p-8 rounded-xl border border-nexius-gray",children:[p.jsx(xp,{className:"h-12 w-12 text-nexius-teal mb-4"}),p.jsx("div",{className:"text-3xl font-display font-bold text-nexius-navy mb-2",children:"45%"}),p.jsx("div",{className:"text-nexius-charcoal",children:"Average Efficiency Gain"})]}),p.jsxs("div",{className:"bg-white p-8 rounded-xl border border-nexius-gray",children:[p.jsx(Xi,{className:"h-12 w-12 text-nexius-teal mb-4"}),p.jsx("div",{className:"text-3xl font-display font-bold text-nexius-navy mb-2",children:"100+"}),p.jsx("div",{className:"text-nexius-charcoal",children:"Businesses Transformed"})]}),p.jsxs("div",{className:"bg-white p-8 rounded-xl border border-nexius-gray",children:[p.jsx(l1,{className:"h-12 w-12 text-nexius-teal mb-4"}),p.jsx("div",{className:"text-3xl font-display font-bold text-nexius-navy mb-2",children:"3x"}),p.jsx("div",{className:"text-nexius-charcoal",children:"Average ROI"})]})]})})}),p.jsx("section",{className:"py-24",children:p.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:p.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:EE.map(n=>p.jsx(At,{to:`/case-study/${n.id}`,className:"group block",children:p.jsxs("div",{className:"bg-white rounded-xl overflow-hidden border border-nexius-gray hover:border-nexius-teal/30 hover:shadow-lg transition-all",children:[p.jsxs("div",{className:"aspect-video relative overflow-hidden",children:[p.jsx("img",{src:n.image,alt:n.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"}),p.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"}),p.jsx("div",{className:"absolute bottom-4 left-4 right-4",children:p.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[p.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-nexius-teal/20 text-white border border-white/20",children:n.industry}),p.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-white/20 text-white border border-white/20",children:n.impact})]})})]}),p.jsxs("div",{className:"p-6",children:[p.jsx("h3",{className:"text-xl font-display font-bold text-nexius-navy mb-3 group-hover:text-nexius-teal transition-colors",children:n.title}),p.jsx("p",{className:"text-nexius-charcoal mb-4",children:n.description}),p.jsxs("div",{className:"flex items-center text-nexius-teal font-medium",children:["Read Case Study ",p.jsx(uu,{className:"ml-2 h-4 w-4 group-hover:translate-x-1 transition-transform"})]})]})]})},n.id))})})}),p.jsx("section",{className:"py-24 bg-nexius-navy",children:p.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[p.jsx("h2",{className:"text-3xl font-display font-bold text-white mb-4",children:"Ready to Write Your Success Story?"}),p.jsx("p",{className:"text-white/80 mb-8 max-w-2xl mx-auto",children:"Join these forward-thinking businesses in transforming your operations with AI. Let's discuss how we can help you achieve similar results."}),p.jsxs("a",{href:"https://tidycal.com/melverick/discovery-call-via-zoom-30min",target:"_blank",rel:"noopener noreferrer",className:"bg-nexius-teal text-white px-8 py-4 rounded-lg hover:bg-nexius-teal/90 transition-colors inline-flex items-center font-display font-semibold tracking-wide uppercase text-sm",children:["Schedule a Call ",p.jsx(Al,{className:"ml-2 h-5 w-5"})]})]})})]})}const hf="website-images";async function TE(n){try{const e=n.name.split(".").pop()||"jpg",t=Date.now(),s=`${window.location.pathname.includes("melverick")?"melverick":"darryl"}-${t}.${e}`,{data:i,error:l}=await pe.storage.from(hf).upload(s,n,{cacheControl:"3600",upsert:!0,contentType:n.type});if(l)throw l;const{data:{publicUrl:c}}=pe.storage.from(hf).getPublicUrl(s);return{publicUrl:c,filePath:s}}catch(e){throw console.error("Error uploading image:",e),e}}async function _E(n){try{const{error:e}=await pe.storage.from(hf).remove([n]);if(e)throw e}catch(e){throw console.error("Error deleting image:",e),e}}async function AE(n){try{const{data:e,error:t}=await pe.from("images").insert(n).select().single();if(t)throw t;return e}catch(e){throw console.error("Error creating image record:",e),e}}async function ME(){try{const{data:n,error:e}=await pe.from("images").select("*").order("created_at",{ascending:!1});if(e)throw e;return n}catch(n){throw console.error("Error fetching images:",n),n}}async function OE(n){try{const{error:e}=await pe.from("images").delete().eq("id",n);if(e)throw e}catch(e){throw console.error("Error deleting image record:",e),e}}function ml({onUploadComplete:n,editMode:e,initialData:t,onSave:r,onCancel:s}){const[i,l]=A.useState(!1),[c,u]=A.useState((t==null?void 0:t.title)||""),[h,f]=A.useState((t==null?void 0:t.description)||""),g=async w=>{try{if(!w.target.files||w.target.files.length===0)return;l(!0);const b=w.target.files[0],{data:{user:k}}=await pe.auth.getUser();if(!k)throw new Error("User not authenticated");const{publicUrl:C,filePath:N}=await TE(b),M=window.location.pathname.includes("melverick")?"Melverick's Profile Photo":"Darryl's Profile Photo";await AE({title:M,description:"Co-founder profile photo",url:C,storage_path:N,user_id:k.id,metadata:{type:"profile",originalName:b.name}}),n(C)}catch(b){console.error("Error uploading:",b),alert("Error uploading image")}finally{l(!1)}},x=w=>{w.preventDefault(),r&&(r==null||r({title:c.trim(),description:h.trim()}))};return e?p.jsxs("form",{onSubmit:x,className:"space-y-4",children:[p.jsxs("div",{className:"flex justify-between items-center mb-4",children:[p.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Edit Image Details"}),p.jsx("button",{type:"button",onClick:s,className:"text-gray-400 hover:text-gray-500",children:p.jsx(qn,{className:"h-5 w-5"})})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),p.jsx("input",{type:"text",id:"title",required:!0,value:c,onChange:w=>u(w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-nexius-teal focus:border-nexius-teal"})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),p.jsx("textarea",{id:"description",value:h,onChange:w=>f(w.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-nexius-teal focus:border-nexius-teal sm:text-sm"})]}),p.jsxs("div",{className:"flex justify-end gap-2",children:[p.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg",children:"Cancel"}),p.jsx("button",{type:"submit",className:"px-4 py-2 bg-nexius-teal text-white rounded-lg hover:bg-nexius-teal/90",children:"Save Changes"})]})]}):p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx("input",{type:"file",accept:"image/*",onChange:g,disabled:i,className:"hidden",id:"logo-upload"}),p.jsx("label",{htmlFor:"logo-upload",className:`inline-flex items-center px-4 py-2 rounded-lg ${i?"bg-gray-300 cursor-not-allowed":"bg-nexius-teal hover:bg-nexius-teal/90 cursor-pointer"} text-white font-display font-semibold tracking-wide uppercase text-sm transition-colors`,children:i?"Uploading...":"Upload Logo"})]})}function RE(){const[n,e]=A.useState(null),[t,r]=A.useState("melverick"),s=i=>{e(i)};return p.jsx("div",{className:"min-h-screen bg-gray-50 py-32",children:p.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:p.jsx("div",{className:"max-w-3xl mx-auto",children:p.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-8",children:[p.jsx("h1",{className:"text-2xl font-display font-bold text-nexius-navy mb-6",children:"Upload Co-founder Photos"}),p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{className:"flex gap-4 mb-6",children:[p.jsx("button",{onClick:()=>r("melverick"),className:`px-4 py-2 rounded-lg ${t==="melverick"?"bg-nexius-teal text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"} transition-colors`,children:"Melverick's Photo"}),p.jsx("button",{onClick:()=>r("darryl"),className:`px-4 py-2 rounded-lg ${t==="darryl"?"bg-nexius-teal text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"} transition-colors`,children:"Darryl's Photo"})]}),p.jsx(ml,{onUploadComplete:s}),n&&p.jsxs("div",{className:"mt-6",children:[p.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Preview:"}),p.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:p.jsx("img",{src:n,alt:t==="melverick"?"Melverick Ng":"Darryl Wong",className:"h-32 w-32 object-cover rounded-full",crossOrigin:"anonymous"})}),p.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Photo uploaded successfully! You can now use this URL in your application:"}),p.jsx("code",{className:"mt-2 block p-2 bg-gray-50 rounded text-sm font-mono break-all",children:n})]})]})]})})})})}function PE(){const[n,e]=A.useState(!1),[t,r]=A.useState(""),[s,i]=A.useState(""),[l,c]=A.useState(!1),u=async h=>{h.preventDefault();try{e(!0);const{data:f,error:g}=await pe.auth.signInWithPassword({email:t,password:s});if(g)throw g.message==="Invalid login credentials"?alert("Invalid email or password. Please try again."):alert(g.message),g}catch(f){console.error("Auth error:",f)}finally{e(!1)}};return p.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:p.jsxs("div",{className:"max-w-md w-full space-y-8",children:[p.jsx("div",{children:p.jsx("h2",{className:"mt-6 text-center text-3xl font-display font-extrabold text-nexius-navy",children:"Sign in to your account"})}),p.jsxs("form",{className:"mt-8 space-y-6",onSubmit:u,children:[p.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"email",className:"sr-only",children:"Email address"}),p.jsx("input",{id:"email",name:"email",type:"email",required:!0,value:t,onChange:h=>r(h.target.value),className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-nexius-teal focus:border-nexius-teal focus:z-10 sm:text-sm",placeholder:"Email address"})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"password",className:"sr-only",children:"Password"}),p.jsx("input",{id:"password",name:"password",type:"password",required:!0,value:s,onChange:h=>i(h.target.value),className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-nexius-teal focus:border-nexius-teal focus:z-10 sm:text-sm",placeholder:"Password",minLength:6})]})]}),p.jsx("div",{className:"flex flex-col gap-4",children:p.jsx("button",{type:"submit",disabled:n,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-nexius-teal hover:bg-nexius-teal/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-nexius-teal",children:n?"Processing...":"Sign in"})})]})]})})}function kt(n){this.content=n}kt.prototype={constructor:kt,find:function(n){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===n)return e;return-1},get:function(n){var e=this.find(n);return e==-1?void 0:this.content[e+1]},update:function(n,e,t){var r=t&&t!=n?this.remove(t):this,s=r.find(n),i=r.content.slice();return s==-1?i.push(t||n,e):(i[s+1]=e,t&&(i[s]=t)),new kt(i)},remove:function(n){var e=this.find(n);if(e==-1)return this;var t=this.content.slice();return t.splice(e,2),new kt(t)},addToStart:function(n,e){return new kt([n,e].concat(this.remove(n).content))},addToEnd:function(n,e){var t=this.remove(n).content.slice();return t.push(n,e),new kt(t)},addBefore:function(n,e,t){var r=this.remove(e),s=r.content.slice(),i=r.find(n);return s.splice(i==-1?s.length:i,0,e,t),new kt(s)},forEach:function(n){for(var e=0;e<this.content.length;e+=2)n(this.content[e],this.content[e+1])},prepend:function(n){return n=kt.from(n),n.size?new kt(n.content.concat(this.subtract(n).content)):this},append:function(n){return n=kt.from(n),n.size?new kt(this.subtract(n).content.concat(n.content)):this},subtract:function(n){var e=this;n=kt.from(n);for(var t=0;t<n.content.length;t+=2)e=e.remove(n.content[t]);return e},toObject:function(){var n={};return this.forEach(function(e,t){n[e]=t}),n},get size(){return this.content.length>>1}};kt.from=function(n){if(n instanceof kt)return n;var e=[];if(n)for(var t in n)e.push(t,n[t]);return new kt(e)};function d1(n,e,t){for(let r=0;;r++){if(r==n.childCount||r==e.childCount)return n.childCount==e.childCount?null:t;let s=n.child(r),i=e.child(r);if(s==i){t+=s.nodeSize;continue}if(!s.sameMarkup(i))return t;if(s.isText&&s.text!=i.text){for(let l=0;s.text[l]==i.text[l];l++)t++;return t}if(s.content.size||i.content.size){let l=d1(s.content,i.content,t+1);if(l!=null)return l}t+=s.nodeSize}}function h1(n,e,t,r){for(let s=n.childCount,i=e.childCount;;){if(s==0||i==0)return s==i?null:{a:t,b:r};let l=n.child(--s),c=e.child(--i),u=l.nodeSize;if(l==c){t-=u,r-=u;continue}if(!l.sameMarkup(c))return{a:t,b:r};if(l.isText&&l.text!=c.text){let h=0,f=Math.min(l.text.length,c.text.length);for(;h<f&&l.text[l.text.length-h-1]==c.text[c.text.length-h-1];)h++,t--,r--;return{a:t,b:r}}if(l.content.size||c.content.size){let h=h1(l.content,c.content,t-1,r-1);if(h)return h}t-=u,r-=u}}class z{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,t,r,s=0,i){for(let l=0,c=0;c<t;l++){let u=this.content[l],h=c+u.nodeSize;if(h>e&&r(u,s+c,i||null,l)!==!1&&u.content.size){let f=c+1;u.nodesBetween(Math.max(0,e-f),Math.min(u.content.size,t-f),r,s+f)}c=h}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,r,s){let i="",l=!0;return this.nodesBetween(e,t,(c,u)=>{let h=c.isText?c.text.slice(Math.max(e,u)-u,t-u):c.isLeaf?s?typeof s=="function"?s(c):s:c.type.spec.leafText?c.type.spec.leafText(c):"":"";c.isBlock&&(c.isLeaf&&h||c.isTextblock)&&r&&(l?l=!1:i+=r),i+=h},0),i}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,r=e.firstChild,s=this.content.slice(),i=0;for(t.isText&&t.sameMarkup(r)&&(s[s.length-1]=t.withText(t.text+r.text),i=1);i<e.content.length;i++)s.push(e.content[i]);return new z(s,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let r=[],s=0;if(t>e)for(let i=0,l=0;l<t;i++){let c=this.content[i],u=l+c.nodeSize;u>e&&((l<e||u>t)&&(c.isText?c=c.cut(Math.max(0,e-l),Math.min(c.text.length,t-l)):c=c.cut(Math.max(0,e-l-1),Math.min(c.content.size,t-l-1))),r.push(c),s+=c.nodeSize),l=u}return new z(r,s)}cutByIndex(e,t){return e==t?z.empty:e==0&&t==this.content.length?this:new z(this.content.slice(e,t))}replaceChild(e,t){let r=this.content[e];if(r==t)return this;let s=this.content.slice(),i=this.size+t.nodeSize-r.nodeSize;return s[e]=t,new z(s,i)}addToStart(e){return new z([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new z(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,r=0;t<this.content.length;t++){let s=this.content[t];e(s,r,t),r+=s.nodeSize}}findDiffStart(e,t=0){return d1(this,e,t)}findDiffEnd(e,t=this.size,r=e.size){return h1(this,e,t,r)}findIndex(e,t=-1){if(e==0)return Xa(0,e);if(e==this.size)return Xa(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,s=0;;r++){let i=this.child(r),l=s+i.nodeSize;if(l>=e)return l==e||t>0?Xa(r+1,l):Xa(r,s);s=l}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return z.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new z(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return z.empty;let t,r=0;for(let s=0;s<e.length;s++){let i=e[s];r+=i.nodeSize,s&&i.isText&&e[s-1].sameMarkup(i)?(t||(t=e.slice(0,s)),t[t.length-1]=i.withText(t[t.length-1].text+i.text)):t&&t.push(i)}return new z(t||e,r)}static from(e){if(!e)return z.empty;if(e instanceof z)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new z([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}z.empty=new z([],0);const Ch={index:0,offset:0};function Xa(n,e){return Ch.index=n,Ch.offset=e,Ch}function kc(n,e){if(n===e)return!0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(n);if(Array.isArray(e)!=t)return!1;if(t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!kc(n[r],e[r]))return!1}else{for(let r in n)if(!(r in e)||!kc(n[r],e[r]))return!1;for(let r in e)if(!(r in n))return!1}return!0}let Oe=class ff{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,r=!1;for(let s=0;s<e.length;s++){let i=e[s];if(this.eq(i))return e;if(this.type.excludes(i.type))t||(t=e.slice(0,s));else{if(i.type.excludes(this.type))return e;!r&&i.type.rank>this.type.rank&&(t||(t=e.slice(0,s)),t.push(this),r=!0),t&&t.push(i)}}return t||(t=e.slice()),r||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&kc(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[t.type];if(!r)throw new RangeError(`There is no mark type ${t.type} in this schema`);let s=r.create(t.attrs);return r.checkAttrs(s.attrs),s}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(t[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return ff.none;if(e instanceof ff)return[e];let t=e.slice();return t.sort((r,s)=>r.type.rank-s.type.rank),t}};Oe.none=[];class Sc extends Error{}class G{constructor(e,t,r){this.content=e,this.openStart=t,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let r=p1(this.content,e+this.openStart,t);return r&&new G(r,this.openStart,this.openEnd)}removeBetween(e,t){return new G(f1(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return G.empty;let r=t.openStart||0,s=t.openEnd||0;if(typeof r!="number"||typeof s!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new G(z.fromJSON(e,t.content),r,s)}static maxOpen(e,t=!0){let r=0,s=0;for(let i=e.firstChild;i&&!i.isLeaf&&(t||!i.type.spec.isolating);i=i.firstChild)r++;for(let i=e.lastChild;i&&!i.isLeaf&&(t||!i.type.spec.isolating);i=i.lastChild)s++;return new G(e,r,s)}}G.empty=new G(z.empty,0,0);function f1(n,e,t){let{index:r,offset:s}=n.findIndex(e),i=n.maybeChild(r),{index:l,offset:c}=n.findIndex(t);if(s==e||i.isText){if(c!=t&&!n.child(l).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(r!=l)throw new RangeError("Removing non-flat range");return n.replaceChild(r,i.copy(f1(i.content,e-s-1,t-s-1)))}function p1(n,e,t,r){let{index:s,offset:i}=n.findIndex(e),l=n.maybeChild(s);if(i==e||l.isText)return n.cut(0,e).append(t).append(n.cut(e));let c=p1(l.content,e-i-1,t);return c&&n.replaceChild(s,l.copy(c))}function IE(n,e,t){if(t.openStart>n.depth)throw new Sc("Inserted content deeper than insertion position");if(n.depth-t.openStart!=e.depth-t.openEnd)throw new Sc("Inconsistent open depths");return m1(n,e,t,0)}function m1(n,e,t,r){let s=n.index(r),i=n.node(r);if(s==e.index(r)&&r<n.depth-t.openStart){let l=m1(n,e,t,r+1);return i.copy(i.content.replaceChild(s,l))}else if(t.content.size)if(!t.openStart&&!t.openEnd&&n.depth==r&&e.depth==r){let l=n.parent,c=l.content;return Ds(l,c.cut(0,n.parentOffset).append(t.content).append(c.cut(e.parentOffset)))}else{let{start:l,end:c}=LE(t,n);return Ds(i,y1(n,l,c,e,r))}else return Ds(i,Cc(n,e,r))}function g1(n,e){if(!e.type.compatibleContent(n.type))throw new Sc("Cannot join "+e.type.name+" onto "+n.type.name)}function pf(n,e,t){let r=n.node(t);return g1(r,e.node(t)),r}function Ls(n,e){let t=e.length-1;t>=0&&n.isText&&n.sameMarkup(e[t])?e[t]=n.withText(e[t].text+n.text):e.push(n)}function nl(n,e,t,r){let s=(e||n).node(t),i=0,l=e?e.index(t):s.childCount;n&&(i=n.index(t),n.depth>t?i++:n.textOffset&&(Ls(n.nodeAfter,r),i++));for(let c=i;c<l;c++)Ls(s.child(c),r);e&&e.depth==t&&e.textOffset&&Ls(e.nodeBefore,r)}function Ds(n,e){return n.type.checkContent(e),n.copy(e)}function y1(n,e,t,r,s){let i=n.depth>s&&pf(n,e,s+1),l=r.depth>s&&pf(t,r,s+1),c=[];return nl(null,n,s,c),i&&l&&e.index(s)==t.index(s)?(g1(i,l),Ls(Ds(i,y1(n,e,t,r,s+1)),c)):(i&&Ls(Ds(i,Cc(n,e,s+1)),c),nl(e,t,s,c),l&&Ls(Ds(l,Cc(t,r,s+1)),c)),nl(r,null,s,c),new z(c)}function Cc(n,e,t){let r=[];if(nl(null,n,t,r),n.depth>t){let s=pf(n,e,t+1);Ls(Ds(s,Cc(n,e,t+1)),r)}return nl(e,null,t,r),new z(r)}function LE(n,e){let t=e.depth-n.openStart,s=e.node(t).copy(n.content);for(let i=t-1;i>=0;i--)s=e.node(i).copy(z.from(s));return{start:s.resolveNoCache(n.openStart+t),end:s.resolveNoCache(s.content.size-n.openEnd-t)}}class gl{constructor(e,t,r){this.pos=e,this.path=t,this.parentOffset=r,this.depth=t.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],s=e.child(t);return r?e.child(t).cut(r):s}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):e==0?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let r=this.path[t*3],s=t==0?0:this.path[t*3-1]+1;for(let i=0;i<e;i++)s+=r.child(i).nodeSize;return s}marks(){let e=this.parent,t=this.index();if(e.content.size==0)return Oe.none;if(this.textOffset)return e.child(t).marks;let r=e.maybeChild(t-1),s=e.maybeChild(t);if(!r){let c=r;r=s,s=c}let i=r.marks;for(var l=0;l<i.length;l++)i[l].type.spec.inclusive===!1&&(!s||!i[l].isInSet(s.marks))&&(i=i[l--].removeFromSet(i));return i}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let r=t.marks,s=e.parent.maybeChild(e.index());for(var i=0;i<r.length;i++)r[i].type.spec.inclusive===!1&&(!s||!r[i].isInSet(s.marks))&&(r=r[i--].removeFromSet(r));return r}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!t||t(this.node(r))))return new Nc(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let r=[],s=0,i=t;for(let l=e;;){let{index:c,offset:u}=l.content.findIndex(i),h=i-u;if(r.push(l,c,s+u),!h||(l=l.child(c),l.isText))break;i=h-1,s+=u+1}return new gl(t,r,i)}static resolveCached(e,t){let r=L0.get(e);if(r)for(let i=0;i<r.elts.length;i++){let l=r.elts[i];if(l.pos==t)return l}else L0.set(e,r=new DE);let s=r.elts[r.i]=gl.resolve(e,t);return r.i=(r.i+1)%zE,s}}class DE{constructor(){this.elts=[],this.i=0}}const zE=12,L0=new WeakMap;class Nc{constructor(e,t,r){this.$from=e,this.$to=t,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const $E=Object.create(null);let Xr=class mf{constructor(e,t,r,s=Oe.none){this.type=e,this.attrs=t,this.marks=s,this.content=r||z.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,r,s=0){this.content.nodesBetween(e,t,r,s,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,r,s){return this.content.textBetween(e,t,r,s)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,r){return this.type==e&&kc(this.attrs,t||e.defaultAttrs||$E)&&Oe.sameSet(this.marks,r||Oe.none)}copy(e=null){return e==this.content?this:new mf(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new mf(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return e==0&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,r=!1){if(e==t)return G.empty;let s=this.resolve(e),i=this.resolve(t),l=r?0:s.sharedDepth(t),c=s.start(l),h=s.node(l).content.cut(s.pos-c,i.pos-c);return new G(h,s.depth-l,i.depth-l)}replace(e,t,r){return IE(this.resolve(e),this.resolve(t),r)}nodeAt(e){for(let t=this;;){let{index:r,offset:s}=t.content.findIndex(e);if(t=t.maybeChild(r),!t)return null;if(s==e||t.isText)return t;e-=s+1}}childAfter(e){let{index:t,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:t,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(t),index:t,offset:r};let s=this.content.child(t-1);return{node:s,index:t-1,offset:r-s.nodeSize}}resolve(e){return gl.resolveCached(this,e)}resolveNoCache(e){return gl.resolve(this,e)}rangeHasMark(e,t,r){let s=!1;return t>e&&this.nodesBetween(e,t,i=>(r.isInSet(i.marks)&&(s=!0),!s)),s}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),x1(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,r=z.empty,s=0,i=r.childCount){let l=this.contentMatchAt(e).matchFragment(r,s,i),c=l&&l.matchFragment(this.content,t);if(!c||!c.validEnd)return!1;for(let u=s;u<i;u++)if(!this.type.allowsMarks(r.child(u).marks))return!1;return!0}canReplaceWith(e,t,r,s){if(s&&!this.type.allowsMarks(s))return!1;let i=this.contentMatchAt(e).matchType(r),l=i&&i.matchFragment(this.content,t);return l?l.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=Oe.none;for(let t=0;t<this.marks.length;t++){let r=this.marks[t];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!Oe.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(t=>t.type.name)}`);this.content.forEach(t=>t.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(t=>t.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let r;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=t.marks.map(e.markFromJSON)}if(t.type=="text"){if(typeof t.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(t.text,r)}let s=z.fromJSON(e,t.content),i=e.nodeType(t.type).create(t.attrs,s,r);return i.type.checkAttrs(i.attrs),i}};Xr.prototype.text=void 0;class Ec extends Xr{constructor(e,t,r,s){if(super(e,t,null,s),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):x1(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new Ec(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new Ec(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return e==0&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function x1(n,e){for(let t=n.length-1;t>=0;t--)e=n[t].type.name+"("+e+")";return e}class Fs{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let r=new BE(e,t);if(r.next==null)return Fs.empty;let s=v1(r);r.next&&r.err("Unexpected trailing text");let i=KE(qE(s));return JE(i,r),i}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,r=e.childCount){let s=this;for(let i=t;s&&i<r;i++)s=s.matchType(e.child(i).type);return s}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let r=0;r<e.next.length;r++)if(this.next[t].type==e.next[r].type)return!0;return!1}fillBefore(e,t=!1,r=0){let s=[this];function i(l,c){let u=l.matchFragment(e,r);if(u&&(!t||u.validEnd))return z.from(c.map(h=>h.createAndFill()));for(let h=0;h<l.next.length;h++){let{type:f,next:g}=l.next[h];if(!(f.isText||f.hasRequiredAttrs())&&s.indexOf(g)==-1){s.push(g);let x=i(g,c.concat(f));if(x)return x}}return null}return i(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let s=r.shift(),i=s.match;if(i.matchType(e)){let l=[];for(let c=s;c.type;c=c.via)l.push(c.type);return l.reverse()}for(let l=0;l<i.next.length;l++){let{type:c,next:u}=i.next[l];!c.isLeaf&&!c.hasRequiredAttrs()&&!(c.name in t)&&(!s.type||u.validEnd)&&(r.push({match:c.contentMatch,type:c,via:s}),t[c.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function t(r){e.push(r);for(let s=0;s<r.next.length;s++)e.indexOf(r.next[s].next)==-1&&t(r.next[s].next)}return t(this),e.map((r,s)=>{let i=s+(r.validEnd?"*":" ")+" ";for(let l=0;l<r.next.length;l++)i+=(l?", ":"")+r.next[l].type.name+"->"+e.indexOf(r.next[l].next);return i}).join(`
`)}}Fs.empty=new Fs(!0);class BE{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function v1(n){let e=[];do e.push(FE(n));while(n.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function FE(n){let e=[];do e.push(UE(n));while(n.next&&n.next!=")"&&n.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function UE(n){let e=WE(n);for(;;)if(n.eat("+"))e={type:"plus",expr:e};else if(n.eat("*"))e={type:"star",expr:e};else if(n.eat("?"))e={type:"opt",expr:e};else if(n.eat("{"))e=HE(n,e);else break;return e}function D0(n){/\D/.test(n.next)&&n.err("Expected number, got '"+n.next+"'");let e=Number(n.next);return n.pos++,e}function HE(n,e){let t=D0(n),r=t;return n.eat(",")&&(n.next!="}"?r=D0(n):r=-1),n.eat("}")||n.err("Unclosed braced range"),{type:"range",min:t,max:r,expr:e}}function VE(n,e){let t=n.nodeTypes,r=t[e];if(r)return[r];let s=[];for(let i in t){let l=t[i];l.isInGroup(e)&&s.push(l)}return s.length==0&&n.err("No node type or group '"+e+"' found"),s}function WE(n){if(n.eat("(")){let e=v1(n);return n.eat(")")||n.err("Missing closing paren"),e}else if(/\W/.test(n.next))n.err("Unexpected token '"+n.next+"'");else{let e=VE(n,n.next).map(t=>(n.inline==null?n.inline=t.isInline:n.inline!=t.isInline&&n.err("Mixing inline and block content"),{type:"name",value:t}));return n.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function qE(n){let e=[[]];return s(i(n,0),t()),e;function t(){return e.push([])-1}function r(l,c,u){let h={term:u,to:c};return e[l].push(h),h}function s(l,c){l.forEach(u=>u.to=c)}function i(l,c){if(l.type=="choice")return l.exprs.reduce((u,h)=>u.concat(i(h,c)),[]);if(l.type=="seq")for(let u=0;;u++){let h=i(l.exprs[u],c);if(u==l.exprs.length-1)return h;s(h,c=t())}else if(l.type=="star"){let u=t();return r(c,u),s(i(l.expr,u),u),[r(u)]}else if(l.type=="plus"){let u=t();return s(i(l.expr,c),u),s(i(l.expr,u),u),[r(u)]}else{if(l.type=="opt")return[r(c)].concat(i(l.expr,c));if(l.type=="range"){let u=c;for(let h=0;h<l.min;h++){let f=t();s(i(l.expr,u),f),u=f}if(l.max==-1)s(i(l.expr,u),u);else for(let h=l.min;h<l.max;h++){let f=t();r(u,f),s(i(l.expr,u),f),u=f}return[r(u)]}else{if(l.type=="name")return[r(c,void 0,l.value)];throw new Error("Unknown expr type")}}}}function w1(n,e){return e-n}function z0(n,e){let t=[];return r(e),t.sort(w1);function r(s){let i=n[s];if(i.length==1&&!i[0].term)return r(i[0].to);t.push(s);for(let l=0;l<i.length;l++){let{term:c,to:u}=i[l];!c&&t.indexOf(u)==-1&&r(u)}}}function KE(n){let e=Object.create(null);return t(z0(n,0));function t(r){let s=[];r.forEach(l=>{n[l].forEach(({term:c,to:u})=>{if(!c)return;let h;for(let f=0;f<s.length;f++)s[f][0]==c&&(h=s[f][1]);z0(n,u).forEach(f=>{h||s.push([c,h=[]]),h.indexOf(f)==-1&&h.push(f)})})});let i=e[r.join(",")]=new Fs(r.indexOf(n.length-1)>-1);for(let l=0;l<s.length;l++){let c=s[l][1].sort(w1);i.next.push({type:s[l][0],next:e[c.join(",")]||t(c)})}return i}}function JE(n,e){for(let t=0,r=[n];t<r.length;t++){let s=r[t],i=!s.validEnd,l=[];for(let c=0;c<s.next.length;c++){let{type:u,next:h}=s.next[c];l.push(u.name),i&&!(u.isText||u.hasRequiredAttrs())&&(i=!1),r.indexOf(h)==-1&&r.push(h)}i&&e.err("Only non-generatable nodes ("+l.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function b1(n){let e=Object.create(null);for(let t in n){let r=n[t];if(!r.hasDefault)return null;e[t]=r.default}return e}function k1(n,e){let t=Object.create(null);for(let r in n){let s=e&&e[r];if(s===void 0){let i=n[r];if(i.hasDefault)s=i.default;else throw new RangeError("No value supplied for attribute "+r)}t[r]=s}return t}function S1(n,e,t,r){for(let s in e)if(!(s in n))throw new RangeError(`Unsupported attribute ${s} for ${t} of type ${s}`);for(let s in n){let i=n[s];i.validate&&i.validate(e[s])}}function C1(n,e){let t=Object.create(null);if(e)for(let r in e)t[r]=new QE(n,r,e[r]);return t}let $0=class N1{constructor(e,t,r){this.name=e,this.schema=t,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=C1(e,r.attrs),this.defaultAttrs=b1(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Fs.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:k1(this.attrs,e)}create(e=null,t,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Xr(this,this.computeAttrs(e),z.from(t),Oe.setFrom(r))}createChecked(e=null,t,r){return t=z.from(t),this.checkContent(t),new Xr(this,this.computeAttrs(e),t,Oe.setFrom(r))}createAndFill(e=null,t,r){if(e=this.computeAttrs(e),t=z.from(t),t.size){let l=this.contentMatch.fillBefore(t);if(!l)return null;t=l.append(t)}let s=this.contentMatch.matchFragment(t),i=s&&s.fillBefore(z.empty,!0);return i?new Xr(this,e,t.append(i),Oe.setFrom(r)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){S1(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let t;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?t&&t.push(e[r]):t||(t=e.slice(0,r));return t?t.length?t:Oe.none:e}static compile(e,t){let r=Object.create(null);e.forEach((i,l)=>r[i]=new N1(i,t,l));let s=t.spec.topNode||"doc";if(!r[s])throw new RangeError("Schema is missing its top node type ('"+s+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let i in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function GE(n,e,t){let r=t.split("|");return s=>{let i=s===null?"null":typeof s;if(r.indexOf(i)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${n}, got ${i}`)}}class QE{constructor(e,t,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?GE(e,t,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class du{constructor(e,t,r,s){this.name=e,this.rank=t,this.schema=r,this.spec=s,this.attrs=C1(e,s.attrs),this.excluded=null;let i=b1(this.attrs);this.instance=i?new Oe(this,i):null}create(e=null){return!e&&this.instance?this.instance:new Oe(this,k1(this.attrs,e))}static compile(e,t){let r=Object.create(null),s=0;return e.forEach((i,l)=>r[i]=new du(i,s++,t,l)),r}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}checkAttrs(e){S1(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class E1{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let t=this.spec={};for(let s in e)t[s]=e[s];t.nodes=kt.from(e.nodes),t.marks=kt.from(e.marks||{}),this.nodes=$0.compile(this.spec.nodes,this),this.marks=du.compile(this.spec.marks,this);let r=Object.create(null);for(let s in this.nodes){if(s in this.marks)throw new RangeError(s+" can not be both a node and a mark");let i=this.nodes[s],l=i.spec.content||"",c=i.spec.marks;if(i.contentMatch=r[l]||(r[l]=Fs.parse(l,this.nodes)),i.inlineContent=i.contentMatch.inlineContent,i.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!i.isInline||!i.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=i}i.markSet=c=="_"?null:c?B0(this,c.split(" ")):c==""||!i.inlineContent?[]:null}for(let s in this.marks){let i=this.marks[s],l=i.spec.excludes;i.excluded=l==null?[i]:l==""?[]:B0(this,l.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,r,s){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof $0){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(t,r,s)}text(e,t){let r=this.nodes.text;return new Ec(r,r.defaultAttrs,e,Oe.setFrom(t))}mark(e,t){return typeof e=="string"&&(e=this.marks[e]),e.create(t)}nodeFromJSON(e){return Xr.fromJSON(this,e)}markFromJSON(e){return Oe.fromJSON(this,e)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}function B0(n,e){let t=[];for(let r=0;r<e.length;r++){let s=e[r],i=n.marks[s],l=i;if(i)t.push(i);else for(let c in n.marks){let u=n.marks[c];(s=="_"||u.spec.group&&u.spec.group.split(" ").indexOf(s)>-1)&&t.push(l=u)}if(!l)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return t}function YE(n){return n.tag!=null}function XE(n){return n.style!=null}class Zr{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[];let r=this.matchedStyles=[];t.forEach(s=>{if(YE(s))this.tags.push(s);else if(XE(s)){let i=/[^=]*/.exec(s.style)[0];r.indexOf(i)<0&&r.push(i),this.styles.push(s)}}),this.normalizeLists=!this.tags.some(s=>{if(!/^(ul|ol)\b/.test(s.tag)||!s.node)return!1;let i=e.nodes[s.node];return i.contentMatch.matchType(i)})}parse(e,t={}){let r=new U0(this,t,!1);return r.addAll(e,Oe.none,t.from,t.to),r.finish()}parseSlice(e,t={}){let r=new U0(this,t,!0);return r.addAll(e,Oe.none,t.from,t.to),G.maxOpen(r.finish())}matchTag(e,t,r){for(let s=r?this.tags.indexOf(r)+1:0;s<this.tags.length;s++){let i=this.tags[s];if(tj(e,i.tag)&&(i.namespace===void 0||e.namespaceURI==i.namespace)&&(!i.context||t.matchesContext(i.context))){if(i.getAttrs){let l=i.getAttrs(e);if(l===!1)continue;i.attrs=l||void 0}return i}}}matchStyle(e,t,r,s){for(let i=s?this.styles.indexOf(s)+1:0;i<this.styles.length;i++){let l=this.styles[i],c=l.style;if(!(c.indexOf(e)!=0||l.context&&!r.matchesContext(l.context)||c.length>e.length&&(c.charCodeAt(e.length)!=61||c.slice(e.length+1)!=t))){if(l.getAttrs){let u=l.getAttrs(t);if(u===!1)continue;l.attrs=u||void 0}return l}}}static schemaRules(e){let t=[];function r(s){let i=s.priority==null?50:s.priority,l=0;for(;l<t.length;l++){let c=t[l];if((c.priority==null?50:c.priority)<i)break}t.splice(l,0,s)}for(let s in e.marks){let i=e.marks[s].spec.parseDOM;i&&i.forEach(l=>{r(l=H0(l)),l.mark||l.ignore||l.clearMark||(l.mark=s)})}for(let s in e.nodes){let i=e.nodes[s].spec.parseDOM;i&&i.forEach(l=>{r(l=H0(l)),l.node||l.ignore||l.mark||(l.node=s)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Zr(e,Zr.schemaRules(e)))}}const j1={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},ZE={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},T1={ol:!0,ul:!0},yl=1,gf=2,hc=4;function F0(n,e,t){return e!=null?(e?yl:0)|(e==="full"?gf:0):n&&n.whitespace=="pre"?yl|gf:t&-5}class Za{constructor(e,t,r,s,i,l){this.type=e,this.attrs=t,this.marks=r,this.solid=s,this.options=l,this.content=[],this.activeMarks=Oe.none,this.match=i||(l&hc?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(z.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let r=this.type.contentMatch,s;return(s=r.findWrapping(e.type))?(this.match=r,s):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&yl)){let r=this.content[this.content.length-1],s;if(r&&r.isText&&(s=/[ \t\r\n\u000c]+$/.exec(r.text))){let i=r;r.text.length==s[0].length?this.content.pop():this.content[this.content.length-1]=i.withText(i.text.slice(0,i.text.length-s[0].length))}}let t=z.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(z.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!j1.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class U0{constructor(e,t,r){this.parser=e,this.options=t,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let s=t.topNode,i,l=F0(null,t.preserveWhitespace,0)|(r?hc:0);s?i=new Za(s.type,s.attrs,Oe.none,!0,t.topMatch||s.type.contentMatch,l):r?i=new Za(null,null,Oe.none,!0,null,l):i=new Za(e.schema.topNodeType,null,Oe.none,!0,null,l),this.nodes=[i],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,t){e.nodeType==3?this.addTextNode(e,t):e.nodeType==1&&this.addElement(e,t)}addTextNode(e,t){let r=e.nodeValue,s=this.top,i=s.options&gf?"full":this.localPreserveWS||(s.options&yl)>0;if(i==="full"||s.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(i)i!=="full"?r=r.replace(/\r?\n|\r/g," "):r=r.replace(/\r\n?/g,`
`);else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let l=s.content[s.content.length-1],c=e.previousSibling;(!l||c&&c.nodeName=="BR"||l.isText&&/[ \t\r\n\u000c]$/.test(l.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),t),this.findInText(e)}else this.findInside(e)}addElement(e,t,r){let s=this.localPreserveWS,i=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let l=e.nodeName.toLowerCase(),c;T1.hasOwnProperty(l)&&this.parser.normalizeLists&&ej(e);let u=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(c=this.parser.matchTag(e,this,r));e:if(u?u.ignore:ZE.hasOwnProperty(l))this.findInside(e),this.ignoreFallback(e,t);else if(!u||u.skip||u.closeParent){u&&u.closeParent?this.open=Math.max(0,this.open-1):u&&u.skip.nodeType&&(e=u.skip);let h,f=this.needsBlock;if(j1.hasOwnProperty(l))i.content.length&&i.content[0].isInline&&this.open&&(this.open--,i=this.top),h=!0,i.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,t);break e}let g=u&&u.skip?t:this.readStyles(e,t);g&&this.addAll(e,g),h&&this.sync(i),this.needsBlock=f}else{let h=this.readStyles(e,t);h&&this.addElementByRule(e,u,h,u.consuming===!1?c:void 0)}this.localPreserveWS=s}leafFallback(e,t){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),t)}ignoreFallback(e,t){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),t)}readStyles(e,t){let r=e.style;if(r&&r.length)for(let s=0;s<this.parser.matchedStyles.length;s++){let i=this.parser.matchedStyles[s],l=r.getPropertyValue(i);if(l)for(let c=void 0;;){let u=this.parser.matchStyle(i,l,this,c);if(!u)break;if(u.ignore)return null;if(u.clearMark?t=t.filter(h=>!u.clearMark(h)):t=t.concat(this.parser.schema.marks[u.mark].create(u.attrs)),u.consuming===!1)c=u;else break}}return t}addElementByRule(e,t,r,s){let i,l;if(t.node)if(l=this.parser.schema.nodes[t.node],l.isLeaf)this.insertNode(l.create(t.attrs),r)||this.leafFallback(e,r);else{let u=this.enter(l,t.attrs||null,r,t.preserveWhitespace);u&&(i=!0,r=u)}else{let u=this.parser.schema.marks[t.mark];r=r.concat(u.create(t.attrs))}let c=this.top;if(l&&l.isLeaf)this.findInside(e);else if(s)this.addElement(e,r,s);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(u=>this.insertNode(u,r));else{let u=e;typeof t.contentElement=="string"?u=e.querySelector(t.contentElement):typeof t.contentElement=="function"?u=t.contentElement(e):t.contentElement&&(u=t.contentElement),this.findAround(e,u,!0),this.addAll(u,r),this.findAround(e,u,!1)}i&&this.sync(c)&&this.open--}addAll(e,t,r,s){let i=r||0;for(let l=r?e.childNodes[r]:e.firstChild,c=s==null?null:e.childNodes[s];l!=c;l=l.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(l,t);this.findAtPoint(e,i)}findPlace(e,t){let r,s;for(let i=this.open;i>=0;i--){let l=this.nodes[i],c=l.findWrapping(e);if(c&&(!r||r.length>c.length)&&(r=c,s=l,!c.length)||l.solid)break}if(!r)return null;this.sync(s);for(let i=0;i<r.length;i++)t=this.enterInner(r[i],null,t,!1);return t}insertNode(e,t){if(e.isInline&&this.needsBlock&&!this.top.type){let s=this.textblockFromContext();s&&(t=this.enterInner(s,null,t))}let r=this.findPlace(e,t);if(r){this.closeExtra();let s=this.top;s.match&&(s.match=s.match.matchType(e.type));let i=Oe.none;for(let l of r.concat(e.marks))(s.type?s.type.allowsMarkType(l.type):V0(l.type,e.type))&&(i=l.addToSet(i));return s.content.push(e.mark(i)),!0}return!1}enter(e,t,r,s){let i=this.findPlace(e.create(t),r);return i&&(i=this.enterInner(e,t,r,!0,s)),i}enterInner(e,t,r,s=!1,i){this.closeExtra();let l=this.top;l.match=l.match&&l.match.matchType(e);let c=F0(e,i,l.options);l.options&hc&&l.content.length==0&&(c|=hc);let u=Oe.none;return r=r.filter(h=>(l.type?l.type.allowsMarkType(h.type):V0(h.type,e))?(u=h.addToSet(u),!1):!0),this.nodes.push(new Za(e,t,u,s,null,c)),this.open++,r}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let t=this.open;t>=0;t--){if(this.nodes[t]==e)return this.open=t,!0;this.localPreserveWS&&(this.nodes[t].options|=yl)}return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let r=this.nodes[t].content;for(let s=r.length-1;s>=0;s--)e+=r[s].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==t&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,r){if(e!=t&&this.find)for(let s=0;s<this.find.length;s++)this.find[s].pos==null&&e.nodeType==1&&e.contains(this.find[s].node)&&t.compareDocumentPosition(this.find[s].node)&(r?2:4)&&(this.find[s].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),r=this.options.context,s=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),i=-(r?r.depth+1:0)+(s?0:1),l=(c,u)=>{for(;c>=0;c--){let h=t[c];if(h==""){if(c==t.length-1||c==0)continue;for(;u>=i;u--)if(l(c-1,u))return!0;return!1}else{let f=u>0||u==0&&s?this.nodes[u].type:r&&u>=i?r.node(u-i).type:null;if(!f||f.name!=h&&!f.isInGroup(h))return!1;u--}}return!0};return l(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let r=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let t in this.parser.schema.nodes){let r=this.parser.schema.nodes[t];if(r.isTextblock&&r.defaultAttrs)return r}}}function ej(n){for(let e=n.firstChild,t=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&T1.hasOwnProperty(r)&&t?(t.appendChild(e),e=t):r=="li"?t=e:r&&(t=null)}}function tj(n,e){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,e)}function H0(n){let e={};for(let t in n)e[t]=n[t];return e}function V0(n,e){let t=e.schema.nodes;for(let r in t){let s=t[r];if(!s.allowsMarkType(n))continue;let i=[],l=c=>{i.push(c);for(let u=0;u<c.edgeCount;u++){let{type:h,next:f}=c.edge(u);if(h==e||i.indexOf(f)<0&&l(f))return!0}};if(l(s.contentMatch))return!0}}class Gs{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},r){r||(r=Nh(t).createDocumentFragment());let s=r,i=[];return e.forEach(l=>{if(i.length||l.marks.length){let c=0,u=0;for(;c<i.length&&u<l.marks.length;){let h=l.marks[u];if(!this.marks[h.type.name]){u++;continue}if(!h.eq(i[c][0])||h.type.spec.spanning===!1)break;c++,u++}for(;c<i.length;)s=i.pop()[1];for(;u<l.marks.length;){let h=l.marks[u++],f=this.serializeMark(h,l.isInline,t);f&&(i.push([h,s]),s.appendChild(f.dom),s=f.contentDOM||f.dom)}}s.appendChild(this.serializeNodeInner(l,t))}),r}serializeNodeInner(e,t){let{dom:r,contentDOM:s}=fc(Nh(t),this.nodes[e.type.name](e),null,e.attrs);if(s){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,s)}return r}serializeNode(e,t={}){let r=this.serializeNodeInner(e,t);for(let s=e.marks.length-1;s>=0;s--){let i=this.serializeMark(e.marks[s],e.isInline,t);i&&((i.contentDOM||i.dom).appendChild(r),r=i.dom)}return r}serializeMark(e,t,r={}){let s=this.marks[e.type.name];return s&&fc(Nh(r),s(e,t),null,e.attrs)}static renderSpec(e,t,r=null,s){return fc(e,t,r,s)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Gs(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=W0(e.nodes);return t.text||(t.text=r=>r.text),t}static marksFromSchema(e){return W0(e.marks)}}function W0(n){let e={};for(let t in n){let r=n[t].spec.toDOM;r&&(e[t]=r)}return e}function Nh(n){return n.document||window.document}const q0=new WeakMap;function nj(n){let e=q0.get(n);return e===void 0&&q0.set(n,e=rj(n)),e}function rj(n){let e=null;function t(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let s=0;s<r.length;s++)t(r[s]);else for(let s in r)t(r[s])}return t(n),e}function fc(n,e,t,r){if(typeof e=="string")return{dom:n.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let s=e[0],i;if(typeof s!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(i=nj(r))&&i.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let l=s.indexOf(" ");l>0&&(t=s.slice(0,l),s=s.slice(l+1));let c,u=t?n.createElementNS(t,s):n.createElement(s),h=e[1],f=1;if(h&&typeof h=="object"&&h.nodeType==null&&!Array.isArray(h)){f=2;for(let g in h)if(h[g]!=null){let x=g.indexOf(" ");x>0?u.setAttributeNS(g.slice(0,x),g.slice(x+1),h[g]):u.setAttribute(g,h[g])}}for(let g=f;g<e.length;g++){let x=e[g];if(x===0){if(g<e.length-1||g>f)throw new RangeError("Content hole must be the only child of its parent node");return{dom:u,contentDOM:u}}else{let{dom:w,contentDOM:b}=fc(n,x,t,r);if(u.appendChild(w),b){if(c)throw new RangeError("Multiple content holes");c=b}}}return{dom:u,contentDOM:c}}const _1=65535,A1=Math.pow(2,16);function sj(n,e){return n+e*A1}function K0(n){return n&_1}function ij(n){return(n-(n&_1))/A1}const M1=1,O1=2,pc=4,R1=8;class yf{constructor(e,t,r){this.pos=e,this.delInfo=t,this.recover=r}get deleted(){return(this.delInfo&R1)>0}get deletedBefore(){return(this.delInfo&(M1|pc))>0}get deletedAfter(){return(this.delInfo&(O1|pc))>0}get deletedAcross(){return(this.delInfo&pc)>0}}class rn{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&rn.empty)return rn.empty}recover(e){let t=0,r=K0(e);if(!this.inverted)for(let s=0;s<r;s++)t+=this.ranges[s*3+2]-this.ranges[s*3+1];return this.ranges[r*3]+t+ij(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,r){let s=0,i=this.inverted?2:1,l=this.inverted?1:2;for(let c=0;c<this.ranges.length;c+=3){let u=this.ranges[c]-(this.inverted?s:0);if(u>e)break;let h=this.ranges[c+i],f=this.ranges[c+l],g=u+h;if(e<=g){let x=h?e==u?-1:e==g?1:t:t,w=u+s+(x<0?0:f);if(r)return w;let b=e==(t<0?u:g)?null:sj(c/3,e-u),k=e==u?O1:e==g?M1:pc;return(t<0?e!=u:e!=g)&&(k|=R1),new yf(w,k,b)}s+=f-h}return r?e+s:new yf(e+s,0,null)}touches(e,t){let r=0,s=K0(t),i=this.inverted?2:1,l=this.inverted?1:2;for(let c=0;c<this.ranges.length;c+=3){let u=this.ranges[c]-(this.inverted?r:0);if(u>e)break;let h=this.ranges[c+i],f=u+h;if(e<=f&&c==s*3)return!0;r+=this.ranges[c+l]-h}return!1}forEach(e){let t=this.inverted?2:1,r=this.inverted?1:2;for(let s=0,i=0;s<this.ranges.length;s+=3){let l=this.ranges[s],c=l-(this.inverted?i:0),u=l+(this.inverted?0:i),h=this.ranges[s+t],f=this.ranges[s+r];e(c,c+h,u,u+f),i+=f-h}}invert(){return new rn(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?rn.empty:new rn(e<0?[0,-e,0]:[0,0,e])}}rn.empty=new rn([]);class zi{constructor(e=[],t,r=0,s=e.length){this.maps=e,this.mirror=t,this.from=r,this.to=s}slice(e=0,t=this.maps.length){return new zi(this.maps,this.mirror,e,t)}copy(){return new zi(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,t){this.to=this.maps.push(e),t!=null&&this.setMirror(this.maps.length-1,t)}appendMapping(e){for(let t=0,r=this.maps.length;t<e.maps.length;t++){let s=e.getMirror(t);this.appendMap(e.maps[t],s!=null&&s<t?r+s:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,r=this.maps.length+e.maps.length;t>=0;t--){let s=e.getMirror(t);this.appendMap(e.maps[t].invert(),s!=null&&s>t?r-s-1:void 0)}}invert(){let e=new zi;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let r=this.from;r<this.to;r++)e=this.maps[r].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,r){let s=0;for(let i=this.from;i<this.to;i++){let l=this.maps[i],c=l.mapResult(e,t);if(c.recover!=null){let u=this.getMirror(i);if(u!=null&&u>i&&u<this.to){i=u,e=this.maps[u].recover(c.recover);continue}}s|=c.delInfo,e=c.pos}return r?e:new yf(e,s,null)}}const Eh=Object.create(null);class Pt{getMap(){return rn.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=Eh[t.stepType];if(!r)throw new RangeError(`No step type ${t.stepType} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in Eh)throw new RangeError("Duplicate use of step JSON ID "+e);return Eh[e]=t,t.prototype.jsonID=e,t}}class rt{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new rt(e,null)}static fail(e){return new rt(null,e)}static fromReplace(e,t,r,s){try{return rt.ok(e.replace(t,r,s))}catch(i){if(i instanceof Sc)return rt.fail(i.message);throw i}}}function wp(n,e,t){let r=[];for(let s=0;s<n.childCount;s++){let i=n.child(s);i.content.size&&(i=i.copy(wp(i.content,e,i))),i.isInline&&(i=e(i,t,s)),r.push(i)}return z.fromArray(r)}class Jr extends Pt{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=e.resolve(this.from),s=r.node(r.sharedDepth(this.to)),i=new G(wp(t.content,(l,c)=>!l.isAtom||!c.type.allowsMarkType(this.mark.type)?l:l.mark(this.mark.addToSet(l.marks)),s),t.openStart,t.openEnd);return rt.fromReplace(e,this.from,this.to,i)}invert(){return new Hn(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new Jr(t.pos,r.pos,this.mark)}merge(e){return e instanceof Jr&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Jr(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Jr(t.from,t.to,e.markFromJSON(t.mark))}}Pt.jsonID("addMark",Jr);class Hn extends Pt{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=new G(wp(t.content,s=>s.mark(this.mark.removeFromSet(s.marks)),e),t.openStart,t.openEnd);return rt.fromReplace(e,this.from,this.to,r)}invert(){return new Jr(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new Hn(t.pos,r.pos,this.mark)}merge(e){return e instanceof Hn&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Hn(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Hn(t.from,t.to,e.markFromJSON(t.mark))}}Pt.jsonID("removeMark",Hn);class Gr extends Pt{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return rt.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return rt.fromReplace(e,this.pos,this.pos+1,new G(z.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let r=this.mark.addToSet(t.marks);if(r.length==t.marks.length){for(let s=0;s<t.marks.length;s++)if(!t.marks[s].isInSet(r))return new Gr(this.pos,t.marks[s]);return new Gr(this.pos,this.mark)}}return new Hi(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Gr(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Gr(t.pos,e.markFromJSON(t.mark))}}Pt.jsonID("addNodeMark",Gr);class Hi extends Pt{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return rt.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return rt.fromReplace(e,this.pos,this.pos+1,new G(z.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return!t||!this.mark.isInSet(t.marks)?this:new Gr(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Hi(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Hi(t.pos,e.markFromJSON(t.mark))}}Pt.jsonID("removeNodeMark",Hi);class mt extends Pt{constructor(e,t,r,s=!1){super(),this.from=e,this.to=t,this.slice=r,this.structure=s}apply(e){return this.structure&&xf(e,this.from,this.to)?rt.fail("Structure replace would overwrite content"):rt.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new rn([this.from,this.to-this.from,this.slice.size])}invert(e){return new mt(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deletedAcross&&r.deletedAcross?null:new mt(t.pos,Math.max(t.pos,r.pos),this.slice)}merge(e){if(!(e instanceof mt)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let t=this.slice.size+e.slice.size==0?G.empty:new G(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new mt(this.from,this.to+(e.to-e.from),t,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let t=this.slice.size+e.slice.size==0?G.empty:new G(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new mt(e.from,this.to,t,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new mt(t.from,t.to,G.fromJSON(e,t.slice),!!t.structure)}}Pt.jsonID("replace",mt);class gt extends Pt{constructor(e,t,r,s,i,l,c=!1){super(),this.from=e,this.to=t,this.gapFrom=r,this.gapTo=s,this.slice=i,this.insert=l,this.structure=c}apply(e){if(this.structure&&(xf(e,this.from,this.gapFrom)||xf(e,this.gapTo,this.to)))return rt.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return rt.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,t.content);return r?rt.fromReplace(e,this.from,this.to,r):rt.fail("Content does not fit in gap")}getMap(){return new rn([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new gt(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),s=this.from==this.gapFrom?t.pos:e.map(this.gapFrom,-1),i=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return t.deletedAcross&&r.deletedAcross||s<t.pos||i>r.pos?null:new gt(t.pos,r.pos,s,i,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number"||typeof t.gapFrom!="number"||typeof t.gapTo!="number"||typeof t.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new gt(t.from,t.to,t.gapFrom,t.gapTo,G.fromJSON(e,t.slice),t.insert,!!t.structure)}}Pt.jsonID("replaceAround",gt);function xf(n,e,t){let r=n.resolve(e),s=t-e,i=r.depth;for(;s>0&&i>0&&r.indexAfter(i)==r.node(i).childCount;)i--,s--;if(s>0){let l=r.node(i).maybeChild(r.indexAfter(i));for(;s>0;){if(!l||l.isLeaf)return!0;l=l.firstChild,s--}}return!1}function oj(n,e,t,r){let s=[],i=[],l,c;n.doc.nodesBetween(e,t,(u,h,f)=>{if(!u.isInline)return;let g=u.marks;if(!r.isInSet(g)&&f.type.allowsMarkType(r.type)){let x=Math.max(h,e),w=Math.min(h+u.nodeSize,t),b=r.addToSet(g);for(let k=0;k<g.length;k++)g[k].isInSet(b)||(l&&l.to==x&&l.mark.eq(g[k])?l.to=w:s.push(l=new Hn(x,w,g[k])));c&&c.to==x?c.to=w:i.push(c=new Jr(x,w,r))}}),s.forEach(u=>n.step(u)),i.forEach(u=>n.step(u))}function lj(n,e,t,r){let s=[],i=0;n.doc.nodesBetween(e,t,(l,c)=>{if(!l.isInline)return;i++;let u=null;if(r instanceof du){let h=l.marks,f;for(;f=r.isInSet(h);)(u||(u=[])).push(f),h=f.removeFromSet(h)}else r?r.isInSet(l.marks)&&(u=[r]):u=l.marks;if(u&&u.length){let h=Math.min(c+l.nodeSize,t);for(let f=0;f<u.length;f++){let g=u[f],x;for(let w=0;w<s.length;w++){let b=s[w];b.step==i-1&&g.eq(s[w].style)&&(x=b)}x?(x.to=h,x.step=i):s.push({style:g,from:Math.max(c,e),to:h,step:i})}}}),s.forEach(l=>n.step(new Hn(l.from,l.to,l.style)))}function bp(n,e,t,r=t.contentMatch,s=!0){let i=n.doc.nodeAt(e),l=[],c=e+1;for(let u=0;u<i.childCount;u++){let h=i.child(u),f=c+h.nodeSize,g=r.matchType(h.type);if(!g)l.push(new mt(c,f,G.empty));else{r=g;for(let x=0;x<h.marks.length;x++)t.allowsMarkType(h.marks[x].type)||n.step(new Hn(c,f,h.marks[x]));if(s&&h.isText&&t.whitespace!="pre"){let x,w=/\r?\n|\r/g,b;for(;x=w.exec(h.text);)b||(b=new G(z.from(t.schema.text(" ",t.allowedMarks(h.marks))),0,0)),l.push(new mt(c+x.index,c+x.index+x[0].length,b))}}c=f}if(!r.validEnd){let u=r.fillBefore(z.empty,!0);n.replace(c,c,new G(u,0,0))}for(let u=l.length-1;u>=0;u--)n.step(l[u])}function aj(n,e,t){return(e==0||n.canReplace(e,n.childCount))&&(t==n.childCount||n.canReplace(0,t))}function Zi(n){let t=n.parent.content.cutByIndex(n.startIndex,n.endIndex);for(let r=n.depth;;--r){let s=n.$from.node(r),i=n.$from.index(r),l=n.$to.indexAfter(r);if(r<n.depth&&s.canReplace(i,l,t))return r;if(r==0||s.type.spec.isolating||!aj(s,i,l))break}return null}function cj(n,e,t){let{$from:r,$to:s,depth:i}=e,l=r.before(i+1),c=s.after(i+1),u=l,h=c,f=z.empty,g=0;for(let b=i,k=!1;b>t;b--)k||r.index(b)>0?(k=!0,f=z.from(r.node(b).copy(f)),g++):u--;let x=z.empty,w=0;for(let b=i,k=!1;b>t;b--)k||s.after(b+1)<s.end(b)?(k=!0,x=z.from(s.node(b).copy(x)),w++):h++;n.step(new gt(u,h,l,c,new G(f.append(x),g,w),f.size-g,!0))}function kp(n,e,t=null,r=n){let s=uj(n,e),i=s&&dj(r,e);return i?s.map(J0).concat({type:e,attrs:t}).concat(i.map(J0)):null}function J0(n){return{type:n,attrs:null}}function uj(n,e){let{parent:t,startIndex:r,endIndex:s}=n,i=t.contentMatchAt(r).findWrapping(e);if(!i)return null;let l=i.length?i[0]:e;return t.canReplaceWith(r,s,l)?i:null}function dj(n,e){let{parent:t,startIndex:r,endIndex:s}=n,i=t.child(r),l=e.contentMatch.findWrapping(i.type);if(!l)return null;let u=(l.length?l[l.length-1]:e).contentMatch;for(let h=r;u&&h<s;h++)u=u.matchType(t.child(h).type);return!u||!u.validEnd?null:l}function hj(n,e,t){let r=z.empty;for(let l=t.length-1;l>=0;l--){if(r.size){let c=t[l].type.contentMatch.matchFragment(r);if(!c||!c.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=z.from(t[l].type.create(t[l].attrs,r))}let s=e.start,i=e.end;n.step(new gt(s,i,s,i,new G(r,0,0),t.length,!0))}function fj(n,e,t,r,s){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let i=n.steps.length;n.doc.nodesBetween(e,t,(l,c)=>{let u=typeof s=="function"?s(l):s;if(l.isTextblock&&!l.hasMarkup(r,u)&&pj(n.doc,n.mapping.slice(i).map(c),r)){let h=null;if(r.schema.linebreakReplacement){let w=r.whitespace=="pre",b=!!r.contentMatch.matchType(r.schema.linebreakReplacement);w&&!b?h=!1:!w&&b&&(h=!0)}h===!1&&I1(n,l,c,i),bp(n,n.mapping.slice(i).map(c,1),r,void 0,h===null);let f=n.mapping.slice(i),g=f.map(c,1),x=f.map(c+l.nodeSize,1);return n.step(new gt(g,x,g+1,x-1,new G(z.from(r.create(u,null,l.marks)),0,0),1,!0)),h===!0&&P1(n,l,c,i),!1}})}function P1(n,e,t,r){e.forEach((s,i)=>{if(s.isText){let l,c=/\r?\n|\r/g;for(;l=c.exec(s.text);){let u=n.mapping.slice(r).map(t+1+i+l.index);n.replaceWith(u,u+1,e.type.schema.linebreakReplacement.create())}}})}function I1(n,e,t,r){e.forEach((s,i)=>{if(s.type==s.type.schema.linebreakReplacement){let l=n.mapping.slice(r).map(t+1+i);n.replaceWith(l,l+1,e.type.schema.text(`
`))}})}function pj(n,e,t){let r=n.resolve(e),s=r.index();return r.parent.canReplaceWith(s,s+1,t)}function mj(n,e,t,r,s){let i=n.doc.nodeAt(e);if(!i)throw new RangeError("No node at given position");t||(t=i.type);let l=t.create(r,null,s||i.marks);if(i.isLeaf)return n.replaceWith(e,e+i.nodeSize,l);if(!t.validContent(i.content))throw new RangeError("Invalid content for node type "+t.name);n.step(new gt(e,e+i.nodeSize,e+1,e+i.nodeSize-1,new G(z.from(l),0,0),1,!0))}function hr(n,e,t=1,r){let s=n.resolve(e),i=s.depth-t,l=r&&r[r.length-1]||s.parent;if(i<0||s.parent.type.spec.isolating||!s.parent.canReplace(s.index(),s.parent.childCount)||!l.type.validContent(s.parent.content.cutByIndex(s.index(),s.parent.childCount)))return!1;for(let h=s.depth-1,f=t-2;h>i;h--,f--){let g=s.node(h),x=s.index(h);if(g.type.spec.isolating)return!1;let w=g.content.cutByIndex(x,g.childCount),b=r&&r[f+1];b&&(w=w.replaceChild(0,b.type.create(b.attrs)));let k=r&&r[f]||g;if(!g.canReplace(x+1,g.childCount)||!k.type.validContent(w))return!1}let c=s.indexAfter(i),u=r&&r[0];return s.node(i).canReplaceWith(c,c,u?u.type:s.node(i+1).type)}function gj(n,e,t=1,r){let s=n.doc.resolve(e),i=z.empty,l=z.empty;for(let c=s.depth,u=s.depth-t,h=t-1;c>u;c--,h--){i=z.from(s.node(c).copy(i));let f=r&&r[h];l=z.from(f?f.type.create(f.attrs,l):s.node(c).copy(l))}n.step(new mt(e,e,new G(i.append(l),t,t),!0))}function ls(n,e){let t=n.resolve(e),r=t.index();return L1(t.nodeBefore,t.nodeAfter)&&t.parent.canReplace(r,r+1)}function yj(n,e){e.content.size||n.type.compatibleContent(e.type);let t=n.contentMatchAt(n.childCount),{linebreakReplacement:r}=n.type.schema;for(let s=0;s<e.childCount;s++){let i=e.child(s),l=i.type==r?n.type.schema.nodes.text:i.type;if(t=t.matchType(l),!t||!n.type.allowsMarks(i.marks))return!1}return t.validEnd}function L1(n,e){return!!(n&&e&&!n.isLeaf&&yj(n,e))}function hu(n,e,t=-1){let r=n.resolve(e);for(let s=r.depth;;s--){let i,l,c=r.index(s);if(s==r.depth?(i=r.nodeBefore,l=r.nodeAfter):t>0?(i=r.node(s+1),c++,l=r.node(s).maybeChild(c)):(i=r.node(s).maybeChild(c-1),l=r.node(s+1)),i&&!i.isTextblock&&L1(i,l)&&r.node(s).canReplace(c,c+1))return e;if(s==0)break;e=t<0?r.before(s):r.after(s)}}function xj(n,e,t){let r=null,{linebreakReplacement:s}=n.doc.type.schema,i=n.doc.resolve(e-t),l=i.node().type;if(s&&l.inlineContent){let f=l.whitespace=="pre",g=!!l.contentMatch.matchType(s);f&&!g?r=!1:!f&&g&&(r=!0)}let c=n.steps.length;if(r===!1){let f=n.doc.resolve(e+t);I1(n,f.node(),f.before(),c)}l.inlineContent&&bp(n,e+t-1,l,i.node().contentMatchAt(i.index()),r==null);let u=n.mapping.slice(c),h=u.map(e-t);if(n.step(new mt(h,u.map(e+t,-1),G.empty,!0)),r===!0){let f=n.doc.resolve(h);P1(n,f.node(),f.before(),n.steps.length)}return n}function vj(n,e,t){let r=n.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),t))return e;if(r.parentOffset==0)for(let s=r.depth-1;s>=0;s--){let i=r.index(s);if(r.node(s).canReplaceWith(i,i,t))return r.before(s+1);if(i>0)return null}if(r.parentOffset==r.parent.content.size)for(let s=r.depth-1;s>=0;s--){let i=r.indexAfter(s);if(r.node(s).canReplaceWith(i,i,t))return r.after(s+1);if(i<r.node(s).childCount)return null}return null}function D1(n,e,t){let r=n.resolve(e);if(!t.content.size)return e;let s=t.content;for(let i=0;i<t.openStart;i++)s=s.firstChild.content;for(let i=1;i<=(t.openStart==0&&t.size?2:1);i++)for(let l=r.depth;l>=0;l--){let c=l==r.depth?0:r.pos<=(r.start(l+1)+r.end(l+1))/2?-1:1,u=r.index(l)+(c>0?1:0),h=r.node(l),f=!1;if(i==1)f=h.canReplace(u,u,s);else{let g=h.contentMatchAt(u).findWrapping(s.firstChild.type);f=g&&h.canReplaceWith(u,u,g[0])}if(f)return c==0?r.pos:c<0?r.before(l+1):r.after(l+1)}return null}function fu(n,e,t=e,r=G.empty){if(e==t&&!r.size)return null;let s=n.resolve(e),i=n.resolve(t);return z1(s,i,r)?new mt(e,t,r):new wj(s,i,r).fit()}function z1(n,e,t){return!t.openStart&&!t.openEnd&&n.start()==e.start()&&n.parent.canReplace(n.index(),e.index(),t.content)}class wj{constructor(e,t,r){this.$from=e,this.$to=t,this.unplaced=r,this.frontier=[],this.placed=z.empty;for(let s=0;s<=e.depth;s++){let i=e.node(s);this.frontier.push({type:i.type,match:i.contentMatchAt(e.indexAfter(s))})}for(let s=e.depth;s>0;s--)this.placed=z.from(e.node(s).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let h=this.findFittable();h?this.placeNodes(h):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,r=this.$from,s=this.close(e<0?this.$to:r.doc.resolve(e));if(!s)return null;let i=this.placed,l=r.depth,c=s.depth;for(;l&&c&&i.childCount==1;)i=i.firstChild.content,l--,c--;let u=new G(i,l,c);return e>-1?new gt(r.pos,e,this.$to.pos,this.$to.end(),u,t):u.size||r.pos!=this.$to.pos?new mt(r.pos,s.pos,u):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,r=0,s=this.unplaced.openEnd;r<e;r++){let i=t.firstChild;if(t.childCount>1&&(s=0),i.type.spec.isolating&&s<=r){e=r;break}t=i.content}for(let t=1;t<=2;t++)for(let r=t==1?e:this.unplaced.openStart;r>=0;r--){let s,i=null;r?(i=jh(this.unplaced.content,r-1).firstChild,s=i.content):s=this.unplaced.content;let l=s.firstChild;for(let c=this.depth;c>=0;c--){let{type:u,match:h}=this.frontier[c],f,g=null;if(t==1&&(l?h.matchType(l.type)||(g=h.fillBefore(z.from(l),!1)):i&&u.compatibleContent(i.type)))return{sliceDepth:r,frontierDepth:c,parent:i,inject:g};if(t==2&&l&&(f=h.findWrapping(l.type)))return{sliceDepth:r,frontierDepth:c,parent:i,wrap:f};if(i&&h.matchType(i.type))break}}}openMore(){let{content:e,openStart:t,openEnd:r}=this.unplaced,s=jh(e,t);return!s.childCount||s.firstChild.isLeaf?!1:(this.unplaced=new G(e,t+1,Math.max(r,s.size+t>=e.size-r?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:r}=this.unplaced,s=jh(e,t);if(s.childCount<=1&&t>0){let i=e.size-t<=t+s.size;this.unplaced=new G(Qo(e,t-1,1),t-1,i?t-1:r)}else this.unplaced=new G(Qo(e,t,1),t,r)}placeNodes({sliceDepth:e,frontierDepth:t,parent:r,inject:s,wrap:i}){for(;this.depth>t;)this.closeFrontierNode();if(i)for(let k=0;k<i.length;k++)this.openFrontierNode(i[k]);let l=this.unplaced,c=r?r.content:l.content,u=l.openStart-e,h=0,f=[],{match:g,type:x}=this.frontier[t];if(s){for(let k=0;k<s.childCount;k++)f.push(s.child(k));g=g.matchFragment(s)}let w=c.size+e-(l.content.size-l.openEnd);for(;h<c.childCount;){let k=c.child(h),C=g.matchType(k.type);if(!C)break;h++,(h>1||u==0||k.content.size)&&(g=C,f.push($1(k.mark(x.allowedMarks(k.marks)),h==1?u:0,h==c.childCount?w:-1)))}let b=h==c.childCount;b||(w=-1),this.placed=Yo(this.placed,t,z.from(f)),this.frontier[t].match=g,b&&w<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let k=0,C=c;k<w;k++){let N=C.lastChild;this.frontier.push({type:N.type,match:N.contentMatchAt(N.childCount)}),C=N.content}this.unplaced=b?e==0?G.empty:new G(Qo(l.content,e-1,1),e-1,w<0?l.openEnd:e-1):new G(Qo(l.content,e,h),l.openStart,l.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!Th(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:r}=this.$to,s=this.$to.after(r);for(;r>1&&s==this.$to.end(--r);)++s;return s}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:r,type:s}=this.frontier[t],i=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),l=Th(e,t,s,r,i);if(l){for(let c=t-1;c>=0;c--){let{match:u,type:h}=this.frontier[c],f=Th(e,c,h,u,!0);if(!f||f.childCount)continue e}return{depth:t,fit:l,move:i?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=Yo(this.placed,t.depth,t.fit)),e=t.move;for(let r=t.depth+1;r<=e.depth;r++){let s=e.node(r),i=s.type.contentMatch.fillBefore(s.content,!0,e.index(r));this.openFrontierNode(s.type,s.attrs,i)}return e}openFrontierNode(e,t=null,r){let s=this.frontier[this.depth];s.match=s.match.matchType(e),this.placed=Yo(this.placed,this.depth,z.from(e.create(t,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(z.empty,!0);t.childCount&&(this.placed=Yo(this.placed,this.frontier.length,t))}}function Qo(n,e,t){return e==0?n.cutByIndex(t,n.childCount):n.replaceChild(0,n.firstChild.copy(Qo(n.firstChild.content,e-1,t)))}function Yo(n,e,t){return e==0?n.append(t):n.replaceChild(n.childCount-1,n.lastChild.copy(Yo(n.lastChild.content,e-1,t)))}function jh(n,e){for(let t=0;t<e;t++)n=n.firstChild.content;return n}function $1(n,e,t){if(e<=0)return n;let r=n.content;return e>1&&(r=r.replaceChild(0,$1(r.firstChild,e-1,r.childCount==1?t-1:0))),e>0&&(r=n.type.contentMatch.fillBefore(r).append(r),t<=0&&(r=r.append(n.type.contentMatch.matchFragment(r).fillBefore(z.empty,!0)))),n.copy(r)}function Th(n,e,t,r,s){let i=n.node(e),l=s?n.indexAfter(e):n.index(e);if(l==i.childCount&&!t.compatibleContent(i.type))return null;let c=r.fillBefore(i.content,!0,l);return c&&!bj(t,i.content,l)?c:null}function bj(n,e,t){for(let r=t;r<e.childCount;r++)if(!n.allowsMarks(e.child(r).marks))return!0;return!1}function kj(n){return n.spec.defining||n.spec.definingForContent}function Sj(n,e,t,r){if(!r.size)return n.deleteRange(e,t);let s=n.doc.resolve(e),i=n.doc.resolve(t);if(z1(s,i,r))return n.step(new mt(e,t,r));let l=F1(s,n.doc.resolve(t));l[l.length-1]==0&&l.pop();let c=-(s.depth+1);l.unshift(c);for(let x=s.depth,w=s.pos-1;x>0;x--,w--){let b=s.node(x).type.spec;if(b.defining||b.definingAsContext||b.isolating)break;l.indexOf(x)>-1?c=x:s.before(x)==w&&l.splice(1,0,-x)}let u=l.indexOf(c),h=[],f=r.openStart;for(let x=r.content,w=0;;w++){let b=x.firstChild;if(h.push(b),w==r.openStart)break;x=b.content}for(let x=f-1;x>=0;x--){let w=h[x],b=kj(w.type);if(b&&!w.sameMarkup(s.node(Math.abs(c)-1)))f=x;else if(b||!w.type.isTextblock)break}for(let x=r.openStart;x>=0;x--){let w=(x+f+1)%(r.openStart+1),b=h[w];if(b)for(let k=0;k<l.length;k++){let C=l[(k+u)%l.length],N=!0;C<0&&(N=!1,C=-C);let M=s.node(C-1),I=s.index(C-1);if(M.canReplaceWith(I,I,b.type,b.marks))return n.replace(s.before(C),N?i.after(C):t,new G(B1(r.content,0,r.openStart,w),w,r.openEnd))}}let g=n.steps.length;for(let x=l.length-1;x>=0&&(n.replace(e,t,r),!(n.steps.length>g));x--){let w=l[x];w<0||(e=s.before(w),t=i.after(w))}}function B1(n,e,t,r,s){if(e<t){let i=n.firstChild;n=n.replaceChild(0,i.copy(B1(i.content,e+1,t,r,i)))}if(e>r){let i=s.contentMatchAt(0),l=i.fillBefore(n).append(n);n=l.append(i.matchFragment(l).fillBefore(z.empty,!0))}return n}function Cj(n,e,t,r){if(!r.isInline&&e==t&&n.doc.resolve(e).parent.content.size){let s=vj(n.doc,e,r.type);s!=null&&(e=t=s)}n.replaceRange(e,t,new G(z.from(r),0,0))}function Nj(n,e,t){let r=n.doc.resolve(e),s=n.doc.resolve(t),i=F1(r,s);for(let l=0;l<i.length;l++){let c=i[l],u=l==i.length-1;if(u&&c==0||r.node(c).type.contentMatch.validEnd)return n.delete(r.start(c),s.end(c));if(c>0&&(u||r.node(c-1).canReplace(r.index(c-1),s.indexAfter(c-1))))return n.delete(r.before(c),s.after(c))}for(let l=1;l<=r.depth&&l<=s.depth;l++)if(e-r.start(l)==r.depth-l&&t>r.end(l)&&s.end(l)-t!=s.depth-l&&r.start(l-1)==s.start(l-1)&&r.node(l-1).canReplace(r.index(l-1),s.index(l-1)))return n.delete(r.before(l),t);n.delete(e,t)}function F1(n,e){let t=[],r=Math.min(n.depth,e.depth);for(let s=r;s>=0;s--){let i=n.start(s);if(i<n.pos-(n.depth-s)||e.end(s)>e.pos+(e.depth-s)||n.node(s).type.spec.isolating||e.node(s).type.spec.isolating)break;(i==e.start(s)||s==n.depth&&s==e.depth&&n.parent.inlineContent&&e.parent.inlineContent&&s&&e.start(s-1)==i-1)&&t.push(s)}return t}class $i extends Pt{constructor(e,t,r){super(),this.pos=e,this.attr=t,this.value=r}apply(e){let t=e.nodeAt(this.pos);if(!t)return rt.fail("No node at attribute step's position");let r=Object.create(null);for(let i in t.attrs)r[i]=t.attrs[i];r[this.attr]=this.value;let s=t.type.create(r,null,t.marks);return rt.fromReplace(e,this.pos,this.pos+1,new G(z.from(s),0,t.isLeaf?0:1))}getMap(){return rn.empty}invert(e){return new $i(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new $i(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.pos!="number"||typeof t.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new $i(t.pos,t.attr,t.value)}}Pt.jsonID("attr",$i);class xl extends Pt{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let s in e.attrs)t[s]=e.attrs[s];t[this.attr]=this.value;let r=e.type.create(t,e.content,e.marks);return rt.ok(r)}getMap(){return rn.empty}invert(e){return new xl(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new xl(t.attr,t.value)}}Pt.jsonID("docAttr",xl);let Vi=class extends Error{};Vi=function n(e){let t=Error.call(this,e);return t.__proto__=n.prototype,t};Vi.prototype=Object.create(Error.prototype);Vi.prototype.constructor=Vi;Vi.prototype.name="TransformError";class Sp{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new zi}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new Vi(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,r=G.empty){let s=fu(this.doc,e,t,r);return s&&this.step(s),this}replaceWith(e,t,r){return this.replace(e,t,new G(z.from(r),0,0))}delete(e,t){return this.replace(e,t,G.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,r){return Sj(this,e,t,r),this}replaceRangeWith(e,t,r){return Cj(this,e,t,r),this}deleteRange(e,t){return Nj(this,e,t),this}lift(e,t){return cj(this,e,t),this}join(e,t=1){return xj(this,e,t),this}wrap(e,t){return hj(this,e,t),this}setBlockType(e,t=e,r,s=null){return fj(this,e,t,r,s),this}setNodeMarkup(e,t,r=null,s){return mj(this,e,t,r,s),this}setNodeAttribute(e,t,r){return this.step(new $i(e,t,r)),this}setDocAttribute(e,t){return this.step(new xl(e,t)),this}addNodeMark(e,t){return this.step(new Gr(e,t)),this}removeNodeMark(e,t){if(!(t instanceof Oe)){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(t=t.isInSet(r.marks),!t)return this}return this.step(new Hi(e,t)),this}split(e,t=1,r){return gj(this,e,t,r),this}addMark(e,t,r){return oj(this,e,t,r),this}removeMark(e,t,r){return lj(this,e,t,r),this}clearIncompatible(e,t,r){return bp(this,e,t,r),this}}const _h=Object.create(null);class he{constructor(e,t,r){this.$anchor=e,this.$head=t,this.ranges=r||[new U1(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=G.empty){let r=t.content.lastChild,s=null;for(let c=0;c<t.openEnd;c++)s=r,r=r.lastChild;let i=e.steps.length,l=this.ranges;for(let c=0;c<l.length;c++){let{$from:u,$to:h}=l[c],f=e.mapping.slice(i);e.replaceRange(f.map(u.pos),f.map(h.pos),c?G.empty:t),c==0&&Y0(e,i,(r?r.isInline:s&&s.isTextblock)?-1:1)}}replaceWith(e,t){let r=e.steps.length,s=this.ranges;for(let i=0;i<s.length;i++){let{$from:l,$to:c}=s[i],u=e.mapping.slice(r),h=u.map(l.pos),f=u.map(c.pos);i?e.deleteRange(h,f):(e.replaceRangeWith(h,f,t),Y0(e,r,t.isInline?-1:1))}}static findFrom(e,t,r=!1){let s=e.parent.inlineContent?new ce(e):Oi(e.node(0),e.parent,e.pos,e.index(),t,r);if(s)return s;for(let i=e.depth-1;i>=0;i--){let l=t<0?Oi(e.node(0),e.node(i),e.before(i+1),e.index(i),t,r):Oi(e.node(0),e.node(i),e.after(i+1),e.index(i)+1,t,r);if(l)return l}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new on(e.node(0))}static atStart(e){return Oi(e,e,0,0,1)||new on(e)}static atEnd(e){return Oi(e,e,e.content.size,e.childCount,-1)||new on(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=_h[t.type];if(!r)throw new RangeError(`No selection type ${t.type} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in _h)throw new RangeError("Duplicate use of selection JSON ID "+e);return _h[e]=t,t.prototype.jsonID=e,t}getBookmark(){return ce.between(this.$anchor,this.$head).getBookmark()}}he.prototype.visible=!0;class U1{constructor(e,t){this.$from=e,this.$to=t}}let G0=!1;function Q0(n){!G0&&!n.parent.inlineContent&&(G0=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+n.parent.type.name+")"))}class ce extends he{constructor(e,t=e){Q0(e),Q0(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let r=e.resolve(t.map(this.head));if(!r.parent.inlineContent)return he.near(r);let s=e.resolve(t.map(this.anchor));return new ce(s.parent.inlineContent?s:r,r)}replace(e,t=G.empty){if(super.replace(e,t),t==G.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof ce&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new pu(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if(typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new ce(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,r=t){let s=e.resolve(t);return new this(s,r==t?s:e.resolve(r))}static between(e,t,r){let s=e.pos-t.pos;if((!r||s)&&(r=s>=0?1:-1),!t.parent.inlineContent){let i=he.findFrom(t,r,!0)||he.findFrom(t,-r,!0);if(i)t=i.$head;else return he.near(t,r)}return e.parent.inlineContent||(s==0?e=t:(e=(he.findFrom(e,-r,!0)||he.findFrom(e,r,!0)).$anchor,e.pos<t.pos!=s<0&&(e=t))),new ce(e,t)}}he.jsonID("text",ce);class pu{constructor(e,t){this.anchor=e,this.head=t}map(e){return new pu(e.map(this.anchor),e.map(this.head))}resolve(e){return ce.between(e.resolve(this.anchor),e.resolve(this.head))}}class ae extends he{constructor(e){let t=e.nodeAfter,r=e.node(0).resolve(e.pos+t.nodeSize);super(e,r),this.node=t}map(e,t){let{deleted:r,pos:s}=t.mapResult(this.anchor),i=e.resolve(s);return r?he.near(i):new ae(i)}content(){return new G(z.from(this.node),0,0)}eq(e){return e instanceof ae&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new Cp(this.anchor)}static fromJSON(e,t){if(typeof t.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new ae(e.resolve(t.anchor))}static create(e,t){return new ae(e.resolve(t))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}ae.prototype.visible=!1;he.jsonID("node",ae);class Cp{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:r}=e.mapResult(this.anchor);return t?new pu(r,r):new Cp(r)}resolve(e){let t=e.resolve(this.anchor),r=t.nodeAfter;return r&&ae.isSelectable(r)?new ae(t):he.near(t)}}class on extends he{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=G.empty){if(t==G.empty){e.delete(0,e.doc.content.size);let r=he.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new on(e)}map(e){return new on(e)}eq(e){return e instanceof on}getBookmark(){return Ej}}he.jsonID("all",on);const Ej={map(){return this},resolve(n){return new on(n)}};function Oi(n,e,t,r,s,i=!1){if(e.inlineContent)return ce.create(n,t);for(let l=r-(s>0?0:1);s>0?l<e.childCount:l>=0;l+=s){let c=e.child(l);if(c.isAtom){if(!i&&ae.isSelectable(c))return ae.create(n,t-(s<0?c.nodeSize:0))}else{let u=Oi(n,c,t+s,s<0?c.childCount:0,s,i);if(u)return u}t+=c.nodeSize*s}return null}function Y0(n,e,t){let r=n.steps.length-1;if(r<e)return;let s=n.steps[r];if(!(s instanceof mt||s instanceof gt))return;let i=n.mapping.maps[r],l;i.forEach((c,u,h,f)=>{l==null&&(l=f)}),n.setSelection(he.near(n.doc.resolve(l),t))}const X0=1,Z0=2,ex=4;class jj extends Sp{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|X0)&-3,this.storedMarks=null,this}get selectionSet(){return(this.updated&X0)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=Z0,this}ensureMarks(e){return Oe.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Z0)>0}addStep(e,t){super.addStep(e,t),this.updated=this.updated&-3,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let r=this.selection;return t&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||Oe.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,r){let s=this.doc.type.schema;if(t==null)return e?this.replaceSelectionWith(s.text(e),!0):this.deleteSelection();{if(r==null&&(r=t),r=r??t,!e)return this.deleteRange(t,r);let i=this.storedMarks;if(!i){let l=this.doc.resolve(t);i=r==t?l.marks():l.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(t,r,s.text(e,i)),this.selection.empty||this.setSelection(he.near(this.selection.$to)),this}}setMeta(e,t){return this.meta[typeof e=="string"?e:e.key]=t,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=ex,this}get scrolledIntoView(){return(this.updated&ex)>0}}function tx(n,e){return!e||!n?n:n.bind(e)}class Xo{constructor(e,t,r){this.name=e,this.init=tx(t.init,r),this.apply=tx(t.apply,r)}}const Tj=[new Xo("doc",{init(n){return n.doc||n.schema.topNodeType.createAndFill()},apply(n){return n.doc}}),new Xo("selection",{init(n,e){return n.selection||he.atStart(e.doc)},apply(n){return n.selection}}),new Xo("storedMarks",{init(n){return n.storedMarks||null},apply(n,e,t,r){return r.selection.$cursor?n.storedMarks:null}}),new Xo("scrollToSelection",{init(){return 0},apply(n,e){return n.scrolledIntoView?e+1:e}})];class Ah{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=Tj.slice(),t&&t.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new Xo(r.key,r.spec.state,r))})}}class Ii{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=t){let s=this.config.plugins[r];if(s.spec.filterTransaction&&!s.spec.filterTransaction.call(s,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],r=this.applyInner(e),s=null;for(;;){let i=!1;for(let l=0;l<this.config.plugins.length;l++){let c=this.config.plugins[l];if(c.spec.appendTransaction){let u=s?s[l].n:0,h=s?s[l].state:this,f=u<t.length&&c.spec.appendTransaction.call(c,u?t.slice(u):t,h,r);if(f&&r.filterTransaction(f,l)){if(f.setMeta("appendedTransaction",e),!s){s=[];for(let g=0;g<this.config.plugins.length;g++)s.push(g<l?{state:r,n:t.length}:{state:this,n:0})}t.push(f),r=r.applyInner(f),i=!0}s&&(s[l]={state:r,n:t.length})}}if(!i)return{state:r,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new Ii(this.config),r=this.config.fields;for(let s=0;s<r.length;s++){let i=r[s];t[i.name]=i.apply(e,this[i.name],this,t)}return t}get tr(){return new jj(this)}static create(e){let t=new Ah(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new Ii(t);for(let s=0;s<t.fields.length;s++)r[t.fields[s].name]=t.fields[s].init(e,r);return r}reconfigure(e){let t=new Ah(this.schema,e.plugins),r=t.fields,s=new Ii(t);for(let i=0;i<r.length;i++){let l=r[i].name;s[l]=this.hasOwnProperty(l)?this[l]:r[i].init(e,s)}return s}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let s=e[r],i=s.spec.state;i&&i.toJSON&&(t[r]=i.toJSON.call(s,this[s.key]))}return t}static fromJSON(e,t,r){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let s=new Ah(e.schema,e.plugins),i=new Ii(s);return s.fields.forEach(l=>{if(l.name=="doc")i.doc=Xr.fromJSON(e.schema,t.doc);else if(l.name=="selection")i.selection=he.fromJSON(i.doc,t.selection);else if(l.name=="storedMarks")t.storedMarks&&(i.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let c in r){let u=r[c],h=u.spec.state;if(u.key==l.name&&h&&h.fromJSON&&Object.prototype.hasOwnProperty.call(t,c)){i[l.name]=h.fromJSON.call(u,e,t[c],i);return}}i[l.name]=l.init(e,i)}}),i}}function H1(n,e,t){for(let r in n){let s=n[r];s instanceof Function?s=s.bind(e):r=="handleDOMEvents"&&(s=H1(s,e,{})),t[r]=s}return t}class ct{constructor(e){this.spec=e,this.props={},e.props&&H1(e.props,this,this.props),this.key=e.key?e.key.key:V1("plugin")}getState(e){return e[this.key]}}const Mh=Object.create(null);function V1(n){return n in Mh?n+"$"+ ++Mh[n]:(Mh[n]=0,n+"$")}class It{constructor(e="key"){this.key=V1(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const St=function(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e},vl=function(n){let e=n.assignedSlot||n.parentNode;return e&&e.nodeType==11?e.host:e};let vf=null;const ur=function(n,e,t){let r=vf||(vf=document.createRange());return r.setEnd(n,t??n.nodeValue.length),r.setStart(n,e||0),r},_j=function(){vf=null},Us=function(n,e,t,r){return t&&(nx(n,e,t,r,-1)||nx(n,e,t,r,1))},Aj=/^(img|br|input|textarea|hr)$/i;function nx(n,e,t,r,s){for(;;){if(n==t&&e==r)return!0;if(e==(s<0?0:xn(n))){let i=n.parentNode;if(!i||i.nodeType!=1||Ml(n)||Aj.test(n.nodeName)||n.contentEditable=="false")return!1;e=St(n)+(s<0?0:1),n=i}else if(n.nodeType==1){if(n=n.childNodes[e+(s<0?-1:0)],n.contentEditable=="false")return!1;e=s<0?xn(n):0}else return!1}}function xn(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function Mj(n,e){for(;;){if(n.nodeType==3&&e)return n;if(n.nodeType==1&&e>0){if(n.contentEditable=="false")return null;n=n.childNodes[e-1],e=xn(n)}else if(n.parentNode&&!Ml(n))e=St(n),n=n.parentNode;else return null}}function Oj(n,e){for(;;){if(n.nodeType==3&&e<n.nodeValue.length)return n;if(n.nodeType==1&&e<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[e],e=0}else if(n.parentNode&&!Ml(n))e=St(n)+1,n=n.parentNode;else return null}}function Rj(n,e,t){for(let r=e==0,s=e==xn(n);r||s;){if(n==t)return!0;let i=St(n);if(n=n.parentNode,!n)return!1;r=r&&i==0,s=s&&i==xn(n)}}function Ml(n){let e;for(let t=n;t&&!(e=t.pmViewDesc);t=t.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==n||e.contentDOM==n)}const mu=function(n){return n.focusNode&&Us(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)};function As(n,e){let t=document.createEvent("Event");return t.initEvent("keydown",!0,!0),t.keyCode=n,t.key=t.code=e,t}function Pj(n){let e=n.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function Ij(n,e,t){if(n.caretPositionFromPoint)try{let r=n.caretPositionFromPoint(e,t);if(r)return{node:r.offsetNode,offset:Math.min(xn(r.offsetNode),r.offset)}}catch{}if(n.caretRangeFromPoint){let r=n.caretRangeFromPoint(e,t);if(r)return{node:r.startContainer,offset:Math.min(xn(r.startContainer),r.startOffset)}}}const Vn=typeof navigator<"u"?navigator:null,rx=typeof document<"u"?document:null,as=Vn&&Vn.userAgent||"",wf=/Edge\/(\d+)/.exec(as),W1=/MSIE \d/.exec(as),bf=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(as),Yt=!!(W1||bf||wf),es=W1?document.documentMode:bf?+bf[1]:wf?+wf[1]:0,An=!Yt&&/gecko\/(\d+)/i.test(as);An&&+(/Firefox\/(\d+)/.exec(as)||[0,0])[1];const kf=!Yt&&/Chrome\/(\d+)/.exec(as),Ot=!!kf,q1=kf?+kf[1]:0,$t=!Yt&&!!Vn&&/Apple Computer/.test(Vn.vendor),Wi=$t&&(/Mobile\/\w+/.test(as)||!!Vn&&Vn.maxTouchPoints>2),yn=Wi||(Vn?/Mac/.test(Vn.platform):!1),Lj=Vn?/Win/.test(Vn.platform):!1,dr=/Android \d/.test(as),Ol=!!rx&&"webkitFontSmoothing"in rx.documentElement.style,Dj=Ol?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function zj(n){let e=n.defaultView&&n.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.documentElement.clientWidth,top:0,bottom:n.documentElement.clientHeight}}function sr(n,e){return typeof n=="number"?n:n[e]}function $j(n){let e=n.getBoundingClientRect(),t=e.width/n.offsetWidth||1,r=e.height/n.offsetHeight||1;return{left:e.left,right:e.left+n.clientWidth*t,top:e.top,bottom:e.top+n.clientHeight*r}}function sx(n,e,t){let r=n.someProp("scrollThreshold")||0,s=n.someProp("scrollMargin")||5,i=n.dom.ownerDocument;for(let l=t||n.dom;l;l=vl(l)){if(l.nodeType!=1)continue;let c=l,u=c==i.body,h=u?zj(i):$j(c),f=0,g=0;if(e.top<h.top+sr(r,"top")?g=-(h.top-e.top+sr(s,"top")):e.bottom>h.bottom-sr(r,"bottom")&&(g=e.bottom-e.top>h.bottom-h.top?e.top+sr(s,"top")-h.top:e.bottom-h.bottom+sr(s,"bottom")),e.left<h.left+sr(r,"left")?f=-(h.left-e.left+sr(s,"left")):e.right>h.right-sr(r,"right")&&(f=e.right-h.right+sr(s,"right")),f||g)if(u)i.defaultView.scrollBy(f,g);else{let x=c.scrollLeft,w=c.scrollTop;g&&(c.scrollTop+=g),f&&(c.scrollLeft+=f);let b=c.scrollLeft-x,k=c.scrollTop-w;e={left:e.left-b,top:e.top-k,right:e.right-b,bottom:e.bottom-k}}if(u||/^(fixed|sticky)$/.test(getComputedStyle(l).position))break}}function Bj(n){let e=n.dom.getBoundingClientRect(),t=Math.max(0,e.top),r,s;for(let i=(e.left+e.right)/2,l=t+1;l<Math.min(innerHeight,e.bottom);l+=5){let c=n.root.elementFromPoint(i,l);if(!c||c==n.dom||!n.dom.contains(c))continue;let u=c.getBoundingClientRect();if(u.top>=t-20){r=c,s=u.top;break}}return{refDOM:r,refTop:s,stack:K1(n.dom)}}function K1(n){let e=[],t=n.ownerDocument;for(let r=n;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),n!=t);r=vl(r));return e}function Fj({refDOM:n,refTop:e,stack:t}){let r=n?n.getBoundingClientRect().top:0;J1(t,r==0?0:r-e)}function J1(n,e){for(let t=0;t<n.length;t++){let{dom:r,top:s,left:i}=n[t];r.scrollTop!=s+e&&(r.scrollTop=s+e),r.scrollLeft!=i&&(r.scrollLeft=i)}}let Ai=null;function Uj(n){if(n.setActive)return n.setActive();if(Ai)return n.focus(Ai);let e=K1(n);n.focus(Ai==null?{get preventScroll(){return Ai={preventScroll:!0},!0}}:void 0),Ai||(Ai=!1,J1(e,0))}function G1(n,e){let t,r=2e8,s,i=0,l=e.top,c=e.top,u,h;for(let f=n.firstChild,g=0;f;f=f.nextSibling,g++){let x;if(f.nodeType==1)x=f.getClientRects();else if(f.nodeType==3)x=ur(f).getClientRects();else continue;for(let w=0;w<x.length;w++){let b=x[w];if(b.top<=l&&b.bottom>=c){l=Math.max(b.bottom,l),c=Math.min(b.top,c);let k=b.left>e.left?b.left-e.left:b.right<e.left?e.left-b.right:0;if(k<r){t=f,r=k,s=k&&t.nodeType==3?{left:b.right<e.left?b.right:b.left,top:e.top}:e,f.nodeType==1&&k&&(i=g+(e.left>=(b.left+b.right)/2?1:0));continue}}else b.top>e.top&&!u&&b.left<=e.left&&b.right>=e.left&&(u=f,h={left:Math.max(b.left,Math.min(b.right,e.left)),top:b.top});!t&&(e.left>=b.right&&e.top>=b.top||e.left>=b.left&&e.top>=b.bottom)&&(i=g+1)}}return!t&&u&&(t=u,s=h,r=0),t&&t.nodeType==3?Hj(t,s):!t||r&&t.nodeType==1?{node:n,offset:i}:G1(t,s)}function Hj(n,e){let t=n.nodeValue.length,r=document.createRange();for(let s=0;s<t;s++){r.setEnd(n,s+1),r.setStart(n,s);let i=zr(r,1);if(i.top!=i.bottom&&Np(e,i))return{node:n,offset:s+(e.left>=(i.left+i.right)/2?1:0)}}return{node:n,offset:0}}function Np(n,e){return n.left>=e.left-1&&n.left<=e.right+1&&n.top>=e.top-1&&n.top<=e.bottom+1}function Vj(n,e){let t=n.parentNode;return t&&/^li$/i.test(t.nodeName)&&e.left<n.getBoundingClientRect().left?t:n}function Wj(n,e,t){let{node:r,offset:s}=G1(e,t),i=-1;if(r.nodeType==1&&!r.firstChild){let l=r.getBoundingClientRect();i=l.left!=l.right&&t.left>(l.left+l.right)/2?1:-1}return n.docView.posFromDOM(r,s,i)}function qj(n,e,t,r){let s=-1;for(let i=e,l=!1;i!=n.dom;){let c=n.docView.nearestDesc(i,!0),u;if(!c)return null;if(c.dom.nodeType==1&&(c.node.isBlock&&c.parent||!c.contentDOM)&&((u=c.dom.getBoundingClientRect()).width||u.height)&&(c.node.isBlock&&c.parent&&(!l&&u.left>r.left||u.top>r.top?s=c.posBefore:(!l&&u.right<r.left||u.bottom<r.top)&&(s=c.posAfter),l=!0),!c.contentDOM&&s<0&&!c.node.isText))return(c.node.isBlock?r.top<(u.top+u.bottom)/2:r.left<(u.left+u.right)/2)?c.posBefore:c.posAfter;i=c.dom.parentNode}return s>-1?s:n.docView.posFromDOM(e,t,-1)}function Q1(n,e,t){let r=n.childNodes.length;if(r&&t.top<t.bottom)for(let s=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-t.top)/(t.bottom-t.top))-2)),i=s;;){let l=n.childNodes[i];if(l.nodeType==1){let c=l.getClientRects();for(let u=0;u<c.length;u++){let h=c[u];if(Np(e,h))return Q1(l,e,h)}}if((i=(i+1)%r)==s)break}return n}function Kj(n,e){let t=n.dom.ownerDocument,r,s=0,i=Ij(t,e.left,e.top);i&&({node:r,offset:s}=i);let l=(n.root.elementFromPoint?n.root:t).elementFromPoint(e.left,e.top),c;if(!l||!n.dom.contains(l.nodeType!=1?l.parentNode:l)){let h=n.dom.getBoundingClientRect();if(!Np(e,h)||(l=Q1(n.dom,e,h),!l))return null}if($t)for(let h=l;r&&h;h=vl(h))h.draggable&&(r=void 0);if(l=Vj(l,e),r){if(An&&r.nodeType==1&&(s=Math.min(s,r.childNodes.length),s<r.childNodes.length)){let f=r.childNodes[s],g;f.nodeName=="IMG"&&(g=f.getBoundingClientRect()).right<=e.left&&g.bottom>e.top&&s++}let h;Ol&&s&&r.nodeType==1&&(h=r.childNodes[s-1]).nodeType==1&&h.contentEditable=="false"&&h.getBoundingClientRect().top>=e.top&&s--,r==n.dom&&s==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?c=n.state.doc.content.size:(s==0||r.nodeType!=1||r.childNodes[s-1].nodeName!="BR")&&(c=qj(n,r,s,e))}c==null&&(c=Wj(n,l,e));let u=n.docView.nearestDesc(l,!0);return{pos:c,inside:u?u.posAtStart-u.border:-1}}function ix(n){return n.top<n.bottom||n.left<n.right}function zr(n,e){let t=n.getClientRects();if(t.length){let r=t[e<0?0:t.length-1];if(ix(r))return r}return Array.prototype.find.call(t,ix)||n.getBoundingClientRect()}const Jj=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function Y1(n,e,t){let{node:r,offset:s,atom:i}=n.docView.domFromPos(e,t<0?-1:1),l=Ol||An;if(r.nodeType==3)if(l&&(Jj.test(r.nodeValue)||(t<0?!s:s==r.nodeValue.length))){let u=zr(ur(r,s,s),t);if(An&&s&&/\s/.test(r.nodeValue[s-1])&&s<r.nodeValue.length){let h=zr(ur(r,s-1,s-1),-1);if(h.top==u.top){let f=zr(ur(r,s,s+1),-1);if(f.top!=u.top)return Ko(f,f.left<h.left)}}return u}else{let u=s,h=s,f=t<0?1:-1;return t<0&&!s?(h++,f=-1):t>=0&&s==r.nodeValue.length?(u--,f=1):t<0?u--:h++,Ko(zr(ur(r,u,h),f),f<0)}if(!n.state.doc.resolve(e-(i||0)).parent.inlineContent){if(i==null&&s&&(t<0||s==xn(r))){let u=r.childNodes[s-1];if(u.nodeType==1)return Oh(u.getBoundingClientRect(),!1)}if(i==null&&s<xn(r)){let u=r.childNodes[s];if(u.nodeType==1)return Oh(u.getBoundingClientRect(),!0)}return Oh(r.getBoundingClientRect(),t>=0)}if(i==null&&s&&(t<0||s==xn(r))){let u=r.childNodes[s-1],h=u.nodeType==3?ur(u,xn(u)-(l?0:1)):u.nodeType==1&&(u.nodeName!="BR"||!u.nextSibling)?u:null;if(h)return Ko(zr(h,1),!1)}if(i==null&&s<xn(r)){let u=r.childNodes[s];for(;u.pmViewDesc&&u.pmViewDesc.ignoreForCoords;)u=u.nextSibling;let h=u?u.nodeType==3?ur(u,0,l?0:1):u.nodeType==1?u:null:null;if(h)return Ko(zr(h,-1),!0)}return Ko(zr(r.nodeType==3?ur(r):r,-t),t>=0)}function Ko(n,e){if(n.width==0)return n;let t=e?n.left:n.right;return{top:n.top,bottom:n.bottom,left:t,right:t}}function Oh(n,e){if(n.height==0)return n;let t=e?n.top:n.bottom;return{top:t,bottom:t,left:n.left,right:n.right}}function X1(n,e,t){let r=n.state,s=n.root.activeElement;r!=e&&n.updateState(e),s!=n.dom&&n.focus();try{return t()}finally{r!=e&&n.updateState(r),s!=n.dom&&s&&s.focus()}}function Gj(n,e,t){let r=e.selection,s=t=="up"?r.$from:r.$to;return X1(n,e,()=>{let{node:i}=n.docView.domFromPos(s.pos,t=="up"?-1:1);for(;;){let c=n.docView.nearestDesc(i,!0);if(!c)break;if(c.node.isBlock){i=c.contentDOM||c.dom;break}i=c.dom.parentNode}let l=Y1(n,s.pos,1);for(let c=i.firstChild;c;c=c.nextSibling){let u;if(c.nodeType==1)u=c.getClientRects();else if(c.nodeType==3)u=ur(c,0,c.nodeValue.length).getClientRects();else continue;for(let h=0;h<u.length;h++){let f=u[h];if(f.bottom>f.top+1&&(t=="up"?l.top-f.top>(f.bottom-l.top)*2:f.bottom-l.bottom>(l.bottom-f.top)*2))return!1}}return!0})}const Qj=/[\u0590-\u08ac]/;function Yj(n,e,t){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let s=r.parentOffset,i=!s,l=s==r.parent.content.size,c=n.domSelection();return c?!Qj.test(r.parent.textContent)||!c.modify?t=="left"||t=="backward"?i:l:X1(n,e,()=>{let{focusNode:u,focusOffset:h,anchorNode:f,anchorOffset:g}=n.domSelectionRange(),x=c.caretBidiLevel;c.modify("move",t,"character");let w=r.depth?n.docView.domAfterPos(r.before()):n.dom,{focusNode:b,focusOffset:k}=n.domSelectionRange(),C=b&&!w.contains(b.nodeType==1?b:b.parentNode)||u==b&&h==k;try{c.collapse(f,g),u&&(u!=f||h!=g)&&c.extend&&c.extend(u,h)}catch{}return x!=null&&(c.caretBidiLevel=x),C}):r.pos==r.start()||r.pos==r.end()}let ox=null,lx=null,ax=!1;function Xj(n,e,t){return ox==e&&lx==t?ax:(ox=e,lx=t,ax=t=="up"||t=="down"?Gj(n,e,t):Yj(n,e,t))}const vn=0,cx=1,Os=2,Wn=3;class Rl{constructor(e,t,r,s){this.parent=e,this.children=t,this.dom=r,this.contentDOM=s,this.dirty=vn,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,r=this.posAtStart;;t++){let s=this.children[t];if(s==e)return r;r+=s.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let i,l;if(e==this.contentDOM)i=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;i=e.previousSibling}for(;i&&!((l=i.pmViewDesc)&&l.parent==this);)i=i.previousSibling;return i?this.posBeforeChild(l)+l.size:this.posAtStart}else{let i,l;if(e==this.contentDOM)i=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;i=e.nextSibling}for(;i&&!((l=i.pmViewDesc)&&l.parent==this);)i=i.nextSibling;return i?this.posBeforeChild(l):this.posAtEnd}let s;if(e==this.dom&&this.contentDOM)s=t>St(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))s=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(t==0)for(let i=e;;i=i.parentNode){if(i==this.dom){s=!1;break}if(i.previousSibling)break}if(s==null&&t==e.childNodes.length)for(let i=e;;i=i.parentNode){if(i==this.dom){s=!0;break}if(i.nextSibling)break}}return s??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let r=!0,s=e;s;s=s.parentNode){let i=this.getDesc(s),l;if(i&&(!t||i.node))if(r&&(l=i.nodeDOM)&&!(l.nodeType==1?l.contains(e.nodeType==1?e:e.parentNode):l==e))r=!1;else return i}}getDesc(e){let t=e.pmViewDesc;for(let r=t;r;r=r.parent)if(r==this)return t}posFromDOM(e,t,r){for(let s=e;s;s=s.parentNode){let i=this.getDesc(s);if(i)return i.localPosFromDOM(e,t,r)}return-1}descAt(e){for(let t=0,r=0;t<this.children.length;t++){let s=this.children[t],i=r+s.size;if(r==e&&i!=r){for(;!s.border&&s.children.length;)for(let l=0;l<s.children.length;l++){let c=s.children[l];if(c.size){s=c;break}}return s}if(e<i)return s.descAt(e-r-s.border);r=i}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,s=0;for(let i=0;r<this.children.length;r++){let l=this.children[r],c=i+l.size;if(c>e||l instanceof ew){s=e-i;break}i=c}if(s)return this.children[r].domFromPos(s-this.children[r].border,t);for(let i;r&&!(i=this.children[r-1]).size&&i instanceof Z1&&i.side>=0;r--);if(t<=0){let i,l=!0;for(;i=r?this.children[r-1]:null,!(!i||i.dom.parentNode==this.contentDOM);r--,l=!1);return i&&t&&l&&!i.border&&!i.domAtom?i.domFromPos(i.size,t):{node:this.contentDOM,offset:i?St(i.dom)+1:0}}else{let i,l=!0;for(;i=r<this.children.length?this.children[r]:null,!(!i||i.dom.parentNode==this.contentDOM);r++,l=!1);return i&&l&&!i.border&&!i.domAtom?i.domFromPos(0,t):{node:this.contentDOM,offset:i?St(i.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let s=-1,i=-1;for(let l=r,c=0;;c++){let u=this.children[c],h=l+u.size;if(s==-1&&e<=h){let f=l+u.border;if(e>=f&&t<=h-u.border&&u.node&&u.contentDOM&&this.contentDOM.contains(u.contentDOM))return u.parseRange(e,t,f);e=l;for(let g=c;g>0;g--){let x=this.children[g-1];if(x.size&&x.dom.parentNode==this.contentDOM&&!x.emptyChildAt(1)){s=St(x.dom)+1;break}e-=x.size}s==-1&&(s=0)}if(s>-1&&(h>t||c==this.children.length-1)){t=h;for(let f=c+1;f<this.children.length;f++){let g=this.children[f];if(g.size&&g.dom.parentNode==this.contentDOM&&!g.emptyChildAt(-1)){i=St(g.dom);break}t+=g.size}i==-1&&(i=this.contentDOM.childNodes.length);break}l=h}return{node:this.contentDOM,from:e,to:t,fromOffset:s,toOffset:i}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return t.size==0||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:r}=this.domFromPos(e,0);if(t.nodeType!=1||r==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[r]}setSelection(e,t,r,s=!1){let i=Math.min(e,t),l=Math.max(e,t);for(let w=0,b=0;w<this.children.length;w++){let k=this.children[w],C=b+k.size;if(i>b&&l<C)return k.setSelection(e-b-k.border,t-b-k.border,r,s);b=C}let c=this.domFromPos(e,e?-1:1),u=t==e?c:this.domFromPos(t,t?-1:1),h=r.root.getSelection(),f=r.domSelectionRange(),g=!1;if((An||$t)&&e==t){let{node:w,offset:b}=c;if(w.nodeType==3){if(g=!!(b&&w.nodeValue[b-1]==`
`),g&&b==w.nodeValue.length)for(let k=w,C;k;k=k.parentNode){if(C=k.nextSibling){C.nodeName=="BR"&&(c=u={node:C.parentNode,offset:St(C)+1});break}let N=k.pmViewDesc;if(N&&N.node&&N.node.isBlock)break}}else{let k=w.childNodes[b-1];g=k&&(k.nodeName=="BR"||k.contentEditable=="false")}}if(An&&f.focusNode&&f.focusNode!=u.node&&f.focusNode.nodeType==1){let w=f.focusNode.childNodes[f.focusOffset];w&&w.contentEditable=="false"&&(s=!0)}if(!(s||g&&$t)&&Us(c.node,c.offset,f.anchorNode,f.anchorOffset)&&Us(u.node,u.offset,f.focusNode,f.focusOffset))return;let x=!1;if((h.extend||e==t)&&!g){h.collapse(c.node,c.offset);try{e!=t&&h.extend(u.node,u.offset),x=!0}catch{}}if(!x){if(e>t){let b=c;c=u,u=b}let w=document.createRange();w.setEnd(u.node,u.offset),w.setStart(c.node,c.offset),h.removeAllRanges(),h.addRange(w)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let r=0,s=0;s<this.children.length;s++){let i=this.children[s],l=r+i.size;if(r==l?e<=l&&t>=r:e<l&&t>r){let c=r+i.border,u=l-i.border;if(e>=c&&t<=u){this.dirty=e==r||t==l?Os:cx,e==c&&t==u&&(i.contentLost||i.dom.parentNode!=this.contentDOM)?i.dirty=Wn:i.markDirty(e-c,t-c);return}else i.dirty=i.dom==i.contentDOM&&i.dom.parentNode==this.contentDOM&&!i.children.length?Os:Wn}r=l}this.dirty=Os}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let r=e==1?Os:cx;t.dirty<r&&(t.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(e){return!1}}class Z1 extends Rl{constructor(e,t,r,s){let i,l=t.type.toDOM;if(typeof l=="function"&&(l=l(r,()=>{if(!i)return s;if(i.parent)return i.parent.posBeforeChild(i)})),!t.type.spec.raw){if(l.nodeType!=1){let c=document.createElement("span");c.appendChild(l),l=c}l.contentEditable="false",l.classList.add("ProseMirror-widget")}super(e,[],l,null),this.widget=t,this.widget=t,i=this}matchesWidget(e){return this.dirty==vn&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return t?t(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class Zj extends Rl{constructor(e,t,r,s){super(e,[],t,null),this.textDOM=r,this.text=s}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Hs extends Rl{constructor(e,t,r,s,i){super(e,[],r,s),this.mark=t,this.spec=i}static create(e,t,r,s){let i=s.nodeViews[t.type.name],l=i&&i(t,s,r);return(!l||!l.dom)&&(l=Gs.renderSpec(document,t.type.spec.toDOM(t,r),null,t.attrs)),new Hs(e,t,l.dom,l.contentDOM||l.dom,l)}parseRule(){return this.dirty&Wn||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Wn&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),this.dirty!=vn){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=vn}}slice(e,t,r){let s=Hs.create(this.parent,this.mark,!0,r),i=this.children,l=this.size;t<l&&(i=Cf(i,t,l,r)),e>0&&(i=Cf(i,0,e,r));for(let c=0;c<i.length;c++)i[c].parent=s;return s.children=i,s}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class ts extends Rl{constructor(e,t,r,s,i,l,c,u,h){super(e,[],i,l),this.node=t,this.outerDeco=r,this.innerDeco=s,this.nodeDOM=c}static create(e,t,r,s,i,l){let c=i.nodeViews[t.type.name],u,h=c&&c(t,i,()=>{if(!u)return l;if(u.parent)return u.parent.posBeforeChild(u)},r,s),f=h&&h.dom,g=h&&h.contentDOM;if(t.isText){if(!f)f=document.createTextNode(t.text);else if(f.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else f||({dom:f,contentDOM:g}=Gs.renderSpec(document,t.type.spec.toDOM(t),null,t.attrs));!g&&!t.isText&&f.nodeName!="BR"&&(f.hasAttribute("contenteditable")||(f.contentEditable="false"),t.type.spec.draggable&&(f.draggable=!0));let x=f;return f=rw(f,r,t),h?u=new eT(e,t,r,s,f,g||null,x,h,i,l+1):t.isText?new gu(e,t,r,s,f,x,i):new ts(e,t,r,s,f,g||null,x,i,l+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let t=this.children.length-1;t>=0;t--){let r=this.children[t];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>z.empty)}return e}matchesNode(e,t,r){return this.dirty==vn&&e.eq(this.node)&&jc(t,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let r=this.node.inlineContent,s=t,i=e.composing?this.localCompositionInfo(e,t):null,l=i&&i.pos>-1?i:null,c=i&&i.pos<0,u=new nT(this,l&&l.node,e);iT(this.node,this.innerDeco,(h,f,g)=>{h.spec.marks?u.syncToMarks(h.spec.marks,r,e):h.type.side>=0&&!g&&u.syncToMarks(f==this.node.childCount?Oe.none:this.node.child(f).marks,r,e),u.placeWidget(h,e,s)},(h,f,g,x)=>{u.syncToMarks(h.marks,r,e);let w;u.findNodeMatch(h,f,g,x)||c&&e.state.selection.from>s&&e.state.selection.to<s+h.nodeSize&&(w=u.findIndexWithChild(i.node))>-1&&u.updateNodeAt(h,f,g,w,e)||u.updateNextNode(h,f,g,e,x,s)||u.addNode(h,f,g,e,s),s+=h.nodeSize}),u.syncToMarks([],r,e),this.node.isTextblock&&u.addTextblockHacks(),u.destroyRest(),(u.changed||this.dirty==Os)&&(l&&this.protectLocalComposition(e,l),tw(this.contentDOM,this.children,e),Wi&&oT(this.dom))}localCompositionInfo(e,t){let{from:r,to:s}=e.state.selection;if(!(e.state.selection instanceof ce)||r<t||s>t+this.node.content.size)return null;let i=e.input.compositionNode;if(!i||!this.dom.contains(i.parentNode))return null;if(this.node.inlineContent){let l=i.nodeValue,c=lT(this.node.content,l,r-t,s-t);return c<0?null:{node:i,pos:c,text:l}}else return{node:i,pos:-1,text:""}}protectLocalComposition(e,{node:t,pos:r,text:s}){if(this.getDesc(t))return;let i=t;for(;i.parentNode!=this.contentDOM;i=i.parentNode){for(;i.previousSibling;)i.parentNode.removeChild(i.previousSibling);for(;i.nextSibling;)i.parentNode.removeChild(i.nextSibling);i.pmViewDesc&&(i.pmViewDesc=void 0)}let l=new Zj(this,i,t,s);e.input.compositionNodes.push(l),this.children=Cf(this.children,r,r+s.length,e,l)}update(e,t,r,s){return this.dirty==Wn||!e.sameMarkup(this.node)?!1:(this.updateInner(e,t,r,s),!0)}updateInner(e,t,r,s){this.updateOuterDeco(t),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(s,this.posAtStart),this.dirty=vn}updateOuterDeco(e){if(jc(e,this.outerDeco))return;let t=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=nw(this.dom,this.nodeDOM,Sf(this.outerDeco,this.node,t),Sf(e,this.node,t)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function ux(n,e,t,r,s){rw(r,e,n);let i=new ts(void 0,n,e,t,r,r,r,s,0);return i.contentDOM&&i.updateChildren(s,0),i}class gu extends ts{constructor(e,t,r,s,i,l,c){super(e,t,r,s,i,null,l,c,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,r,s){return this.dirty==Wn||this.dirty!=vn&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(t),(this.dirty!=vn||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,s.trackWrites==this.nodeDOM&&(s.trackWrites=null)),this.node=e,this.dirty=vn,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,r){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,t,r){let s=this.node.cut(e,t),i=document.createTextNode(s.text);return new gu(this.parent,s,this.outerDeco,this.innerDeco,i,i,r)}markDirty(e,t){super.markDirty(e,t),this.dom!=this.nodeDOM&&(e==0||t==this.nodeDOM.nodeValue.length)&&(this.dirty=Wn)}get domAtom(){return!1}isText(e){return this.node.text==e}}class ew extends Rl{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==vn&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class eT extends ts{constructor(e,t,r,s,i,l,c,u,h,f){super(e,t,r,s,i,l,c,h,f),this.spec=u}update(e,t,r,s){if(this.dirty==Wn)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let i=this.spec.update(e,t,r);return i&&this.updateInner(e,t,r,s),i}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,t,r,s)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,r,s){this.spec.setSelection?this.spec.setSelection(e,t,r.root):super.setSelection(e,t,r,s)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function tw(n,e,t){let r=n.firstChild,s=!1;for(let i=0;i<e.length;i++){let l=e[i],c=l.dom;if(c.parentNode==n){for(;c!=r;)r=dx(r),s=!0;r=r.nextSibling}else s=!0,n.insertBefore(c,r);if(l instanceof Hs){let u=r?r.previousSibling:n.lastChild;tw(l.contentDOM,l.children,t),r=u?u.nextSibling:n.firstChild}}for(;r;)r=dx(r),s=!0;s&&t.trackWrites==n&&(t.trackWrites=null)}const rl=function(n){n&&(this.nodeName=n)};rl.prototype=Object.create(null);const Rs=[new rl];function Sf(n,e,t){if(n.length==0)return Rs;let r=t?Rs[0]:new rl,s=[r];for(let i=0;i<n.length;i++){let l=n[i].type.attrs;if(l){l.nodeName&&s.push(r=new rl(l.nodeName));for(let c in l){let u=l[c];u!=null&&(t&&s.length==1&&s.push(r=new rl(e.isInline?"span":"div")),c=="class"?r.class=(r.class?r.class+" ":"")+u:c=="style"?r.style=(r.style?r.style+";":"")+u:c!="nodeName"&&(r[c]=u))}}}return s}function nw(n,e,t,r){if(t==Rs&&r==Rs)return e;let s=e;for(let i=0;i<r.length;i++){let l=r[i],c=t[i];if(i){let u;c&&c.nodeName==l.nodeName&&s!=n&&(u=s.parentNode)&&u.nodeName.toLowerCase()==l.nodeName||(u=document.createElement(l.nodeName),u.pmIsDeco=!0,u.appendChild(s),c=Rs[0]),s=u}tT(s,c||Rs[0],l)}return s}function tT(n,e,t){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in t)&&n.removeAttribute(r);for(let r in t)r!="class"&&r!="style"&&r!="nodeName"&&t[r]!=e[r]&&n.setAttribute(r,t[r]);if(e.class!=t.class){let r=e.class?e.class.split(" ").filter(Boolean):[],s=t.class?t.class.split(" ").filter(Boolean):[];for(let i=0;i<r.length;i++)s.indexOf(r[i])==-1&&n.classList.remove(r[i]);for(let i=0;i<s.length;i++)r.indexOf(s[i])==-1&&n.classList.add(s[i]);n.classList.length==0&&n.removeAttribute("class")}if(e.style!=t.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,s;for(;s=r.exec(e.style);)n.style.removeProperty(s[1])}t.style&&(n.style.cssText+=t.style)}}function rw(n,e,t){return nw(n,n,Rs,Sf(e,t,n.nodeType!=1))}function jc(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].type.eq(e[t].type))return!1;return!0}function dx(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class nT{constructor(e,t,r){this.lock=t,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=rT(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let r=e;r<t;r++)this.top.children[r].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,r){let s=0,i=this.stack.length>>1,l=Math.min(i,e.length);for(;s<l&&(s==i-1?this.top:this.stack[s+1<<1]).matchesMark(e[s])&&e[s].type.spec.spanning!==!1;)s++;for(;s<i;)this.destroyRest(),this.top.dirty=vn,this.index=this.stack.pop(),this.top=this.stack.pop(),i--;for(;i<e.length;){this.stack.push(this.top,this.index+1);let c=-1;for(let u=this.index;u<Math.min(this.index+3,this.top.children.length);u++){let h=this.top.children[u];if(h.matchesMark(e[i])&&!this.isLocked(h.dom)){c=u;break}}if(c>-1)c>this.index&&(this.changed=!0,this.destroyBetween(this.index,c)),this.top=this.top.children[this.index];else{let u=Hs.create(this.top,e[i],t,r);this.top.children.splice(this.index,0,u),this.top=u,this.changed=!0}this.index=0,i++}}findNodeMatch(e,t,r,s){let i=-1,l;if(s>=this.preMatch.index&&(l=this.preMatch.matches[s-this.preMatch.index]).parent==this.top&&l.matchesNode(e,t,r))i=this.top.children.indexOf(l,this.index);else for(let c=this.index,u=Math.min(this.top.children.length,c+5);c<u;c++){let h=this.top.children[c];if(h.matchesNode(e,t,r)&&!this.preMatch.matched.has(h)){i=c;break}}return i<0?!1:(this.destroyBetween(this.index,i),this.index++,!0)}updateNodeAt(e,t,r,s,i){let l=this.top.children[s];return l.dirty==Wn&&l.dom==l.contentDOM&&(l.dirty=Os),l.update(e,t,r,i)?(this.destroyBetween(this.index,s),this.index++,!0):!1}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let s=this.index;s<this.top.children.length;s++)if(this.top.children[s]==r)return s}return-1}e=t}}updateNextNode(e,t,r,s,i,l){for(let c=this.index;c<this.top.children.length;c++){let u=this.top.children[c];if(u instanceof ts){let h=this.preMatch.matched.get(u);if(h!=null&&h!=i)return!1;let f=u.dom,g,x=this.isLocked(f)&&!(e.isText&&u.node&&u.node.isText&&u.nodeDOM.nodeValue==e.text&&u.dirty!=Wn&&jc(t,u.outerDeco));if(!x&&u.update(e,t,r,s))return this.destroyBetween(this.index,c),u.dom!=f&&(this.changed=!0),this.index++,!0;if(!x&&(g=this.recreateWrapper(u,e,t,r,s,l)))return this.destroyBetween(this.index,c),this.top.children[this.index]=g,g.contentDOM&&(g.dirty=Os,g.updateChildren(s,l+1),g.dirty=vn),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,t,r,s,i,l){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content)||!jc(r,e.outerDeco)||!s.eq(e.innerDeco))return null;let c=ts.create(this.top,t,r,s,i,l);if(c.contentDOM){c.children=e.children,e.children=[];for(let u of c.children)u.parent=c}return e.destroy(),c}addNode(e,t,r,s,i){let l=ts.create(this.top,e,t,r,s,i);l.contentDOM&&l.updateChildren(s,i+1),this.top.children.splice(this.index++,0,l),this.changed=!0}placeWidget(e,t,r){let s=this.index<this.top.children.length?this.top.children[this.index]:null;if(s&&s.matchesWidget(e)&&(e==s.widget||!s.widget.type.toDOM.parentNode))this.index++;else{let i=new Z1(this.top,e,t,r);this.top.children.splice(this.index++,0,i),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof Hs;)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof gu)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&(($t||Ot)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let s=new ew(this.top,[],r,null);t!=this.top?t.children.push(s):t.children.splice(this.index++,0,s),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function rT(n,e){let t=e,r=t.children.length,s=n.childCount,i=new Map,l=[];e:for(;s>0;){let c;for(;;)if(r){let h=t.children[r-1];if(h instanceof Hs)t=h,r=h.children.length;else{c=h,r--;break}}else{if(t==e)break e;r=t.parent.children.indexOf(t),t=t.parent}let u=c.node;if(u){if(u!=n.child(s-1))break;--s,i.set(c,s),l.push(c)}}return{index:s,matched:i,matches:l.reverse()}}function sT(n,e){return n.type.side-e.type.side}function iT(n,e,t,r){let s=e.locals(n),i=0;if(s.length==0){for(let h=0;h<n.childCount;h++){let f=n.child(h);r(f,s,e.forChild(i,f),h),i+=f.nodeSize}return}let l=0,c=[],u=null;for(let h=0;;){let f,g;for(;l<s.length&&s[l].to==i;){let C=s[l++];C.widget&&(f?(g||(g=[f])).push(C):f=C)}if(f)if(g){g.sort(sT);for(let C=0;C<g.length;C++)t(g[C],h,!!u)}else t(f,h,!!u);let x,w;if(u)w=-1,x=u,u=null;else if(h<n.childCount)w=h,x=n.child(h++);else break;for(let C=0;C<c.length;C++)c[C].to<=i&&c.splice(C--,1);for(;l<s.length&&s[l].from<=i&&s[l].to>i;)c.push(s[l++]);let b=i+x.nodeSize;if(x.isText){let C=b;l<s.length&&s[l].from<C&&(C=s[l].from);for(let N=0;N<c.length;N++)c[N].to<C&&(C=c[N].to);C<b&&(u=x.cut(C-i),x=x.cut(0,C-i),b=C,w=-1)}else for(;l<s.length&&s[l].to<b;)l++;let k=x.isInline&&!x.isLeaf?c.filter(C=>!C.inline):c.slice();r(x,k,e.forChild(i,x),w),i=b}}function oT(n){if(n.nodeName=="UL"||n.nodeName=="OL"){let e=n.style.cssText;n.style.cssText=e+"; list-style: square !important",window.getComputedStyle(n).listStyle,n.style.cssText=e}}function lT(n,e,t,r){for(let s=0,i=0;s<n.childCount&&i<=r;){let l=n.child(s++),c=i;if(i+=l.nodeSize,!l.isText)continue;let u=l.text;for(;s<n.childCount;){let h=n.child(s++);if(i+=h.nodeSize,!h.isText)break;u+=h.text}if(i>=t){if(i>=r&&u.slice(r-e.length-c,r-c)==e)return r-e.length;let h=c<r?u.lastIndexOf(e,r-c-1):-1;if(h>=0&&h+e.length+c>=t)return c+h;if(t==r&&u.length>=r+e.length-c&&u.slice(r-c,r-c+e.length)==e)return r}}return-1}function Cf(n,e,t,r,s){let i=[];for(let l=0,c=0;l<n.length;l++){let u=n[l],h=c,f=c+=u.size;h>=t||f<=e?i.push(u):(h<e&&i.push(u.slice(0,e-h,r)),s&&(i.push(s),s=void 0),f>t&&i.push(u.slice(t-h,u.size,r)))}return i}function Ep(n,e=null){let t=n.domSelectionRange(),r=n.state.doc;if(!t.focusNode)return null;let s=n.docView.nearestDesc(t.focusNode),i=s&&s.size==0,l=n.docView.posFromDOM(t.focusNode,t.focusOffset,1);if(l<0)return null;let c=r.resolve(l),u,h;if(mu(t)){for(u=l;s&&!s.node;)s=s.parent;let g=s.node;if(s&&g.isAtom&&ae.isSelectable(g)&&s.parent&&!(g.isInline&&Rj(t.focusNode,t.focusOffset,s.dom))){let x=s.posBefore;h=new ae(l==x?c:r.resolve(x))}}else{if(t instanceof n.dom.ownerDocument.defaultView.Selection&&t.rangeCount>1){let g=l,x=l;for(let w=0;w<t.rangeCount;w++){let b=t.getRangeAt(w);g=Math.min(g,n.docView.posFromDOM(b.startContainer,b.startOffset,1)),x=Math.max(x,n.docView.posFromDOM(b.endContainer,b.endOffset,-1))}if(g<0)return null;[u,l]=x==n.state.selection.anchor?[x,g]:[g,x],c=r.resolve(l)}else u=n.docView.posFromDOM(t.anchorNode,t.anchorOffset,1);if(u<0)return null}let f=r.resolve(u);if(!h){let g=e=="pointer"||n.state.selection.head<c.pos&&!i?1:-1;h=jp(n,f,c,g)}return h}function sw(n){return n.editable?n.hasFocus():ow(n)&&document.activeElement&&document.activeElement.contains(n.dom)}function fr(n,e=!1){let t=n.state.selection;if(iw(n,t),!!sw(n)){if(!e&&n.input.mouseDown&&n.input.mouseDown.allowDefault&&Ot){let r=n.domSelectionRange(),s=n.domObserver.currentSelection;if(r.anchorNode&&s.anchorNode&&Us(r.anchorNode,r.anchorOffset,s.anchorNode,s.anchorOffset)){n.input.mouseDown.delayedSelectionSync=!0,n.domObserver.setCurSelection();return}}if(n.domObserver.disconnectSelection(),n.cursorWrapper)cT(n);else{let{anchor:r,head:s}=t,i,l;hx&&!(t instanceof ce)&&(t.$from.parent.inlineContent||(i=fx(n,t.from)),!t.empty&&!t.$from.parent.inlineContent&&(l=fx(n,t.to))),n.docView.setSelection(r,s,n,e),hx&&(i&&px(i),l&&px(l)),t.visible?n.dom.classList.remove("ProseMirror-hideselection"):(n.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&aT(n))}n.domObserver.setCurSelection(),n.domObserver.connectSelection()}}const hx=$t||Ot&&q1<63;function fx(n,e){let{node:t,offset:r}=n.docView.domFromPos(e,0),s=r<t.childNodes.length?t.childNodes[r]:null,i=r?t.childNodes[r-1]:null;if($t&&s&&s.contentEditable=="false")return Rh(s);if((!s||s.contentEditable=="false")&&(!i||i.contentEditable=="false")){if(s)return Rh(s);if(i)return Rh(i)}}function Rh(n){return n.contentEditable="true",$t&&n.draggable&&(n.draggable=!1,n.wasDraggable=!0),n}function px(n){n.contentEditable="false",n.wasDraggable&&(n.draggable=!0,n.wasDraggable=null)}function aT(n){let e=n.dom.ownerDocument;e.removeEventListener("selectionchange",n.input.hideSelectionGuard);let t=n.domSelectionRange(),r=t.anchorNode,s=t.anchorOffset;e.addEventListener("selectionchange",n.input.hideSelectionGuard=()=>{(t.anchorNode!=r||t.anchorOffset!=s)&&(e.removeEventListener("selectionchange",n.input.hideSelectionGuard),setTimeout(()=>{(!sw(n)||n.state.selection.visible)&&n.dom.classList.remove("ProseMirror-hideselection")},20))})}function cT(n){let e=n.domSelection(),t=document.createRange();if(!e)return;let r=n.cursorWrapper.dom,s=r.nodeName=="IMG";s?t.setStart(r.parentNode,St(r)+1):t.setStart(r,0),t.collapse(!0),e.removeAllRanges(),e.addRange(t),!s&&!n.state.selection.visible&&Yt&&es<=11&&(r.disabled=!0,r.disabled=!1)}function iw(n,e){if(e instanceof ae){let t=n.docView.descAt(e.from);t!=n.lastSelectedViewDesc&&(mx(n),t&&t.selectNode(),n.lastSelectedViewDesc=t)}else mx(n)}function mx(n){n.lastSelectedViewDesc&&(n.lastSelectedViewDesc.parent&&n.lastSelectedViewDesc.deselectNode(),n.lastSelectedViewDesc=void 0)}function jp(n,e,t,r){return n.someProp("createSelectionBetween",s=>s(n,e,t))||ce.between(e,t,r)}function gx(n){return n.editable&&!n.hasFocus()?!1:ow(n)}function ow(n){let e=n.domSelectionRange();if(!e.anchorNode)return!1;try{return n.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(n.editable||n.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function uT(n){let e=n.docView.domFromPos(n.state.selection.anchor,0),t=n.domSelectionRange();return Us(e.node,e.offset,t.anchorNode,t.anchorOffset)}function Nf(n,e){let{$anchor:t,$head:r}=n.selection,s=e>0?t.max(r):t.min(r),i=s.parent.inlineContent?s.depth?n.doc.resolve(e>0?s.after():s.before()):null:s;return i&&he.findFrom(i,e)}function Br(n,e){return n.dispatch(n.state.tr.setSelection(e).scrollIntoView()),!0}function yx(n,e,t){let r=n.state.selection;if(r instanceof ce)if(t.indexOf("s")>-1){let{$head:s}=r,i=s.textOffset?null:e<0?s.nodeBefore:s.nodeAfter;if(!i||i.isText||!i.isLeaf)return!1;let l=n.state.doc.resolve(s.pos+i.nodeSize*(e<0?-1:1));return Br(n,new ce(r.$anchor,l))}else if(r.empty){if(n.endOfTextblock(e>0?"forward":"backward")){let s=Nf(n.state,e);return s&&s instanceof ae?Br(n,s):!1}else if(!(yn&&t.indexOf("m")>-1)){let s=r.$head,i=s.textOffset?null:e<0?s.nodeBefore:s.nodeAfter,l;if(!i||i.isText)return!1;let c=e<0?s.pos-i.nodeSize:s.pos;return i.isAtom||(l=n.docView.descAt(c))&&!l.contentDOM?ae.isSelectable(i)?Br(n,new ae(e<0?n.state.doc.resolve(s.pos-i.nodeSize):s)):Ol?Br(n,new ce(n.state.doc.resolve(e<0?c:c+i.nodeSize))):!1:!1}}else return!1;else{if(r instanceof ae&&r.node.isInline)return Br(n,new ce(e>0?r.$to:r.$from));{let s=Nf(n.state,e);return s?Br(n,s):!1}}}function Tc(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function sl(n,e){let t=n.pmViewDesc;return t&&t.size==0&&(e<0||n.nextSibling||n.nodeName!="BR")}function Mi(n,e){return e<0?dT(n):hT(n)}function dT(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let s,i,l=!1;for(An&&t.nodeType==1&&r<Tc(t)&&sl(t.childNodes[r],-1)&&(l=!0);;)if(r>0){if(t.nodeType!=1)break;{let c=t.childNodes[r-1];if(sl(c,-1))s=t,i=--r;else if(c.nodeType==3)t=c,r=t.nodeValue.length;else break}}else{if(lw(t))break;{let c=t.previousSibling;for(;c&&sl(c,-1);)s=t.parentNode,i=St(c),c=c.previousSibling;if(c)t=c,r=Tc(t);else{if(t=t.parentNode,t==n.dom)break;r=0}}}l?Ef(n,t,r):s&&Ef(n,s,i)}function hT(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let s=Tc(t),i,l;for(;;)if(r<s){if(t.nodeType!=1)break;let c=t.childNodes[r];if(sl(c,1))i=t,l=++r;else break}else{if(lw(t))break;{let c=t.nextSibling;for(;c&&sl(c,1);)i=c.parentNode,l=St(c)+1,c=c.nextSibling;if(c)t=c,r=0,s=Tc(t);else{if(t=t.parentNode,t==n.dom)break;r=s=0}}}i&&Ef(n,i,l)}function lw(n){let e=n.pmViewDesc;return e&&e.node&&e.node.isBlock}function fT(n,e){for(;n&&e==n.childNodes.length&&!Ml(n);)e=St(n)+1,n=n.parentNode;for(;n&&e<n.childNodes.length;){let t=n.childNodes[e];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=0}}function pT(n,e){for(;n&&!e&&!Ml(n);)e=St(n),n=n.parentNode;for(;n&&e;){let t=n.childNodes[e-1];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=n.childNodes.length}}function Ef(n,e,t){if(e.nodeType!=3){let i,l;(l=fT(e,t))?(e=l,t=0):(i=pT(e,t))&&(e=i,t=i.nodeValue.length)}let r=n.domSelection();if(!r)return;if(mu(r)){let i=document.createRange();i.setEnd(e,t),i.setStart(e,t),r.removeAllRanges(),r.addRange(i)}else r.extend&&r.extend(e,t);n.domObserver.setCurSelection();let{state:s}=n;setTimeout(()=>{n.state==s&&fr(n)},50)}function xx(n,e){let t=n.state.doc.resolve(e);if(!(Ot||Lj)&&t.parent.inlineContent){let s=n.coordsAtPos(e);if(e>t.start()){let i=n.coordsAtPos(e-1),l=(i.top+i.bottom)/2;if(l>s.top&&l<s.bottom&&Math.abs(i.left-s.left)>1)return i.left<s.left?"ltr":"rtl"}if(e<t.end()){let i=n.coordsAtPos(e+1),l=(i.top+i.bottom)/2;if(l>s.top&&l<s.bottom&&Math.abs(i.left-s.left)>1)return i.left>s.left?"ltr":"rtl"}}return getComputedStyle(n.dom).direction=="rtl"?"rtl":"ltr"}function vx(n,e,t){let r=n.state.selection;if(r instanceof ce&&!r.empty||t.indexOf("s")>-1||yn&&t.indexOf("m")>-1)return!1;let{$from:s,$to:i}=r;if(!s.parent.inlineContent||n.endOfTextblock(e<0?"up":"down")){let l=Nf(n.state,e);if(l&&l instanceof ae)return Br(n,l)}if(!s.parent.inlineContent){let l=e<0?s:i,c=r instanceof on?he.near(l,e):he.findFrom(l,e);return c?Br(n,c):!1}return!1}function wx(n,e){if(!(n.state.selection instanceof ce))return!0;let{$head:t,$anchor:r,empty:s}=n.state.selection;if(!t.sameParent(r))return!0;if(!s)return!1;if(n.endOfTextblock(e>0?"forward":"backward"))return!0;let i=!t.textOffset&&(e<0?t.nodeBefore:t.nodeAfter);if(i&&!i.isText){let l=n.state.tr;return e<0?l.delete(t.pos-i.nodeSize,t.pos):l.delete(t.pos,t.pos+i.nodeSize),n.dispatch(l),!0}return!1}function bx(n,e,t){n.domObserver.stop(),e.contentEditable=t,n.domObserver.start()}function mT(n){if(!$t||n.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:t}=n.domSelectionRange();if(e&&e.nodeType==1&&t==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;bx(n,r,"true"),setTimeout(()=>bx(n,r,"false"),20)}return!1}function gT(n){let e="";return n.ctrlKey&&(e+="c"),n.metaKey&&(e+="m"),n.altKey&&(e+="a"),n.shiftKey&&(e+="s"),e}function yT(n,e){let t=e.keyCode,r=gT(e);if(t==8||yn&&t==72&&r=="c")return wx(n,-1)||Mi(n,-1);if(t==46&&!e.shiftKey||yn&&t==68&&r=="c")return wx(n,1)||Mi(n,1);if(t==13||t==27)return!0;if(t==37||yn&&t==66&&r=="c"){let s=t==37?xx(n,n.state.selection.from)=="ltr"?-1:1:-1;return yx(n,s,r)||Mi(n,s)}else if(t==39||yn&&t==70&&r=="c"){let s=t==39?xx(n,n.state.selection.from)=="ltr"?1:-1:1;return yx(n,s,r)||Mi(n,s)}else{if(t==38||yn&&t==80&&r=="c")return vx(n,-1,r)||Mi(n,-1);if(t==40||yn&&t==78&&r=="c")return mT(n)||vx(n,1,r)||Mi(n,1);if(r==(yn?"m":"c")&&(t==66||t==73||t==89||t==90))return!0}return!1}function Tp(n,e){n.someProp("transformCopied",w=>{e=w(e,n)});let t=[],{content:r,openStart:s,openEnd:i}=e;for(;s>1&&i>1&&r.childCount==1&&r.firstChild.childCount==1;){s--,i--;let w=r.firstChild;t.push(w.type.name,w.attrs!=w.type.defaultAttrs?w.attrs:null),r=w.content}let l=n.someProp("clipboardSerializer")||Gs.fromSchema(n.state.schema),c=fw(),u=c.createElement("div");u.appendChild(l.serializeFragment(r,{document:c}));let h=u.firstChild,f,g=0;for(;h&&h.nodeType==1&&(f=hw[h.nodeName.toLowerCase()]);){for(let w=f.length-1;w>=0;w--){let b=c.createElement(f[w]);for(;u.firstChild;)b.appendChild(u.firstChild);u.appendChild(b),g++}h=u.firstChild}h&&h.nodeType==1&&h.setAttribute("data-pm-slice",`${s} ${i}${g?` -${g}`:""} ${JSON.stringify(t)}`);let x=n.someProp("clipboardTextSerializer",w=>w(e,n))||e.content.textBetween(0,e.content.size,`

`);return{dom:u,text:x,slice:e}}function aw(n,e,t,r,s){let i=s.parent.type.spec.code,l,c;if(!t&&!e)return null;let u=e&&(r||i||!t);if(u){if(n.someProp("transformPastedText",x=>{e=x(e,i||r,n)}),i)return e?new G(z.from(n.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):G.empty;let g=n.someProp("clipboardTextParser",x=>x(e,s,r,n));if(g)c=g;else{let x=s.marks(),{schema:w}=n.state,b=Gs.fromSchema(w);l=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(k=>{let C=l.appendChild(document.createElement("p"));k&&C.appendChild(b.serializeNode(w.text(k,x)))})}}else n.someProp("transformPastedHTML",g=>{t=g(t,n)}),l=bT(t),Ol&&kT(l);let h=l&&l.querySelector("[data-pm-slice]"),f=h&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(h.getAttribute("data-pm-slice")||"");if(f&&f[3])for(let g=+f[3];g>0;g--){let x=l.firstChild;for(;x&&x.nodeType!=1;)x=x.nextSibling;if(!x)break;l=x}if(c||(c=(n.someProp("clipboardParser")||n.someProp("domParser")||Zr.fromSchema(n.state.schema)).parseSlice(l,{preserveWhitespace:!!(u||f),context:s,ruleFromNode(x){return x.nodeName=="BR"&&!x.nextSibling&&x.parentNode&&!xT.test(x.parentNode.nodeName)?{ignore:!0}:null}})),f)c=ST(kx(c,+f[1],+f[2]),f[4]);else if(c=G.maxOpen(vT(c.content,s),!0),c.openStart||c.openEnd){let g=0,x=0;for(let w=c.content.firstChild;g<c.openStart&&!w.type.spec.isolating;g++,w=w.firstChild);for(let w=c.content.lastChild;x<c.openEnd&&!w.type.spec.isolating;x++,w=w.lastChild);c=kx(c,g,x)}return n.someProp("transformPasted",g=>{c=g(c,n)}),c}const xT=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function vT(n,e){if(n.childCount<2)return n;for(let t=e.depth;t>=0;t--){let s=e.node(t).contentMatchAt(e.index(t)),i,l=[];if(n.forEach(c=>{if(!l)return;let u=s.findWrapping(c.type),h;if(!u)return l=null;if(h=l.length&&i.length&&uw(u,i,c,l[l.length-1],0))l[l.length-1]=h;else{l.length&&(l[l.length-1]=dw(l[l.length-1],i.length));let f=cw(c,u);l.push(f),s=s.matchType(f.type),i=u}}),l)return z.from(l)}return n}function cw(n,e,t=0){for(let r=e.length-1;r>=t;r--)n=e[r].create(null,z.from(n));return n}function uw(n,e,t,r,s){if(s<n.length&&s<e.length&&n[s]==e[s]){let i=uw(n,e,t,r.lastChild,s+1);if(i)return r.copy(r.content.replaceChild(r.childCount-1,i));if(r.contentMatchAt(r.childCount).matchType(s==n.length-1?t.type:n[s+1]))return r.copy(r.content.append(z.from(cw(t,n,s+1))))}}function dw(n,e){if(e==0)return n;let t=n.content.replaceChild(n.childCount-1,dw(n.lastChild,e-1)),r=n.contentMatchAt(n.childCount).fillBefore(z.empty,!0);return n.copy(t.append(r))}function jf(n,e,t,r,s,i){let l=e<0?n.firstChild:n.lastChild,c=l.content;return n.childCount>1&&(i=0),s<r-1&&(c=jf(c,e,t,r,s+1,i)),s>=t&&(c=e<0?l.contentMatchAt(0).fillBefore(c,i<=s).append(c):c.append(l.contentMatchAt(l.childCount).fillBefore(z.empty,!0))),n.replaceChild(e<0?0:n.childCount-1,l.copy(c))}function kx(n,e,t){return e<n.openStart&&(n=new G(jf(n.content,-1,e,n.openStart,0,n.openEnd),e,n.openEnd)),t<n.openEnd&&(n=new G(jf(n.content,1,t,n.openEnd,0,0),n.openStart,t)),n}const hw={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let Sx=null;function fw(){return Sx||(Sx=document.implementation.createHTMLDocument("title"))}let Ph=null;function wT(n){let e=window.trustedTypes;return e?(Ph||(Ph=e.createPolicy("ProseMirrorClipboard",{createHTML:t=>t})),Ph.createHTML(n)):n}function bT(n){let e=/^(\s*<meta [^>]*>)*/.exec(n);e&&(n=n.slice(e[0].length));let t=fw().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(n),s;if((s=r&&hw[r[1].toLowerCase()])&&(n=s.map(i=>"<"+i+">").join("")+n+s.map(i=>"</"+i+">").reverse().join("")),t.innerHTML=wT(n),s)for(let i=0;i<s.length;i++)t=t.querySelector(s[i])||t;return t}function kT(n){let e=n.querySelectorAll(Ot?"span:not([class]):not([style])":"span.Apple-converted-space");for(let t=0;t<e.length;t++){let r=e[t];r.childNodes.length==1&&r.textContent==" "&&r.parentNode&&r.parentNode.replaceChild(n.ownerDocument.createTextNode(" "),r)}}function ST(n,e){if(!n.size)return n;let t=n.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return n}let{content:s,openStart:i,openEnd:l}=n;for(let c=r.length-2;c>=0;c-=2){let u=t.nodes[r[c]];if(!u||u.hasRequiredAttrs())break;s=z.from(u.create(r[c+1],s)),i++,l++}return new G(s,i,l)}const Bt={},Ft={},CT={touchstart:!0,touchmove:!0};class NT{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function ET(n){for(let e in Bt){let t=Bt[e];n.dom.addEventListener(e,n.input.eventHandlers[e]=r=>{TT(n,r)&&!_p(n,r)&&(n.editable||!(r.type in Ft))&&t(n,r)},CT[e]?{passive:!0}:void 0)}$t&&n.dom.addEventListener("input",()=>null),Tf(n)}function Qr(n,e){n.input.lastSelectionOrigin=e,n.input.lastSelectionTime=Date.now()}function jT(n){n.domObserver.stop();for(let e in n.input.eventHandlers)n.dom.removeEventListener(e,n.input.eventHandlers[e]);clearTimeout(n.input.composingTimeout),clearTimeout(n.input.lastIOSEnterFallbackTimeout)}function Tf(n){n.someProp("handleDOMEvents",e=>{for(let t in e)n.input.eventHandlers[t]||n.dom.addEventListener(t,n.input.eventHandlers[t]=r=>_p(n,r))})}function _p(n,e){return n.someProp("handleDOMEvents",t=>{let r=t[e.type];return r?r(n,e)||e.defaultPrevented:!1})}function TT(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target;t!=n.dom;t=t.parentNode)if(!t||t.nodeType==11||t.pmViewDesc&&t.pmViewDesc.stopEvent(e))return!1;return!0}function _T(n,e){!_p(n,e)&&Bt[e.type]&&(n.editable||!(e.type in Ft))&&Bt[e.type](n,e)}Ft.keydown=(n,e)=>{let t=e;if(n.input.shiftKey=t.keyCode==16||t.shiftKey,!mw(n,t)&&(n.input.lastKeyCode=t.keyCode,n.input.lastKeyCodeTime=Date.now(),!(dr&&Ot&&t.keyCode==13)))if(t.keyCode!=229&&n.domObserver.forceFlush(),Wi&&t.keyCode==13&&!t.ctrlKey&&!t.altKey&&!t.metaKey){let r=Date.now();n.input.lastIOSEnter=r,n.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{n.input.lastIOSEnter==r&&(n.someProp("handleKeyDown",s=>s(n,As(13,"Enter"))),n.input.lastIOSEnter=0)},200)}else n.someProp("handleKeyDown",r=>r(n,t))||yT(n,t)?t.preventDefault():Qr(n,"key")};Ft.keyup=(n,e)=>{e.keyCode==16&&(n.input.shiftKey=!1)};Ft.keypress=(n,e)=>{let t=e;if(mw(n,t)||!t.charCode||t.ctrlKey&&!t.altKey||yn&&t.metaKey)return;if(n.someProp("handleKeyPress",s=>s(n,t))){t.preventDefault();return}let r=n.state.selection;if(!(r instanceof ce)||!r.$from.sameParent(r.$to)){let s=String.fromCharCode(t.charCode);!/[\r\n]/.test(s)&&!n.someProp("handleTextInput",i=>i(n,r.$from.pos,r.$to.pos,s))&&n.dispatch(n.state.tr.insertText(s).scrollIntoView()),t.preventDefault()}};function yu(n){return{left:n.clientX,top:n.clientY}}function AT(n,e){let t=e.x-n.clientX,r=e.y-n.clientY;return t*t+r*r<100}function Ap(n,e,t,r,s){if(r==-1)return!1;let i=n.state.doc.resolve(r);for(let l=i.depth+1;l>0;l--)if(n.someProp(e,c=>l>i.depth?c(n,t,i.nodeAfter,i.before(l),s,!0):c(n,t,i.node(l),i.before(l),s,!1)))return!0;return!1}function Bi(n,e,t){if(n.focused||n.focus(),n.state.selection.eq(e))return;let r=n.state.tr.setSelection(e);r.setMeta("pointer",!0),n.dispatch(r)}function MT(n,e){if(e==-1)return!1;let t=n.state.doc.resolve(e),r=t.nodeAfter;return r&&r.isAtom&&ae.isSelectable(r)?(Bi(n,new ae(t)),!0):!1}function OT(n,e){if(e==-1)return!1;let t=n.state.selection,r,s;t instanceof ae&&(r=t.node);let i=n.state.doc.resolve(e);for(let l=i.depth+1;l>0;l--){let c=l>i.depth?i.nodeAfter:i.node(l);if(ae.isSelectable(c)){r&&t.$from.depth>0&&l>=t.$from.depth&&i.before(t.$from.depth+1)==t.$from.pos?s=i.before(t.$from.depth):s=i.before(l);break}}return s!=null?(Bi(n,ae.create(n.state.doc,s)),!0):!1}function RT(n,e,t,r,s){return Ap(n,"handleClickOn",e,t,r)||n.someProp("handleClick",i=>i(n,e,r))||(s?OT(n,t):MT(n,t))}function PT(n,e,t,r){return Ap(n,"handleDoubleClickOn",e,t,r)||n.someProp("handleDoubleClick",s=>s(n,e,r))}function IT(n,e,t,r){return Ap(n,"handleTripleClickOn",e,t,r)||n.someProp("handleTripleClick",s=>s(n,e,r))||LT(n,t,r)}function LT(n,e,t){if(t.button!=0)return!1;let r=n.state.doc;if(e==-1)return r.inlineContent?(Bi(n,ce.create(r,0,r.content.size)),!0):!1;let s=r.resolve(e);for(let i=s.depth+1;i>0;i--){let l=i>s.depth?s.nodeAfter:s.node(i),c=s.before(i);if(l.inlineContent)Bi(n,ce.create(r,c+1,c+1+l.content.size));else if(ae.isSelectable(l))Bi(n,ae.create(r,c));else continue;return!0}}function Mp(n){return _c(n)}const pw=yn?"metaKey":"ctrlKey";Bt.mousedown=(n,e)=>{let t=e;n.input.shiftKey=t.shiftKey;let r=Mp(n),s=Date.now(),i="singleClick";s-n.input.lastClick.time<500&&AT(t,n.input.lastClick)&&!t[pw]&&(n.input.lastClick.type=="singleClick"?i="doubleClick":n.input.lastClick.type=="doubleClick"&&(i="tripleClick")),n.input.lastClick={time:s,x:t.clientX,y:t.clientY,type:i};let l=n.posAtCoords(yu(t));l&&(i=="singleClick"?(n.input.mouseDown&&n.input.mouseDown.done(),n.input.mouseDown=new DT(n,l,t,!!r)):(i=="doubleClick"?PT:IT)(n,l.pos,l.inside,t)?t.preventDefault():Qr(n,"pointer"))};class DT{constructor(e,t,r,s){this.view=e,this.pos=t,this.event=r,this.flushed=s,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[pw],this.allowDefault=r.shiftKey;let i,l;if(t.inside>-1)i=e.state.doc.nodeAt(t.inside),l=t.inside;else{let f=e.state.doc.resolve(t.pos);i=f.parent,l=f.depth?f.before():0}const c=s?null:r.target,u=c?e.docView.nearestDesc(c,!0):null;this.target=u&&u.dom.nodeType==1?u.dom:null;let{selection:h}=e.state;(r.button==0&&i.type.spec.draggable&&i.type.spec.selectable!==!1||h instanceof ae&&h.from<=l&&h.to>l)&&(this.mightDrag={node:i,pos:l,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&An&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Qr(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>fr(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(yu(e))),this.updateAllowDefault(e),this.allowDefault||!t?Qr(this.view,"pointer"):RT(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||$t&&this.mightDrag&&!this.mightDrag.node.isAtom||Ot&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(Bi(this.view,he.near(this.view.state.doc.resolve(t.pos))),e.preventDefault()):Qr(this.view,"pointer")}move(e){this.updateAllowDefault(e),Qr(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}Bt.touchstart=n=>{n.input.lastTouch=Date.now(),Mp(n),Qr(n,"pointer")};Bt.touchmove=n=>{n.input.lastTouch=Date.now(),Qr(n,"pointer")};Bt.contextmenu=n=>Mp(n);function mw(n,e){return n.composing?!0:$t&&Math.abs(e.timeStamp-n.input.compositionEndedAt)<500?(n.input.compositionEndedAt=-2e8,!0):!1}const zT=dr?5e3:-1;Ft.compositionstart=Ft.compositionupdate=n=>{if(!n.composing){n.domObserver.flush();let{state:e}=n,t=e.selection.$to;if(e.selection instanceof ce&&(e.storedMarks||!t.textOffset&&t.parentOffset&&t.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))n.markCursor=n.state.storedMarks||t.marks(),_c(n,!0),n.markCursor=null;else if(_c(n,!e.selection.empty),An&&e.selection.empty&&t.parentOffset&&!t.textOffset&&t.nodeBefore.marks.length){let r=n.domSelectionRange();for(let s=r.focusNode,i=r.focusOffset;s&&s.nodeType==1&&i!=0;){let l=i<0?s.lastChild:s.childNodes[i-1];if(!l)break;if(l.nodeType==3){let c=n.domSelection();c&&c.collapse(l,l.nodeValue.length);break}else s=l,i=-1}}n.input.composing=!0}gw(n,zT)};Ft.compositionend=(n,e)=>{n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=e.timeStamp,n.input.compositionPendingChanges=n.domObserver.pendingRecords().length?n.input.compositionID:0,n.input.compositionNode=null,n.input.compositionPendingChanges&&Promise.resolve().then(()=>n.domObserver.flush()),n.input.compositionID++,gw(n,20))};function gw(n,e){clearTimeout(n.input.composingTimeout),e>-1&&(n.input.composingTimeout=setTimeout(()=>_c(n),e))}function yw(n){for(n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=BT());n.input.compositionNodes.length>0;)n.input.compositionNodes.pop().markParentsDirty()}function $T(n){let e=n.domSelectionRange();if(!e.focusNode)return null;let t=Mj(e.focusNode,e.focusOffset),r=Oj(e.focusNode,e.focusOffset);if(t&&r&&t!=r){let s=r.pmViewDesc,i=n.domObserver.lastChangedTextNode;if(t==i||r==i)return i;if(!s||!s.isText(r.nodeValue))return r;if(n.input.compositionNode==r){let l=t.pmViewDesc;if(!(!l||!l.isText(t.nodeValue)))return r}}return t||r}function BT(){let n=document.createEvent("Event");return n.initEvent("event",!0,!0),n.timeStamp}function _c(n,e=!1){if(!(dr&&n.domObserver.flushingSoon>=0)){if(n.domObserver.forceFlush(),yw(n),e||n.docView&&n.docView.dirty){let t=Ep(n);return t&&!t.eq(n.state.selection)?n.dispatch(n.state.tr.setSelection(t)):(n.markCursor||e)&&!n.state.selection.empty?n.dispatch(n.state.tr.deleteSelection()):n.updateState(n.state),!0}return!1}}function FT(n,e){if(!n.dom.parentNode)return;let t=n.dom.parentNode.appendChild(document.createElement("div"));t.appendChild(e),t.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),s=document.createRange();s.selectNodeContents(e),n.dom.blur(),r.removeAllRanges(),r.addRange(s),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t),n.focus()},50)}const wl=Yt&&es<15||Wi&&Dj<604;Bt.copy=Ft.cut=(n,e)=>{let t=e,r=n.state.selection,s=t.type=="cut";if(r.empty)return;let i=wl?null:t.clipboardData,l=r.content(),{dom:c,text:u}=Tp(n,l);i?(t.preventDefault(),i.clearData(),i.setData("text/html",c.innerHTML),i.setData("text/plain",u)):FT(n,c),s&&n.dispatch(n.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function UT(n){return n.openStart==0&&n.openEnd==0&&n.content.childCount==1?n.content.firstChild:null}function HT(n,e){if(!n.dom.parentNode)return;let t=n.input.shiftKey||n.state.selection.$from.parent.type.spec.code,r=n.dom.parentNode.appendChild(document.createElement(t?"textarea":"div"));t||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let s=n.input.shiftKey&&n.input.lastKeyCode!=45;setTimeout(()=>{n.focus(),r.parentNode&&r.parentNode.removeChild(r),t?bl(n,r.value,null,s,e):bl(n,r.textContent,r.innerHTML,s,e)},50)}function bl(n,e,t,r,s){let i=aw(n,e,t,r,n.state.selection.$from);if(n.someProp("handlePaste",u=>u(n,s,i||G.empty)))return!0;if(!i)return!1;let l=UT(i),c=l?n.state.tr.replaceSelectionWith(l,r):n.state.tr.replaceSelection(i);return n.dispatch(c.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function xw(n){let e=n.getData("text/plain")||n.getData("Text");if(e)return e;let t=n.getData("text/uri-list");return t?t.replace(/\r?\n/g," "):""}Ft.paste=(n,e)=>{let t=e;if(n.composing&&!dr)return;let r=wl?null:t.clipboardData,s=n.input.shiftKey&&n.input.lastKeyCode!=45;r&&bl(n,xw(r),r.getData("text/html"),s,t)?t.preventDefault():HT(n,t)};class vw{constructor(e,t,r){this.slice=e,this.move=t,this.node=r}}const ww=yn?"altKey":"ctrlKey";Bt.dragstart=(n,e)=>{let t=e,r=n.input.mouseDown;if(r&&r.done(),!t.dataTransfer)return;let s=n.state.selection,i=s.empty?null:n.posAtCoords(yu(t)),l;if(!(i&&i.pos>=s.from&&i.pos<=(s instanceof ae?s.to-1:s.to))){if(r&&r.mightDrag)l=ae.create(n.state.doc,r.mightDrag.pos);else if(t.target&&t.target.nodeType==1){let g=n.docView.nearestDesc(t.target,!0);g&&g.node.type.spec.draggable&&g!=n.docView&&(l=ae.create(n.state.doc,g.posBefore))}}let c=(l||n.state.selection).content(),{dom:u,text:h,slice:f}=Tp(n,c);(!t.dataTransfer.files.length||!Ot||q1>120)&&t.dataTransfer.clearData(),t.dataTransfer.setData(wl?"Text":"text/html",u.innerHTML),t.dataTransfer.effectAllowed="copyMove",wl||t.dataTransfer.setData("text/plain",h),n.dragging=new vw(f,!t[ww],l)};Bt.dragend=n=>{let e=n.dragging;window.setTimeout(()=>{n.dragging==e&&(n.dragging=null)},50)};Ft.dragover=Ft.dragenter=(n,e)=>e.preventDefault();Ft.drop=(n,e)=>{let t=e,r=n.dragging;if(n.dragging=null,!t.dataTransfer)return;let s=n.posAtCoords(yu(t));if(!s)return;let i=n.state.doc.resolve(s.pos),l=r&&r.slice;l?n.someProp("transformPasted",b=>{l=b(l,n)}):l=aw(n,xw(t.dataTransfer),wl?null:t.dataTransfer.getData("text/html"),!1,i);let c=!!(r&&!t[ww]);if(n.someProp("handleDrop",b=>b(n,t,l||G.empty,c))){t.preventDefault();return}if(!l)return;t.preventDefault();let u=l?D1(n.state.doc,i.pos,l):i.pos;u==null&&(u=i.pos);let h=n.state.tr;if(c){let{node:b}=r;b?b.replace(h):h.deleteSelection()}let f=h.mapping.map(u),g=l.openStart==0&&l.openEnd==0&&l.content.childCount==1,x=h.doc;if(g?h.replaceRangeWith(f,f,l.content.firstChild):h.replaceRange(f,f,l),h.doc.eq(x))return;let w=h.doc.resolve(f);if(g&&ae.isSelectable(l.content.firstChild)&&w.nodeAfter&&w.nodeAfter.sameMarkup(l.content.firstChild))h.setSelection(new ae(w));else{let b=h.mapping.map(u);h.mapping.maps[h.mapping.maps.length-1].forEach((k,C,N,M)=>b=M),h.setSelection(jp(n,w,h.doc.resolve(b)))}n.focus(),n.dispatch(h.setMeta("uiEvent","drop"))};Bt.focus=n=>{n.input.lastFocus=Date.now(),n.focused||(n.domObserver.stop(),n.dom.classList.add("ProseMirror-focused"),n.domObserver.start(),n.focused=!0,setTimeout(()=>{n.docView&&n.hasFocus()&&!n.domObserver.currentSelection.eq(n.domSelectionRange())&&fr(n)},20))};Bt.blur=(n,e)=>{let t=e;n.focused&&(n.domObserver.stop(),n.dom.classList.remove("ProseMirror-focused"),n.domObserver.start(),t.relatedTarget&&n.dom.contains(t.relatedTarget)&&n.domObserver.currentSelection.clear(),n.focused=!1)};Bt.beforeinput=(n,e)=>{if(Ot&&dr&&e.inputType=="deleteContentBackward"){n.domObserver.flushSoon();let{domChangeCount:r}=n.input;setTimeout(()=>{if(n.input.domChangeCount!=r||(n.dom.blur(),n.focus(),n.someProp("handleKeyDown",i=>i(n,As(8,"Backspace")))))return;let{$cursor:s}=n.state.selection;s&&s.pos>0&&n.dispatch(n.state.tr.delete(s.pos-1,s.pos).scrollIntoView())},50)}};for(let n in Ft)Bt[n]=Ft[n];function kl(n,e){if(n==e)return!0;for(let t in n)if(n[t]!==e[t])return!1;for(let t in e)if(!(t in n))return!1;return!0}class Ac{constructor(e,t){this.toDOM=e,this.spec=t||zs,this.side=this.spec.side||0}map(e,t,r,s){let{pos:i,deleted:l}=e.mapResult(t.from+s,this.side<0?-1:1);return l?null:new zt(i-r,i-r,this)}valid(){return!0}eq(e){return this==e||e instanceof Ac&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&kl(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class ns{constructor(e,t){this.attrs=e,this.spec=t||zs}map(e,t,r,s){let i=e.map(t.from+s,this.spec.inclusiveStart?-1:1)-r,l=e.map(t.to+s,this.spec.inclusiveEnd?1:-1)-r;return i>=l?null:new zt(i,l,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof ns&&kl(this.attrs,e.attrs)&&kl(this.spec,e.spec)}static is(e){return e.type instanceof ns}destroy(){}}class Op{constructor(e,t){this.attrs=e,this.spec=t||zs}map(e,t,r,s){let i=e.mapResult(t.from+s,1);if(i.deleted)return null;let l=e.mapResult(t.to+s,-1);return l.deleted||l.pos<=i.pos?null:new zt(i.pos-r,l.pos-r,this)}valid(e,t){let{index:r,offset:s}=e.content.findIndex(t.from),i;return s==t.from&&!(i=e.child(r)).isText&&s+i.nodeSize==t.to}eq(e){return this==e||e instanceof Op&&kl(this.attrs,e.attrs)&&kl(this.spec,e.spec)}destroy(){}}class zt{constructor(e,t,r){this.from=e,this.to=t,this.type=r}copy(e,t){return new zt(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,r){return this.type.map(e,this,t,r)}static widget(e,t,r){return new zt(e,e,new Ac(t,r))}static inline(e,t,r,s){return new zt(e,t,new ns(r,s))}static node(e,t,r,s){return new zt(e,t,new Op(r,s))}get spec(){return this.type.spec}get inline(){return this.type instanceof ns}get widget(){return this.type instanceof Ac}}const Ri=[],zs={};class Qe{constructor(e,t){this.local=e.length?e:Ri,this.children=t.length?t:Ri}static create(e,t){return t.length?Mc(t,e,0,zs):_t}find(e,t,r){let s=[];return this.findInner(e??0,t??1e9,s,0,r),s}findInner(e,t,r,s,i){for(let l=0;l<this.local.length;l++){let c=this.local[l];c.from<=t&&c.to>=e&&(!i||i(c.spec))&&r.push(c.copy(c.from+s,c.to+s))}for(let l=0;l<this.children.length;l+=3)if(this.children[l]<t&&this.children[l+1]>e){let c=this.children[l]+1;this.children[l+2].findInner(e-c,t-c,r,s+c,i)}}map(e,t,r){return this==_t||e.maps.length==0?this:this.mapInner(e,t,0,0,r||zs)}mapInner(e,t,r,s,i){let l;for(let c=0;c<this.local.length;c++){let u=this.local[c].map(e,r,s);u&&u.type.valid(t,u)?(l||(l=[])).push(u):i.onRemove&&i.onRemove(this.local[c].spec)}return this.children.length?VT(this.children,l||[],e,t,r,s,i):l?new Qe(l.sort($s),Ri):_t}add(e,t){return t.length?this==_t?Qe.create(e,t):this.addInner(e,t,0):this}addInner(e,t,r){let s,i=0;e.forEach((c,u)=>{let h=u+r,f;if(f=kw(t,c,h)){for(s||(s=this.children.slice());i<s.length&&s[i]<u;)i+=3;s[i]==u?s[i+2]=s[i+2].addInner(c,f,h+1):s.splice(i,0,u,u+c.nodeSize,Mc(f,c,h+1,zs)),i+=3}});let l=bw(i?Sw(t):t,-r);for(let c=0;c<l.length;c++)l[c].type.valid(e,l[c])||l.splice(c--,1);return new Qe(l.length?this.local.concat(l).sort($s):this.local,s||this.children)}remove(e){return e.length==0||this==_t?this:this.removeInner(e,0)}removeInner(e,t){let r=this.children,s=this.local;for(let i=0;i<r.length;i+=3){let l,c=r[i]+t,u=r[i+1]+t;for(let f=0,g;f<e.length;f++)(g=e[f])&&g.from>c&&g.to<u&&(e[f]=null,(l||(l=[])).push(g));if(!l)continue;r==this.children&&(r=this.children.slice());let h=r[i+2].removeInner(l,c+1);h!=_t?r[i+2]=h:(r.splice(i,3),i-=3)}if(s.length){for(let i=0,l;i<e.length;i++)if(l=e[i])for(let c=0;c<s.length;c++)s[c].eq(l,t)&&(s==this.local&&(s=this.local.slice()),s.splice(c--,1))}return r==this.children&&s==this.local?this:s.length||r.length?new Qe(s,r):_t}forChild(e,t){if(this==_t)return this;if(t.isLeaf)return Qe.empty;let r,s;for(let c=0;c<this.children.length;c+=3)if(this.children[c]>=e){this.children[c]==e&&(r=this.children[c+2]);break}let i=e+1,l=i+t.content.size;for(let c=0;c<this.local.length;c++){let u=this.local[c];if(u.from<l&&u.to>i&&u.type instanceof ns){let h=Math.max(i,u.from)-i,f=Math.min(l,u.to)-i;h<f&&(s||(s=[])).push(u.copy(h,f))}}if(s){let c=new Qe(s.sort($s),Ri);return r?new Vr([c,r]):c}return r||_t}eq(e){if(this==e)return!0;if(!(e instanceof Qe)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return Rp(this.localsInner(e))}localsInner(e){if(this==_t)return Ri;if(e.inlineContent||!this.local.some(ns.is))return this.local;let t=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof ns||t.push(this.local[r]);return t}forEachSet(e){e(this)}}Qe.empty=new Qe([],[]);Qe.removeOverlap=Rp;const _t=Qe.empty;class Vr{constructor(e){this.members=e}map(e,t){const r=this.members.map(s=>s.map(e,t,zs));return Vr.from(r)}forChild(e,t){if(t.isLeaf)return Qe.empty;let r=[];for(let s=0;s<this.members.length;s++){let i=this.members[s].forChild(e,t);i!=_t&&(i instanceof Vr?r=r.concat(i.members):r.push(i))}return Vr.from(r)}eq(e){if(!(e instanceof Vr)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,r=!0;for(let s=0;s<this.members.length;s++){let i=this.members[s].localsInner(e);if(i.length)if(!t)t=i;else{r&&(t=t.slice(),r=!1);for(let l=0;l<i.length;l++)t.push(i[l])}}return t?Rp(r?t:t.sort($s)):Ri}static from(e){switch(e.length){case 0:return _t;case 1:return e[0];default:return new Vr(e.every(t=>t instanceof Qe)?e:e.reduce((t,r)=>t.concat(r instanceof Qe?r:r.members),[]))}}forEachSet(e){for(let t=0;t<this.members.length;t++)this.members[t].forEachSet(e)}}function VT(n,e,t,r,s,i,l){let c=n.slice();for(let h=0,f=i;h<t.maps.length;h++){let g=0;t.maps[h].forEach((x,w,b,k)=>{let C=k-b-(w-x);for(let N=0;N<c.length;N+=3){let M=c[N+1];if(M<0||x>M+f-g)continue;let I=c[N]+f-g;w>=I?c[N+1]=x<=I?-2:-1:x>=f&&C&&(c[N]+=C,c[N+1]+=C)}g+=C}),f=t.maps[h].map(f,-1)}let u=!1;for(let h=0;h<c.length;h+=3)if(c[h+1]<0){if(c[h+1]==-2){u=!0,c[h+1]=-1;continue}let f=t.map(n[h]+i),g=f-s;if(g<0||g>=r.content.size){u=!0;continue}let x=t.map(n[h+1]+i,-1),w=x-s,{index:b,offset:k}=r.content.findIndex(g),C=r.maybeChild(b);if(C&&k==g&&k+C.nodeSize==w){let N=c[h+2].mapInner(t,C,f+1,n[h]+i+1,l);N!=_t?(c[h]=g,c[h+1]=w,c[h+2]=N):(c[h+1]=-2,u=!0)}else u=!0}if(u){let h=WT(c,n,e,t,s,i,l),f=Mc(h,r,0,l);e=f.local;for(let g=0;g<c.length;g+=3)c[g+1]<0&&(c.splice(g,3),g-=3);for(let g=0,x=0;g<f.children.length;g+=3){let w=f.children[g];for(;x<c.length&&c[x]<w;)x+=3;c.splice(x,0,f.children[g],f.children[g+1],f.children[g+2])}}return new Qe(e.sort($s),c)}function bw(n,e){if(!e||!n.length)return n;let t=[];for(let r=0;r<n.length;r++){let s=n[r];t.push(new zt(s.from+e,s.to+e,s.type))}return t}function WT(n,e,t,r,s,i,l){function c(u,h){for(let f=0;f<u.local.length;f++){let g=u.local[f].map(r,s,h);g?t.push(g):l.onRemove&&l.onRemove(u.local[f].spec)}for(let f=0;f<u.children.length;f+=3)c(u.children[f+2],u.children[f]+h+1)}for(let u=0;u<n.length;u+=3)n[u+1]==-1&&c(n[u+2],e[u]+i+1);return t}function kw(n,e,t){if(e.isLeaf)return null;let r=t+e.nodeSize,s=null;for(let i=0,l;i<n.length;i++)(l=n[i])&&l.from>t&&l.to<r&&((s||(s=[])).push(l),n[i]=null);return s}function Sw(n){let e=[];for(let t=0;t<n.length;t++)n[t]!=null&&e.push(n[t]);return e}function Mc(n,e,t,r){let s=[],i=!1;e.forEach((c,u)=>{let h=kw(n,c,u+t);if(h){i=!0;let f=Mc(h,c,t+u+1,r);f!=_t&&s.push(u,u+c.nodeSize,f)}});let l=bw(i?Sw(n):n,-t).sort($s);for(let c=0;c<l.length;c++)l[c].type.valid(e,l[c])||(r.onRemove&&r.onRemove(l[c].spec),l.splice(c--,1));return l.length||s.length?new Qe(l,s):_t}function $s(n,e){return n.from-e.from||n.to-e.to}function Rp(n){let e=n;for(let t=0;t<e.length-1;t++){let r=e[t];if(r.from!=r.to)for(let s=t+1;s<e.length;s++){let i=e[s];if(i.from==r.from){i.to!=r.to&&(e==n&&(e=n.slice()),e[s]=i.copy(i.from,r.to),Cx(e,s+1,i.copy(r.to,i.to)));continue}else{i.from<r.to&&(e==n&&(e=n.slice()),e[t]=r.copy(r.from,i.from),Cx(e,s,r.copy(i.from,r.to)));break}}}return e}function Cx(n,e,t){for(;e<n.length&&$s(t,n[e])>0;)e++;n.splice(e,0,t)}function Ih(n){let e=[];return n.someProp("decorations",t=>{let r=t(n.state);r&&r!=_t&&e.push(r)}),n.cursorWrapper&&e.push(Qe.create(n.state.doc,[n.cursorWrapper.deco])),Vr.from(e)}const qT={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},KT=Yt&&es<=11;class JT{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class GT{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new JT,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let s=0;s<r.length;s++)this.queue.push(r[s]);Yt&&es<=11&&r.some(s=>s.type=="childList"&&s.removedNodes.length||s.type=="characterData"&&s.oldValue.length>s.target.nodeValue.length)?this.flushSoon():this.flush()}),KT&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,qT)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(gx(this.view)){if(this.suppressingSelectionUpdates)return fr(this.view);if(Yt&&es<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Us(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t=new Set,r;for(let i=e.focusNode;i;i=vl(i))t.add(i);for(let i=e.anchorNode;i;i=vl(i))if(t.has(i)){r=i;break}let s=r&&this.view.docView.nearestDesc(r);if(s&&s.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let t=this.pendingRecords();t.length&&(this.queue=[]);let r=e.domSelectionRange(),s=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&gx(e)&&!this.ignoreSelectionChange(r),i=-1,l=-1,c=!1,u=[];if(e.editable)for(let f=0;f<t.length;f++){let g=this.registerMutation(t[f],u);g&&(i=i<0?g.from:Math.min(g.from,i),l=l<0?g.to:Math.max(g.to,l),g.typeOver&&(c=!0))}if(An&&u.length){let f=u.filter(g=>g.nodeName=="BR");if(f.length==2){let[g,x]=f;g.parentNode&&g.parentNode.parentNode==x.parentNode?x.remove():g.remove()}else{let{focusNode:g}=this.currentSelection;for(let x of f){let w=x.parentNode;w&&w.nodeName=="LI"&&(!g||XT(e,g)!=w)&&x.remove()}}}let h=null;i<0&&s&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&mu(r)&&(h=Ep(e))&&h.eq(he.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,fr(e),this.currentSelection.set(r)):(i>-1||s)&&(i>-1&&(e.docView.markDirty(i,l),QT(e)),this.handleDOMChange(i,l,c,u),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||fr(e),this.currentSelection.set(r))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let f=0;f<e.addedNodes.length;f++){let g=e.addedNodes[f];t.push(g),g.nodeType==3&&(this.lastChangedTextNode=g)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let s=e.previousSibling,i=e.nextSibling;if(Yt&&es<=11&&e.addedNodes.length)for(let f=0;f<e.addedNodes.length;f++){let{previousSibling:g,nextSibling:x}=e.addedNodes[f];(!g||Array.prototype.indexOf.call(e.addedNodes,g)<0)&&(s=g),(!x||Array.prototype.indexOf.call(e.addedNodes,x)<0)&&(i=x)}let l=s&&s.parentNode==e.target?St(s)+1:0,c=r.localPosFromDOM(e.target,l,-1),u=i&&i.parentNode==e.target?St(i):e.target.childNodes.length,h=r.localPosFromDOM(e.target,u,1);return{from:c,to:h}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let Nx=new WeakMap,Ex=!1;function QT(n){if(!Nx.has(n)&&(Nx.set(n,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(n.dom).whiteSpace)!==-1)){if(n.requiresGeckoHackNode=An,Ex)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),Ex=!0}}function jx(n,e){let t=e.startContainer,r=e.startOffset,s=e.endContainer,i=e.endOffset,l=n.domAtPos(n.state.selection.anchor);return Us(l.node,l.offset,s,i)&&([t,r,s,i]=[s,i,t,r]),{anchorNode:t,anchorOffset:r,focusNode:s,focusOffset:i}}function YT(n,e){if(e.getComposedRanges){let s=e.getComposedRanges(n.root)[0];if(s)return jx(n,s)}let t;function r(s){s.preventDefault(),s.stopImmediatePropagation(),t=s.getTargetRanges()[0]}return n.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),n.dom.removeEventListener("beforeinput",r,!0),t?jx(n,t):null}function XT(n,e){for(let t=e.parentNode;t&&t!=n.dom;t=t.parentNode){let r=n.docView.nearestDesc(t,!0);if(r&&r.node.isBlock)return t}return null}function ZT(n,e,t){let{node:r,fromOffset:s,toOffset:i,from:l,to:c}=n.docView.parseRange(e,t),u=n.domSelectionRange(),h,f=u.anchorNode;if(f&&n.dom.contains(f.nodeType==1?f:f.parentNode)&&(h=[{node:f,offset:u.anchorOffset}],mu(u)||h.push({node:u.focusNode,offset:u.focusOffset})),Ot&&n.input.lastKeyCode===8)for(let C=i;C>s;C--){let N=r.childNodes[C-1],M=N.pmViewDesc;if(N.nodeName=="BR"&&!M){i=C;break}if(!M||M.size)break}let g=n.state.doc,x=n.someProp("domParser")||Zr.fromSchema(n.state.schema),w=g.resolve(l),b=null,k=x.parse(r,{topNode:w.parent,topMatch:w.parent.contentMatchAt(w.index()),topOpen:!0,from:s,to:i,preserveWhitespace:w.parent.type.whitespace=="pre"?"full":!0,findPositions:h,ruleFromNode:e_,context:w});if(h&&h[0].pos!=null){let C=h[0].pos,N=h[1]&&h[1].pos;N==null&&(N=C),b={anchor:C+l,head:N+l}}return{doc:k,sel:b,from:l,to:c}}function e_(n){let e=n.pmViewDesc;if(e)return e.parseRule();if(n.nodeName=="BR"&&n.parentNode){if($t&&/^(ul|ol)$/i.test(n.parentNode.nodeName)){let t=document.createElement("div");return t.appendChild(document.createElement("li")),{skip:t}}else if(n.parentNode.lastChild==n||$t&&/^(tr|table)$/i.test(n.parentNode.nodeName))return{ignore:!0}}else if(n.nodeName=="IMG"&&n.getAttribute("mark-placeholder"))return{ignore:!0};return null}const t_=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function n_(n,e,t,r,s){let i=n.input.compositionPendingChanges||(n.composing?n.input.compositionID:0);if(n.input.compositionPendingChanges=0,e<0){let se=n.input.lastSelectionTime>Date.now()-50?n.input.lastSelectionOrigin:null,Te=Ep(n,se);if(Te&&!n.state.selection.eq(Te)){if(Ot&&dr&&n.input.lastKeyCode===13&&Date.now()-100<n.input.lastKeyCodeTime&&n.someProp("handleKeyDown",Re=>Re(n,As(13,"Enter"))))return;let Ze=n.state.tr.setSelection(Te);se=="pointer"?Ze.setMeta("pointer",!0):se=="key"&&Ze.scrollIntoView(),i&&Ze.setMeta("composition",i),n.dispatch(Ze)}return}let l=n.state.doc.resolve(e),c=l.sharedDepth(t);e=l.before(c+1),t=n.state.doc.resolve(t).after(c+1);let u=n.state.selection,h=ZT(n,e,t),f=n.state.doc,g=f.slice(h.from,h.to),x,w;n.input.lastKeyCode===8&&Date.now()-100<n.input.lastKeyCodeTime?(x=n.state.selection.to,w="end"):(x=n.state.selection.from,w="start"),n.input.lastKeyCode=null;let b=i_(g.content,h.doc.content,h.from,x,w);if(b&&n.input.domChangeCount++,(Wi&&n.input.lastIOSEnter>Date.now()-225||dr)&&s.some(se=>se.nodeType==1&&!t_.test(se.nodeName))&&(!b||b.endA>=b.endB)&&n.someProp("handleKeyDown",se=>se(n,As(13,"Enter")))){n.input.lastIOSEnter=0;return}if(!b)if(r&&u instanceof ce&&!u.empty&&u.$head.sameParent(u.$anchor)&&!n.composing&&!(h.sel&&h.sel.anchor!=h.sel.head))b={start:u.from,endA:u.to,endB:u.to};else{if(h.sel){let se=Tx(n,n.state.doc,h.sel);if(se&&!se.eq(n.state.selection)){let Te=n.state.tr.setSelection(se);i&&Te.setMeta("composition",i),n.dispatch(Te)}}return}n.state.selection.from<n.state.selection.to&&b.start==b.endB&&n.state.selection instanceof ce&&(b.start>n.state.selection.from&&b.start<=n.state.selection.from+2&&n.state.selection.from>=h.from?b.start=n.state.selection.from:b.endA<n.state.selection.to&&b.endA>=n.state.selection.to-2&&n.state.selection.to<=h.to&&(b.endB+=n.state.selection.to-b.endA,b.endA=n.state.selection.to)),Yt&&es<=11&&b.endB==b.start+1&&b.endA==b.start&&b.start>h.from&&h.doc.textBetween(b.start-h.from-1,b.start-h.from+1)=="  "&&(b.start--,b.endA--,b.endB--);let k=h.doc.resolveNoCache(b.start-h.from),C=h.doc.resolveNoCache(b.endB-h.from),N=f.resolve(b.start),M=k.sameParent(C)&&k.parent.inlineContent&&N.end()>=b.endA,I;if((Wi&&n.input.lastIOSEnter>Date.now()-225&&(!M||s.some(se=>se.nodeName=="DIV"||se.nodeName=="P"))||!M&&k.pos<h.doc.content.size&&!k.sameParent(C)&&(I=he.findFrom(h.doc.resolve(k.pos+1),1,!0))&&I.head==C.pos)&&n.someProp("handleKeyDown",se=>se(n,As(13,"Enter")))){n.input.lastIOSEnter=0;return}if(n.state.selection.anchor>b.start&&s_(f,b.start,b.endA,k,C)&&n.someProp("handleKeyDown",se=>se(n,As(8,"Backspace")))){dr&&Ot&&n.domObserver.suppressSelectionUpdates();return}Ot&&b.endB==b.start&&(n.input.lastChromeDelete=Date.now()),dr&&!M&&k.start()!=C.start()&&C.parentOffset==0&&k.depth==C.depth&&h.sel&&h.sel.anchor==h.sel.head&&h.sel.head==b.endA&&(b.endB-=2,C=h.doc.resolveNoCache(b.endB-h.from),setTimeout(()=>{n.someProp("handleKeyDown",function(se){return se(n,As(13,"Enter"))})},20));let V=b.start,U=b.endA,D,B,oe;if(M){if(k.pos==C.pos)Yt&&es<=11&&k.parentOffset==0&&(n.domObserver.suppressSelectionUpdates(),setTimeout(()=>fr(n),20)),D=n.state.tr.delete(V,U),B=f.resolve(b.start).marksAcross(f.resolve(b.endA));else if(b.endA==b.endB&&(oe=r_(k.parent.content.cut(k.parentOffset,C.parentOffset),N.parent.content.cut(N.parentOffset,b.endA-N.start()))))D=n.state.tr,oe.type=="add"?D.addMark(V,U,oe.mark):D.removeMark(V,U,oe.mark);else if(k.parent.child(k.index()).isText&&k.index()==C.index()-(C.textOffset?0:1)){let se=k.parent.textBetween(k.parentOffset,C.parentOffset);if(n.someProp("handleTextInput",Te=>Te(n,V,U,se)))return;D=n.state.tr.insertText(se,V,U)}}if(D||(D=n.state.tr.replace(V,U,h.doc.slice(b.start-h.from,b.endB-h.from))),h.sel){let se=Tx(n,D.doc,h.sel);se&&!(Ot&&n.composing&&se.empty&&(b.start!=b.endB||n.input.lastChromeDelete<Date.now()-100)&&(se.head==V||se.head==D.mapping.map(U)-1)||Yt&&se.empty&&se.head==V)&&D.setSelection(se)}B&&D.ensureMarks(B),i&&D.setMeta("composition",i),n.dispatch(D.scrollIntoView())}function Tx(n,e,t){return Math.max(t.anchor,t.head)>e.content.size?null:jp(n,e.resolve(t.anchor),e.resolve(t.head))}function r_(n,e){let t=n.firstChild.marks,r=e.firstChild.marks,s=t,i=r,l,c,u;for(let f=0;f<r.length;f++)s=r[f].removeFromSet(s);for(let f=0;f<t.length;f++)i=t[f].removeFromSet(i);if(s.length==1&&i.length==0)c=s[0],l="add",u=f=>f.mark(c.addToSet(f.marks));else if(s.length==0&&i.length==1)c=i[0],l="remove",u=f=>f.mark(c.removeFromSet(f.marks));else return null;let h=[];for(let f=0;f<e.childCount;f++)h.push(u(e.child(f)));if(z.from(h).eq(n))return{mark:c,type:l}}function s_(n,e,t,r,s){if(t-e<=s.pos-r.pos||Lh(r,!0,!1)<s.pos)return!1;let i=n.resolve(e);if(!r.parent.isTextblock){let c=i.nodeAfter;return c!=null&&t==e+c.nodeSize}if(i.parentOffset<i.parent.content.size||!i.parent.isTextblock)return!1;let l=n.resolve(Lh(i,!0,!0));return!l.parent.isTextblock||l.pos>t||Lh(l,!0,!1)<t?!1:r.parent.content.cut(r.parentOffset).eq(l.parent.content)}function Lh(n,e,t){let r=n.depth,s=e?n.end():n.pos;for(;r>0&&(e||n.indexAfter(r)==n.node(r).childCount);)r--,s++,e=!1;if(t){let i=n.node(r).maybeChild(n.indexAfter(r));for(;i&&!i.isLeaf;)i=i.firstChild,s++}return s}function i_(n,e,t,r,s){let i=n.findDiffStart(e,t);if(i==null)return null;let{a:l,b:c}=n.findDiffEnd(e,t+n.size,t+e.size);if(s=="end"){let u=Math.max(0,i-Math.min(l,c));r-=l+u-i}if(l<i&&n.size<e.size){let u=r<=i&&r>=l?i-r:0;i-=u,i&&i<e.size&&_x(e.textBetween(i-1,i+1))&&(i+=u?1:-1),c=i+(c-l),l=i}else if(c<i){let u=r<=i&&r>=c?i-r:0;i-=u,i&&i<n.size&&_x(n.textBetween(i-1,i+1))&&(i+=u?1:-1),l=i+(l-c),c=i}return{start:i,endA:l,endB:c}}function _x(n){if(n.length!=2)return!1;let e=n.charCodeAt(0),t=n.charCodeAt(1);return e>=56320&&e<=57343&&t>=55296&&t<=56319}class o_{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new NT,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(Px),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=Ox(this),Mx(this),this.nodeViews=Rx(this),this.docView=ux(this.state.doc,Ax(this),Ih(this),this.dom,this),this.domObserver=new GT(this,(r,s,i,l)=>n_(this,r,s,i,l)),this.domObserver.start(),ET(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Tf(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(Px),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let r in this._props)t[r]=this._props[r];t.state=this.state;for(let r in e)t[r]=e[r];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){var r;let s=this.state,i=!1,l=!1;e.storedMarks&&this.composing&&(yw(this),l=!0),this.state=e;let c=s.plugins!=e.plugins||this._props.plugins!=t.plugins;if(c||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let w=Rx(this);a_(w,this.nodeViews)&&(this.nodeViews=w,i=!0)}(c||t.handleDOMEvents!=this._props.handleDOMEvents)&&Tf(this),this.editable=Ox(this),Mx(this);let u=Ih(this),h=Ax(this),f=s.plugins!=e.plugins&&!s.doc.eq(e.doc)?"reset":e.scrollToSelection>s.scrollToSelection?"to selection":"preserve",g=i||!this.docView.matchesNode(e.doc,h,u);(g||!e.selection.eq(s.selection))&&(l=!0);let x=f=="preserve"&&l&&this.dom.style.overflowAnchor==null&&Bj(this);if(l){this.domObserver.stop();let w=g&&(Yt||Ot)&&!this.composing&&!s.selection.empty&&!e.selection.empty&&l_(s.selection,e.selection);if(g){let b=Ot?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=$T(this)),(i||!this.docView.update(e.doc,h,u,this))&&(this.docView.updateOuterDeco(h),this.docView.destroy(),this.docView=ux(e.doc,h,u,this.dom,this)),b&&!this.trackWrites&&(w=!0)}w||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&uT(this))?fr(this,w):(iw(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(s),!((r=this.dragging)===null||r===void 0)&&r.node&&!s.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,s),f=="reset"?this.dom.scrollTop=0:f=="to selection"?this.scrollToSelection():x&&Fj(x)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",t=>t(this)))if(this.state.selection instanceof ae){let t=this.docView.domAfterPos(this.state.selection.from);t.nodeType==1&&sx(this,t.getBoundingClientRect(),e)}else sx(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let t=0;t<this.directPlugins.length;t++){let r=this.directPlugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let t=0;t<this.state.plugins.length;t++){let r=this.state.plugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let t=0;t<this.pluginViews.length;t++){let r=this.pluginViews[t];r.update&&r.update(this,e)}}updateDraggedNode(e,t){let r=e.node,s=-1;if(this.state.doc.nodeAt(r.from)==r.node)s=r.from;else{let i=r.from+(this.state.doc.content.size-t.doc.content.size);(i>0&&this.state.doc.nodeAt(i))==r.node&&(s=i)}this.dragging=new vw(e.slice,e.move,s<0?void 0:ae.create(this.state.doc,s))}someProp(e,t){let r=this._props&&this._props[e],s;if(r!=null&&(s=t?t(r):r))return s;for(let l=0;l<this.directPlugins.length;l++){let c=this.directPlugins[l].props[e];if(c!=null&&(s=t?t(c):c))return s}let i=this.state.plugins;if(i)for(let l=0;l<i.length;l++){let c=i[l].props[e];if(c!=null&&(s=t?t(c):c))return s}}hasFocus(){if(Yt){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&Uj(this.dom),fr(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let t=this.dom.parentNode;t;t=t.parentNode)if(t.nodeType==9||t.nodeType==11&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t}return e||document}updateRoot(){this._root=null}posAtCoords(e){return Kj(this,e)}coordsAtPos(e,t=1){return Y1(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,r=-1){let s=this.docView.posFromDOM(e,t,r);if(s==null)throw new RangeError("DOM position not inside the editor");return s}endOfTextblock(e,t){return Xj(this,t||this.state,e)}pasteHTML(e,t){return bl(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return bl(this,e,null,!0,t||new ClipboardEvent("paste"))}serializeForClipboard(e){return Tp(this,e)}destroy(){this.docView&&(jT(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Ih(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,_j())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return _T(this,e)}dispatch(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){let e=this.domSelection();return e?$t&&this.root.nodeType===11&&Pj(this.dom.ownerDocument)==this.dom&&YT(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}function Ax(n){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(n.editable),n.someProp("attributes",t=>{if(typeof t=="function"&&(t=t(n.state)),t)for(let r in t)r=="class"?e.class+=" "+t[r]:r=="style"?e.style=(e.style?e.style+";":"")+t[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(t[r]))}),e.translate||(e.translate="no"),[zt.node(0,n.state.doc.content.size,e)]}function Mx(n){if(n.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),n.cursorWrapper={dom:e,deco:zt.widget(n.state.selection.from,e,{raw:!0,marks:n.markCursor})}}else n.cursorWrapper=null}function Ox(n){return!n.someProp("editable",e=>e(n.state)===!1)}function l_(n,e){let t=Math.min(n.$anchor.sharedDepth(n.head),e.$anchor.sharedDepth(e.head));return n.$anchor.start(t)!=e.$anchor.start(t)}function Rx(n){let e=Object.create(null);function t(r){for(let s in r)Object.prototype.hasOwnProperty.call(e,s)||(e[s]=r[s])}return n.someProp("nodeViews",t),n.someProp("markViews",t),e}function a_(n,e){let t=0,r=0;for(let s in n){if(n[s]!=e[s])return!0;t++}for(let s in e)r++;return t!=r}function Px(n){if(n.spec.state||n.spec.filterTransaction||n.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var rs={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Oc={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},c_=typeof navigator<"u"&&/Mac/.test(navigator.platform),u_=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Ct=0;Ct<10;Ct++)rs[48+Ct]=rs[96+Ct]=String(Ct);for(var Ct=1;Ct<=24;Ct++)rs[Ct+111]="F"+Ct;for(var Ct=65;Ct<=90;Ct++)rs[Ct]=String.fromCharCode(Ct+32),Oc[Ct]=String.fromCharCode(Ct);for(var Dh in rs)Oc.hasOwnProperty(Dh)||(Oc[Dh]=rs[Dh]);function d_(n){var e=c_&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||u_&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?Oc:rs)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}const h_=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function f_(n){let e=n.split(/-(?!$)/),t=e[e.length-1];t=="Space"&&(t=" ");let r,s,i,l;for(let c=0;c<e.length-1;c++){let u=e[c];if(/^(cmd|meta|m)$/i.test(u))l=!0;else if(/^a(lt)?$/i.test(u))r=!0;else if(/^(c|ctrl|control)$/i.test(u))s=!0;else if(/^s(hift)?$/i.test(u))i=!0;else if(/^mod$/i.test(u))h_?l=!0:s=!0;else throw new Error("Unrecognized modifier name: "+u)}return r&&(t="Alt-"+t),s&&(t="Ctrl-"+t),l&&(t="Meta-"+t),i&&(t="Shift-"+t),t}function p_(n){let e=Object.create(null);for(let t in n)e[f_(t)]=n[t];return e}function zh(n,e,t=!0){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t&&e.shiftKey&&(n="Shift-"+n),n}function m_(n){return new ct({props:{handleKeyDown:Pp(n)}})}function Pp(n){let e=p_(n);return function(t,r){let s=d_(r),i,l=e[zh(s,r)];if(l&&l(t.state,t.dispatch,t))return!0;if(s.length==1&&s!=" "){if(r.shiftKey){let c=e[zh(s,r,!1)];if(c&&c(t.state,t.dispatch,t))return!0}if((r.shiftKey||r.altKey||r.metaKey||s.charCodeAt(0)>127)&&(i=rs[r.keyCode])&&i!=s){let c=e[zh(i,r)];if(c&&c(t.state,t.dispatch,t))return!0}}return!1}}const Ip=(n,e)=>n.selection.empty?!1:(e&&e(n.tr.deleteSelection().scrollIntoView()),!0);function Cw(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("backward",n):t.parentOffset>0)?null:t}const Nw=(n,e,t)=>{let r=Cw(n,t);if(!r)return!1;let s=Lp(r);if(!s){let l=r.blockRange(),c=l&&Zi(l);return c==null?!1:(e&&e(n.tr.lift(l,c).scrollIntoView()),!0)}let i=s.nodeBefore;if(Pw(n,s,e,-1))return!0;if(r.parent.content.size==0&&(qi(i,"end")||ae.isSelectable(i)))for(let l=r.depth;;l--){let c=fu(n.doc,r.before(l),r.after(l),G.empty);if(c&&c.slice.size<c.to-c.from){if(e){let u=n.tr.step(c);u.setSelection(qi(i,"end")?he.findFrom(u.doc.resolve(u.mapping.map(s.pos,-1)),-1):ae.create(u.doc,s.pos-i.nodeSize)),e(u.scrollIntoView())}return!0}if(l==1||r.node(l-1).childCount>1)break}return i.isAtom&&s.depth==r.depth-1?(e&&e(n.tr.delete(s.pos-i.nodeSize,s.pos).scrollIntoView()),!0):!1},g_=(n,e,t)=>{let r=Cw(n,t);if(!r)return!1;let s=Lp(r);return s?Ew(n,s,e):!1},y_=(n,e,t)=>{let r=Tw(n,t);if(!r)return!1;let s=Dp(r);return s?Ew(n,s,e):!1};function Ew(n,e,t){let r=e.nodeBefore,s=r,i=e.pos-1;for(;!s.isTextblock;i--){if(s.type.spec.isolating)return!1;let f=s.lastChild;if(!f)return!1;s=f}let l=e.nodeAfter,c=l,u=e.pos+1;for(;!c.isTextblock;u++){if(c.type.spec.isolating)return!1;let f=c.firstChild;if(!f)return!1;c=f}let h=fu(n.doc,i,u,G.empty);if(!h||h.from!=i||h instanceof mt&&h.slice.size>=u-i)return!1;if(t){let f=n.tr.step(h);f.setSelection(ce.create(f.doc,i)),t(f.scrollIntoView())}return!0}function qi(n,e,t=!1){for(let r=n;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(t&&r.childCount!=1)return!1}return!1}const jw=(n,e,t)=>{let{$head:r,empty:s}=n.selection,i=r;if(!s)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("backward",n):r.parentOffset>0)return!1;i=Lp(r)}let l=i&&i.nodeBefore;return!l||!ae.isSelectable(l)?!1:(e&&e(n.tr.setSelection(ae.create(n.doc,i.pos-l.nodeSize)).scrollIntoView()),!0)};function Lp(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){if(n.index(e)>0)return n.doc.resolve(n.before(e+1));if(n.node(e).type.spec.isolating)break}return null}function Tw(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("forward",n):t.parentOffset<t.parent.content.size)?null:t}const _w=(n,e,t)=>{let r=Tw(n,t);if(!r)return!1;let s=Dp(r);if(!s)return!1;let i=s.nodeAfter;if(Pw(n,s,e,1))return!0;if(r.parent.content.size==0&&(qi(i,"start")||ae.isSelectable(i))){let l=fu(n.doc,r.before(),r.after(),G.empty);if(l&&l.slice.size<l.to-l.from){if(e){let c=n.tr.step(l);c.setSelection(qi(i,"start")?he.findFrom(c.doc.resolve(c.mapping.map(s.pos)),1):ae.create(c.doc,c.mapping.map(s.pos))),e(c.scrollIntoView())}return!0}}return i.isAtom&&s.depth==r.depth-1?(e&&e(n.tr.delete(s.pos,s.pos+i.nodeSize).scrollIntoView()),!0):!1},Aw=(n,e,t)=>{let{$head:r,empty:s}=n.selection,i=r;if(!s)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("forward",n):r.parentOffset<r.parent.content.size)return!1;i=Dp(r)}let l=i&&i.nodeAfter;return!l||!ae.isSelectable(l)?!1:(e&&e(n.tr.setSelection(ae.create(n.doc,i.pos)).scrollIntoView()),!0)};function Dp(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){let t=n.node(e);if(n.index(e)+1<t.childCount)return n.doc.resolve(n.after(e+1));if(t.type.spec.isolating)break}return null}const x_=(n,e)=>{let t=n.selection,r=t instanceof ae,s;if(r){if(t.node.isTextblock||!ls(n.doc,t.from))return!1;s=t.from}else if(s=hu(n.doc,t.from,-1),s==null)return!1;if(e){let i=n.tr.join(s);r&&i.setSelection(ae.create(i.doc,s-n.doc.resolve(s).nodeBefore.nodeSize)),e(i.scrollIntoView())}return!0},v_=(n,e)=>{let t=n.selection,r;if(t instanceof ae){if(t.node.isTextblock||!ls(n.doc,t.to))return!1;r=t.to}else if(r=hu(n.doc,t.to,1),r==null)return!1;return e&&e(n.tr.join(r).scrollIntoView()),!0},w_=(n,e)=>{let{$from:t,$to:r}=n.selection,s=t.blockRange(r),i=s&&Zi(s);return i==null?!1:(e&&e(n.tr.lift(s,i).scrollIntoView()),!0)},Mw=(n,e)=>{let{$head:t,$anchor:r}=n.selection;return!t.parent.type.spec.code||!t.sameParent(r)?!1:(e&&e(n.tr.insertText(`
`).scrollIntoView()),!0)};function zp(n){for(let e=0;e<n.edgeCount;e++){let{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}const b_=(n,e)=>{let{$head:t,$anchor:r}=n.selection;if(!t.parent.type.spec.code||!t.sameParent(r))return!1;let s=t.node(-1),i=t.indexAfter(-1),l=zp(s.contentMatchAt(i));if(!l||!s.canReplaceWith(i,i,l))return!1;if(e){let c=t.after(),u=n.tr.replaceWith(c,c,l.createAndFill());u.setSelection(he.near(u.doc.resolve(c),1)),e(u.scrollIntoView())}return!0},Ow=(n,e)=>{let t=n.selection,{$from:r,$to:s}=t;if(t instanceof on||r.parent.inlineContent||s.parent.inlineContent)return!1;let i=zp(s.parent.contentMatchAt(s.indexAfter()));if(!i||!i.isTextblock)return!1;if(e){let l=(!r.parentOffset&&s.index()<s.parent.childCount?r:s).pos,c=n.tr.insert(l,i.createAndFill());c.setSelection(ce.create(c.doc,l+1)),e(c.scrollIntoView())}return!0},Rw=(n,e)=>{let{$cursor:t}=n.selection;if(!t||t.parent.content.size)return!1;if(t.depth>1&&t.after()!=t.end(-1)){let i=t.before();if(hr(n.doc,i))return e&&e(n.tr.split(i).scrollIntoView()),!0}let r=t.blockRange(),s=r&&Zi(r);return s==null?!1:(e&&e(n.tr.lift(r,s).scrollIntoView()),!0)};function k_(n){return(e,t)=>{let{$from:r,$to:s}=e.selection;if(e.selection instanceof ae&&e.selection.node.isBlock)return!r.parentOffset||!hr(e.doc,r.pos)?!1:(t&&t(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let i=[],l,c,u=!1,h=!1;for(let w=r.depth;;w--)if(r.node(w).isBlock){u=r.end(w)==r.pos+(r.depth-w),h=r.start(w)==r.pos-(r.depth-w),c=zp(r.node(w-1).contentMatchAt(r.indexAfter(w-1))),i.unshift(u&&c?{type:c}:null),l=w;break}else{if(w==1)return!1;i.unshift(null)}let f=e.tr;(e.selection instanceof ce||e.selection instanceof on)&&f.deleteSelection();let g=f.mapping.map(r.pos),x=hr(f.doc,g,i.length,i);if(x||(i[0]=c?{type:c}:null,x=hr(f.doc,g,i.length,i)),f.split(g,i.length,i),!u&&h&&r.node(l).type!=c){let w=f.mapping.map(r.before(l)),b=f.doc.resolve(w);c&&r.node(l-1).canReplaceWith(b.index(),b.index()+1,c)&&f.setNodeMarkup(f.mapping.map(r.before(l)),c)}return t&&t(f.scrollIntoView()),!0}}const S_=k_(),C_=(n,e)=>{let{$from:t,to:r}=n.selection,s,i=t.sharedDepth(r);return i==0?!1:(s=t.before(i),e&&e(n.tr.setSelection(ae.create(n.doc,s))),!0)};function N_(n,e,t){let r=e.nodeBefore,s=e.nodeAfter,i=e.index();return!r||!s||!r.type.compatibleContent(s.type)?!1:!r.content.size&&e.parent.canReplace(i-1,i)?(t&&t(n.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(i,i+1)||!(s.isTextblock||ls(n.doc,e.pos))?!1:(t&&t(n.tr.join(e.pos).scrollIntoView()),!0)}function Pw(n,e,t,r){let s=e.nodeBefore,i=e.nodeAfter,l,c,u=s.type.spec.isolating||i.type.spec.isolating;if(!u&&N_(n,e,t))return!0;let h=!u&&e.parent.canReplace(e.index(),e.index()+1);if(h&&(l=(c=s.contentMatchAt(s.childCount)).findWrapping(i.type))&&c.matchType(l[0]||i.type).validEnd){if(t){let w=e.pos+i.nodeSize,b=z.empty;for(let N=l.length-1;N>=0;N--)b=z.from(l[N].create(null,b));b=z.from(s.copy(b));let k=n.tr.step(new gt(e.pos-1,w,e.pos,w,new G(b,1,0),l.length,!0)),C=k.doc.resolve(w+2*l.length);C.nodeAfter&&C.nodeAfter.type==s.type&&ls(k.doc,C.pos)&&k.join(C.pos),t(k.scrollIntoView())}return!0}let f=i.type.spec.isolating||r>0&&u?null:he.findFrom(e,1),g=f&&f.$from.blockRange(f.$to),x=g&&Zi(g);if(x!=null&&x>=e.depth)return t&&t(n.tr.lift(g,x).scrollIntoView()),!0;if(h&&qi(i,"start",!0)&&qi(s,"end")){let w=s,b=[];for(;b.push(w),!w.isTextblock;)w=w.lastChild;let k=i,C=1;for(;!k.isTextblock;k=k.firstChild)C++;if(w.canReplace(w.childCount,w.childCount,k.content)){if(t){let N=z.empty;for(let I=b.length-1;I>=0;I--)N=z.from(b[I].copy(N));let M=n.tr.step(new gt(e.pos-b.length,e.pos+i.nodeSize,e.pos+C,e.pos+i.nodeSize-C,new G(N,b.length,0),0,!0));t(M.scrollIntoView())}return!0}}return!1}function Iw(n){return function(e,t){let r=e.selection,s=n<0?r.$from:r.$to,i=s.depth;for(;s.node(i).isInline;){if(!i)return!1;i--}return s.node(i).isTextblock?(t&&t(e.tr.setSelection(ce.create(e.doc,n<0?s.start(i):s.end(i)))),!0):!1}}const E_=Iw(-1),j_=Iw(1);function T_(n,e=null){return function(t,r){let{$from:s,$to:i}=t.selection,l=s.blockRange(i),c=l&&kp(l,n,e);return c?(r&&r(t.tr.wrap(l,c).scrollIntoView()),!0):!1}}function Ix(n,e=null){return function(t,r){let s=!1;for(let i=0;i<t.selection.ranges.length&&!s;i++){let{$from:{pos:l},$to:{pos:c}}=t.selection.ranges[i];t.doc.nodesBetween(l,c,(u,h)=>{if(s)return!1;if(!(!u.isTextblock||u.hasMarkup(n,e)))if(u.type==n)s=!0;else{let f=t.doc.resolve(h),g=f.index();s=f.parent.canReplaceWith(g,g+1,n)}})}if(!s)return!1;if(r){let i=t.tr;for(let l=0;l<t.selection.ranges.length;l++){let{$from:{pos:c},$to:{pos:u}}=t.selection.ranges[l];i.setBlockType(c,u,n,e)}r(i.scrollIntoView())}return!0}}function $p(...n){return function(e,t,r){for(let s=0;s<n.length;s++)if(n[s](e,t,r))return!0;return!1}}$p(Ip,Nw,jw);$p(Ip,_w,Aw);$p(Mw,Ow,Rw,S_);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function __(n,e=null){return function(t,r){let{$from:s,$to:i}=t.selection,l=s.blockRange(i);if(!l)return!1;let c=r?t.tr:null;return A_(c,l,n,e)?(r&&r(c.scrollIntoView()),!0):!1}}function A_(n,e,t,r=null){let s=!1,i=e,l=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(t)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let u=l.resolve(e.start-2);i=new Nc(u,u,e.depth),e.endIndex<e.parent.childCount&&(e=new Nc(e.$from,l.resolve(e.$to.end(e.depth)),e.depth)),s=!0}let c=kp(i,t,r,e);return c?(n&&M_(n,e,c,s,t),!0):!1}function M_(n,e,t,r,s){let i=z.empty;for(let f=t.length-1;f>=0;f--)i=z.from(t[f].type.create(t[f].attrs,i));n.step(new gt(e.start-(r?2:0),e.end,e.start,e.end,new G(i,0,0),t.length,!0));let l=0;for(let f=0;f<t.length;f++)t[f].type==s&&(l=f+1);let c=t.length-l,u=e.start+t.length-(r?2:0),h=e.parent;for(let f=e.startIndex,g=e.endIndex,x=!0;f<g;f++,x=!1)!x&&hr(n.doc,u,c)&&(n.split(u,c),u+=2*c),u+=h.child(f).nodeSize;return n}function O_(n){return function(e,t){let{$from:r,$to:s}=e.selection,i=r.blockRange(s,l=>l.childCount>0&&l.firstChild.type==n);return i?t?r.node(i.depth-1).type==n?R_(e,t,n,i):P_(e,t,i):!0:!1}}function R_(n,e,t,r){let s=n.tr,i=r.end,l=r.$to.end(r.depth);i<l&&(s.step(new gt(i-1,l,i,l,new G(z.from(t.create(null,r.parent.copy())),1,0),1,!0)),r=new Nc(s.doc.resolve(r.$from.pos),s.doc.resolve(l),r.depth));const c=Zi(r);if(c==null)return!1;s.lift(r,c);let u=s.mapping.map(i,-1)-1;return ls(s.doc,u)&&s.join(u),e(s.scrollIntoView()),!0}function P_(n,e,t){let r=n.tr,s=t.parent;for(let w=t.end,b=t.endIndex-1,k=t.startIndex;b>k;b--)w-=s.child(b).nodeSize,r.delete(w-1,w+1);let i=r.doc.resolve(t.start),l=i.nodeAfter;if(r.mapping.map(t.end)!=t.start+i.nodeAfter.nodeSize)return!1;let c=t.startIndex==0,u=t.endIndex==s.childCount,h=i.node(-1),f=i.index(-1);if(!h.canReplace(f+(c?0:1),f+1,l.content.append(u?z.empty:z.from(s))))return!1;let g=i.pos,x=g+l.nodeSize;return r.step(new gt(g-(c?1:0),x+(u?1:0),g+1,x-1,new G((c?z.empty:z.from(s.copy(z.empty))).append(u?z.empty:z.from(s.copy(z.empty))),c?0:1,u?0:1),c?0:1)),e(r.scrollIntoView()),!0}function I_(n){return function(e,t){let{$from:r,$to:s}=e.selection,i=r.blockRange(s,h=>h.childCount>0&&h.firstChild.type==n);if(!i)return!1;let l=i.startIndex;if(l==0)return!1;let c=i.parent,u=c.child(l-1);if(u.type!=n)return!1;if(t){let h=u.lastChild&&u.lastChild.type==c.type,f=z.from(h?n.create():null),g=new G(z.from(n.create(null,z.from(c.type.create(null,f)))),h?3:1,0),x=i.start,w=i.end;t(e.tr.step(new gt(x-(h?3:1),w,x,w,g,1,!0)).scrollIntoView())}return!0}}function xu(n){const{state:e,transaction:t}=n;let{selection:r}=t,{doc:s}=t,{storedMarks:i}=t;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return i},get selection(){return r},get doc(){return s},get tr(){return r=t.selection,s=t.doc,i=t.storedMarks,t}}}class vu{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:r}=this,{view:s}=t,{tr:i}=r,l=this.buildProps(i);return Object.fromEntries(Object.entries(e).map(([c,u])=>[c,(...f)=>{const g=u(...f)(l);return!i.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(i),g}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:r,editor:s,state:i}=this,{view:l}=s,c=[],u=!!e,h=e||i.tr,f=()=>(!u&&t&&!h.getMeta("preventDispatch")&&!this.hasCustomState&&l.dispatch(h),c.every(x=>x===!0)),g={...Object.fromEntries(Object.entries(r).map(([x,w])=>[x,(...k)=>{const C=this.buildProps(h,t),N=w(...k)(C);return c.push(N),g}])),run:f};return g}createCan(e){const{rawCommands:t,state:r}=this,s=!1,i=e||r.tr,l=this.buildProps(i,s);return{...Object.fromEntries(Object.entries(t).map(([u,h])=>[u,(...f)=>h(...f)({...l,dispatch:void 0})])),chain:()=>this.createChain(i,s)}}buildProps(e,t=!0){const{rawCommands:r,editor:s,state:i}=this,{view:l}=s,c={tr:e,editor:s,view:l,state:xu({state:i,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([u,h])=>[u,(...f)=>h(...f)(c)]))}};return c}}class L_{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e,...t){const r=this.callbacks[e];return r&&r.forEach(s=>s.apply(this,t)),this}off(e,t){const r=this.callbacks[e];return r&&(t?this.callbacks[e]=r.filter(s=>s!==t):delete this.callbacks[e]),this}once(e,t){const r=(...s)=>{this.off(e,r),t.apply(this,s)};return this.on(e,r)}removeAllListeners(){this.callbacks={}}}function ne(n,e,t){return n.config[e]===void 0&&n.parent?ne(n.parent,e,t):typeof n.config[e]=="function"?n.config[e].bind({...t,parent:n.parent?ne(n.parent,e,t):null}):n.config[e]}function wu(n){const e=n.filter(s=>s.type==="extension"),t=n.filter(s=>s.type==="node"),r=n.filter(s=>s.type==="mark");return{baseExtensions:e,nodeExtensions:t,markExtensions:r}}function Lw(n){const e=[],{nodeExtensions:t,markExtensions:r}=wu(n),s=[...t,...r],i={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return n.forEach(l=>{const c={name:l.name,options:l.options,storage:l.storage,extensions:s},u=ne(l,"addGlobalAttributes",c);if(!u)return;u().forEach(f=>{f.types.forEach(g=>{Object.entries(f.attributes).forEach(([x,w])=>{e.push({type:g,name:x,attribute:{...i,...w}})})})})}),s.forEach(l=>{const c={name:l.name,options:l.options,storage:l.storage},u=ne(l,"addAttributes",c);if(!u)return;const h=u();Object.entries(h).forEach(([f,g])=>{const x={...i,...g};typeof(x==null?void 0:x.default)=="function"&&(x.default=x.default()),x!=null&&x.isRequired&&(x==null?void 0:x.default)===void 0&&delete x.default,e.push({type:l.name,name:f,attribute:x})})}),e}function xt(n,e){if(typeof n=="string"){if(!e.nodes[n])throw Error(`There is no node type named '${n}'. Maybe you forgot to add the extension?`);return e.nodes[n]}return n}function ze(...n){return n.filter(e=>!!e).reduce((e,t)=>{const r={...e};return Object.entries(t).forEach(([s,i])=>{if(!r[s]){r[s]=i;return}if(s==="class"){const c=i?String(i).split(" "):[],u=r[s]?r[s].split(" "):[],h=c.filter(f=>!u.includes(f));r[s]=[...u,...h].join(" ")}else if(s==="style"){const c=i?i.split(";").map(f=>f.trim()).filter(Boolean):[],u=r[s]?r[s].split(";").map(f=>f.trim()).filter(Boolean):[],h=new Map;u.forEach(f=>{const[g,x]=f.split(":").map(w=>w.trim());h.set(g,x)}),c.forEach(f=>{const[g,x]=f.split(":").map(w=>w.trim());h.set(g,x)}),r[s]=Array.from(h.entries()).map(([f,g])=>`${f}: ${g}`).join("; ")}else r[s]=i}),r},{})}function _f(n,e){return e.filter(t=>t.type===n.type.name).filter(t=>t.attribute.rendered).map(t=>t.attribute.renderHTML?t.attribute.renderHTML(n.attrs)||{}:{[t.name]:n.attrs[t.name]}).reduce((t,r)=>ze(t,r),{})}function Dw(n){return typeof n=="function"}function ge(n,e=void 0,...t){return Dw(n)?e?n.bind(e)(...t):n(...t):n}function D_(n={}){return Object.keys(n).length===0&&n.constructor===Object}function z_(n){return typeof n!="string"?n:n.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(n):n==="true"?!0:n==="false"?!1:n}function Lx(n,e){return"style"in n?n:{...n,getAttrs:t=>{const r=n.getAttrs?n.getAttrs(t):n.attrs;if(r===!1)return!1;const s=e.reduce((i,l)=>{const c=l.attribute.parseHTML?l.attribute.parseHTML(t):z_(t.getAttribute(l.name));return c==null?i:{...i,[l.name]:c}},{});return{...r,...s}}}}function Dx(n){return Object.fromEntries(Object.entries(n).filter(([e,t])=>e==="attrs"&&D_(t)?!1:t!=null))}function $_(n,e){var t;const r=Lw(n),{nodeExtensions:s,markExtensions:i}=wu(n),l=(t=s.find(h=>ne(h,"topNode")))===null||t===void 0?void 0:t.name,c=Object.fromEntries(s.map(h=>{const f=r.filter(N=>N.type===h.name),g={name:h.name,options:h.options,storage:h.storage,editor:e},x=n.reduce((N,M)=>{const I=ne(M,"extendNodeSchema",g);return{...N,...I?I(h):{}}},{}),w=Dx({...x,content:ge(ne(h,"content",g)),marks:ge(ne(h,"marks",g)),group:ge(ne(h,"group",g)),inline:ge(ne(h,"inline",g)),atom:ge(ne(h,"atom",g)),selectable:ge(ne(h,"selectable",g)),draggable:ge(ne(h,"draggable",g)),code:ge(ne(h,"code",g)),whitespace:ge(ne(h,"whitespace",g)),linebreakReplacement:ge(ne(h,"linebreakReplacement",g)),defining:ge(ne(h,"defining",g)),isolating:ge(ne(h,"isolating",g)),attrs:Object.fromEntries(f.map(N=>{var M;return[N.name,{default:(M=N==null?void 0:N.attribute)===null||M===void 0?void 0:M.default}]}))}),b=ge(ne(h,"parseHTML",g));b&&(w.parseDOM=b.map(N=>Lx(N,f)));const k=ne(h,"renderHTML",g);k&&(w.toDOM=N=>k({node:N,HTMLAttributes:_f(N,f)}));const C=ne(h,"renderText",g);return C&&(w.toText=C),[h.name,w]})),u=Object.fromEntries(i.map(h=>{const f=r.filter(C=>C.type===h.name),g={name:h.name,options:h.options,storage:h.storage,editor:e},x=n.reduce((C,N)=>{const M=ne(N,"extendMarkSchema",g);return{...C,...M?M(h):{}}},{}),w=Dx({...x,inclusive:ge(ne(h,"inclusive",g)),excludes:ge(ne(h,"excludes",g)),group:ge(ne(h,"group",g)),spanning:ge(ne(h,"spanning",g)),code:ge(ne(h,"code",g)),attrs:Object.fromEntries(f.map(C=>{var N;return[C.name,{default:(N=C==null?void 0:C.attribute)===null||N===void 0?void 0:N.default}]}))}),b=ge(ne(h,"parseHTML",g));b&&(w.parseDOM=b.map(C=>Lx(C,f)));const k=ne(h,"renderHTML",g);return k&&(w.toDOM=C=>k({mark:C,HTMLAttributes:_f(C,f)})),[h.name,w]}));return new E1({topNode:l,nodes:c,marks:u})}function $h(n,e){return e.nodes[n]||e.marks[n]||null}function zx(n,e){return Array.isArray(e)?e.some(t=>(typeof t=="string"?t:t.name)===n.name):e}function Bp(n,e){const t=Gs.fromSchema(e).serializeFragment(n),s=document.implementation.createHTMLDocument().createElement("div");return s.appendChild(t),s.innerHTML}const B_=(n,e=500)=>{let t="";const r=n.parentOffset;return n.parent.nodesBetween(Math.max(0,r-e),r,(s,i,l,c)=>{var u,h;const f=((h=(u=s.type.spec).toText)===null||h===void 0?void 0:h.call(u,{node:s,pos:i,parent:l,index:c}))||s.textContent||"%leaf%";t+=s.isAtom&&!s.isText?f:f.slice(0,Math.max(0,r-i))}),t};function Fp(n){return Object.prototype.toString.call(n)==="[object RegExp]"}class bu{constructor(e){this.find=e.find,this.handler=e.handler}}const F_=(n,e)=>{if(Fp(e))return e.exec(n);const t=e(n);if(!t)return null;const r=[t.text];return r.index=t.index,r.input=n,r.data=t.data,t.replaceWith&&(t.text.includes(t.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(t.replaceWith)),r};function ec(n){var e;const{editor:t,from:r,to:s,text:i,rules:l,plugin:c}=n,{view:u}=t;if(u.composing)return!1;const h=u.state.doc.resolve(r);if(h.parent.type.spec.code||!((e=h.nodeBefore||h.nodeAfter)===null||e===void 0)&&e.marks.find(x=>x.type.spec.code))return!1;let f=!1;const g=B_(h)+i;return l.forEach(x=>{if(f)return;const w=F_(g,x.find);if(!w)return;const b=u.state.tr,k=xu({state:u.state,transaction:b}),C={from:r-(w[0].length-i.length),to:s},{commands:N,chain:M,can:I}=new vu({editor:t,state:k});x.handler({state:k,range:C,match:w,commands:N,chain:M,can:I})===null||!b.steps.length||(b.setMeta(c,{transform:b,from:r,to:s,text:i}),u.dispatch(b),f=!0)}),f}function U_(n){const{editor:e,rules:t}=n,r=new ct({state:{init(){return null},apply(s,i,l){const c=s.getMeta(r);if(c)return c;const u=s.getMeta("applyInputRules");return!!u&&setTimeout(()=>{let{text:f}=u;typeof f=="string"?f=f:f=Bp(z.from(f),l.schema);const{from:g}=u,x=g+f.length;ec({editor:e,from:g,to:x,text:f,rules:t,plugin:r})}),s.selectionSet||s.docChanged?null:i}},props:{handleTextInput(s,i,l,c){return ec({editor:e,from:i,to:l,text:c,rules:t,plugin:r})},handleDOMEvents:{compositionend:s=>(setTimeout(()=>{const{$cursor:i}=s.state.selection;i&&ec({editor:e,from:i.pos,to:i.pos,text:"",rules:t,plugin:r})}),!1)},handleKeyDown(s,i){if(i.key!=="Enter")return!1;const{$cursor:l}=s.state.selection;return l?ec({editor:e,from:l.pos,to:l.pos,text:`
`,rules:t,plugin:r}):!1}},isInputRules:!0});return r}function H_(n){return Object.prototype.toString.call(n).slice(8,-1)}function tc(n){return H_(n)!=="Object"?!1:n.constructor===Object&&Object.getPrototypeOf(n)===Object.prototype}function ku(n,e){const t={...n};return tc(n)&&tc(e)&&Object.keys(e).forEach(r=>{tc(e[r])&&tc(n[r])?t[r]=ku(n[r],e[r]):t[r]=e[r]}),t}class wn{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=ge(ne(this,"addOptions",{name:this.name}))),this.storage=ge(ne(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new wn(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>ku(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new wn(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=ge(ne(t,"addOptions",{name:t.name})),t.storage=ge(ne(t,"addStorage",{name:t.name,options:t.options})),t}static handleExit({editor:e,mark:t}){const{tr:r}=e.state,s=e.state.selection.$from;if(s.pos===s.end()){const l=s.marks();if(!!!l.find(h=>(h==null?void 0:h.type.name)===t.name))return!1;const u=l.find(h=>(h==null?void 0:h.type.name)===t.name);return u&&r.removeStoredMark(u),r.insertText(" ",s.pos),e.view.dispatch(r),!0}return!1}}function V_(n){return typeof n=="number"}class zw{constructor(e){this.find=e.find,this.handler=e.handler}}const W_=(n,e,t)=>{if(Fp(e))return[...n.matchAll(e)];const r=e(n,t);return r?r.map(s=>{const i=[s.text];return i.index=s.index,i.input=n,i.data=s.data,s.replaceWith&&(s.text.includes(s.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),i.push(s.replaceWith)),i}):[]};function q_(n){const{editor:e,state:t,from:r,to:s,rule:i,pasteEvent:l,dropEvent:c}=n,{commands:u,chain:h,can:f}=new vu({editor:e,state:t}),g=[];return t.doc.nodesBetween(r,s,(w,b)=>{if(!w.isTextblock||w.type.spec.code)return;const k=Math.max(r,b),C=Math.min(s,b+w.content.size),N=w.textBetween(k-b,C-b,void 0,"￼");W_(N,i.find,l).forEach(I=>{if(I.index===void 0)return;const V=k+I.index+1,U=V+I[0].length,D={from:t.tr.mapping.map(V),to:t.tr.mapping.map(U)},B=i.handler({state:t,range:D,match:I,commands:u,chain:h,can:f,pasteEvent:l,dropEvent:c});g.push(B)})}),g.every(w=>w!==null)}let nc=null;const K_=n=>{var e;const t=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=t.clipboardData)===null||e===void 0||e.setData("text/html",n),t};function J_(n){const{editor:e,rules:t}=n;let r=null,s=!1,i=!1,l=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,c;try{c=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{c=null}const u=({state:f,from:g,to:x,rule:w,pasteEvt:b})=>{const k=f.tr,C=xu({state:f,transaction:k});if(!(!q_({editor:e,state:C,from:Math.max(g-1,0),to:x.b-1,rule:w,pasteEvent:b,dropEvent:c})||!k.steps.length)){try{c=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{c=null}return l=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,k}};return t.map(f=>new ct({view(g){const x=b=>{var k;r=!((k=g.dom.parentElement)===null||k===void 0)&&k.contains(b.target)?g.dom.parentElement:null,r&&(nc=e)},w=()=>{nc&&(nc=null)};return window.addEventListener("dragstart",x),window.addEventListener("dragend",w),{destroy(){window.removeEventListener("dragstart",x),window.removeEventListener("dragend",w)}}},props:{handleDOMEvents:{drop:(g,x)=>{if(i=r===g.dom.parentElement,c=x,!i){const w=nc;w&&setTimeout(()=>{const b=w.state.selection;b&&w.commands.deleteRange({from:b.from,to:b.to})},10)}return!1},paste:(g,x)=>{var w;const b=(w=x.clipboardData)===null||w===void 0?void 0:w.getData("text/html");return l=x,s=!!(b!=null&&b.includes("data-pm-slice")),!1}}},appendTransaction:(g,x,w)=>{const b=g[0],k=b.getMeta("uiEvent")==="paste"&&!s,C=b.getMeta("uiEvent")==="drop"&&!i,N=b.getMeta("applyPasteRules"),M=!!N;if(!k&&!C&&!M)return;if(M){let{text:U}=N;typeof U=="string"?U=U:U=Bp(z.from(U),w.schema);const{from:D}=N,B=D+U.length,oe=K_(U);return u({rule:f,state:w,from:D,to:{b:B},pasteEvt:oe})}const I=x.doc.content.findDiffStart(w.doc.content),V=x.doc.content.findDiffEnd(w.doc.content);if(!(!V_(I)||!V||I===V.b))return u({rule:f,state:w,from:I,to:V,pasteEvt:l})}}))}function G_(n){const e=n.filter((t,r)=>n.indexOf(t)!==r);return Array.from(new Set(e))}class Li{constructor(e,t){this.splittableMarks=[],this.editor=t,this.extensions=Li.resolve(e),this.schema=$_(this.extensions,t),this.setupExtensions()}static resolve(e){const t=Li.sort(Li.flatten(e)),r=G_(t.map(s=>s.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(s=>`'${s}'`).join(", ")}]. This can lead to issues.`),t}static flatten(e){return e.map(t=>{const r={name:t.name,options:t.options,storage:t.storage},s=ne(t,"addExtensions",r);return s?[t,...this.flatten(s())]:t}).flat(10)}static sort(e){return e.sort((r,s)=>{const i=ne(r,"priority")||100,l=ne(s,"priority")||100;return i>l?-1:i<l?1:0})}get commands(){return this.extensions.reduce((e,t)=>{const r={name:t.name,options:t.options,storage:t.storage,editor:this.editor,type:$h(t.name,this.schema)},s=ne(t,"addCommands",r);return s?{...e,...s()}:e},{})}get plugins(){const{editor:e}=this,t=Li.sort([...this.extensions].reverse()),r=[],s=[],i=t.map(l=>{const c={name:l.name,options:l.options,storage:l.storage,editor:e,type:$h(l.name,this.schema)},u=[],h=ne(l,"addKeyboardShortcuts",c);let f={};if(l.type==="mark"&&ne(l,"exitable",c)&&(f.ArrowRight=()=>wn.handleExit({editor:e,mark:l})),h){const k=Object.fromEntries(Object.entries(h()).map(([C,N])=>[C,()=>N({editor:e})]));f={...f,...k}}const g=m_(f);u.push(g);const x=ne(l,"addInputRules",c);zx(l,e.options.enableInputRules)&&x&&r.push(...x());const w=ne(l,"addPasteRules",c);zx(l,e.options.enablePasteRules)&&w&&s.push(...w());const b=ne(l,"addProseMirrorPlugins",c);if(b){const k=b();u.push(...k)}return u}).flat();return[U_({editor:e,rules:r}),...J_({editor:e,rules:s}),...i]}get attributes(){return Lw(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:t}=wu(this.extensions);return Object.fromEntries(t.filter(r=>!!ne(r,"addNodeView")).map(r=>{const s=this.attributes.filter(u=>u.type===r.name),i={name:r.name,options:r.options,storage:r.storage,editor:e,type:xt(r.name,this.schema)},l=ne(r,"addNodeView",i);if(!l)return[];const c=(u,h,f,g,x)=>{const w=_f(u,s);return l()({node:u,view:h,getPos:f,decorations:g,innerDecorations:x,editor:e,extension:r,HTMLAttributes:w})};return[r.name,c]}))}setupExtensions(){this.extensions.forEach(e=>{var t;this.editor.extensionStorage[e.name]=e.storage;const r={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:$h(e.name,this.schema)};e.type==="mark"&&(!((t=ge(ne(e,"keepOnSplit",r)))!==null&&t!==void 0)||t)&&this.splittableMarks.push(e.name);const s=ne(e,"onBeforeCreate",r),i=ne(e,"onCreate",r),l=ne(e,"onUpdate",r),c=ne(e,"onSelectionUpdate",r),u=ne(e,"onTransaction",r),h=ne(e,"onFocus",r),f=ne(e,"onBlur",r),g=ne(e,"onDestroy",r);s&&this.editor.on("beforeCreate",s),i&&this.editor.on("create",i),l&&this.editor.on("update",l),c&&this.editor.on("selectionUpdate",c),u&&this.editor.on("transaction",u),h&&this.editor.on("focus",h),f&&this.editor.on("blur",f),g&&this.editor.on("destroy",g)})}}class at{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=ge(ne(this,"addOptions",{name:this.name}))),this.storage=ge(ne(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new at(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>ku(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new at({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=ge(ne(t,"addOptions",{name:t.name})),t.storage=ge(ne(t,"addStorage",{name:t.name,options:t.options})),t}}function $w(n,e,t){const{from:r,to:s}=e,{blockSeparator:i=`

`,textSerializers:l={}}=t||{};let c="";return n.nodesBetween(r,s,(u,h,f,g)=>{var x;u.isBlock&&h>r&&(c+=i);const w=l==null?void 0:l[u.type.name];if(w)return f&&(c+=w({node:u,pos:h,parent:f,index:g,range:e})),!1;u.isText&&(c+=(x=u==null?void 0:u.text)===null||x===void 0?void 0:x.slice(Math.max(r,h)-h,s-h))}),c}function Bw(n){return Object.fromEntries(Object.entries(n.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}const Q_=at.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new ct({key:new It("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:n}=this,{state:e,schema:t}=n,{doc:r,selection:s}=e,{ranges:i}=s,l=Math.min(...i.map(f=>f.$from.pos)),c=Math.max(...i.map(f=>f.$to.pos)),u=Bw(t);return $w(r,{from:l,to:c},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:u})}}})]}}),Y_=()=>({editor:n,view:e})=>(requestAnimationFrame(()=>{var t;n.isDestroyed||(e.dom.blur(),(t=window==null?void 0:window.getSelection())===null||t===void 0||t.removeAllRanges())}),!0),X_=(n=!1)=>({commands:e})=>e.setContent("",n),Z_=()=>({state:n,tr:e,dispatch:t})=>{const{selection:r}=e,{ranges:s}=r;return t&&s.forEach(({$from:i,$to:l})=>{n.doc.nodesBetween(i.pos,l.pos,(c,u)=>{if(c.type.isText)return;const{doc:h,mapping:f}=e,g=h.resolve(f.map(u)),x=h.resolve(f.map(u+c.nodeSize)),w=g.blockRange(x);if(!w)return;const b=Zi(w);if(c.type.isTextblock){const{defaultType:k}=g.parent.contentMatchAt(g.index());e.setNodeMarkup(w.start,k)}(b||b===0)&&e.lift(w,b)})}),!0},eA=n=>e=>n(e),tA=()=>({state:n,dispatch:e})=>Ow(n,e),nA=(n,e)=>({editor:t,tr:r})=>{const{state:s}=t,i=s.doc.slice(n.from,n.to);r.deleteRange(n.from,n.to);const l=r.mapping.map(e);return r.insert(l,i.content),r.setSelection(new ce(r.doc.resolve(l-1))),!0},rA=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,r=t.$anchor.node();if(r.content.size>0)return!1;const s=n.selection.$anchor;for(let i=s.depth;i>0;i-=1)if(s.node(i).type===r.type){if(e){const c=s.before(i),u=s.after(i);n.delete(c,u).scrollIntoView()}return!0}return!1},sA=n=>({tr:e,state:t,dispatch:r})=>{const s=xt(n,t.schema),i=e.selection.$anchor;for(let l=i.depth;l>0;l-=1)if(i.node(l).type===s){if(r){const u=i.before(l),h=i.after(l);e.delete(u,h).scrollIntoView()}return!0}return!1},iA=n=>({tr:e,dispatch:t})=>{const{from:r,to:s}=n;return t&&e.delete(r,s),!0},oA=()=>({state:n,dispatch:e})=>Ip(n,e),lA=()=>({commands:n})=>n.keyboardShortcut("Enter"),aA=()=>({state:n,dispatch:e})=>b_(n,e);function Rc(n,e,t={strict:!0}){const r=Object.keys(e);return r.length?r.every(s=>t.strict?e[s]===n[s]:Fp(e[s])?e[s].test(n[s]):e[s]===n[s]):!0}function Fw(n,e,t={}){return n.find(r=>r.type===e&&Rc(Object.fromEntries(Object.keys(t).map(s=>[s,r.attrs[s]])),t))}function $x(n,e,t={}){return!!Fw(n,e,t)}function Up(n,e,t){var r;if(!n||!e)return;let s=n.parent.childAfter(n.parentOffset);if((!s.node||!s.node.marks.some(f=>f.type===e))&&(s=n.parent.childBefore(n.parentOffset)),!s.node||!s.node.marks.some(f=>f.type===e)||(t=t||((r=s.node.marks[0])===null||r===void 0?void 0:r.attrs),!Fw([...s.node.marks],e,t)))return;let l=s.index,c=n.start()+s.offset,u=l+1,h=c+s.node.nodeSize;for(;l>0&&$x([...n.parent.child(l-1).marks],e,t);)l-=1,c-=n.parent.child(l).nodeSize;for(;u<n.parent.childCount&&$x([...n.parent.child(u).marks],e,t);)h+=n.parent.child(u).nodeSize,u+=1;return{from:c,to:h}}function cs(n,e){if(typeof n=="string"){if(!e.marks[n])throw Error(`There is no mark type named '${n}'. Maybe you forgot to add the extension?`);return e.marks[n]}return n}const cA=(n,e={})=>({tr:t,state:r,dispatch:s})=>{const i=cs(n,r.schema),{doc:l,selection:c}=t,{$from:u,from:h,to:f}=c;if(s){const g=Up(u,i,e);if(g&&g.from<=h&&g.to>=f){const x=ce.create(l,g.from,g.to);t.setSelection(x)}}return!0},uA=n=>e=>{const t=typeof n=="function"?n(e):n;for(let r=0;r<t.length;r+=1)if(t[r](e))return!0;return!1};function Uw(n){return n instanceof ce}function Ps(n=0,e=0,t=0){return Math.min(Math.max(n,e),t)}function Hw(n,e=null){if(!e)return null;const t=he.atStart(n),r=he.atEnd(n);if(e==="start"||e===!0)return t;if(e==="end")return r;const s=t.from,i=r.to;return e==="all"?ce.create(n,Ps(0,s,i),Ps(n.content.size,s,i)):ce.create(n,Ps(e,s,i),Ps(e,s,i))}function dA(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function Hp(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const hA=(n=null,e={})=>({editor:t,view:r,tr:s,dispatch:i})=>{e={scrollIntoView:!0,...e};const l=()=>{(Hp()||dA())&&r.dom.focus(),requestAnimationFrame(()=>{t.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&t.commands.scrollIntoView())})};if(r.hasFocus()&&n===null||n===!1)return!0;if(i&&n===null&&!Uw(t.state.selection))return l(),!0;const c=Hw(s.doc,n)||t.state.selection,u=t.state.selection.eq(c);return i&&(u||s.setSelection(c),u&&s.storedMarks&&s.setStoredMarks(s.storedMarks),l()),!0},fA=(n,e)=>t=>n.every((r,s)=>e(r,{...t,index:s})),pA=(n,e)=>({tr:t,commands:r})=>r.insertContentAt({from:t.selection.from,to:t.selection.to},n,e),Vw=n=>{const e=n.childNodes;for(let t=e.length-1;t>=0;t-=1){const r=e[t];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?n.removeChild(r):r.nodeType===1&&Vw(r)}return n};function rc(n){const e=`<body>${n}</body>`,t=new window.DOMParser().parseFromString(e,"text/html").body;return Vw(t)}function Pc(n,e,t){if(n instanceof Xr||n instanceof z)return n;t={slice:!0,parseOptions:{},...t};const r=typeof n=="object"&&n!==null,s=typeof n=="string";if(r)try{if(Array.isArray(n)&&n.length>0)return z.fromArray(n.map(c=>e.nodeFromJSON(c)));const l=e.nodeFromJSON(n);return t.errorOnInvalidContent&&l.check(),l}catch(i){if(t.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:i});return console.warn("[tiptap warn]: Invalid content.","Passed value:",n,"Error:",i),Pc("",e,t)}if(s){if(t.errorOnInvalidContent){let l=!1,c="";const u=new E1({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:h=>(l=!0,c=typeof h=="string"?h:h.outerHTML,null)}]}})});if(t.slice?Zr.fromSchema(u).parseSlice(rc(n),t.parseOptions):Zr.fromSchema(u).parse(rc(n),t.parseOptions),t.errorOnInvalidContent&&l)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${c}`)})}const i=Zr.fromSchema(e);return t.slice?i.parseSlice(rc(n),t.parseOptions).content:i.parse(rc(n),t.parseOptions)}return Pc("",e,t)}function mA(n,e,t){const r=n.steps.length-1;if(r<e)return;const s=n.steps[r];if(!(s instanceof mt||s instanceof gt))return;const i=n.mapping.maps[r];let l=0;i.forEach((c,u,h,f)=>{l===0&&(l=f)}),n.setSelection(he.near(n.doc.resolve(l),t))}const gA=n=>!("type"in n),yA=(n,e,t)=>({tr:r,dispatch:s,editor:i})=>{var l;if(s){t={parseOptions:i.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...t};let c;try{c=Pc(e,i.schema,{parseOptions:{preserveWhitespace:"full",...t.parseOptions},errorOnInvalidContent:(l=t.errorOnInvalidContent)!==null&&l!==void 0?l:i.options.enableContentCheck})}catch(b){return i.emit("contentError",{editor:i,error:b,disableCollaboration:()=>{i.storage.collaboration&&(i.storage.collaboration.isDisabled=!0)}}),!1}let{from:u,to:h}=typeof n=="number"?{from:n,to:n}:{from:n.from,to:n.to},f=!0,g=!0;if((gA(c)?c:[c]).forEach(b=>{b.check(),f=f?b.isText&&b.marks.length===0:!1,g=g?b.isBlock:!1}),u===h&&g){const{parent:b}=r.doc.resolve(u);b.isTextblock&&!b.type.spec.code&&!b.childCount&&(u-=1,h+=1)}let w;if(f){if(Array.isArray(e))w=e.map(b=>b.text||"").join("");else if(e instanceof z){let b="";e.forEach(k=>{k.text&&(b+=k.text)}),w=b}else typeof e=="object"&&e&&e.text?w=e.text:w=e;r.insertText(w,u,h)}else w=c,r.replaceWith(u,h,w);t.updateSelection&&mA(r,r.steps.length-1,-1),t.applyInputRules&&r.setMeta("applyInputRules",{from:u,text:w}),t.applyPasteRules&&r.setMeta("applyPasteRules",{from:u,text:w})}return!0},xA=()=>({state:n,dispatch:e})=>x_(n,e),vA=()=>({state:n,dispatch:e})=>v_(n,e),wA=()=>({state:n,dispatch:e})=>Nw(n,e),bA=()=>({state:n,dispatch:e})=>_w(n,e),kA=()=>({state:n,dispatch:e,tr:t})=>{try{const r=hu(n.doc,n.selection.$from.pos,-1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}},SA=()=>({state:n,dispatch:e,tr:t})=>{try{const r=hu(n.doc,n.selection.$from.pos,1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}},CA=()=>({state:n,dispatch:e})=>g_(n,e),NA=()=>({state:n,dispatch:e})=>y_(n,e);function Ww(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function EA(n){const e=n.split(/-(?!$)/);let t=e[e.length-1];t==="Space"&&(t=" ");let r,s,i,l;for(let c=0;c<e.length-1;c+=1){const u=e[c];if(/^(cmd|meta|m)$/i.test(u))l=!0;else if(/^a(lt)?$/i.test(u))r=!0;else if(/^(c|ctrl|control)$/i.test(u))s=!0;else if(/^s(hift)?$/i.test(u))i=!0;else if(/^mod$/i.test(u))Hp()||Ww()?l=!0:s=!0;else throw new Error(`Unrecognized modifier name: ${u}`)}return r&&(t=`Alt-${t}`),s&&(t=`Ctrl-${t}`),l&&(t=`Meta-${t}`),i&&(t=`Shift-${t}`),t}const jA=n=>({editor:e,view:t,tr:r,dispatch:s})=>{const i=EA(n).split(/-(?!$)/),l=i.find(h=>!["Alt","Ctrl","Meta","Shift"].includes(h)),c=new KeyboardEvent("keydown",{key:l==="Space"?" ":l,altKey:i.includes("Alt"),ctrlKey:i.includes("Ctrl"),metaKey:i.includes("Meta"),shiftKey:i.includes("Shift"),bubbles:!0,cancelable:!0}),u=e.captureTransaction(()=>{t.someProp("handleKeyDown",h=>h(t,c))});return u==null||u.steps.forEach(h=>{const f=h.map(r.mapping);f&&s&&r.maybeStep(f)}),!0};function Sl(n,e,t={}){const{from:r,to:s,empty:i}=n.selection,l=e?xt(e,n.schema):null,c=[];n.doc.nodesBetween(r,s,(g,x)=>{if(g.isText)return;const w=Math.max(r,x),b=Math.min(s,x+g.nodeSize);c.push({node:g,from:w,to:b})});const u=s-r,h=c.filter(g=>l?l.name===g.node.type.name:!0).filter(g=>Rc(g.node.attrs,t,{strict:!1}));return i?!!h.length:h.reduce((g,x)=>g+x.to-x.from,0)>=u}const TA=(n,e={})=>({state:t,dispatch:r})=>{const s=xt(n,t.schema);return Sl(t,s,e)?w_(t,r):!1},_A=()=>({state:n,dispatch:e})=>Rw(n,e),AA=n=>({state:e,dispatch:t})=>{const r=xt(n,e.schema);return O_(r)(e,t)},MA=()=>({state:n,dispatch:e})=>Mw(n,e);function Su(n,e){return e.nodes[n]?"node":e.marks[n]?"mark":null}function Bx(n,e){const t=typeof e=="string"?[e]:e;return Object.keys(n).reduce((r,s)=>(t.includes(s)||(r[s]=n[s]),r),{})}const OA=(n,e)=>({tr:t,state:r,dispatch:s})=>{let i=null,l=null;const c=Su(typeof n=="string"?n:n.name,r.schema);return c?(c==="node"&&(i=xt(n,r.schema)),c==="mark"&&(l=cs(n,r.schema)),s&&t.selection.ranges.forEach(u=>{r.doc.nodesBetween(u.$from.pos,u.$to.pos,(h,f)=>{i&&i===h.type&&t.setNodeMarkup(f,void 0,Bx(h.attrs,e)),l&&h.marks.length&&h.marks.forEach(g=>{l===g.type&&t.addMark(f,f+h.nodeSize,l.create(Bx(g.attrs,e)))})})}),!0):!1},RA=()=>({tr:n,dispatch:e})=>(e&&n.scrollIntoView(),!0),PA=()=>({tr:n,dispatch:e})=>{if(e){const t=new on(n.doc);n.setSelection(t)}return!0},IA=()=>({state:n,dispatch:e})=>jw(n,e),LA=()=>({state:n,dispatch:e})=>Aw(n,e),DA=()=>({state:n,dispatch:e})=>C_(n,e),zA=()=>({state:n,dispatch:e})=>j_(n,e),$A=()=>({state:n,dispatch:e})=>E_(n,e);function Af(n,e,t={},r={}){return Pc(n,e,{slice:!1,parseOptions:t,errorOnInvalidContent:r.errorOnInvalidContent})}const BA=(n,e=!1,t={},r={})=>({editor:s,tr:i,dispatch:l,commands:c})=>{var u,h;const{doc:f}=i;if(t.preserveWhitespace!=="full"){const g=Af(n,s.schema,t,{errorOnInvalidContent:(u=r.errorOnInvalidContent)!==null&&u!==void 0?u:s.options.enableContentCheck});return l&&i.replaceWith(0,f.content.size,g).setMeta("preventUpdate",!e),!0}return l&&i.setMeta("preventUpdate",!e),c.insertContentAt({from:0,to:f.content.size},n,{parseOptions:t,errorOnInvalidContent:(h=r.errorOnInvalidContent)!==null&&h!==void 0?h:s.options.enableContentCheck})};function qw(n,e){const t=cs(e,n.schema),{from:r,to:s,empty:i}=n.selection,l=[];i?(n.storedMarks&&l.push(...n.storedMarks),l.push(...n.selection.$head.marks())):n.doc.nodesBetween(r,s,u=>{l.push(...u.marks)});const c=l.find(u=>u.type.name===t.name);return c?{...c.attrs}:{}}function FA(n,e){const t=new Sp(n);return e.forEach(r=>{r.steps.forEach(s=>{t.step(s)})}),t}function UA(n){for(let e=0;e<n.edgeCount;e+=1){const{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}function HA(n,e,t){const r=[];return n.nodesBetween(e.from,e.to,(s,i)=>{t(s)&&r.push({node:s,pos:i})}),r}function Kw(n,e){for(let t=n.depth;t>0;t-=1){const r=n.node(t);if(e(r))return{pos:t>0?n.before(t):0,start:n.start(t),depth:t,node:r}}}function Vp(n){return e=>Kw(e.$from,n)}function VA(n,e){const t={from:0,to:n.content.size};return $w(n,t,e)}function WA(n,e){const t=xt(e,n.schema),{from:r,to:s}=n.selection,i=[];n.doc.nodesBetween(r,s,c=>{i.push(c)});const l=i.reverse().find(c=>c.type.name===t.name);return l?{...l.attrs}:{}}function Jw(n,e){const t=Su(typeof e=="string"?e:e.name,n.schema);return t==="node"?WA(n,e):t==="mark"?qw(n,e):{}}function qA(n,e=JSON.stringify){const t={};return n.filter(r=>{const s=e(r);return Object.prototype.hasOwnProperty.call(t,s)?!1:t[s]=!0})}function KA(n){const e=qA(n);return e.length===1?e:e.filter((t,r)=>!e.filter((i,l)=>l!==r).some(i=>t.oldRange.from>=i.oldRange.from&&t.oldRange.to<=i.oldRange.to&&t.newRange.from>=i.newRange.from&&t.newRange.to<=i.newRange.to))}function JA(n){const{mapping:e,steps:t}=n,r=[];return e.maps.forEach((s,i)=>{const l=[];if(s.ranges.length)s.forEach((c,u)=>{l.push({from:c,to:u})});else{const{from:c,to:u}=t[i];if(c===void 0||u===void 0)return;l.push({from:c,to:u})}l.forEach(({from:c,to:u})=>{const h=e.slice(i).map(c,-1),f=e.slice(i).map(u),g=e.invert().map(h,-1),x=e.invert().map(f);r.push({oldRange:{from:g,to:x},newRange:{from:h,to:f}})})}),KA(r)}function Wp(n,e,t){const r=[];return n===e?t.resolve(n).marks().forEach(s=>{const i=t.resolve(n),l=Up(i,s.type);l&&r.push({mark:s,...l})}):t.nodesBetween(n,e,(s,i)=>{!s||(s==null?void 0:s.nodeSize)===void 0||r.push(...s.marks.map(l=>({from:i,to:i+s.nodeSize,mark:l})))}),r}function mc(n,e,t){return Object.fromEntries(Object.entries(t).filter(([r])=>{const s=n.find(i=>i.type===e&&i.name===r);return s?s.attribute.keepOnSplit:!1}))}function Mf(n,e,t={}){const{empty:r,ranges:s}=n.selection,i=e?cs(e,n.schema):null;if(r)return!!(n.storedMarks||n.selection.$from.marks()).filter(g=>i?i.name===g.type.name:!0).find(g=>Rc(g.attrs,t,{strict:!1}));let l=0;const c=[];if(s.forEach(({$from:g,$to:x})=>{const w=g.pos,b=x.pos;n.doc.nodesBetween(w,b,(k,C)=>{if(!k.isText&&!k.marks.length)return;const N=Math.max(w,C),M=Math.min(b,C+k.nodeSize),I=M-N;l+=I,c.push(...k.marks.map(V=>({mark:V,from:N,to:M})))})}),l===0)return!1;const u=c.filter(g=>i?i.name===g.mark.type.name:!0).filter(g=>Rc(g.mark.attrs,t,{strict:!1})).reduce((g,x)=>g+x.to-x.from,0),h=c.filter(g=>i?g.mark.type!==i&&g.mark.type.excludes(i):!0).reduce((g,x)=>g+x.to-x.from,0);return(u>0?u+h:u)>=l}function GA(n,e,t={}){if(!e)return Sl(n,null,t)||Mf(n,null,t);const r=Su(e,n.schema);return r==="node"?Sl(n,e,t):r==="mark"?Mf(n,e,t):!1}function Fx(n,e){const{nodeExtensions:t}=wu(e),r=t.find(l=>l.name===n);if(!r)return!1;const s={name:r.name,options:r.options,storage:r.storage},i=ge(ne(r,"group",s));return typeof i!="string"?!1:i.split(" ").includes("list")}function qp(n,{checkChildren:e=!0,ignoreWhitespace:t=!1}={}){var r;if(t){if(n.type.name==="hardBreak")return!0;if(n.isText)return/^\s*$/m.test((r=n.text)!==null&&r!==void 0?r:"")}if(n.isText)return!n.text;if(n.isAtom||n.isLeaf)return!1;if(n.content.childCount===0)return!0;if(e){let s=!0;return n.content.forEach(i=>{s!==!1&&(qp(i,{ignoreWhitespace:t,checkChildren:e})||(s=!1))}),s}return!1}function QA(n){return n instanceof ae}function YA(n,e,t){var r;const{selection:s}=e;let i=null;if(Uw(s)&&(i=s.$cursor),i){const c=(r=n.storedMarks)!==null&&r!==void 0?r:i.marks();return!!t.isInSet(c)||!c.some(u=>u.type.excludes(t))}const{ranges:l}=s;return l.some(({$from:c,$to:u})=>{let h=c.depth===0?n.doc.inlineContent&&n.doc.type.allowsMarkType(t):!1;return n.doc.nodesBetween(c.pos,u.pos,(f,g,x)=>{if(h)return!1;if(f.isInline){const w=!x||x.type.allowsMarkType(t),b=!!t.isInSet(f.marks)||!f.marks.some(k=>k.type.excludes(t));h=w&&b}return!h}),h})}const XA=(n,e={})=>({tr:t,state:r,dispatch:s})=>{const{selection:i}=t,{empty:l,ranges:c}=i,u=cs(n,r.schema);if(s)if(l){const h=qw(r,u);t.addStoredMark(u.create({...h,...e}))}else c.forEach(h=>{const f=h.$from.pos,g=h.$to.pos;r.doc.nodesBetween(f,g,(x,w)=>{const b=Math.max(w,f),k=Math.min(w+x.nodeSize,g);x.marks.find(N=>N.type===u)?x.marks.forEach(N=>{u===N.type&&t.addMark(b,k,u.create({...N.attrs,...e}))}):t.addMark(b,k,u.create(e))})});return YA(r,t,u)},ZA=(n,e)=>({tr:t})=>(t.setMeta(n,e),!0),eM=(n,e={})=>({state:t,dispatch:r,chain:s})=>{const i=xt(n,t.schema);let l;return t.selection.$anchor.sameParent(t.selection.$head)&&(l=t.selection.$anchor.parent.attrs),i.isTextblock?s().command(({commands:c})=>Ix(i,{...l,...e})(t)?!0:c.clearNodes()).command(({state:c})=>Ix(i,{...l,...e})(c,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},tM=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,s=Ps(n,0,r.content.size),i=ae.create(r,s);e.setSelection(i)}return!0},nM=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,{from:s,to:i}=typeof n=="number"?{from:n,to:n}:n,l=ce.atStart(r).from,c=ce.atEnd(r).to,u=Ps(s,l,c),h=Ps(i,l,c),f=ce.create(r,u,h);e.setSelection(f)}return!0},rM=n=>({state:e,dispatch:t})=>{const r=xt(n,e.schema);return I_(r)(e,t)};function Ux(n,e){const t=n.storedMarks||n.selection.$to.parentOffset&&n.selection.$from.marks();if(t){const r=t.filter(s=>e==null?void 0:e.includes(s.type.name));n.tr.ensureMarks(r)}}const sM=({keepMarks:n=!0}={})=>({tr:e,state:t,dispatch:r,editor:s})=>{const{selection:i,doc:l}=e,{$from:c,$to:u}=i,h=s.extensionManager.attributes,f=mc(h,c.node().type.name,c.node().attrs);if(i instanceof ae&&i.node.isBlock)return!c.parentOffset||!hr(l,c.pos)?!1:(r&&(n&&Ux(t,s.extensionManager.splittableMarks),e.split(c.pos).scrollIntoView()),!0);if(!c.parent.isBlock)return!1;const g=u.parentOffset===u.parent.content.size,x=c.depth===0?void 0:UA(c.node(-1).contentMatchAt(c.indexAfter(-1)));let w=g&&x?[{type:x,attrs:f}]:void 0,b=hr(e.doc,e.mapping.map(c.pos),1,w);if(!w&&!b&&hr(e.doc,e.mapping.map(c.pos),1,x?[{type:x}]:void 0)&&(b=!0,w=x?[{type:x,attrs:f}]:void 0),r){if(b&&(i instanceof ce&&e.deleteSelection(),e.split(e.mapping.map(c.pos),1,w),x&&!g&&!c.parentOffset&&c.parent.type!==x)){const k=e.mapping.map(c.before()),C=e.doc.resolve(k);c.node(-1).canReplaceWith(C.index(),C.index()+1,x)&&e.setNodeMarkup(e.mapping.map(c.before()),x)}n&&Ux(t,s.extensionManager.splittableMarks),e.scrollIntoView()}return b},iM=(n,e={})=>({tr:t,state:r,dispatch:s,editor:i})=>{var l;const c=xt(n,r.schema),{$from:u,$to:h}=r.selection,f=r.selection.node;if(f&&f.isBlock||u.depth<2||!u.sameParent(h))return!1;const g=u.node(-1);if(g.type!==c)return!1;const x=i.extensionManager.attributes;if(u.parent.content.size===0&&u.node(-1).childCount===u.indexAfter(-1)){if(u.depth===2||u.node(-3).type!==c||u.index(-2)!==u.node(-2).childCount-1)return!1;if(s){let N=z.empty;const M=u.index(-1)?1:u.index(-2)?2:3;for(let oe=u.depth-M;oe>=u.depth-3;oe-=1)N=z.from(u.node(oe).copy(N));const I=u.indexAfter(-1)<u.node(-2).childCount?1:u.indexAfter(-2)<u.node(-3).childCount?2:3,V={...mc(x,u.node().type.name,u.node().attrs),...e},U=((l=c.contentMatch.defaultType)===null||l===void 0?void 0:l.createAndFill(V))||void 0;N=N.append(z.from(c.createAndFill(null,U)||void 0));const D=u.before(u.depth-(M-1));t.replace(D,u.after(-I),new G(N,4-M,0));let B=-1;t.doc.nodesBetween(D,t.doc.content.size,(oe,se)=>{if(B>-1)return!1;oe.isTextblock&&oe.content.size===0&&(B=se+1)}),B>-1&&t.setSelection(ce.near(t.doc.resolve(B))),t.scrollIntoView()}return!0}const w=h.pos===u.end()?g.contentMatchAt(0).defaultType:null,b={...mc(x,g.type.name,g.attrs),...e},k={...mc(x,u.node().type.name,u.node().attrs),...e};t.delete(u.pos,h.pos);const C=w?[{type:c,attrs:b},{type:w,attrs:k}]:[{type:c,attrs:b}];if(!hr(t.doc,u.pos,2))return!1;if(s){const{selection:N,storedMarks:M}=r,{splittableMarks:I}=i.extensionManager,V=M||N.$to.parentOffset&&N.$from.marks();if(t.split(u.pos,2,C).scrollIntoView(),!V||!s)return!0;const U=V.filter(D=>I.includes(D.type.name));t.ensureMarks(U)}return!0},Bh=(n,e)=>{const t=Vp(l=>l.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(Math.max(0,t.pos-1)).before(t.depth);if(r===void 0)return!0;const s=n.doc.nodeAt(r);return t.node.type===(s==null?void 0:s.type)&&ls(n.doc,t.pos)&&n.join(t.pos),!0},Fh=(n,e)=>{const t=Vp(l=>l.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(t.start).after(t.depth);if(r===void 0)return!0;const s=n.doc.nodeAt(r);return t.node.type===(s==null?void 0:s.type)&&ls(n.doc,r)&&n.join(r),!0},oM=(n,e,t,r={})=>({editor:s,tr:i,state:l,dispatch:c,chain:u,commands:h,can:f})=>{const{extensions:g,splittableMarks:x}=s.extensionManager,w=xt(n,l.schema),b=xt(e,l.schema),{selection:k,storedMarks:C}=l,{$from:N,$to:M}=k,I=N.blockRange(M),V=C||k.$to.parentOffset&&k.$from.marks();if(!I)return!1;const U=Vp(D=>Fx(D.type.name,g))(k);if(I.depth>=1&&U&&I.depth-U.depth<=1){if(U.node.type===w)return h.liftListItem(b);if(Fx(U.node.type.name,g)&&w.validContent(U.node.content)&&c)return u().command(()=>(i.setNodeMarkup(U.pos,w),!0)).command(()=>Bh(i,w)).command(()=>Fh(i,w)).run()}return!t||!V||!c?u().command(()=>f().wrapInList(w,r)?!0:h.clearNodes()).wrapInList(w,r).command(()=>Bh(i,w)).command(()=>Fh(i,w)).run():u().command(()=>{const D=f().wrapInList(w,r),B=V.filter(oe=>x.includes(oe.type.name));return i.ensureMarks(B),D?!0:h.clearNodes()}).wrapInList(w,r).command(()=>Bh(i,w)).command(()=>Fh(i,w)).run()},lM=(n,e={},t={})=>({state:r,commands:s})=>{const{extendEmptyMarkRange:i=!1}=t,l=cs(n,r.schema);return Mf(r,l,e)?s.unsetMark(l,{extendEmptyMarkRange:i}):s.setMark(l,e)},aM=(n,e,t={})=>({state:r,commands:s})=>{const i=xt(n,r.schema),l=xt(e,r.schema),c=Sl(r,i,t);let u;return r.selection.$anchor.sameParent(r.selection.$head)&&(u=r.selection.$anchor.parent.attrs),c?s.setNode(l,u):s.setNode(i,{...u,...t})},cM=(n,e={})=>({state:t,commands:r})=>{const s=xt(n,t.schema);return Sl(t,s,e)?r.lift(s):r.wrapIn(s,e)},uM=()=>({state:n,dispatch:e})=>{const t=n.plugins;for(let r=0;r<t.length;r+=1){const s=t[r];let i;if(s.spec.isInputRules&&(i=s.getState(n))){if(e){const l=n.tr,c=i.transform;for(let u=c.steps.length-1;u>=0;u-=1)l.step(c.steps[u].invert(c.docs[u]));if(i.text){const u=l.doc.resolve(i.from).marks();l.replaceWith(i.from,i.to,n.schema.text(i.text,u))}else l.delete(i.from,i.to)}return!0}}return!1},dM=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,{empty:r,ranges:s}=t;return r||e&&s.forEach(i=>{n.removeMark(i.$from.pos,i.$to.pos)}),!0},hM=(n,e={})=>({tr:t,state:r,dispatch:s})=>{var i;const{extendEmptyMarkRange:l=!1}=e,{selection:c}=t,u=cs(n,r.schema),{$from:h,empty:f,ranges:g}=c;if(!s)return!0;if(f&&l){let{from:x,to:w}=c;const b=(i=h.marks().find(C=>C.type===u))===null||i===void 0?void 0:i.attrs,k=Up(h,u,b);k&&(x=k.from,w=k.to),t.removeMark(x,w,u)}else g.forEach(x=>{t.removeMark(x.$from.pos,x.$to.pos,u)});return t.removeStoredMark(u),!0},fM=(n,e={})=>({tr:t,state:r,dispatch:s})=>{let i=null,l=null;const c=Su(typeof n=="string"?n:n.name,r.schema);return c?(c==="node"&&(i=xt(n,r.schema)),c==="mark"&&(l=cs(n,r.schema)),s&&t.selection.ranges.forEach(u=>{const h=u.$from.pos,f=u.$to.pos;let g,x,w,b;t.selection.empty?r.doc.nodesBetween(h,f,(k,C)=>{i&&i===k.type&&(w=Math.max(C,h),b=Math.min(C+k.nodeSize,f),g=C,x=k)}):r.doc.nodesBetween(h,f,(k,C)=>{C<h&&i&&i===k.type&&(w=Math.max(C,h),b=Math.min(C+k.nodeSize,f),g=C,x=k),C>=h&&C<=f&&(i&&i===k.type&&t.setNodeMarkup(C,void 0,{...k.attrs,...e}),l&&k.marks.length&&k.marks.forEach(N=>{if(l===N.type){const M=Math.max(C,h),I=Math.min(C+k.nodeSize,f);t.addMark(M,I,l.create({...N.attrs,...e}))}}))}),x&&(g!==void 0&&t.setNodeMarkup(g,void 0,{...x.attrs,...e}),l&&x.marks.length&&x.marks.forEach(k=>{l===k.type&&t.addMark(w,b,l.create({...k.attrs,...e}))}))}),!0):!1},pM=(n,e={})=>({state:t,dispatch:r})=>{const s=xt(n,t.schema);return T_(s,e)(t,r)},mM=(n,e={})=>({state:t,dispatch:r})=>{const s=xt(n,t.schema);return __(s,e)(t,r)};var gM=Object.freeze({__proto__:null,blur:Y_,clearContent:X_,clearNodes:Z_,command:eA,createParagraphNear:tA,cut:nA,deleteCurrentNode:rA,deleteNode:sA,deleteRange:iA,deleteSelection:oA,enter:lA,exitCode:aA,extendMarkRange:cA,first:uA,focus:hA,forEach:fA,insertContent:pA,insertContentAt:yA,joinBackward:wA,joinDown:vA,joinForward:bA,joinItemBackward:kA,joinItemForward:SA,joinTextblockBackward:CA,joinTextblockForward:NA,joinUp:xA,keyboardShortcut:jA,lift:TA,liftEmptyBlock:_A,liftListItem:AA,newlineInCode:MA,resetAttributes:OA,scrollIntoView:RA,selectAll:PA,selectNodeBackward:IA,selectNodeForward:LA,selectParentNode:DA,selectTextblockEnd:zA,selectTextblockStart:$A,setContent:BA,setMark:XA,setMeta:ZA,setNode:eM,setNodeSelection:tM,setTextSelection:nM,sinkListItem:rM,splitBlock:sM,splitListItem:iM,toggleList:oM,toggleMark:lM,toggleNode:aM,toggleWrap:cM,undoInputRule:uM,unsetAllMarks:dM,unsetMark:hM,updateAttributes:fM,wrapIn:pM,wrapInList:mM});const yM=at.create({name:"commands",addCommands(){return{...gM}}}),xM=at.create({name:"drop",addProseMirrorPlugins(){return[new ct({key:new It("tiptapDrop"),props:{handleDrop:(n,e,t,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:t,moved:r})}}})]}}),vM=at.create({name:"editable",addProseMirrorPlugins(){return[new ct({key:new It("editable"),props:{editable:()=>this.editor.options.editable}})]}}),wM=at.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:n}=this;return[new ct({key:new It("focusEvents"),props:{handleDOMEvents:{focus:(e,t)=>{n.isFocused=!0;const r=n.state.tr.setMeta("focus",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,t)=>{n.isFocused=!1;const r=n.state.tr.setMeta("blur",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),bM=at.create({name:"keymap",addKeyboardShortcuts(){const n=()=>this.editor.commands.first(({commands:l})=>[()=>l.undoInputRule(),()=>l.command(({tr:c})=>{const{selection:u,doc:h}=c,{empty:f,$anchor:g}=u,{pos:x,parent:w}=g,b=g.parent.isTextblock&&x>0?c.doc.resolve(x-1):g,k=b.parent.type.spec.isolating,C=g.pos-g.parentOffset,N=k&&b.parent.childCount===1?C===g.pos:he.atStart(h).from===x;return!f||!w.type.isTextblock||w.textContent.length||!N||N&&g.parent.type.name==="paragraph"?!1:l.clearNodes()}),()=>l.deleteSelection(),()=>l.joinBackward(),()=>l.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:l})=>[()=>l.deleteSelection(),()=>l.deleteCurrentNode(),()=>l.joinForward(),()=>l.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:l})=>[()=>l.newlineInCode(),()=>l.createParagraphNear(),()=>l.liftEmptyBlock(),()=>l.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:n,"Mod-Backspace":n,"Shift-Backspace":n,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},s={...r},i={...r,"Ctrl-h":n,"Alt-Backspace":n,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return Hp()||Ww()?i:s},addProseMirrorPlugins(){return[new ct({key:new It("clearDocument"),appendTransaction:(n,e,t)=>{if(n.some(k=>k.getMeta("composition")))return;const r=n.some(k=>k.docChanged)&&!e.doc.eq(t.doc),s=n.some(k=>k.getMeta("preventClearDocument"));if(!r||s)return;const{empty:i,from:l,to:c}=e.selection,u=he.atStart(e.doc).from,h=he.atEnd(e.doc).to;if(i||!(l===u&&c===h)||!qp(t.doc))return;const x=t.tr,w=xu({state:t,transaction:x}),{commands:b}=new vu({editor:this.editor,state:w});if(b.clearNodes(),!!x.steps.length)return x}})]}}),kM=at.create({name:"paste",addProseMirrorPlugins(){return[new ct({key:new It("tiptapPaste"),props:{handlePaste:(n,e,t)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:t})}}})]}}),SM=at.create({name:"tabindex",addProseMirrorPlugins(){return[new ct({key:new It("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});class Ms{get name(){return this.node.type.name}constructor(e,t,r=!1,s=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=t,this.currentNode=s}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let t=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You can’t set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}t=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:t,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),t=this.resolvedPos.doc.resolve(e);return new Ms(t,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new Ms(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new Ms(e,this.editor)}get children(){const e=[];return this.node.content.forEach((t,r)=>{const s=t.isBlock&&!t.isTextblock,i=t.isAtom&&!t.isText,l=this.pos+r+(i?0:1),c=this.resolvedPos.doc.resolve(l);if(!s&&c.depth<=this.depth)return;const u=new Ms(c,this.editor,s,s?t:null);s&&(u.actualDepth=this.depth+1),e.push(new Ms(c,this.editor,s,s?t:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,t={}){let r=null,s=this.parent;for(;s&&!r;){if(s.node.type.name===e)if(Object.keys(t).length>0){const i=s.node.attrs,l=Object.keys(t);for(let c=0;c<l.length;c+=1){const u=l[c];if(i[u]!==t[u])break}}else r=s;s=s.parent}return r}querySelector(e,t={}){return this.querySelectorAll(e,t,!0)[0]||null}querySelectorAll(e,t={},r=!1){let s=[];if(!this.children||this.children.length===0)return s;const i=Object.keys(t);return this.children.forEach(l=>{r&&s.length>0||(l.node.type.name===e&&i.every(u=>t[u]===l.node.attrs[u])&&s.push(l),!(r&&s.length>0)&&(s=s.concat(l.querySelectorAll(e,t,r))))}),s}setAttribute(e){const{tr:t}=this.editor.state;t.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(t)}}const CM=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function NM(n,e,t){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const s=document.createElement("style");return e&&s.setAttribute("nonce",e),s.setAttribute("data-tiptap-style",""),s.innerHTML=n,document.getElementsByTagName("head")[0].appendChild(s),s}class EM extends L_{constructor(e={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:t})=>{throw t},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:t,slice:r,moved:s})=>this.options.onDrop(t,r,s)),this.on("paste",({event:t,slice:r})=>this.options.onPaste(t,r)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=NM(CM,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,t=!0){this.setOptions({editable:e}),t&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,t){const r=Dw(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],s=this.state.reconfigure({plugins:r});return this.view.updateState(s),s}unregisterPlugin(e){if(this.isDestroyed)return;const t=this.state.plugins;let r=t;if([].concat(e).forEach(i=>{const l=typeof i=="string"?`${i}$`:i.key;r=t.filter(c=>!c.key.startsWith(l))}),t.length===r.length)return;const s=this.state.reconfigure({plugins:r});return this.view.updateState(s),s}createExtensionManager(){var e,t;const s=[...this.options.enableCoreExtensions?[vM,Q_.configure({blockSeparator:(t=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||t===void 0?void 0:t.blockSeparator}),yM,wM,bM,SM,xM,kM].filter(i=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[i.name]!==!1:!0):[],...this.options.extensions].filter(i=>["extension","node","mark"].includes(i==null?void 0:i.type));this.extensionManager=new Li(s,this)}createCommandManager(){this.commandManager=new vu({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var e;let t;try{t=Af(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(l){if(!(l instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(l.message))throw l;this.emit("contentError",{editor:this,error:l,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(c=>c.name!=="collaboration"),this.createExtensionManager()}}),t=Af(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const r=Hw(t,this.options.autofocus);this.view=new o_(this.options.element,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)===null||e===void 0?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:Ii.create({doc:t,selection:r||void 0})});const s=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(s),this.createNodeViews(),this.prependClass();const i=this.view.dom;i.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(l=>{var c;return(c=this.capturedTransaction)===null||c===void 0?void 0:c.step(l)});return}const t=this.state.apply(e),r=!this.state.selection.eq(t.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:t}),this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const s=e.getMeta("focus"),i=e.getMeta("blur");s&&this.emit("focus",{editor:this,event:s.event,transaction:e}),i&&this.emit("blur",{editor:this,event:i.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return Jw(this.state,e)}isActive(e,t){const r=typeof e=="string"?e:null,s=typeof e=="string"?t:e;return GA(this.state,r,s)}getJSON(){return this.state.doc.toJSON()}getHTML(){return Bp(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:t=`

`,textSerializers:r={}}=e||{};return VA(this.state.doc,{blockSeparator:t,textSerializers:{...Bw(this.schema),...r}})}get isEmpty(){return qp(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,t){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelector(e,t))||null}$nodes(e,t){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelectorAll(e,t))||null}$pos(e){const t=this.state.doc.resolve(e);return new Ms(t,this)}get $doc(){return this.$pos(0)}}function Vs(n){return new bu({find:n.find,handler:({state:e,range:t,match:r})=>{const s=ge(n.getAttributes,void 0,r);if(s===!1||s===null)return null;const{tr:i}=e,l=r[r.length-1],c=r[0];if(l){const u=c.search(/\S/),h=t.from+c.indexOf(l),f=h+l.length;if(Wp(t.from,t.to,e.doc).filter(w=>w.mark.type.excluded.find(k=>k===n.type&&k!==w.mark.type)).filter(w=>w.to>h).length)return null;f<t.to&&i.delete(f,t.to),h>t.from&&i.delete(t.from+u,h);const x=t.from+u+l.length;i.addMark(t.from+u,x,n.type.create(s||{})),i.removeStoredMark(n.type)}}})}function Gw(n){return new bu({find:n.find,handler:({state:e,range:t,match:r})=>{const s=ge(n.getAttributes,void 0,r)||{},{tr:i}=e,l=t.from;let c=t.to;const u=n.type.create(s);if(r[1]){const h=r[0].lastIndexOf(r[1]);let f=l+h;f>c?f=c:c=f+r[1].length;const g=r[0][r[0].length-1];i.insertText(g,l+r[0].length-1),i.replaceWith(f,c,u)}else if(r[0]){const h=n.type.isInline?l:l-1;i.insert(h,n.type.create(s)).delete(i.mapping.map(l),i.mapping.map(c))}i.scrollIntoView()}})}function Of(n){return new bu({find:n.find,handler:({state:e,range:t,match:r})=>{const s=e.doc.resolve(t.from),i=ge(n.getAttributes,void 0,r)||{};if(!s.node(-1).canReplaceWith(s.index(-1),s.indexAfter(-1),n.type))return null;e.tr.delete(t.from,t.to).setBlockType(t.from,t.from,n.type,i)}})}function Cl(n){return new bu({find:n.find,handler:({state:e,range:t,match:r,chain:s})=>{const i=ge(n.getAttributes,void 0,r)||{},l=e.tr.delete(t.from,t.to),u=l.doc.resolve(t.from).blockRange(),h=u&&kp(u,n.type,i);if(!h)return null;if(l.wrap(u,h),n.keepMarks&&n.editor){const{selection:g,storedMarks:x}=e,{splittableMarks:w}=n.editor.extensionManager,b=x||g.$to.parentOffset&&g.$from.marks();if(b){const k=b.filter(C=>w.includes(C.type.name));l.ensureMarks(k)}}if(n.keepAttributes){const g=n.type.name==="bulletList"||n.type.name==="orderedList"?"listItem":"taskList";s().updateAttributes(g,i).run()}const f=l.doc.resolve(t.from-1).nodeBefore;f&&f.type===n.type&&ls(l.doc,t.from-1)&&(!n.joinPredicate||n.joinPredicate(r,f))&&l.join(t.from-1)}})}class it{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=ge(ne(this,"addOptions",{name:this.name}))),this.storage=ge(ne(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new it(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>ku(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new it(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=ge(ne(t,"addOptions",{name:t.name})),t.storage=ge(ne(t,"addStorage",{name:t.name,options:t.options})),t}}function ss(n){return new zw({find:n.find,handler:({state:e,range:t,match:r,pasteEvent:s})=>{const i=ge(n.getAttributes,void 0,r,s);if(i===!1||i===null)return null;const{tr:l}=e,c=r[r.length-1],u=r[0];let h=t.to;if(c){const f=u.search(/\S/),g=t.from+u.indexOf(c),x=g+c.length;if(Wp(t.from,t.to,e.doc).filter(b=>b.mark.type.excluded.find(C=>C===n.type&&C!==b.mark.type)).filter(b=>b.to>g).length)return null;x<t.to&&l.delete(x,t.to),g>t.from&&l.delete(t.from+f,g),h=t.from+f+c.length,l.addMark(t.from+f,h,n.type.create(i||{})),l.removeStoredMark(n.type)}}})}function jM(n){return new zw({find:n.find,handler({match:e,chain:t,range:r,pasteEvent:s}){const i=ge(n.getAttributes,void 0,e,s),l=ge(n.getContent,void 0,i);if(i===!1||i===null)return null;const c={type:n.type.name,attrs:i};l&&(c.content=l),e.input&&t().deleteRange(r).insertContentAt(r.from,c)}})}function TM(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Qw={exports:{}},Uh={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hx;function _M(){if(Hx)return Uh;Hx=1;var n=Mt;function e(g,x){return g===x&&(g!==0||1/g===1/x)||g!==g&&x!==x}var t=typeof Object.is=="function"?Object.is:e,r=n.useState,s=n.useEffect,i=n.useLayoutEffect,l=n.useDebugValue;function c(g,x){var w=x(),b=r({inst:{value:w,getSnapshot:x}}),k=b[0].inst,C=b[1];return i(function(){k.value=w,k.getSnapshot=x,u(k)&&C({inst:k})},[g,w,x]),s(function(){return u(k)&&C({inst:k}),g(function(){u(k)&&C({inst:k})})},[g]),l(w),w}function u(g){var x=g.getSnapshot;g=g.value;try{var w=x();return!t(g,w)}catch{return!0}}function h(g,x){return x()}var f=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:c;return Uh.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:f,Uh}Qw.exports=_M();var Kp=Qw.exports;const AM=(...n)=>e=>{n.forEach(t=>{typeof t=="function"?t(e):t&&(t.current=e)})},MM=({contentComponent:n})=>{const e=Kp.useSyncExternalStore(n.subscribe,n.getSnapshot,n.getServerSnapshot);return Mt.createElement(Mt.Fragment,null,Object.values(e))};function OM(){const n=new Set;let e={};return{subscribe(t){return n.add(t),()=>{n.delete(t)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(t,r){e={...e,[t]:TS.createPortal(r.reactElement,r.element,t)},n.forEach(s=>s())},removeRenderer(t){const r={...e};delete r[t],e=r,n.forEach(s=>s())}}}class RM extends Mt.Component{constructor(e){var t;super(e),this.editorContentRef=Mt.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!(!((t=e.editor)===null||t===void 0)&&t.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const t=this.editorContentRef.current;t.append(...e.options.element.childNodes),e.setOptions({element:t}),e.contentComponent=OM(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){const e=this.props.editor;if(!e||(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null,!e.options.element.firstChild))return;const t=document.createElement("div");t.append(...e.options.element.childNodes),e.setOptions({element:t})}render(){const{editor:e,innerRef:t,...r}=this.props;return Mt.createElement(Mt.Fragment,null,Mt.createElement("div",{ref:AM(t,this.editorContentRef),...r}),(e==null?void 0:e.contentComponent)&&Mt.createElement(MM,{contentComponent:e.contentComponent}))}}const PM=A.forwardRef((n,e)=>{const t=Mt.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[n.editor]);return Mt.createElement(RM,{key:t,innerRef:e,...n})}),Rf=Mt.memo(PM);var IM=function n(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var r,s,i;if(Array.isArray(e)){if(r=e.length,r!=t.length)return!1;for(s=r;s--!==0;)if(!n(e[s],t[s]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(s of e.entries())if(!t.has(s[0]))return!1;for(s of e.entries())if(!n(s[1],t.get(s[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(s of e.entries())if(!t.has(s[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(r=e.length,r!=t.length)return!1;for(s=r;s--!==0;)if(e[s]!==t[s])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(i=Object.keys(e),r=i.length,r!==Object.keys(t).length)return!1;for(s=r;s--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[s]))return!1;for(s=r;s--!==0;){var l=i[s];if(!(l==="_owner"&&e.$$typeof)&&!n(e[l],t[l]))return!1}return!0}return e!==e&&t!==t},LM=TM(IM),Yw={exports:{}},Hh={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vx;function DM(){if(Vx)return Hh;Vx=1;var n=Mt,e=Kp;function t(h,f){return h===f&&(h!==0||1/h===1/f)||h!==h&&f!==f}var r=typeof Object.is=="function"?Object.is:t,s=e.useSyncExternalStore,i=n.useRef,l=n.useEffect,c=n.useMemo,u=n.useDebugValue;return Hh.useSyncExternalStoreWithSelector=function(h,f,g,x,w){var b=i(null);if(b.current===null){var k={hasValue:!1,value:null};b.current=k}else k=b.current;b=c(function(){function N(D){if(!M){if(M=!0,I=D,D=x(D),w!==void 0&&k.hasValue){var B=k.value;if(w(B,D))return V=B}return V=D}if(B=V,r(I,D))return B;var oe=x(D);return w!==void 0&&w(B,oe)?B:(I=D,V=oe)}var M=!1,I,V,U=g===void 0?null:g;return[function(){return N(f())},U===null?void 0:function(){return N(U())}]},[f,g,x,w]);var C=s(h,b[0],b[1]);return l(function(){k.hasValue=!0,k.value=C},[C]),u(C),C},Hh}Yw.exports=DM();var zM=Yw.exports;const $M=typeof window<"u"?A.useLayoutEffect:A.useEffect;class BM{constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){const t=()=>{this.transactionNumber+=1,this.subscribers.forEach(s=>s())},r=this.editor;return r.on("transaction",t),()=>{r.off("transaction",t)}}}}function FM(n){var e;const[t]=A.useState(()=>new BM(n.editor)),r=zM.useSyncExternalStoreWithSelector(t.subscribe,t.getSnapshot,t.getServerSnapshot,n.selector,(e=n.equalityFn)!==null&&e!==void 0?e:LM);return $M(()=>t.watch(n.editor),[n.editor,t]),A.useDebugValue(r),r}const UM=!1,Pf=typeof window>"u",HM=Pf||!!(typeof window<"u"&&window.next);class Jp{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(t=>t())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?Pf||HM?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...r)=>{var s,i;return(i=(s=this.options.current).onBeforeCreate)===null||i===void 0?void 0:i.call(s,...r)},onBlur:(...r)=>{var s,i;return(i=(s=this.options.current).onBlur)===null||i===void 0?void 0:i.call(s,...r)},onCreate:(...r)=>{var s,i;return(i=(s=this.options.current).onCreate)===null||i===void 0?void 0:i.call(s,...r)},onDestroy:(...r)=>{var s,i;return(i=(s=this.options.current).onDestroy)===null||i===void 0?void 0:i.call(s,...r)},onFocus:(...r)=>{var s,i;return(i=(s=this.options.current).onFocus)===null||i===void 0?void 0:i.call(s,...r)},onSelectionUpdate:(...r)=>{var s,i;return(i=(s=this.options.current).onSelectionUpdate)===null||i===void 0?void 0:i.call(s,...r)},onTransaction:(...r)=>{var s,i;return(i=(s=this.options.current).onTransaction)===null||i===void 0?void 0:i.call(s,...r)},onUpdate:(...r)=>{var s,i;return(i=(s=this.options.current).onUpdate)===null||i===void 0?void 0:i.call(s,...r)},onContentError:(...r)=>{var s,i;return(i=(s=this.options.current).onContentError)===null||i===void 0?void 0:i.call(s,...r)},onDrop:(...r)=>{var s,i;return(i=(s=this.options.current).onDrop)===null||i===void 0?void 0:i.call(s,...r)},onPaste:(...r)=>{var s,i;return(i=(s=this.options.current).onPaste)===null||i===void 0?void 0:i.call(s,...r)}};return new EM(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,t){return Object.keys(e).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&e.extensions&&t.extensions?e.extensions.length!==t.extensions.length?!1:e.extensions.every((s,i)=>{var l;return s===((l=t.extensions)===null||l===void 0?void 0:l[i])}):e[r]===t[r])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?Jp.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((r,s)=>r===e[s]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,t=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){t&&t.setOptions(this.options.current);return}t&&!t.isDestroyed&&(t.destroy(),this.instanceId===e&&this.setEditor(null))},1)}}function If(n={},e=[]){const t=A.useRef(n);t.current=n;const[r]=A.useState(()=>new Jp(t)),s=Kp.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return A.useDebugValue(s),A.useEffect(r.onRender(e)),FM({editor:s,selector:({transactionNumber:i})=>n.shouldRerenderOnTransaction===!1?null:n.immediatelyRender&&i===0?0:i+1}),s}const VM=A.createContext({editor:null});VM.Consumer;const WM=A.createContext({onDragStart:void 0}),qM=()=>A.useContext(WM);Mt.forwardRef((n,e)=>{const{onDragStart:t}=qM(),r=n.as||"div";return Mt.createElement(r,{...n,ref:e,"data-node-view-wrapper":"",onDragStart:t,style:{whiteSpace:"normal",...n.style}})});const KM=/^\s*>\s$/,JM=it.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:n}){return["blockquote",ze(this.options.HTMLAttributes,n),0]},addCommands(){return{setBlockquote:()=>({commands:n})=>n.wrapIn(this.name),toggleBlockquote:()=>({commands:n})=>n.toggleWrap(this.name),unsetBlockquote:()=>({commands:n})=>n.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Cl({find:KM,type:this.type})]}}),GM=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,QM=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,YM=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,XM=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,ZM=wn.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:n=>n.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:n=>n.type.name===this.name},{style:"font-weight",getAttrs:n=>/^(bold(er)?|[5-9]\d{2,})$/.test(n)&&null}]},renderHTML({HTMLAttributes:n}){return["strong",ze(this.options.HTMLAttributes,n),0]},addCommands(){return{setBold:()=>({commands:n})=>n.setMark(this.name),toggleBold:()=>({commands:n})=>n.toggleMark(this.name),unsetBold:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Vs({find:GM,type:this.type}),Vs({find:YM,type:this.type})]},addPasteRules(){return[ss({find:QM,type:this.type}),ss({find:XM,type:this.type})]}}),eO="listItem",Wx="textStyle",qx=/^\s*([-+*])\s$/,tO=it.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:n}){return["ul",ze(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleBulletList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(eO,this.editor.getAttributes(Wx)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let n=Cl({find:qx,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(n=Cl({find:qx,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(Wx),editor:this.editor})),[n]}}),nO=/(^|[^`])`([^`]+)`(?!`)/,rO=/(^|[^`])`([^`]+)`(?!`)/g,sO=wn.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:n}){return["code",ze(this.options.HTMLAttributes,n),0]},addCommands(){return{setCode:()=>({commands:n})=>n.setMark(this.name),toggleCode:()=>({commands:n})=>n.toggleMark(this.name),unsetCode:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Vs({find:nO,type:this.type})]},addPasteRules(){return[ss({find:rO,type:this.type})]}}),iO=/^```([a-z]+)?[\s\n]$/,oO=/^~~~([a-z]+)?[\s\n]$/,lO=it.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:n=>{var e;const{languageClassPrefix:t}=this.options,i=[...((e=n.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(l=>l.startsWith(t)).map(l=>l.replace(t,""))[0];return i||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:n,HTMLAttributes:e}){return["pre",ze(this.options.HTMLAttributes,e),["code",{class:n.attrs.language?this.options.languageClassPrefix+n.attrs.language:null},0]]},addCommands(){return{setCodeBlock:n=>({commands:e})=>e.setNode(this.name,n),toggleCodeBlock:n=>({commands:e})=>e.toggleNode(this.name,"paragraph",n)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:n,$anchor:e}=this.editor.state.selection,t=e.pos===1;return!n||e.parent.type.name!==this.name?!1:t||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:n})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=n,{selection:t}=e,{$from:r,empty:s}=t;if(!s||r.parent.type!==this.type)return!1;const i=r.parentOffset===r.parent.nodeSize-2,l=r.parent.textContent.endsWith(`

`);return!i||!l?!1:n.chain().command(({tr:c})=>(c.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:n})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=n,{selection:t,doc:r}=e,{$from:s,empty:i}=t;if(!i||s.parent.type!==this.type||!(s.parentOffset===s.parent.nodeSize-2))return!1;const c=s.after();return c===void 0?!1:r.nodeAt(c)?n.commands.command(({tr:h})=>(h.setSelection(he.near(r.resolve(c))),!0)):n.commands.exitCode()}}},addInputRules(){return[Of({find:iO,type:this.type,getAttributes:n=>({language:n[1]})}),Of({find:oO,type:this.type,getAttributes:n=>({language:n[1]})})]},addProseMirrorPlugins(){return[new ct({key:new It("codeBlockVSCodeHandler"),props:{handlePaste:(n,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const t=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),s=r?JSON.parse(r):void 0,i=s==null?void 0:s.mode;if(!t||!i)return!1;const{tr:l,schema:c}=n.state,u=c.text(t.replace(/\r\n?/g,`
`));return l.replaceSelectionWith(this.type.create({language:i},u)),l.selection.$from.parent.type!==this.type&&l.setSelection(ce.near(l.doc.resolve(Math.max(0,l.selection.from-2)))),l.setMeta("paste",!0),n.dispatch(l),!0}}})]}}),aO=it.create({name:"doc",topNode:!0,content:"block+"});function cO(n={}){return new ct({view(e){return new uO(e,n)}})}class uO{constructor(e,t){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=t.width)!==null&&r!==void 0?r:1,this.color=t.color===!1?void 0:t.color||"black",this.class=t.class,this.handlers=["dragover","dragend","drop","dragleave"].map(s=>{let i=l=>{this[s](l)};return e.dom.addEventListener(s,i),{name:s,handler:i}})}destroy(){this.handlers.forEach(({name:e,handler:t})=>this.editorView.dom.removeEventListener(e,t))}update(e,t){this.cursorPos!=null&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),t=!e.parent.inlineContent,r;if(t){let c=e.nodeBefore,u=e.nodeAfter;if(c||u){let h=this.editorView.nodeDOM(this.cursorPos-(c?c.nodeSize:0));if(h){let f=h.getBoundingClientRect(),g=c?f.bottom:f.top;c&&u&&(g=(g+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),r={left:f.left,right:f.right,top:g-this.width/2,bottom:g+this.width/2}}}}if(!r){let c=this.editorView.coordsAtPos(this.cursorPos);r={left:c.left-this.width/2,right:c.left+this.width/2,top:c.top,bottom:c.bottom}}let s=this.editorView.dom.offsetParent;this.element||(this.element=s.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",t),this.element.classList.toggle("prosemirror-dropcursor-inline",!t);let i,l;if(!s||s==document.body&&getComputedStyle(s).position=="static")i=-pageXOffset,l=-pageYOffset;else{let c=s.getBoundingClientRect();i=c.left-s.scrollLeft,l=c.top-s.scrollTop}this.element.style.left=r.left-i+"px",this.element.style.top=r.top-l+"px",this.element.style.width=r.right-r.left+"px",this.element.style.height=r.bottom-r.top+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),s=r&&r.type.spec.disableDropCursor,i=typeof s=="function"?s(this.editorView,t,e):s;if(t&&!i){let l=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let c=D1(this.editorView.state.doc,l,this.editorView.dragging.slice);c!=null&&(l=c)}this.setCursor(l),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){(e.target==this.editorView.dom||!this.editorView.dom.contains(e.relatedTarget))&&this.setCursor(null)}}const dO=at.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[cO(this.options)]}});class Ye extends he{constructor(e){super(e,e)}map(e,t){let r=e.resolve(t.map(this.head));return Ye.valid(r)?new Ye(r):he.near(r)}content(){return G.empty}eq(e){return e instanceof Ye&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Ye(e.resolve(t.pos))}getBookmark(){return new Gp(this.anchor)}static valid(e){let t=e.parent;if(t.isTextblock||!hO(e)||!fO(e))return!1;let r=t.type.spec.allowGapCursor;if(r!=null)return r;let s=t.contentMatchAt(e.index()).defaultType;return s&&s.isTextblock}static findGapCursorFrom(e,t,r=!1){e:for(;;){if(!r&&Ye.valid(e))return e;let s=e.pos,i=null;for(let l=e.depth;;l--){let c=e.node(l);if(t>0?e.indexAfter(l)<c.childCount:e.index(l)>0){i=c.child(t>0?e.indexAfter(l):e.index(l)-1);break}else if(l==0)return null;s+=t;let u=e.doc.resolve(s);if(Ye.valid(u))return u}for(;;){let l=t>0?i.firstChild:i.lastChild;if(!l){if(i.isAtom&&!i.isText&&!ae.isSelectable(i)){e=e.doc.resolve(s+i.nodeSize*t),r=!1;continue e}break}i=l,s+=t;let c=e.doc.resolve(s);if(Ye.valid(c))return c}return null}}}Ye.prototype.visible=!1;Ye.findFrom=Ye.findGapCursorFrom;he.jsonID("gapcursor",Ye);class Gp{constructor(e){this.pos=e}map(e){return new Gp(e.map(this.pos))}resolve(e){let t=e.resolve(this.pos);return Ye.valid(t)?new Ye(t):he.near(t)}}function hO(n){for(let e=n.depth;e>=0;e--){let t=n.index(e),r=n.node(e);if(t==0){if(r.type.spec.isolating)return!0;continue}for(let s=r.child(t-1);;s=s.lastChild){if(s.childCount==0&&!s.inlineContent||s.isAtom||s.type.spec.isolating)return!0;if(s.inlineContent)return!1}}return!0}function fO(n){for(let e=n.depth;e>=0;e--){let t=n.indexAfter(e),r=n.node(e);if(t==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let s=r.child(t);;s=s.firstChild){if(s.childCount==0&&!s.inlineContent||s.isAtom||s.type.spec.isolating)return!0;if(s.inlineContent)return!1}}return!0}function pO(){return new ct({props:{decorations:xO,createSelectionBetween(n,e,t){return e.pos==t.pos&&Ye.valid(t)?new Ye(t):null},handleClick:gO,handleKeyDown:mO,handleDOMEvents:{beforeinput:yO}}})}const mO=Pp({ArrowLeft:sc("horiz",-1),ArrowRight:sc("horiz",1),ArrowUp:sc("vert",-1),ArrowDown:sc("vert",1)});function sc(n,e){const t=n=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,s,i){let l=r.selection,c=e>0?l.$to:l.$from,u=l.empty;if(l instanceof ce){if(!i.endOfTextblock(t)||c.depth==0)return!1;u=!1,c=r.doc.resolve(e>0?c.after():c.before())}let h=Ye.findGapCursorFrom(c,e,u);return h?(s&&s(r.tr.setSelection(new Ye(h))),!0):!1}}function gO(n,e,t){if(!n||!n.editable)return!1;let r=n.state.doc.resolve(e);if(!Ye.valid(r))return!1;let s=n.posAtCoords({left:t.clientX,top:t.clientY});return s&&s.inside>-1&&ae.isSelectable(n.state.doc.nodeAt(s.inside))?!1:(n.dispatch(n.state.tr.setSelection(new Ye(r))),!0)}function yO(n,e){if(e.inputType!="insertCompositionText"||!(n.state.selection instanceof Ye))return!1;let{$from:t}=n.state.selection,r=t.parent.contentMatchAt(t.index()).findWrapping(n.state.schema.nodes.text);if(!r)return!1;let s=z.empty;for(let l=r.length-1;l>=0;l--)s=z.from(r[l].createAndFill(null,s));let i=n.state.tr.replace(t.pos,t.pos,new G(s,0,0));return i.setSelection(ce.near(i.doc.resolve(t.pos+1))),n.dispatch(i),!1}function xO(n){if(!(n.selection instanceof Ye))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",Qe.create(n.doc,[zt.widget(n.selection.head,e,{key:"gapcursor"})])}const vO=at.create({name:"gapCursor",addProseMirrorPlugins(){return[pO()]},extendNodeSchema(n){var e;const t={name:n.name,options:n.options,storage:n.storage};return{allowGapCursor:(e=ge(ne(n,"allowGapCursor",t)))!==null&&e!==void 0?e:null}}}),wO=it.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:n}){return["br",ze(this.options.HTMLAttributes,n)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:n,chain:e,state:t,editor:r})=>n.first([()=>n.exitCode(),()=>n.command(()=>{const{selection:s,storedMarks:i}=t;if(s.$from.parent.type.spec.isolating)return!1;const{keepMarks:l}=this.options,{splittableMarks:c}=r.extensionManager,u=i||s.$to.parentOffset&&s.$from.marks();return e().insertContent({type:this.name}).command(({tr:h,dispatch:f})=>{if(f&&u&&l){const g=u.filter(x=>c.includes(x.type.name));h.ensureMarks(g)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),bO=it.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(n=>({tag:`h${n}`,attrs:{level:n}}))},renderHTML({node:n,HTMLAttributes:e}){return[`h${this.options.levels.includes(n.attrs.level)?n.attrs.level:this.options.levels[0]}`,ze(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.setNode(this.name,n):!1,toggleHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.toggleNode(this.name,"paragraph",n):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((n,e)=>({...n,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(n=>Of({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${n}})\\s$`),type:this.type,getAttributes:{level:n}}))}});var Ic=200,yt=function(){};yt.prototype.append=function(e){return e.length?(e=yt.from(e),!this.length&&e||e.length<Ic&&this.leafAppend(e)||this.length<Ic&&e.leafPrepend(this)||this.appendInner(e)):this};yt.prototype.prepend=function(e){return e.length?yt.from(e).append(this):this};yt.prototype.appendInner=function(e){return new kO(this,e)};yt.prototype.slice=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=this.length),e>=t?yt.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))};yt.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};yt.prototype.forEach=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length),t<=r?this.forEachInner(e,t,r,0):this.forEachInvertedInner(e,t,r,0)};yt.prototype.map=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length);var s=[];return this.forEach(function(i,l){return s.push(e(i,l))},t,r),s};yt.from=function(e){return e instanceof yt?e:e&&e.length?new Xw(e):yt.empty};var Xw=function(n){function e(r){n.call(this),this.values=r}n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e;var t={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(s,i){return s==0&&i==this.length?this:new e(this.values.slice(s,i))},e.prototype.getInner=function(s){return this.values[s]},e.prototype.forEachInner=function(s,i,l,c){for(var u=i;u<l;u++)if(s(this.values[u],c+u)===!1)return!1},e.prototype.forEachInvertedInner=function(s,i,l,c){for(var u=i-1;u>=l;u--)if(s(this.values[u],c+u)===!1)return!1},e.prototype.leafAppend=function(s){if(this.length+s.length<=Ic)return new e(this.values.concat(s.flatten()))},e.prototype.leafPrepend=function(s){if(this.length+s.length<=Ic)return new e(s.flatten().concat(this.values))},t.length.get=function(){return this.values.length},t.depth.get=function(){return 0},Object.defineProperties(e.prototype,t),e}(yt);yt.empty=new Xw([]);var kO=function(n){function e(t,r){n.call(this),this.left=t,this.right=r,this.length=t.length+r.length,this.depth=Math.max(t.depth,r.depth)+1}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,s,i,l){var c=this.left.length;if(s<c&&this.left.forEachInner(r,s,Math.min(i,c),l)===!1||i>c&&this.right.forEachInner(r,Math.max(s-c,0),Math.min(this.length,i)-c,l+c)===!1)return!1},e.prototype.forEachInvertedInner=function(r,s,i,l){var c=this.left.length;if(s>c&&this.right.forEachInvertedInner(r,s-c,Math.max(i,c)-c,l+c)===!1||i<c&&this.left.forEachInvertedInner(r,Math.min(s,c),i,l)===!1)return!1},e.prototype.sliceInner=function(r,s){if(r==0&&s==this.length)return this;var i=this.left.length;return s<=i?this.left.slice(r,s):r>=i?this.right.slice(r-i,s-i):this.left.slice(r,i).append(this.right.slice(0,s-i))},e.prototype.leafAppend=function(r){var s=this.right.leafAppend(r);if(s)return new e(this.left,s)},e.prototype.leafPrepend=function(r){var s=this.left.leafPrepend(r);if(s)return new e(s,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(yt);const SO=500;class _n{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let s,i;t&&(s=this.remapping(r,this.items.length),i=s.maps.length);let l=e.tr,c,u,h=[],f=[];return this.items.forEach((g,x)=>{if(!g.step){s||(s=this.remapping(r,x+1),i=s.maps.length),i--,f.push(g);return}if(s){f.push(new Bn(g.map));let w=g.step.map(s.slice(i)),b;w&&l.maybeStep(w).doc&&(b=l.mapping.maps[l.mapping.maps.length-1],h.push(new Bn(b,void 0,void 0,h.length+f.length))),i--,b&&s.appendMap(b,i)}else l.maybeStep(g.step);if(g.selection)return c=s?g.selection.map(s.slice(i)):g.selection,u=new _n(this.items.slice(0,r).append(f.reverse().concat(h)),this.eventCount-1),!1},this.items.length,0),{remaining:u,transform:l,selection:c}}addTransform(e,t,r,s){let i=[],l=this.eventCount,c=this.items,u=!s&&c.length?c.get(c.length-1):null;for(let f=0;f<e.steps.length;f++){let g=e.steps[f].invert(e.docs[f]),x=new Bn(e.mapping.maps[f],g,t),w;(w=u&&u.merge(x))&&(x=w,f?i.pop():c=c.slice(0,c.length-1)),i.push(x),t&&(l++,t=void 0),s||(u=x)}let h=l-r.depth;return h>NO&&(c=CO(c,h),l-=h),new _n(c.append(i),l)}remapping(e,t){let r=new zi;return this.items.forEach((s,i)=>{let l=s.mirrorOffset!=null&&i-s.mirrorOffset>=e?r.maps.length-s.mirrorOffset:void 0;r.appendMap(s.map,l)},e,t),r}addMaps(e){return this.eventCount==0?this:new _n(this.items.append(e.map(t=>new Bn(t))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let r=[],s=Math.max(0,this.items.length-t),i=e.mapping,l=e.steps.length,c=this.eventCount;this.items.forEach(x=>{x.selection&&c--},s);let u=t;this.items.forEach(x=>{let w=i.getMirror(--u);if(w==null)return;l=Math.min(l,w);let b=i.maps[w];if(x.step){let k=e.steps[w].invert(e.docs[w]),C=x.selection&&x.selection.map(i.slice(u+1,w));C&&c++,r.push(new Bn(b,k,C))}else r.push(new Bn(b))},s);let h=[];for(let x=t;x<l;x++)h.push(new Bn(i.maps[x]));let f=this.items.slice(0,s).append(h).append(r),g=new _n(f,c);return g.emptyItemCount()>SO&&(g=g.compress(this.items.length-r.length)),g}emptyItemCount(){let e=0;return this.items.forEach(t=>{t.step||e++}),e}compress(e=this.items.length){let t=this.remapping(0,e),r=t.maps.length,s=[],i=0;return this.items.forEach((l,c)=>{if(c>=e)s.push(l),l.selection&&i++;else if(l.step){let u=l.step.map(t.slice(r)),h=u&&u.getMap();if(r--,h&&t.appendMap(h,r),u){let f=l.selection&&l.selection.map(t.slice(r));f&&i++;let g=new Bn(h.invert(),u,f),x,w=s.length-1;(x=s.length&&s[w].merge(g))?s[w]=x:s.push(g)}}else l.map&&r--},this.items.length,0),new _n(yt.from(s.reverse()),i)}}_n.empty=new _n(yt.empty,0);function CO(n,e){let t;return n.forEach((r,s)=>{if(r.selection&&e--==0)return t=s,!1}),n.slice(t)}class Bn{constructor(e,t,r,s){this.map=e,this.step=t,this.selection=r,this.mirrorOffset=s}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new Bn(t.getMap().invert(),t,this.selection)}}}class Fr{constructor(e,t,r,s,i){this.done=e,this.undone=t,this.prevRanges=r,this.prevTime=s,this.prevComposition=i}}const NO=20;function EO(n,e,t,r){let s=t.getMeta(Bs),i;if(s)return s.historyState;t.getMeta(_O)&&(n=new Fr(n.done,n.undone,null,0,-1));let l=t.getMeta("appendedTransaction");if(t.steps.length==0)return n;if(l&&l.getMeta(Bs))return l.getMeta(Bs).redo?new Fr(n.done.addTransform(t,void 0,r,gc(e)),n.undone,Kx(t.mapping.maps),n.prevTime,n.prevComposition):new Fr(n.done,n.undone.addTransform(t,void 0,r,gc(e)),null,n.prevTime,n.prevComposition);if(t.getMeta("addToHistory")!==!1&&!(l&&l.getMeta("addToHistory")===!1)){let c=t.getMeta("composition"),u=n.prevTime==0||!l&&n.prevComposition!=c&&(n.prevTime<(t.time||0)-r.newGroupDelay||!jO(t,n.prevRanges)),h=l?Vh(n.prevRanges,t.mapping):Kx(t.mapping.maps);return new Fr(n.done.addTransform(t,u?e.selection.getBookmark():void 0,r,gc(e)),_n.empty,h,t.time,c??n.prevComposition)}else return(i=t.getMeta("rebased"))?new Fr(n.done.rebased(t,i),n.undone.rebased(t,i),Vh(n.prevRanges,t.mapping),n.prevTime,n.prevComposition):new Fr(n.done.addMaps(t.mapping.maps),n.undone.addMaps(t.mapping.maps),Vh(n.prevRanges,t.mapping),n.prevTime,n.prevComposition)}function jO(n,e){if(!e)return!1;if(!n.docChanged)return!0;let t=!1;return n.mapping.maps[0].forEach((r,s)=>{for(let i=0;i<e.length;i+=2)r<=e[i+1]&&s>=e[i]&&(t=!0)}),t}function Kx(n){let e=[];for(let t=n.length-1;t>=0&&e.length==0;t--)n[t].forEach((r,s,i,l)=>e.push(i,l));return e}function Vh(n,e){if(!n)return null;let t=[];for(let r=0;r<n.length;r+=2){let s=e.map(n[r],1),i=e.map(n[r+1],-1);s<=i&&t.push(s,i)}return t}function TO(n,e,t){let r=gc(e),s=Bs.get(e).spec.config,i=(t?n.undone:n.done).popEvent(e,r);if(!i)return null;let l=i.selection.resolve(i.transform.doc),c=(t?n.done:n.undone).addTransform(i.transform,e.selection.getBookmark(),s,r),u=new Fr(t?c:i.remaining,t?i.remaining:c,null,0,-1);return i.transform.setSelection(l).setMeta(Bs,{redo:t,historyState:u})}let Wh=!1,Jx=null;function gc(n){let e=n.plugins;if(Jx!=e){Wh=!1,Jx=e;for(let t=0;t<e.length;t++)if(e[t].spec.historyPreserveItems){Wh=!0;break}}return Wh}const Bs=new It("history"),_O=new It("closeHistory");function AO(n={}){return n={depth:n.depth||100,newGroupDelay:n.newGroupDelay||500},new ct({key:Bs,state:{init(){return new Fr(_n.empty,_n.empty,null,0,-1)},apply(e,t,r){return EO(t,r,e,n)}},config:n,props:{handleDOMEvents:{beforeinput(e,t){let r=t.inputType,s=r=="historyUndo"?eb:r=="historyRedo"?tb:null;return s?(t.preventDefault(),s(e.state,e.dispatch)):!1}}}})}function Zw(n,e){return(t,r)=>{let s=Bs.getState(t);if(!s||(n?s.undone:s.done).eventCount==0)return!1;if(r){let i=TO(s,t,n);i&&r(e?i.scrollIntoView():i)}return!0}}const eb=Zw(!1,!0),tb=Zw(!0,!0),MO=at.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:n,dispatch:e})=>eb(n,e),redo:()=>({state:n,dispatch:e})=>tb(n,e)}},addProseMirrorPlugins(){return[AO(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-я":()=>this.editor.commands.undo(),"Shift-Mod-я":()=>this.editor.commands.redo()}}}),OO=it.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:n}){return["hr",ze(this.options.HTMLAttributes,n)]},addCommands(){return{setHorizontalRule:()=>({chain:n,state:e})=>{const{selection:t}=e,{$from:r,$to:s}=t,i=n();return r.parentOffset===0?i.insertContentAt({from:Math.max(r.pos-1,0),to:s.pos},{type:this.name}):QA(t)?i.insertContentAt(s.pos,{type:this.name}):i.insertContent({type:this.name}),i.command(({tr:l,dispatch:c})=>{var u;if(c){const{$to:h}=l.selection,f=h.end();if(h.nodeAfter)h.nodeAfter.isTextblock?l.setSelection(ce.create(l.doc,h.pos+1)):h.nodeAfter.isBlock?l.setSelection(ae.create(l.doc,h.pos)):l.setSelection(ce.create(l.doc,h.pos));else{const g=(u=h.parent.type.contentMatch.defaultType)===null||u===void 0?void 0:u.create();g&&(l.insert(f,g),l.setSelection(ce.create(l.doc,f+1)))}l.scrollIntoView()}return!0}).run()}}},addInputRules(){return[Gw({find:/^(?:---|—-|___\s|\*\*\*\s)$/,type:this.type})]}}),RO=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,PO=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,IO=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,LO=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,DO=wn.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:n=>n.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:n=>n.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:n}){return["em",ze(this.options.HTMLAttributes,n),0]},addCommands(){return{setItalic:()=>({commands:n})=>n.setMark(this.name),toggleItalic:()=>({commands:n})=>n.toggleMark(this.name),unsetItalic:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Vs({find:RO,type:this.type}),Vs({find:IO,type:this.type})]},addPasteRules(){return[ss({find:PO,type:this.type}),ss({find:LO,type:this.type})]}}),zO=it.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:n}){return["li",ze(this.options.HTMLAttributes,n),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),$O="listItem",Gx="textStyle",Qx=/^(\d+)\.\s$/,BO=it.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:n=>n.hasAttribute("start")?parseInt(n.getAttribute("start")||"",10):1},type:{default:void 0,parseHTML:n=>n.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:n}){const{start:e,...t}=n;return e===1?["ol",ze(this.options.HTMLAttributes,t),0]:["ol",ze(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleOrderedList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes($O,this.editor.getAttributes(Gx)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let n=Cl({find:Qx,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(n=Cl({find:Qx,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(Gx)}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1],editor:this.editor})),[n]}}),FO=it.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:n}){return["p",ze(this.options.HTMLAttributes,n),0]},addCommands(){return{setParagraph:()=>({commands:n})=>n.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),UO=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,HO=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,VO=wn.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:n=>n.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["s",ze(this.options.HTMLAttributes,n),0]},addCommands(){return{setStrike:()=>({commands:n})=>n.setMark(this.name),toggleStrike:()=>({commands:n})=>n.toggleMark(this.name),unsetStrike:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Vs({find:UO,type:this.type})]},addPasteRules(){return[ss({find:HO,type:this.type})]}}),WO=it.create({name:"text",group:"inline"}),Lf=at.create({name:"starterKit",addExtensions(){var n,e,t,r,s,i,l,c,u,h,f,g,x,w,b,k,C,N;const M=[];return this.options.bold!==!1&&M.push(ZM.configure((n=this.options)===null||n===void 0?void 0:n.bold)),this.options.blockquote!==!1&&M.push(JM.configure((e=this.options)===null||e===void 0?void 0:e.blockquote)),this.options.bulletList!==!1&&M.push(tO.configure((t=this.options)===null||t===void 0?void 0:t.bulletList)),this.options.code!==!1&&M.push(sO.configure((r=this.options)===null||r===void 0?void 0:r.code)),this.options.codeBlock!==!1&&M.push(lO.configure((s=this.options)===null||s===void 0?void 0:s.codeBlock)),this.options.document!==!1&&M.push(aO.configure((i=this.options)===null||i===void 0?void 0:i.document)),this.options.dropcursor!==!1&&M.push(dO.configure((l=this.options)===null||l===void 0?void 0:l.dropcursor)),this.options.gapcursor!==!1&&M.push(vO.configure((c=this.options)===null||c===void 0?void 0:c.gapcursor)),this.options.hardBreak!==!1&&M.push(wO.configure((u=this.options)===null||u===void 0?void 0:u.hardBreak)),this.options.heading!==!1&&M.push(bO.configure((h=this.options)===null||h===void 0?void 0:h.heading)),this.options.history!==!1&&M.push(MO.configure((f=this.options)===null||f===void 0?void 0:f.history)),this.options.horizontalRule!==!1&&M.push(OO.configure((g=this.options)===null||g===void 0?void 0:g.horizontalRule)),this.options.italic!==!1&&M.push(DO.configure((x=this.options)===null||x===void 0?void 0:x.italic)),this.options.listItem!==!1&&M.push(zO.configure((w=this.options)===null||w===void 0?void 0:w.listItem)),this.options.orderedList!==!1&&M.push(BO.configure((b=this.options)===null||b===void 0?void 0:b.orderedList)),this.options.paragraph!==!1&&M.push(FO.configure((k=this.options)===null||k===void 0?void 0:k.paragraph)),this.options.strike!==!1&&M.push(VO.configure((C=this.options)===null||C===void 0?void 0:C.strike)),this.options.text!==!1&&M.push(WO.configure((N=this.options)===null||N===void 0?void 0:N.text)),M}}),Df=wn.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:n=>n.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["u",ze(this.options.HTMLAttributes,n),0]},addCommands(){return{setUnderline:()=>({commands:n})=>n.setMark(this.name),toggleUnderline:()=>({commands:n})=>n.toggleMark(this.name),unsetUnderline:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),zf=at.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:null}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:n=>{const e=n.style.textAlign;return this.options.alignments.includes(e)?e:this.options.defaultAlignment},renderHTML:n=>n.textAlign?{style:`text-align: ${n.textAlign}`}:{}}}}]},addCommands(){return{setTextAlign:n=>({commands:e})=>this.options.alignments.includes(n)?this.options.types.map(t=>e.updateAttributes(t,{textAlign:n})).every(t=>t):!1,unsetTextAlign:()=>({commands:n})=>this.options.types.map(e=>n.resetAttributes(e,"textAlign")).every(e=>e)}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}}),qO=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,$f=it.create({name:"image",addOptions(){return{inline:!1,allowBase64:!1,HTMLAttributes:{}}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null}}},parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:n}){return["img",ze(this.options.HTMLAttributes,n)]},addCommands(){return{setImage:n=>({commands:e})=>e.insertContent({type:this.name,attrs:n})}},addInputRules(){return[Gw({find:qO,type:this.type,getAttributes:n=>{const[,,e,t,r]=n;return{src:t,alt:e,title:r}}})]}}),KO="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2ntley5rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6logistics9properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3ncaster6d0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2psy3ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0america6xi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mögensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",JO="ελ1υ2бг1ел3дети4ею2католик6ом3мкд2он1сква6онлайн5рг3рус2ф2сайт3рб3укр3қаз3հայ3ישראל5קום3ابوظبي5رامكو5لاردن4بحرين5جزائر5سعودية6عليان5مغرب5مارات5یران5بارت2زار4يتك3ھارت5تونس4سودان3رية5شبكة4عراق2ب2مان4فلسطين6قطر3كاثوليك6وم3مصر2ليسيا5وريتانيا7قع4همراه5پاکستان7ڀارت4कॉम3नेट3भारत0म्3ोत5संगठन5বাংলা5ভারত2ৰত4ਭਾਰਤ4ભારત4ଭାରତ4இந்தியா6லங்கை6சிங்கப்பூர்11భారత్5ಭಾರತ4ഭാരതം5ලංකා4คอม3ไทย3ລາວ3გე2みんな3アマゾン4クラウド4グーグル4コム2ストア3セール3ファッション6ポイント4世界2中信1国1國1文网3亚马逊3企业2佛山2信息2健康2八卦2公司1益2台湾1灣2商城1店1标2嘉里0大酒店5在线2大拿2天主教3娱乐2家電2广东2微博2慈善2我爱你3手机2招聘2政务1府2新加坡2闻2时尚2書籍2机构2淡马锡3游戏2澳門2点看2移动2组织机构4网址1店1站1络2联通2谷歌2购物2通販2集团2電訊盈科4飞利浦3食品2餐厅2香格里拉3港2닷넷1컴2삼성2한국2",Ki=(n,e)=>{for(const t in e)n[t]=e[t];return n},Bf="numeric",Ff="ascii",Uf="alpha",il="asciinumeric",Zo="alphanumeric",Hf="domain",nb="emoji",GO="scheme",QO="slashscheme",qh="whitespace";function YO(n,e){return n in e||(e[n]=[]),e[n]}function Is(n,e,t){e[Bf]&&(e[il]=!0,e[Zo]=!0),e[Ff]&&(e[il]=!0,e[Uf]=!0),e[il]&&(e[Zo]=!0),e[Uf]&&(e[Zo]=!0),e[Zo]&&(e[Hf]=!0),e[nb]&&(e[Hf]=!0);for(const r in e){const s=YO(r,t);s.indexOf(n)<0&&s.push(n)}}function XO(n,e){const t={};for(const r in e)e[r].indexOf(n)>=0&&(t[r]=!0);return t}function Qt(n=null){this.j={},this.jr=[],this.jd=null,this.t=n}Qt.groups={};Qt.prototype={accepts(){return!!this.t},go(n){const e=this,t=e.j[n];if(t)return t;for(let r=0;r<e.jr.length;r++){const s=e.jr[r][0],i=e.jr[r][1];if(i&&s.test(n))return i}return e.jd},has(n,e=!1){return e?n in this.j:!!this.go(n)},ta(n,e,t,r){for(let s=0;s<n.length;s++)this.tt(n[s],e,t,r)},tr(n,e,t,r){r=r||Qt.groups;let s;return e&&e.j?s=e:(s=new Qt(e),t&&r&&Is(e,t,r)),this.jr.push([n,s]),s},ts(n,e,t,r){let s=this;const i=n.length;if(!i)return s;for(let l=0;l<i-1;l++)s=s.tt(n[l]);return s.tt(n[i-1],e,t,r)},tt(n,e,t,r){r=r||Qt.groups;const s=this;if(e&&e.j)return s.j[n]=e,e;const i=e;let l,c=s.go(n);if(c?(l=new Qt,Ki(l.j,c.j),l.jr.push.apply(l.jr,c.jr),l.jd=c.jd,l.t=c.t):l=new Qt,i){if(r)if(l.t&&typeof l.t=="string"){const u=Ki(XO(l.t,r),t);Is(i,u,r)}else t&&Is(i,t,r);l.t=i}return s.j[n]=l,l}};const xe=(n,e,t,r,s)=>n.ta(e,t,r,s),Ge=(n,e,t,r,s)=>n.tr(e,t,r,s),Yx=(n,e,t,r,s)=>n.ts(e,t,r,s),K=(n,e,t,r,s)=>n.tt(e,t,r,s),lr="WORD",Vf="UWORD",rb="ASCIINUMERICAL",sb="ALPHANUMERICAL",Nl="LOCALHOST",Wf="TLD",qf="UTLD",yc="SCHEME",Pi="SLASH_SCHEME",Qp="NUM",Kf="WS",Yp="NL",ol="OPENBRACE",ll="CLOSEBRACE",Lc="OPENBRACKET",Dc="CLOSEBRACKET",zc="OPENPAREN",$c="CLOSEPAREN",Bc="OPENANGLEBRACKET",Fc="CLOSEANGLEBRACKET",Uc="FULLWIDTHLEFTPAREN",Hc="FULLWIDTHRIGHTPAREN",Vc="LEFTCORNERBRACKET",Wc="RIGHTCORNERBRACKET",qc="LEFTWHITECORNERBRACKET",Kc="RIGHTWHITECORNERBRACKET",Jc="FULLWIDTHLESSTHAN",Gc="FULLWIDTHGREATERTHAN",Qc="AMPERSAND",Xp="APOSTROPHE",Yc="ASTERISK",Ur="AT",Xc="BACKSLASH",Zc="BACKTICK",eu="CARET",Wr="COLON",Zp="COMMA",tu="DOLLAR",Fn="DOT",nu="EQUALS",em="EXCLAMATION",gn="HYPHEN",al="PERCENT",ru="PIPE",su="PLUS",iu="POUND",cl="QUERY",tm="QUOTE",ib="FULLWIDTHMIDDLEDOT",nm="SEMI",Un="SLASH",ul="TILDE",ou="UNDERSCORE",ob="EMOJI",lu="SYM";var lb=Object.freeze({__proto__:null,WORD:lr,UWORD:Vf,ASCIINUMERICAL:rb,ALPHANUMERICAL:sb,LOCALHOST:Nl,TLD:Wf,UTLD:qf,SCHEME:yc,SLASH_SCHEME:Pi,NUM:Qp,WS:Kf,NL:Yp,OPENBRACE:ol,CLOSEBRACE:ll,OPENBRACKET:Lc,CLOSEBRACKET:Dc,OPENPAREN:zc,CLOSEPAREN:$c,OPENANGLEBRACKET:Bc,CLOSEANGLEBRACKET:Fc,FULLWIDTHLEFTPAREN:Uc,FULLWIDTHRIGHTPAREN:Hc,LEFTCORNERBRACKET:Vc,RIGHTCORNERBRACKET:Wc,LEFTWHITECORNERBRACKET:qc,RIGHTWHITECORNERBRACKET:Kc,FULLWIDTHLESSTHAN:Jc,FULLWIDTHGREATERTHAN:Gc,AMPERSAND:Qc,APOSTROPHE:Xp,ASTERISK:Yc,AT:Ur,BACKSLASH:Xc,BACKTICK:Zc,CARET:eu,COLON:Wr,COMMA:Zp,DOLLAR:tu,DOT:Fn,EQUALS:nu,EXCLAMATION:em,HYPHEN:gn,PERCENT:al,PIPE:ru,PLUS:su,POUND:iu,QUERY:cl,QUOTE:tm,FULLWIDTHMIDDLEDOT:ib,SEMI:nm,SLASH:Un,TILDE:ul,UNDERSCORE:ou,EMOJI:ob,SYM:lu});const ir=/[a-z]/,Jo=new RegExp("\\p{L}","u"),Kh=new RegExp("\\p{Emoji}","u"),or=/\d/,Jh=/\s/,Xx="\r",Gh=`
`,ZO="️",eR="‍",Qh="￼";let ic=null,oc=null;function tR(n=[]){const e={};Qt.groups=e;const t=new Qt;ic==null&&(ic=Zx(KO)),oc==null&&(oc=Zx(JO)),K(t,"'",Xp),K(t,"{",ol),K(t,"}",ll),K(t,"[",Lc),K(t,"]",Dc),K(t,"(",zc),K(t,")",$c),K(t,"<",Bc),K(t,">",Fc),K(t,"（",Uc),K(t,"）",Hc),K(t,"「",Vc),K(t,"」",Wc),K(t,"『",qc),K(t,"』",Kc),K(t,"＜",Jc),K(t,"＞",Gc),K(t,"&",Qc),K(t,"*",Yc),K(t,"@",Ur),K(t,"`",Zc),K(t,"^",eu),K(t,":",Wr),K(t,",",Zp),K(t,"$",tu),K(t,".",Fn),K(t,"=",nu),K(t,"!",em),K(t,"-",gn),K(t,"%",al),K(t,"|",ru),K(t,"+",su),K(t,"#",iu),K(t,"?",cl),K(t,'"',tm),K(t,"/",Un),K(t,";",nm),K(t,"~",ul),K(t,"_",ou),K(t,"\\",Xc),K(t,"・",ib);const r=Ge(t,or,Qp,{[Bf]:!0});Ge(r,or,r);const s=Ge(r,ir,rb,{[il]:!0}),i=Ge(r,Jo,sb,{[Zo]:!0}),l=Ge(t,ir,lr,{[Ff]:!0});Ge(l,or,s),Ge(l,ir,l),Ge(s,or,s),Ge(s,ir,s);const c=Ge(t,Jo,Vf,{[Uf]:!0});Ge(c,ir),Ge(c,or,i),Ge(c,Jo,c),Ge(i,or,i),Ge(i,ir),Ge(i,Jo,i);const u=K(t,Gh,Yp,{[qh]:!0}),h=K(t,Xx,Kf,{[qh]:!0}),f=Ge(t,Jh,Kf,{[qh]:!0});K(t,Qh,f),K(h,Gh,u),K(h,Qh,f),Ge(h,Jh,f),K(f,Xx),K(f,Gh),Ge(f,Jh,f),K(f,Qh,f);const g=Ge(t,Kh,ob,{[nb]:!0});K(g,"#"),Ge(g,Kh,g),K(g,ZO,g);const x=K(g,eR);K(x,"#"),Ge(x,Kh,g);const w=[[ir,l],[or,s]],b=[[ir,null],[Jo,c],[or,i]];for(let k=0;k<ic.length;k++)Ir(t,ic[k],Wf,lr,w);for(let k=0;k<oc.length;k++)Ir(t,oc[k],qf,Vf,b);Is(Wf,{tld:!0,ascii:!0},e),Is(qf,{utld:!0,alpha:!0},e),Ir(t,"file",yc,lr,w),Ir(t,"mailto",yc,lr,w),Ir(t,"http",Pi,lr,w),Ir(t,"https",Pi,lr,w),Ir(t,"ftp",Pi,lr,w),Ir(t,"ftps",Pi,lr,w),Is(yc,{scheme:!0,ascii:!0},e),Is(Pi,{slashscheme:!0,ascii:!0},e),n=n.sort((k,C)=>k[0]>C[0]?1:-1);for(let k=0;k<n.length;k++){const C=n[k][0],M=n[k][1]?{[GO]:!0}:{[QO]:!0};C.indexOf("-")>=0?M[Hf]=!0:ir.test(C)?or.test(C)?M[il]=!0:M[Ff]=!0:M[Bf]=!0,Yx(t,C,C,M)}return Yx(t,"localhost",Nl,{ascii:!0}),t.jd=new Qt(lu),{start:t,tokens:Ki({groups:e},lb)}}function ab(n,e){const t=nR(e.replace(/[A-Z]/g,c=>c.toLowerCase())),r=t.length,s=[];let i=0,l=0;for(;l<r;){let c=n,u=null,h=0,f=null,g=-1,x=-1;for(;l<r&&(u=c.go(t[l]));)c=u,c.accepts()?(g=0,x=0,f=c):g>=0&&(g+=t[l].length,x++),h+=t[l].length,i+=t[l].length,l++;i-=g,l-=x,h-=g,s.push({t:f.t,v:e.slice(i-h,i),s:i-h,e:i})}return s}function nR(n){const e=[],t=n.length;let r=0;for(;r<t;){let s=n.charCodeAt(r),i,l=s<55296||s>56319||r+1===t||(i=n.charCodeAt(r+1))<56320||i>57343?n[r]:n.slice(r,r+2);e.push(l),r+=l.length}return e}function Ir(n,e,t,r,s){let i;const l=e.length;for(let c=0;c<l-1;c++){const u=e[c];n.j[u]?i=n.j[u]:(i=new Qt(r),i.jr=s.slice(),n.j[u]=i),n=i}return i=new Qt(t),i.jr=s.slice(),n.j[e[l-1]]=i,i}function Zx(n){const e=[],t=[];let r=0,s="0123456789";for(;r<n.length;){let i=0;for(;s.indexOf(n[r+i])>=0;)i++;if(i>0){e.push(t.join(""));for(let l=parseInt(n.substring(r,r+i),10);l>0;l--)t.pop();r+=i}else t.push(n[r]),r++}return e}const El={defaultProtocol:"http",events:null,format:ev,formatHref:ev,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function rm(n,e=null){let t=Ki({},El);n&&(t=Ki(t,n instanceof rm?n.o:n));const r=t.ignoreTags,s=[];for(let i=0;i<r.length;i++)s.push(r[i].toUpperCase());this.o=t,e&&(this.defaultRender=e),this.ignoreTags=s}rm.prototype={o:El,ignoreTags:[],defaultRender(n){return n},check(n){return this.get("validate",n.toString(),n)},get(n,e,t){const r=e!=null;let s=this.o[n];return s&&(typeof s=="object"?(s=t.t in s?s[t.t]:El[n],typeof s=="function"&&r&&(s=s(e,t))):typeof s=="function"&&r&&(s=s(e,t.t,t)),s)},getObj(n,e,t){let r=this.o[n];return typeof r=="function"&&e!=null&&(r=r(e,t.t,t)),r},render(n){const e=n.render(this);return(this.get("render",null,n)||this.defaultRender)(e,n.t,n)}};function ev(n){return n}function cb(n,e){this.t="token",this.v=n,this.tk=e}cb.prototype={isLink:!1,toString(){return this.v},toHref(n){return this.toString()},toFormattedString(n){const e=this.toString(),t=n.get("truncate",e,this),r=n.get("format",e,this);return t&&r.length>t?r.substring(0,t)+"…":r},toFormattedHref(n){return n.get("formatHref",this.toHref(n.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(n=El.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(n),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(n){return{type:this.t,value:this.toFormattedString(n),isLink:this.isLink,href:this.toFormattedHref(n),start:this.startIndex(),end:this.endIndex()}},validate(n){return n.get("validate",this.toString(),this)},render(n){const e=this,t=this.toHref(n.get("defaultProtocol")),r=n.get("formatHref",t,this),s=n.get("tagName",t,e),i=this.toFormattedString(n),l={},c=n.get("className",t,e),u=n.get("target",t,e),h=n.get("rel",t,e),f=n.getObj("attributes",t,e),g=n.getObj("events",t,e);return l.href=r,c&&(l.class=c),u&&(l.target=u),h&&(l.rel=h),f&&Ki(l,f),{tagName:s,attributes:l,content:i,eventListeners:g}}};function Cu(n,e){class t extends cb{constructor(s,i){super(s,i),this.t=n}}for(const r in e)t.prototype[r]=e[r];return t.t=n,t}const tv=Cu("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),nv=Cu("text"),rR=Cu("nl"),lc=Cu("url",{isLink:!0,toHref(n=El.defaultProtocol){return this.hasProtocol()?this.v:`${n}://${this.v}`},hasProtocol(){const n=this.tk;return n.length>=2&&n[0].t!==Nl&&n[1].t===Wr}}),pn=n=>new Qt(n);function sR({groups:n}){const e=n.domain.concat([Qc,Yc,Ur,Xc,Zc,eu,tu,nu,gn,Qp,al,ru,su,iu,Un,lu,ul,ou]),t=[Wr,Zp,Fn,em,al,cl,tm,nm,Bc,Fc,ol,ll,Dc,Lc,zc,$c,Uc,Hc,Vc,Wc,qc,Kc,Jc,Gc],r=[Qc,Xp,Yc,Xc,Zc,eu,tu,nu,gn,ol,ll,al,ru,su,iu,cl,Un,lu,ul,ou],s=pn(),i=K(s,ul);xe(i,r,i),xe(i,n.domain,i);const l=pn(),c=pn(),u=pn();xe(s,n.domain,l),xe(s,n.scheme,c),xe(s,n.slashscheme,u),xe(l,r,i),xe(l,n.domain,l);const h=K(l,Ur);K(i,Ur,h),K(c,Ur,h),K(u,Ur,h);const f=K(i,Fn);xe(f,r,i),xe(f,n.domain,i);const g=pn();xe(h,n.domain,g),xe(g,n.domain,g);const x=K(g,Fn);xe(x,n.domain,g);const w=pn(tv);xe(x,n.tld,w),xe(x,n.utld,w),K(h,Nl,w);const b=K(g,gn);K(b,gn,b),xe(b,n.domain,g),xe(w,n.domain,g),K(w,Fn,x),K(w,gn,b);const k=K(w,Wr);xe(k,n.numeric,tv);const C=K(l,gn),N=K(l,Fn);K(C,gn,C),xe(C,n.domain,l),xe(N,r,i),xe(N,n.domain,l);const M=pn(lc);xe(N,n.tld,M),xe(N,n.utld,M),xe(M,n.domain,l),xe(M,r,i),K(M,Fn,N),K(M,gn,C),K(M,Ur,h);const I=K(M,Wr),V=pn(lc);xe(I,n.numeric,V);const U=pn(lc),D=pn();xe(U,e,U),xe(U,t,D),xe(D,e,U),xe(D,t,D),K(M,Un,U),K(V,Un,U);const B=K(c,Wr),oe=K(u,Wr),se=K(oe,Un),Te=K(se,Un);xe(c,n.domain,l),K(c,Fn,N),K(c,gn,C),xe(u,n.domain,l),K(u,Fn,N),K(u,gn,C),xe(B,n.domain,U),K(B,Un,U),K(B,cl,U),xe(Te,n.domain,U),xe(Te,e,U),K(Te,Un,U);const Ze=[[ol,ll],[Lc,Dc],[zc,$c],[Bc,Fc],[Uc,Hc],[Vc,Wc],[qc,Kc],[Jc,Gc]];for(let Re=0;Re<Ze.length;Re++){const[He,Ke]=Ze[Re],Ve=K(U,He);K(D,He,Ve),K(Ve,Ke,U);const Ae=pn(lc);xe(Ve,e,Ae);const Se=pn();xe(Ve,t),xe(Ae,e,Ae),xe(Ae,t,Se),xe(Se,e,Ae),xe(Se,t,Se),K(Ae,Ke,U),K(Se,Ke,U)}return K(s,Nl,M),K(s,Yp,rR),{start:s,tokens:lb}}function iR(n,e,t){let r=t.length,s=0,i=[],l=[];for(;s<r;){let c=n,u=null,h=null,f=0,g=null,x=-1;for(;s<r&&!(u=c.go(t[s].t));)l.push(t[s++]);for(;s<r&&(h=u||c.go(t[s].t));)u=null,c=h,c.accepts()?(x=0,g=c):x>=0&&x++,s++,f++;if(x<0)s-=f,s<r&&(l.push(t[s]),s++);else{l.length>0&&(i.push(Yh(nv,e,l)),l=[]),s-=x,f-=x;const w=g.t,b=t.slice(s-f,s);i.push(Yh(w,e,b))}}return l.length>0&&i.push(Yh(nv,e,l)),i}function Yh(n,e,t){const r=t[0].s,s=t[t.length-1].e,i=e.slice(r,s);return new n(i,t)}const oR=typeof console<"u"&&console&&console.warn||(()=>{}),lR="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",Fe={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function aR(){return Qt.groups={},Fe.scanner=null,Fe.parser=null,Fe.tokenQueue=[],Fe.pluginQueue=[],Fe.customSchemes=[],Fe.initialized=!1,Fe}function rv(n,e=!1){if(Fe.initialized&&oR(`linkifyjs: already initialized - will not register custom scheme "${n}" ${lR}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(n))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);Fe.customSchemes.push([n,e])}function cR(){Fe.scanner=tR(Fe.customSchemes);for(let n=0;n<Fe.tokenQueue.length;n++)Fe.tokenQueue[n][1]({scanner:Fe.scanner});Fe.parser=sR(Fe.scanner.tokens);for(let n=0;n<Fe.pluginQueue.length;n++)Fe.pluginQueue[n][1]({scanner:Fe.scanner,parser:Fe.parser});return Fe.initialized=!0,Fe}function sm(n){return Fe.initialized||cR(),iR(Fe.parser.start,n,ab(Fe.scanner.start,n))}sm.scan=ab;function ub(n,e=null,t=null){if(e&&typeof e=="object"){if(t)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);t=e,e=null}const r=new rm(t),s=sm(n),i=[];for(let l=0;l<s.length;l++){const c=s[l];c.isLink&&(!e||c.t===e)&&r.check(c)&&i.push(c.toFormattedObject(r))}return i}function uR(n){return n.length===1?n[0].isLink:n.length===3&&n[1].isLink?["()","[]"].includes(n[0].value+n[2].value):!1}function dR(n){return new ct({key:new It("autolink"),appendTransaction:(e,t,r)=>{const s=e.some(h=>h.docChanged)&&!t.doc.eq(r.doc),i=e.some(h=>h.getMeta("preventAutolink"));if(!s||i)return;const{tr:l}=r,c=FA(t.doc,[...e]);if(JA(c).forEach(({newRange:h})=>{const f=HA(r.doc,h,w=>w.isTextblock);let g,x;if(f.length>1?(g=f[0],x=r.doc.textBetween(g.pos,g.pos+g.node.nodeSize,void 0," ")):f.length&&r.doc.textBetween(h.from,h.to," "," ").endsWith(" ")&&(g=f[0],x=r.doc.textBetween(g.pos,h.to,void 0," ")),g&&x){const w=x.split(" ").filter(N=>N!=="");if(w.length<=0)return!1;const b=w[w.length-1],k=g.pos+x.lastIndexOf(b);if(!b)return!1;const C=sm(b).map(N=>N.toObject(n.defaultProtocol));if(!uR(C))return!1;C.filter(N=>N.isLink).map(N=>({...N,from:k+N.start+1,to:k+N.end+1})).filter(N=>r.schema.marks.code?!r.doc.rangeHasMark(N.from,N.to,r.schema.marks.code):!0).filter(N=>n.validate(N.value)).filter(N=>n.shouldAutoLink(N.value)).forEach(N=>{Wp(N.from,N.to,r.doc).some(M=>M.mark.type===n.type)||l.addMark(N.from,N.to,n.type.create({href:N.href}))})}}),!!l.steps.length)return l}})}function hR(n){return new ct({key:new It("handleClickLink"),props:{handleClick:(e,t,r)=>{var s,i;if(r.button!==0||!e.editable)return!1;let l=r.target;const c=[];for(;l.nodeName!=="DIV";)c.push(l),l=l.parentNode;if(!c.find(x=>x.nodeName==="A"))return!1;const u=Jw(e.state,n.type.name),h=r.target,f=(s=h==null?void 0:h.href)!==null&&s!==void 0?s:u.href,g=(i=h==null?void 0:h.target)!==null&&i!==void 0?i:u.target;return h&&f?(window.open(f,g),!0):!1}}})}function fR(n){return new ct({key:new It("handlePasteLink"),props:{handlePaste:(e,t,r)=>{const{state:s}=e,{selection:i}=s,{empty:l}=i;if(l)return!1;let c="";r.content.forEach(h=>{c+=h.textContent});const u=ub(c,{defaultProtocol:n.defaultProtocol}).find(h=>h.isLink&&h.value===c);return!c||!u?!1:n.editor.commands.setMark(n.type,{href:u.href})}}})}const pR=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g;function js(n,e){const t=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(r=>{const s=typeof r=="string"?r:r.scheme;s&&t.push(s)}),!n||n.replace(pR,"").match(new RegExp(`^(?:(?:${t.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}const Jf=wn.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(n=>{if(typeof n=="string"){rv(n);return}rv(n.scheme,n.optionalSlashes)})},onDestroy(){aR()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(n,e)=>!!js(n,e.protocols),validate:n=>!!n,shouldAutoLink:n=>!!n}},addAttributes(){return{href:{default:null,parseHTML(n){return n.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:n=>{const e=n.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:t=>!!js(t,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:n}){return this.options.isAllowedUri(n.href,{defaultValidate:e=>!!js(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",ze(this.options.HTMLAttributes,n),0]:["a",ze(this.options.HTMLAttributes,{...n,href:""}),0]},addCommands(){return{setLink:n=>({chain:e})=>{const{href:t}=n;return this.options.isAllowedUri(t,{defaultValidate:r=>!!js(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,n).setMeta("preventAutolink",!0).run():!1},toggleLink:n=>({chain:e})=>{const{href:t}=n;return this.options.isAllowedUri(t,{defaultValidate:r=>!!js(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().toggleMark(this.name,n,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run():!1},unsetLink:()=>({chain:n})=>n().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[ss({find:n=>{const e=[];if(n){const{protocols:t,defaultProtocol:r}=this.options,s=ub(n).filter(i=>i.isLink&&this.options.isAllowedUri(i.value,{defaultValidate:l=>!!js(l,t),protocols:t,defaultProtocol:r}));s.length&&s.forEach(i=>e.push({text:i.value,data:{href:i.href},index:i.start}))}return e},type:this.type,getAttributes:n=>{var e;return{href:(e=n.data)===null||e===void 0?void 0:e.href}}})]},addProseMirrorPlugins(){const n=[],{protocols:e,defaultProtocol:t}=this.options;return this.options.autolink&&n.push(dR({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:s=>!!js(s,e),protocols:e,defaultProtocol:t}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&n.push(hR({type:this.type})),this.options.linkOnPaste&&n.push(fR({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),n}}),mR=n=>{if(!n.children.length)return;const e=n.querySelectorAll("span");e&&e.forEach(t=>{var r,s;const i=t.getAttribute("style"),l=(s=(r=t.parentElement)===null||r===void 0?void 0:r.closest("span"))===null||s===void 0?void 0:s.getAttribute("style");t.setAttribute("style",`${l};${i}`)})},Gf=wn.create({name:"textStyle",priority:101,addOptions(){return{HTMLAttributes:{},mergeNestedSpanStyles:!1}},parseHTML(){return[{tag:"span",getAttrs:n=>n.hasAttribute("style")?(this.options.mergeNestedSpanStyles&&mR(n),{}):!1}]},renderHTML({HTMLAttributes:n}){return["span",ze(this.options.HTMLAttributes,n),0]},addCommands(){return{removeEmptyTextStyle:()=>({tr:n})=>{const{selection:e}=n;return n.doc.nodesBetween(e.from,e.to,(t,r)=>{if(t.isTextblock)return!0;t.marks.filter(s=>s.type===this.type).some(s=>Object.values(s.attrs).some(i=>!!i))||n.removeMark(r,r+t.nodeSize,this.type)}),!0}}}}),Qf=at.create({name:"color",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{color:{default:null,parseHTML:n=>{var e;return(e=n.style.color)===null||e===void 0?void 0:e.replace(/['"]+/g,"")},renderHTML:n=>n.color?{style:`color: ${n.color}`}:{}}}}]},addCommands(){return{setColor:n=>({chain:e})=>e().setMark("textStyle",{color:n}).run(),unsetColor:()=>({chain:n})=>n().setMark("textStyle",{color:null}).removeEmptyTextStyle().run()}}}),Yf=at.create({name:"fontFamily",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontFamily:{default:null,parseHTML:n=>n.style.fontFamily,renderHTML:n=>n.fontFamily?{style:`font-family: ${n.fontFamily}`}:{}}}}]},addCommands(){return{setFontFamily:n=>({chain:e})=>e().setMark("textStyle",{fontFamily:n}).run(),unsetFontFamily:()=>({chain:n})=>n().setMark("textStyle",{fontFamily:null}).removeEmptyTextStyle().run()}}});function sv({onClose:n,onSave:e,event:t}){const[r,s]=A.useState((t==null?void 0:t.title)||""),[i,l]=A.useState(t?new Date(t.start_date).toISOString().split("T")[0]:""),[c,u]=A.useState(t?new Date(t.start_date).toTimeString().slice(0,5):""),[h,f]=A.useState(t?new Date(t.end_date).toISOString().split("T")[0]:""),[g,x]=A.useState(t?new Date(t.end_date).toTimeString().slice(0,5):""),[w,b]=A.useState((t==null?void 0:t.location)||""),k=If({extensions:[Lf,Df,zf.configure({types:["heading","paragraph"]}),$f,Jf.configure({openOnClick:!1}),Gf,Qf,Yf],content:(t==null?void 0:t.description)||"",onUpdate:({editor:T})=>{const $=T.getHTML();N($)}}),[C,N]=A.useState((t==null?void 0:t.description)||""),[M,I]=A.useState((t==null?void 0:t.content)||""),[V,U]=A.useState((t==null?void 0:t.event_type)||"webinar"),[D,B]=A.useState((t==null?void 0:t.featured_image)||""),[oe,se]=A.useState(!1),[Te,Ze]=A.useState((t==null?void 0:t.capacity)||null),[Re,He]=A.useState((t==null?void 0:t.status)||"draft"),[Ke,Ve]=A.useState(!1),[Ae,Se]=A.useState((t==null?void 0:t.ticket_price)||null),F=If({extensions:[Lf,Df,zf.configure({types:["heading","paragraph"]}),$f,Jf.configure({openOnClick:!1}),Gf,Qf,Yf],content:M,onUpdate:({editor:T})=>{I(T.getHTML())}}),le=T=>{B(T),se(!1)},X=async T=>{T.preventDefault(),Ve(!0);try{const{data:{user:$}}=await pe.auth.getUser();if(!$)throw new Error("Not authenticated");const me=new Date(`${i}T${c}`),ye=new Date(`${h}T${g}`),be={title:r,description:C,event_type:V,content:M,start_date:me.toISOString(),end_date:ye.toISOString(),location:w,featured_image:D,status:Re,capacity:Te,ticket_price:Ae,published_at:Re==="published"?new Date().toISOString():null,organizer_id:$.id},{error:ke}=t?await pe.from("events").update(be).eq("id",t.id):await pe.from("events").insert(be);if(ke)throw ke;e(),n()}catch($){console.error("Error creating event:",$),alert("Error creating event. Please try again.")}finally{Ve(!1)}};return p.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[p.jsxs("div",{className:"flex justify-between items-center mb-6",children:[p.jsx("h2",{className:"text-2xl font-display font-bold text-nexius-navy",children:t?"Edit Event":"Create Event"}),p.jsx("button",{onClick:n,className:"text-gray-400 hover:text-gray-500 transition-colors",children:p.jsx(qn,{className:"h-6 w-6"})})]}),p.jsxs("form",{onSubmit:X,className:"space-y-6",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-1",children:"Event Name"}),p.jsx("input",{type:"text",id:"title",value:r,onChange:T=>s(T.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-nexius-teal focus:border-nexius-teal",placeholder:"Enter event name"})]}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start"}),p.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[p.jsx("input",{type:"date",value:i,onChange:T=>l(T.target.value),required:!0,className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-nexius-teal focus:border-nexius-teal"}),p.jsx("input",{type:"time",value:c,onChange:T=>u(T.target.value),required:!0,className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-nexius-teal focus:border-nexius-teal"})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End"}),p.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[p.jsx("input",{type:"date",value:h,onChange:T=>f(T.target.value),required:!0,className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-nexius-teal focus:border-nexius-teal"}),p.jsx("input",{type:"time",value:g,onChange:T=>x(T.target.value),required:!0,className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-nexius-teal focus:border-nexius-teal"})]})]})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"location",className:"block text-sm font-medium text-gray-700 mb-1",children:"Location"}),p.jsxs("div",{className:"relative",children:[p.jsx(yp,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),p.jsx("input",{type:"text",id:"location",value:w,onChange:T=>b(T.target.value),required:!0,className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-nexius-teal focus:border-nexius-teal",placeholder:"Add event location or virtual link"})]})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"eventType",className:"block text-sm font-medium text-gray-700 mb-1",children:"Event Type"}),p.jsxs("select",{id:"eventType",value:V,onChange:T=>U(T.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-nexius-teal focus:border-nexius-teal",children:[p.jsx("option",{value:"webinar",children:"Webinar"}),p.jsx("option",{value:"workshop",children:"Workshop"}),p.jsx("option",{value:"conference",children:"Conference"}),p.jsx("option",{value:"meetup",children:"Meetup"}),p.jsx("option",{value:"other",children:"Other"})]})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"featuredImage",className:"block text-sm font-medium text-gray-700 mb-1",children:"Featured Image"}),oe?p.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:p.jsx(ml,{onUploadComplete:le})}):D?p.jsxs("div",{className:"relative aspect-video rounded-lg overflow-hidden bg-gray-100",children:[p.jsx("img",{src:D,alt:"Featured",className:"w-full h-full object-cover"}),p.jsx("button",{type:"button",onClick:()=>se(!0),className:"absolute inset-0 bg-black/50 opacity-0 hover:opacity-100 transition-opacity flex items-center justify-center text-white",children:"Change Image"})]}):p.jsxs("div",{onClick:()=>se(!0),className:"w-full px-4 py-2 border-2 border-dashed border-gray-300 rounded-lg text-gray-600 hover:border-nexius-teal hover:text-nexius-teal transition-colors cursor-pointer flex flex-col items-center justify-center gap-2",children:[p.jsx(gp,{className:"h-8 w-8 text-gray-400"}),p.jsx("span",{children:"Upload Featured Image"}),p.jsx("span",{className:"text-sm text-gray-500",children:"Click to browse"})]})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description (Rich Text)"}),p.jsxs("div",{className:"border border-gray-300 rounded-lg overflow-hidden",children:[p.jsxs("div",{className:"bg-white border-b border-gray-200 p-2 flex flex-wrap gap-1",children:[p.jsx("button",{type:"button",onClick:()=>k==null?void 0:k.chain().focus().toggleBold().run(),className:`p-2 rounded hover:bg-gray-100 ${k!=null&&k.isActive("bold")?"bg-gray-100":""}`,children:"Bold"}),p.jsx("button",{type:"button",onClick:()=>k==null?void 0:k.chain().focus().toggleItalic().run(),className:`p-2 rounded hover:bg-gray-100 ${k!=null&&k.isActive("italic")?"bg-gray-100":""}`,children:"Italic"}),p.jsx("button",{type:"button",onClick:()=>k==null?void 0:k.chain().focus().toggleUnderline().run(),className:`p-2 rounded hover:bg-gray-100 ${k!=null&&k.isActive("underline")?"bg-gray-100":""}`,children:"Underline"}),p.jsx("button",{type:"button",onClick:()=>k==null?void 0:k.chain().focus().toggleBulletList().run(),className:`p-2 rounded hover:bg-gray-100 ${k!=null&&k.isActive("bulletList")?"bg-gray-100":""}`,children:"Bullet List"})]}),p.jsx(Rf,{editor:k,className:"prose max-w-none p-4 min-h-[120px] focus:outline-none"})]})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"content",className:"block text-sm font-medium text-gray-700 mb-1",children:"Content (Rich Text)"}),p.jsxs("div",{className:"border border-gray-300 rounded-lg overflow-hidden",children:[p.jsxs("div",{className:"bg-white border-b border-gray-200 p-2 flex flex-wrap gap-1",children:[p.jsx("button",{type:"button",onClick:()=>F==null?void 0:F.chain().focus().toggleBold().run(),className:`p-2 rounded hover:bg-gray-100 ${F!=null&&F.isActive("bold")?"bg-gray-100":""}`,children:"Bold"}),p.jsx("button",{type:"button",onClick:()=>F==null?void 0:F.chain().focus().toggleItalic().run(),className:`p-2 rounded hover:bg-gray-100 ${F!=null&&F.isActive("italic")?"bg-gray-100":""}`,children:"Italic"}),p.jsx("button",{type:"button",onClick:()=>F==null?void 0:F.chain().focus().toggleUnderline().run(),className:`p-2 rounded hover:bg-gray-100 ${F!=null&&F.isActive("underline")?"bg-gray-100":""}`,children:"Underline"}),p.jsx("button",{type:"button",onClick:()=>F==null?void 0:F.chain().focus().toggleHeading({level:2}).run(),className:`p-2 rounded hover:bg-gray-100 ${F!=null&&F.isActive("heading",{level:2})?"bg-gray-100":""}`,children:"H2"}),p.jsx("button",{type:"button",onClick:()=>F==null?void 0:F.chain().focus().toggleBulletList().run(),className:`p-2 rounded hover:bg-gray-100 ${F!=null&&F.isActive("bulletList")?"bg-gray-100":""}`,children:"Bullet List"})]}),p.jsx(Rf,{editor:F,className:"prose max-w-none p-4 min-h-[200px] focus:outline-none"})]})]}),p.jsxs("div",{className:"space-y-4 border-t border-gray-200 pt-6 mt-6",children:[p.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Event Options"}),p.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-gray-200",children:[p.jsxs("div",{className:"flex items-center",children:[Re==="published"?p.jsx(e1,{className:"h-5 w-5 text-gray-400 mr-2"}):p.jsx(Zv,{className:"h-5 w-5 text-gray-400 mr-2"}),p.jsx("span",{className:"text-gray-700",children:"Status"})]}),p.jsx("button",{type:"button",onClick:()=>He(Re==="published"?"draft":"published"),className:`px-3 py-1 rounded-full text-sm font-medium transition-colors ${Re==="published"?"bg-green-100 text-green-800 hover:bg-green-200":"bg-gray-100 text-gray-800 hover:bg-gray-200"}`,children:Re==="published"?"Published":"Draft"})]}),p.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-gray-200",children:[p.jsxs("div",{className:"flex items-center",children:[p.jsx(o1,{className:"h-5 w-5 text-gray-400 mr-2"}),p.jsx("span",{className:"text-gray-700",children:"Require Approval"})]}),p.jsxs("div",{className:"relative inline-block w-10 mr-2 align-middle select-none",children:[p.jsx("input",{type:"checkbox",name:"toggle",id:"toggle",className:"toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer"}),p.jsx("label",{htmlFor:"toggle",className:"toggle-label block overflow-hidden h-6 rounded-full bg-gray-300 cursor-pointer"})]})]}),p.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-gray-200",children:[p.jsxs("div",{className:"flex items-center",children:[p.jsx(Xi,{className:"h-5 w-5 text-gray-400 mr-2"}),p.jsx("span",{className:"text-gray-700",children:"Event Capacity"})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("input",{type:"number",min:"0",value:Te===null?"":Te,onChange:T=>Ze(T.target.value?parseInt(T.target.value):null),placeholder:"Unlimited",className:"w-24 px-3 py-1 border border-gray-300 rounded-lg focus:ring-2 focus:ring-nexius-teal focus:border-nexius-teal text-right"}),p.jsx("span",{className:"text-gray-500 text-sm",children:"seats"})]})]}),p.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-gray-200",children:[p.jsxs("div",{className:"flex items-center",children:[p.jsx(gE,{className:"h-5 w-5 text-gray-400 mr-2"}),p.jsx("span",{className:"text-gray-700",children:"Ticket Price"})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"text-gray-500",children:"$"}),p.jsx("input",{type:"number",min:"0",step:"0.01",value:Ae===null?"":Ae,onChange:T=>Se(T.target.value?parseFloat(T.target.value):null),placeholder:"Free",className:"w-24 px-3 py-1 border border-gray-300 rounded-lg focus:ring-2 focus:ring-nexius-teal focus:border-nexius-teal text-right"})]})]})]}),p.jsxs("div",{className:"flex justify-end gap-3",children:[p.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:"Cancel"}),p.jsx("button",{type:"submit",disabled:Ke,className:"px-6 py-2 bg-nexius-teal text-white rounded-lg hover:bg-nexius-teal/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-medium",children:Ke?t?"Updating...":"Creating...":t?"Update Event":"Create Event"})]})]})]})}function Xf({events:n,onEventClick:e}){const t=Gi(),r=cp(),s=l=>new Date(l).toLocaleString("en-US",{hour:"numeric",minute:"numeric",hour12:!0,month:"short",day:"numeric",year:"numeric"}),i=l=>{t.pathname==="/admin"?e==null||e(l):r(`/event/${l.slug}`)};return p.jsx("div",{className:"space-y-4",children:n.map(l=>p.jsx("div",{onClick:()=>i(l),className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 hover:border-nexius-teal/30 hover:shadow-md transition-all cursor-pointer",children:p.jsxs("div",{className:"flex flex-col sm:flex-row items-start gap-4",children:[p.jsx("div",{className:"w-full sm:w-24 h-48 sm:h-24 rounded-lg overflow-hidden bg-gray-100 flex-shrink-0",children:l.featured_image?p.jsx("img",{src:l.featured_image,alt:l.title,className:"w-full h-full object-cover"}):p.jsx("div",{className:"w-full h-full bg-gray-200 flex items-center justify-center",children:p.jsx("span",{className:"text-gray-400 text-xs",children:"No Image"})})}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("div",{className:"sm:hidden mb-2",children:p.jsx("div",{className:"flex items-center",children:p.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${l.status==="published"?"bg-green-100 text-green-800":l.status==="draft"?"bg-gray-100 text-gray-800":"bg-red-100 text-red-800"}`,children:l.status.charAt(0).toUpperCase()+l.status.slice(1)})})}),p.jsxs("div",{className:"flex flex-col sm:flex-row items-start justify-between gap-2 sm:gap-4",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:l.title}),p.jsxs("div",{className:"flex items-center text-sm text-gray-500 mb-2",children:[p.jsx(yp,{className:"h-4 w-4 mr-1"}),l.location]})]}),p.jsxs("div",{className:"hidden sm:flex items-center self-center",children:[p.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${l.status==="published"?"bg-green-100 text-green-800":l.status==="draft"?"bg-gray-100 text-gray-800":"bg-red-100 text-red-800"}`,children:l.status.charAt(0).toUpperCase()+l.status.slice(1)}),p.jsx(Yv,{className:"h-5 w-5 text-gray-400 ml-2"})]})]}),p.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 sm:gap-0",children:[p.jsx("div",{className:"text-sm text-gray-500",children:s(l.start_date)}),p.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[p.jsx(Xi,{className:"h-4 w-4 mr-1"}),p.jsx("span",{children:l.capacity?`${l.capacity} seats`:"Unlimited"})]})]})]})]})},l.id))})}async function gR(n){try{const{data:e,error:t}=await pe.from("articles").insert(n).select().single();if(t)throw t;return e}catch(e){throw console.error("Error creating article:",e),e}}async function yR(n){try{let e=pe.from("articles").select("*").order("created_at",{ascending:!1});n!=null&&n.status,n!=null&&n.authorId,n!=null&&n.limit,n!=null&&n.offset;const{data:t,error:r}=await e;if(r)throw r;return t}catch(e){throw console.error("Error fetching articles:",e),e}}async function xR(n,e){try{const{data:t,error:r}=await pe.from("articles").update(e).eq("id",n).select().single();if(r)throw r;return t}catch(t){throw console.error("Error updating article:",t),t}}async function vR(n){try{const{error:e}=await pe.from("articles").delete().eq("id",n);if(e)throw e}catch(e){throw console.error("Error deleting article:",e),e}}async function wR(n){try{const{data:e,error:t}=await pe.from("articles").update({status:"published",published_at:new Date().toISOString()}).eq("id",n).select().single();if(t)throw t;return e}catch(e){throw console.error("Error publishing article:",e),e}}async function bR(n){try{const{data:e,error:t}=await pe.from("articles").update({status:"draft",published_at:null}).eq("id",n).select().single();if(t)throw t;return e}catch(e){throw console.error("Error unpublishing article:",e),e}}async function kR(n){try{let e=pe.from("leads").select("*").order("created_at",{ascending:!1});n!=null&&n.status,n!=null&&n.limit,n!=null&&n.offset;const{data:t,error:r}=await e;if(r)throw r;return t}catch(e){throw console.error("Error fetching leads:",e),e}}async function SR(n){try{const{data:e,error:t}=await pe.from("chat_sessions").insert({visitor_id:n.visitor_id,visitor_name:n.visitor_name,visitor_email:n.visitor_email,status:"active"}).select().single();if(t)throw t;const{error:r}=await pe.from("chat_messages").insert({session_id:e.id,visitor_id:n.visitor_id,content:"Welcome! How can we help you today?",is_from_visitor:!1,read:!0});if(r)throw r;try{await fetch("undefined/functions/v1/notify-new-chat",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer undefined"},body:JSON.stringify({session:e})}).then(async s=>{if(!s.ok){const i=await s.json();console.warn("Admin notification not sent:",i)}})}catch{console.warn("Could not send admin notification")}return e}catch(e){throw console.error("Error creating chat session:",e),e}}async function CR(n){try{const{data:e,error:t}=await pe.from("chat_messages").select("*").eq("session_id",n).order("created_at",{ascending:!0});if(t)throw t;return e}catch(e){throw console.error("Error fetching chat messages:",e),e}}async function NR(n){try{const{data:e,error:t}=await pe.from("chat_messages").insert(n).select().single();if(t)throw t;return e}catch(e){throw console.error("Error sending chat message:",e),e}}async function ER(n){try{const{error:e}=await pe.from("chat_messages").update({read:!0}).eq("session_id",n).eq("is_from_visitor",!0).eq("read",!1);if(e)throw e}catch(e){throw console.error("Error marking messages as read:",e),e}}const jR=at.create({name:"fontSize",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontSize:{default:null,parseHTML:n=>{var e;return(e=n.style.fontSize)==null?void 0:e.replace(/['"]+/g,"")},renderHTML:n=>n.fontSize?{style:`font-size: ${n.fontSize}`}:{}}}}]},addCommands(){return{setFontSize:n=>({chain:e})=>e().setMark("textStyle",{fontSize:n}).run(),unsetFontSize:()=>({chain:n})=>n().setMark("textStyle",{fontSize:null}).removeEmptyTextStyle().run()}}}),TR=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))$/,_R=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))/g,AR=wn.create({name:"highlight",addOptions(){return{multicolor:!1,HTMLAttributes:{}}},addAttributes(){return this.options.multicolor?{color:{default:null,parseHTML:n=>n.getAttribute("data-color")||n.style.backgroundColor,renderHTML:n=>n.color?{"data-color":n.color,style:`background-color: ${n.color}; color: inherit`}:{}}}:{}},parseHTML(){return[{tag:"mark"}]},renderHTML({HTMLAttributes:n}){return["mark",ze(this.options.HTMLAttributes,n),0]},addCommands(){return{setHighlight:n=>({commands:e})=>e.setMark(this.name,n),toggleHighlight:n=>({commands:e})=>e.toggleMark(this.name,n),unsetHighlight:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-h":()=>this.editor.commands.toggleHighlight()}},addInputRules(){return[Vs({find:TR,type:this.type})]},addPasteRules(){return[ss({find:_R,type:this.type})]}});var Zf,ep;if(typeof WeakMap<"u"){let n=new WeakMap;Zf=e=>n.get(e),ep=(e,t)=>(n.set(e,t),t)}else{const n=[];let t=0;Zf=r=>{for(let s=0;s<n.length;s+=2)if(n[s]==r)return n[s+1]},ep=(r,s)=>(t==10&&(t=0),n[t++]=r,n[t++]=s)}var Xe=class{constructor(n,e,t,r){this.width=n,this.height=e,this.map=t,this.problems=r}findCell(n){for(let e=0;e<this.map.length;e++){const t=this.map[e];if(t!=n)continue;const r=e%this.width,s=e/this.width|0;let i=r+1,l=s+1;for(let c=1;i<this.width&&this.map[e+c]==t;c++)i++;for(let c=1;l<this.height&&this.map[e+this.width*c]==t;c++)l++;return{left:r,top:s,right:i,bottom:l}}throw new RangeError(`No cell with offset ${n} found`)}colCount(n){for(let e=0;e<this.map.length;e++)if(this.map[e]==n)return e%this.width;throw new RangeError(`No cell with offset ${n} found`)}nextCell(n,e,t){const{left:r,right:s,top:i,bottom:l}=this.findCell(n);return e=="horiz"?(t<0?r==0:s==this.width)?null:this.map[i*this.width+(t<0?r-1:s)]:(t<0?i==0:l==this.height)?null:this.map[r+this.width*(t<0?i-1:l)]}rectBetween(n,e){const{left:t,right:r,top:s,bottom:i}=this.findCell(n),{left:l,right:c,top:u,bottom:h}=this.findCell(e);return{left:Math.min(t,l),top:Math.min(s,u),right:Math.max(r,c),bottom:Math.max(i,h)}}cellsInRect(n){const e=[],t={};for(let r=n.top;r<n.bottom;r++)for(let s=n.left;s<n.right;s++){const i=r*this.width+s,l=this.map[i];t[l]||(t[l]=!0,!(s==n.left&&s&&this.map[i-1]==l||r==n.top&&r&&this.map[i-this.width]==l)&&e.push(l))}return e}positionAt(n,e,t){for(let r=0,s=0;;r++){const i=s+t.child(r).nodeSize;if(r==n){let l=e+n*this.width;const c=(n+1)*this.width;for(;l<c&&this.map[l]<s;)l++;return l==c?i-1:this.map[l]}s=i}}static get(n){return Zf(n)||ep(n,MR(n))}};function MR(n){if(n.type.spec.tableRole!="table")throw new RangeError("Not a table node: "+n.type.name);const e=OR(n),t=n.childCount,r=[];let s=0,i=null;const l=[];for(let h=0,f=e*t;h<f;h++)r[h]=0;for(let h=0,f=0;h<t;h++){const g=n.child(h);f++;for(let b=0;;b++){for(;s<r.length&&r[s]!=0;)s++;if(b==g.childCount)break;const k=g.child(b),{colspan:C,rowspan:N,colwidth:M}=k.attrs;for(let I=0;I<N;I++){if(I+h>=t){(i||(i=[])).push({type:"overlong_rowspan",pos:f,n:N-I});break}const V=s+I*e;for(let U=0;U<C;U++){r[V+U]==0?r[V+U]=f:(i||(i=[])).push({type:"collision",row:h,pos:f,n:C-U});const D=M&&M[U];if(D){const B=(V+U)%e*2,oe=l[B];oe==null||oe!=D&&l[B+1]==1?(l[B]=D,l[B+1]=1):oe==D&&l[B+1]++}}}s+=C,f+=k.nodeSize}const x=(h+1)*e;let w=0;for(;s<x;)r[s++]==0&&w++;w&&(i||(i=[])).push({type:"missing",row:h,n:w}),f++}(e===0||t===0)&&(i||(i=[])).push({type:"zero_sized"});const c=new Xe(e,t,r,i);let u=!1;for(let h=0;!u&&h<l.length;h+=2)l[h]!=null&&l[h+1]<t&&(u=!0);return u&&RR(c,l,n),c}function OR(n){let e=-1,t=!1;for(let r=0;r<n.childCount;r++){const s=n.child(r);let i=0;if(t)for(let l=0;l<r;l++){const c=n.child(l);for(let u=0;u<c.childCount;u++){const h=c.child(u);l+h.attrs.rowspan>r&&(i+=h.attrs.colspan)}}for(let l=0;l<s.childCount;l++){const c=s.child(l);i+=c.attrs.colspan,c.attrs.rowspan>1&&(t=!0)}e==-1?e=i:e!=i&&(e=Math.max(e,i))}return e}function RR(n,e,t){n.problems||(n.problems=[]);const r={};for(let s=0;s<n.map.length;s++){const i=n.map[s];if(r[i])continue;r[i]=!0;const l=t.nodeAt(i);if(!l)throw new RangeError(`No cell with offset ${i} found`);let c=null;const u=l.attrs;for(let h=0;h<u.colspan;h++){const f=(s+h)%n.width,g=e[f*2];g!=null&&(!u.colwidth||u.colwidth[h]!=g)&&((c||(c=PR(u)))[h]=g)}c&&n.problems.unshift({type:"colwidth mismatch",pos:i,colwidth:c})}}function PR(n){if(n.colwidth)return n.colwidth.slice();const e=[];for(let t=0;t<n.colspan;t++)e.push(0);return e}function Rt(n){let e=n.cached.tableNodeTypes;if(!e){e=n.cached.tableNodeTypes={};for(const t in n.nodes){const r=n.nodes[t],s=r.spec.tableRole;s&&(e[s]=r)}}return e}var qr=new It("selectingCells");function eo(n){for(let e=n.depth-1;e>0;e--)if(n.node(e).type.spec.tableRole=="row")return n.node(0).resolve(n.before(e+1));return null}function IR(n){for(let e=n.depth;e>0;e--){const t=n.node(e).type.spec.tableRole;if(t==="cell"||t==="header_cell")return n.node(e)}return null}function Mn(n){const e=n.selection.$head;for(let t=e.depth;t>0;t--)if(e.node(t).type.spec.tableRole=="row")return!0;return!1}function Nu(n){const e=n.selection;if("$anchorCell"in e&&e.$anchorCell)return e.$anchorCell.pos>e.$headCell.pos?e.$anchorCell:e.$headCell;if("node"in e&&e.node&&e.node.type.spec.tableRole=="cell")return e.$anchor;const t=eo(e.$head)||LR(e.$head);if(t)return t;throw new RangeError(`No cell found around position ${e.head}`)}function LR(n){for(let e=n.nodeAfter,t=n.pos;e;e=e.firstChild,t++){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return n.doc.resolve(t)}for(let e=n.nodeBefore,t=n.pos;e;e=e.lastChild,t--){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return n.doc.resolve(t-e.nodeSize)}}function tp(n){return n.parent.type.spec.tableRole=="row"&&!!n.nodeAfter}function DR(n){return n.node(0).resolve(n.pos+n.nodeAfter.nodeSize)}function im(n,e){return n.depth==e.depth&&n.pos>=e.start(-1)&&n.pos<=e.end(-1)}function db(n,e,t){const r=n.node(-1),s=Xe.get(r),i=n.start(-1),l=s.nextCell(n.pos-i,e,t);return l==null?null:n.node(0).resolve(i+l)}function Ws(n,e,t=1){const r={...n,colspan:n.colspan-t};return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(e,t),r.colwidth.some(s=>s>0)||(r.colwidth=null)),r}function hb(n,e,t=1){const r={...n,colspan:n.colspan+t};if(r.colwidth){r.colwidth=r.colwidth.slice();for(let s=0;s<t;s++)r.colwidth.splice(e,0,0)}return r}function zR(n,e,t){const r=Rt(e.type.schema).header_cell;for(let s=0;s<n.height;s++)if(e.nodeAt(n.map[t+s*n.width]).type!=r)return!1;return!0}var De=class ar extends he{constructor(e,t=e){const r=e.node(-1),s=Xe.get(r),i=e.start(-1),l=s.rectBetween(e.pos-i,t.pos-i),c=e.node(0),u=s.cellsInRect(l).filter(f=>f!=t.pos-i);u.unshift(t.pos-i);const h=u.map(f=>{const g=r.nodeAt(f);if(!g)throw RangeError(`No cell with offset ${f} found`);const x=i+f+1;return new U1(c.resolve(x),c.resolve(x+g.content.size))});super(h[0].$from,h[0].$to,h),this.$anchorCell=e,this.$headCell=t}map(e,t){const r=e.resolve(t.map(this.$anchorCell.pos)),s=e.resolve(t.map(this.$headCell.pos));if(tp(r)&&tp(s)&&im(r,s)){const i=this.$anchorCell.node(-1)!=r.node(-1);return i&&this.isRowSelection()?ar.rowSelection(r,s):i&&this.isColSelection()?ar.colSelection(r,s):new ar(r,s)}return ce.between(r,s)}content(){const e=this.$anchorCell.node(-1),t=Xe.get(e),r=this.$anchorCell.start(-1),s=t.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r),i={},l=[];for(let u=s.top;u<s.bottom;u++){const h=[];for(let f=u*t.width+s.left,g=s.left;g<s.right;g++,f++){const x=t.map[f];if(i[x])continue;i[x]=!0;const w=t.findCell(x);let b=e.nodeAt(x);if(!b)throw RangeError(`No cell with offset ${x} found`);const k=s.left-w.left,C=w.right-s.right;if(k>0||C>0){let N=b.attrs;if(k>0&&(N=Ws(N,0,k)),C>0&&(N=Ws(N,N.colspan-C,C)),w.left<s.left){if(b=b.type.createAndFill(N),!b)throw RangeError(`Could not create cell with attrs ${JSON.stringify(N)}`)}else b=b.type.create(N,b.content)}if(w.top<s.top||w.bottom>s.bottom){const N={...b.attrs,rowspan:Math.min(w.bottom,s.bottom)-Math.max(w.top,s.top)};w.top<s.top?b=b.type.createAndFill(N):b=b.type.create(N,b.content)}h.push(b)}l.push(e.child(u).copy(z.from(h)))}const c=this.isColSelection()&&this.isRowSelection()?e:l;return new G(z.from(c),1,1)}replace(e,t=G.empty){const r=e.steps.length,s=this.ranges;for(let l=0;l<s.length;l++){const{$from:c,$to:u}=s[l],h=e.mapping.slice(r);e.replace(h.map(c.pos),h.map(u.pos),l?G.empty:t)}const i=he.findFrom(e.doc.resolve(e.mapping.slice(r).map(this.to)),-1);i&&e.setSelection(i)}replaceWith(e,t){this.replace(e,new G(z.from(t),0,0))}forEachCell(e){const t=this.$anchorCell.node(-1),r=Xe.get(t),s=this.$anchorCell.start(-1),i=r.cellsInRect(r.rectBetween(this.$anchorCell.pos-s,this.$headCell.pos-s));for(let l=0;l<i.length;l++)e(t.nodeAt(i[l]),s+i[l])}isColSelection(){const e=this.$anchorCell.index(-1),t=this.$headCell.index(-1);if(Math.min(e,t)>0)return!1;const r=e+this.$anchorCell.nodeAfter.attrs.rowspan,s=t+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(r,s)==this.$headCell.node(-1).childCount}static colSelection(e,t=e){const r=e.node(-1),s=Xe.get(r),i=e.start(-1),l=s.findCell(e.pos-i),c=s.findCell(t.pos-i),u=e.node(0);return l.top<=c.top?(l.top>0&&(e=u.resolve(i+s.map[l.left])),c.bottom<s.height&&(t=u.resolve(i+s.map[s.width*(s.height-1)+c.right-1]))):(c.top>0&&(t=u.resolve(i+s.map[c.left])),l.bottom<s.height&&(e=u.resolve(i+s.map[s.width*(s.height-1)+l.right-1]))),new ar(e,t)}isRowSelection(){const e=this.$anchorCell.node(-1),t=Xe.get(e),r=this.$anchorCell.start(-1),s=t.colCount(this.$anchorCell.pos-r),i=t.colCount(this.$headCell.pos-r);if(Math.min(s,i)>0)return!1;const l=s+this.$anchorCell.nodeAfter.attrs.colspan,c=i+this.$headCell.nodeAfter.attrs.colspan;return Math.max(l,c)==t.width}eq(e){return e instanceof ar&&e.$anchorCell.pos==this.$anchorCell.pos&&e.$headCell.pos==this.$headCell.pos}static rowSelection(e,t=e){const r=e.node(-1),s=Xe.get(r),i=e.start(-1),l=s.findCell(e.pos-i),c=s.findCell(t.pos-i),u=e.node(0);return l.left<=c.left?(l.left>0&&(e=u.resolve(i+s.map[l.top*s.width])),c.right<s.width&&(t=u.resolve(i+s.map[s.width*(c.top+1)-1]))):(c.left>0&&(t=u.resolve(i+s.map[c.top*s.width])),l.right<s.width&&(e=u.resolve(i+s.map[s.width*(l.top+1)-1]))),new ar(e,t)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(e,t){return new ar(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,r=t){return new ar(e.resolve(t),e.resolve(r))}getBookmark(){return new $R(this.$anchorCell.pos,this.$headCell.pos)}};De.prototype.visible=!1;he.jsonID("cell",De);var $R=class fb{constructor(e,t){this.anchor=e,this.head=t}map(e){return new fb(e.map(this.anchor),e.map(this.head))}resolve(e){const t=e.resolve(this.anchor),r=e.resolve(this.head);return t.parent.type.spec.tableRole=="row"&&r.parent.type.spec.tableRole=="row"&&t.index()<t.parent.childCount&&r.index()<r.parent.childCount&&im(t,r)?new De(t,r):he.near(r,1)}};function BR(n){if(!(n.selection instanceof De))return null;const e=[];return n.selection.forEachCell((t,r)=>{e.push(zt.node(r,r+t.nodeSize,{class:"selectedCell"}))}),Qe.create(n.doc,e)}function FR({$from:n,$to:e}){if(n.pos==e.pos||n.pos<e.pos-6)return!1;let t=n.pos,r=e.pos,s=n.depth;for(;s>=0&&!(n.after(s+1)<n.end(s));s--,t++);for(let i=e.depth;i>=0&&!(e.before(i+1)>e.start(i));i--,r--);return t==r&&/row|table/.test(n.node(s).type.spec.tableRole)}function UR({$from:n,$to:e}){let t,r;for(let s=n.depth;s>0;s--){const i=n.node(s);if(i.type.spec.tableRole==="cell"||i.type.spec.tableRole==="header_cell"){t=i;break}}for(let s=e.depth;s>0;s--){const i=e.node(s);if(i.type.spec.tableRole==="cell"||i.type.spec.tableRole==="header_cell"){r=i;break}}return t!==r&&e.parentOffset===0}function HR(n,e,t){const r=(e||n).selection,s=(e||n).doc;let i,l;if(r instanceof ae&&(l=r.node.type.spec.tableRole)){if(l=="cell"||l=="header_cell")i=De.create(s,r.from);else if(l=="row"){const c=s.resolve(r.from+1);i=De.rowSelection(c,c)}else if(!t){const c=Xe.get(r.node),u=r.from+1,h=u+c.map[c.width*c.height-1];i=De.create(s,u+1,h)}}else r instanceof ce&&FR(r)?i=ce.create(s,r.from):r instanceof ce&&UR(r)&&(i=ce.create(s,r.$from.start(),r.$from.end()));return i&&(e||(e=n.tr)).setSelection(i),e}var VR=new It("fix-tables");function pb(n,e,t,r){const s=n.childCount,i=e.childCount;e:for(let l=0,c=0;l<i;l++){const u=e.child(l);for(let h=c,f=Math.min(s,l+3);h<f;h++)if(n.child(h)==u){c=h+1,t+=u.nodeSize;continue e}r(u,t),c<s&&n.child(c).sameMarkup(u)?pb(n.child(c),u,t+1,r):u.nodesBetween(0,u.content.size,r,t+1),t+=u.nodeSize}}function mb(n,e){let t;const r=(s,i)=>{s.type.spec.tableRole=="table"&&(t=WR(n,s,i,t))};return e?e.doc!=n.doc&&pb(e.doc,n.doc,0,r):n.doc.descendants(r),t}function WR(n,e,t,r){const s=Xe.get(e);if(!s.problems)return r;r||(r=n.tr);const i=[];for(let u=0;u<s.height;u++)i.push(0);for(let u=0;u<s.problems.length;u++){const h=s.problems[u];if(h.type=="collision"){const f=e.nodeAt(h.pos);if(!f)continue;const g=f.attrs;for(let x=0;x<g.rowspan;x++)i[h.row+x]+=h.n;r.setNodeMarkup(r.mapping.map(t+1+h.pos),null,Ws(g,g.colspan-h.n,h.n))}else if(h.type=="missing")i[h.row]+=h.n;else if(h.type=="overlong_rowspan"){const f=e.nodeAt(h.pos);if(!f)continue;r.setNodeMarkup(r.mapping.map(t+1+h.pos),null,{...f.attrs,rowspan:f.attrs.rowspan-h.n})}else if(h.type=="colwidth mismatch"){const f=e.nodeAt(h.pos);if(!f)continue;r.setNodeMarkup(r.mapping.map(t+1+h.pos),null,{...f.attrs,colwidth:h.colwidth})}else if(h.type=="zero_sized"){const f=r.mapping.map(t);r.delete(f,f+e.nodeSize)}}let l,c;for(let u=0;u<i.length;u++)i[u]&&(l==null&&(l=u),c=u);for(let u=0,h=t+1;u<s.height;u++){const f=e.child(u),g=h+f.nodeSize,x=i[u];if(x>0){let w="cell";f.firstChild&&(w=f.firstChild.type.spec.tableRole);const b=[];for(let C=0;C<x;C++){const N=Rt(n.schema)[w].createAndFill();N&&b.push(N)}const k=(u==0||l==u-1)&&c==u?h+1:g-1;r.insert(r.mapping.map(k),b)}h=g}return r.setMeta(VR,{fixTables:!0})}function Kn(n){const e=n.selection,t=Nu(n),r=t.node(-1),s=t.start(-1),i=Xe.get(r);return{...e instanceof De?i.rectBetween(e.$anchorCell.pos-s,e.$headCell.pos-s):i.findCell(t.pos-s),tableStart:s,map:i,table:r}}function gb(n,{map:e,tableStart:t,table:r},s){let i=s>0?-1:0;zR(e,r,s+i)&&(i=s==0||s==e.width?null:0);for(let l=0;l<e.height;l++){const c=l*e.width+s;if(s>0&&s<e.width&&e.map[c-1]==e.map[c]){const u=e.map[c],h=r.nodeAt(u);n.setNodeMarkup(n.mapping.map(t+u),null,hb(h.attrs,s-e.colCount(u))),l+=h.attrs.rowspan-1}else{const u=i==null?Rt(r.type.schema).cell:r.nodeAt(e.map[c+i]).type,h=e.positionAt(l,s,r);n.insert(n.mapping.map(t+h),u.createAndFill())}}return n}function qR(n,e){if(!Mn(n))return!1;if(e){const t=Kn(n);e(gb(n.tr,t,t.left))}return!0}function KR(n,e){if(!Mn(n))return!1;if(e){const t=Kn(n);e(gb(n.tr,t,t.right))}return!0}function JR(n,{map:e,table:t,tableStart:r},s){const i=n.mapping.maps.length;for(let l=0;l<e.height;){const c=l*e.width+s,u=e.map[c],h=t.nodeAt(u),f=h.attrs;if(s>0&&e.map[c-1]==u||s<e.width-1&&e.map[c+1]==u)n.setNodeMarkup(n.mapping.slice(i).map(r+u),null,Ws(f,s-e.colCount(u)));else{const g=n.mapping.slice(i).map(r+u);n.delete(g,g+h.nodeSize)}l+=f.rowspan}}function GR(n,e){if(!Mn(n))return!1;if(e){const t=Kn(n),r=n.tr;if(t.left==0&&t.right==t.map.width)return!1;for(let s=t.right-1;JR(r,t,s),s!=t.left;s--){const i=t.tableStart?r.doc.nodeAt(t.tableStart-1):r.doc;if(!i)throw RangeError("No table found");t.table=i,t.map=Xe.get(i)}e(r)}return!0}function QR(n,e,t){var r;const s=Rt(e.type.schema).header_cell;for(let i=0;i<n.width;i++)if(((r=e.nodeAt(n.map[i+t*n.width]))==null?void 0:r.type)!=s)return!1;return!0}function yb(n,{map:e,tableStart:t,table:r},s){var i;let l=t;for(let h=0;h<s;h++)l+=r.child(h).nodeSize;const c=[];let u=s>0?-1:0;QR(e,r,s+u)&&(u=s==0||s==e.height?null:0);for(let h=0,f=e.width*s;h<e.width;h++,f++)if(s>0&&s<e.height&&e.map[f]==e.map[f-e.width]){const g=e.map[f],x=r.nodeAt(g).attrs;n.setNodeMarkup(t+g,null,{...x,rowspan:x.rowspan+1}),h+=x.colspan-1}else{const g=u==null?Rt(r.type.schema).cell:(i=r.nodeAt(e.map[f+u*e.width]))==null?void 0:i.type,x=g==null?void 0:g.createAndFill();x&&c.push(x)}return n.insert(l,Rt(r.type.schema).row.create(null,c)),n}function YR(n,e){if(!Mn(n))return!1;if(e){const t=Kn(n);e(yb(n.tr,t,t.top))}return!0}function XR(n,e){if(!Mn(n))return!1;if(e){const t=Kn(n);e(yb(n.tr,t,t.bottom))}return!0}function ZR(n,{map:e,table:t,tableStart:r},s){let i=0;for(let h=0;h<s;h++)i+=t.child(h).nodeSize;const l=i+t.child(s).nodeSize,c=n.mapping.maps.length;n.delete(i+r,l+r);const u=new Set;for(let h=0,f=s*e.width;h<e.width;h++,f++){const g=e.map[f];if(!u.has(g)){if(u.add(g),s>0&&g==e.map[f-e.width]){const x=t.nodeAt(g).attrs;n.setNodeMarkup(n.mapping.slice(c).map(g+r),null,{...x,rowspan:x.rowspan-1}),h+=x.colspan-1}else if(s<e.height&&g==e.map[f+e.width]){const x=t.nodeAt(g),w=x.attrs,b=x.type.create({...w,rowspan:x.attrs.rowspan-1},x.content),k=e.positionAt(s+1,h,t);n.insert(n.mapping.slice(c).map(r+k),b),h+=w.colspan-1}}}}function eP(n,e){if(!Mn(n))return!1;if(e){const t=Kn(n),r=n.tr;if(t.top==0&&t.bottom==t.map.height)return!1;for(let s=t.bottom-1;ZR(r,t,s),s!=t.top;s--){const i=t.tableStart?r.doc.nodeAt(t.tableStart-1):r.doc;if(!i)throw RangeError("No table found");t.table=i,t.map=Xe.get(t.table)}e(r)}return!0}function iv(n){const e=n.content;return e.childCount==1&&e.child(0).isTextblock&&e.child(0).childCount==0}function tP({width:n,height:e,map:t},r){let s=r.top*n+r.left,i=s,l=(r.bottom-1)*n+r.left,c=s+(r.right-r.left-1);for(let u=r.top;u<r.bottom;u++){if(r.left>0&&t[i]==t[i-1]||r.right<n&&t[c]==t[c+1])return!0;i+=n,c+=n}for(let u=r.left;u<r.right;u++){if(r.top>0&&t[s]==t[s-n]||r.bottom<e&&t[l]==t[l+n])return!0;s++,l++}return!1}function ov(n,e){const t=n.selection;if(!(t instanceof De)||t.$anchorCell.pos==t.$headCell.pos)return!1;const r=Kn(n),{map:s}=r;if(tP(s,r))return!1;if(e){const i=n.tr,l={};let c=z.empty,u,h;for(let f=r.top;f<r.bottom;f++)for(let g=r.left;g<r.right;g++){const x=s.map[f*s.width+g],w=r.table.nodeAt(x);if(!(l[x]||!w))if(l[x]=!0,u==null)u=x,h=w;else{iv(w)||(c=c.append(w.content));const b=i.mapping.map(x+r.tableStart);i.delete(b,b+w.nodeSize)}}if(u==null||h==null)return!0;if(i.setNodeMarkup(u+r.tableStart,null,{...hb(h.attrs,h.attrs.colspan,r.right-r.left-h.attrs.colspan),rowspan:r.bottom-r.top}),c.size){const f=u+1+h.content.size,g=iv(h)?u+1:f;i.replaceWith(g+r.tableStart,f+r.tableStart,c)}i.setSelection(new De(i.doc.resolve(u+r.tableStart))),e(i)}return!0}function lv(n,e){const t=Rt(n.schema);return nP(({node:r})=>t[r.type.spec.tableRole])(n,e)}function nP(n){return(e,t)=>{var r;const s=e.selection;let i,l;if(s instanceof De){if(s.$anchorCell.pos!=s.$headCell.pos)return!1;i=s.$anchorCell.nodeAfter,l=s.$anchorCell.pos}else{if(i=IR(s.$from),!i)return!1;l=(r=eo(s.$from))==null?void 0:r.pos}if(i==null||l==null||i.attrs.colspan==1&&i.attrs.rowspan==1)return!1;if(t){let c=i.attrs;const u=[],h=c.colwidth;c.rowspan>1&&(c={...c,rowspan:1}),c.colspan>1&&(c={...c,colspan:1});const f=Kn(e),g=e.tr;for(let w=0;w<f.right-f.left;w++)u.push(h?{...c,colwidth:h&&h[w]?[h[w]]:null}:c);let x;for(let w=f.top;w<f.bottom;w++){let b=f.map.positionAt(w,f.left,f.table);w==f.top&&(b+=i.nodeSize);for(let k=f.left,C=0;k<f.right;k++,C++)k==f.left&&w==f.top||g.insert(x=g.mapping.map(b+f.tableStart,1),n({node:i,row:w,col:k}).createAndFill(u[C]))}g.setNodeMarkup(l,n({node:i,row:f.top,col:f.left}),u[0]),s instanceof De&&g.setSelection(new De(g.doc.resolve(s.$anchorCell.pos),x?g.doc.resolve(x):void 0)),t(g)}return!0}}function rP(n,e){return function(t,r){if(!Mn(t))return!1;const s=Nu(t);if(s.nodeAfter.attrs[n]===e)return!1;if(r){const i=t.tr;t.selection instanceof De?t.selection.forEachCell((l,c)=>{l.attrs[n]!==e&&i.setNodeMarkup(c,null,{...l.attrs,[n]:e})}):i.setNodeMarkup(s.pos,null,{...s.nodeAfter.attrs,[n]:e}),r(i)}return!0}}function sP(n){return function(e,t){if(!Mn(e))return!1;if(t){const r=Rt(e.schema),s=Kn(e),i=e.tr,l=s.map.cellsInRect(n=="column"?{left:s.left,top:0,right:s.right,bottom:s.map.height}:n=="row"?{left:0,top:s.top,right:s.map.width,bottom:s.bottom}:s),c=l.map(u=>s.table.nodeAt(u));for(let u=0;u<l.length;u++)c[u].type==r.header_cell&&i.setNodeMarkup(s.tableStart+l[u],r.cell,c[u].attrs);if(i.steps.length==0)for(let u=0;u<l.length;u++)i.setNodeMarkup(s.tableStart+l[u],r.header_cell,c[u].attrs);t(i)}return!0}}function av(n,e,t){const r=e.map.cellsInRect({left:0,top:0,right:n=="row"?e.map.width:1,bottom:n=="column"?e.map.height:1});for(let s=0;s<r.length;s++){const i=e.table.nodeAt(r[s]);if(i&&i.type!==t.header_cell)return!1}return!0}function jl(n,e){return e=e||{useDeprecatedLogic:!1},e.useDeprecatedLogic?sP(n):function(t,r){if(!Mn(t))return!1;if(r){const s=Rt(t.schema),i=Kn(t),l=t.tr,c=av("row",i,s),u=av("column",i,s),f=(n==="column"?c:n==="row"?u:!1)?1:0,g=n=="column"?{left:0,top:f,right:1,bottom:i.map.height}:n=="row"?{left:f,top:0,right:i.map.width,bottom:1}:i,x=n=="column"?u?s.cell:s.header_cell:n=="row"?c?s.cell:s.header_cell:s.cell;i.map.cellsInRect(g).forEach(w=>{const b=w+i.tableStart,k=l.doc.nodeAt(b);k&&l.setNodeMarkup(b,x,k.attrs)}),r(l)}return!0}}jl("row",{useDeprecatedLogic:!0});jl("column",{useDeprecatedLogic:!0});var iP=jl("cell",{useDeprecatedLogic:!0});function oP(n,e){if(e<0){const t=n.nodeBefore;if(t)return n.pos-t.nodeSize;for(let r=n.index(-1)-1,s=n.before();r>=0;r--){const i=n.node(-1).child(r),l=i.lastChild;if(l)return s-1-l.nodeSize;s-=i.nodeSize}}else{if(n.index()<n.parent.childCount-1)return n.pos+n.nodeAfter.nodeSize;const t=n.node(-1);for(let r=n.indexAfter(-1),s=n.after();r<t.childCount;r++){const i=t.child(r);if(i.childCount)return s+1;s+=i.nodeSize}}return null}function cv(n){return function(e,t){if(!Mn(e))return!1;const r=oP(Nu(e),n);if(r==null)return!1;if(t){const s=e.doc.resolve(r);t(e.tr.setSelection(ce.between(s,DR(s))).scrollIntoView())}return!0}}function lP(n,e){const t=n.selection.$anchor;for(let r=t.depth;r>0;r--)if(t.node(r).type.spec.tableRole=="table")return e&&e(n.tr.delete(t.before(r),t.after(r)).scrollIntoView()),!0;return!1}function ac(n,e){const t=n.selection;if(!(t instanceof De))return!1;if(e){const r=n.tr,s=Rt(n.schema).cell.createAndFill().content;t.forEachCell((i,l)=>{i.content.eq(s)||r.replace(r.mapping.map(l+1),r.mapping.map(l+i.nodeSize-1),new G(s,0,0))}),r.docChanged&&e(r)}return!0}function aP(n){if(!n.size)return null;let{content:e,openStart:t,openEnd:r}=n;for(;e.childCount==1&&(t>0&&r>0||e.child(0).type.spec.tableRole=="table");)t--,r--,e=e.child(0).content;const s=e.child(0),i=s.type.spec.tableRole,l=s.type.schema,c=[];if(i=="row")for(let u=0;u<e.childCount;u++){let h=e.child(u).content;const f=u?0:Math.max(0,t-1),g=u<e.childCount-1?0:Math.max(0,r-1);(f||g)&&(h=np(Rt(l).row,new G(h,f,g)).content),c.push(h)}else if(i=="cell"||i=="header_cell")c.push(t||r?np(Rt(l).row,new G(e,t,r)).content:e);else return null;return cP(l,c)}function cP(n,e){const t=[];for(let s=0;s<e.length;s++){const i=e[s];for(let l=i.childCount-1;l>=0;l--){const{rowspan:c,colspan:u}=i.child(l).attrs;for(let h=s;h<s+c;h++)t[h]=(t[h]||0)+u}}let r=0;for(let s=0;s<t.length;s++)r=Math.max(r,t[s]);for(let s=0;s<t.length;s++)if(s>=e.length&&e.push(z.empty),t[s]<r){const i=Rt(n).cell.createAndFill(),l=[];for(let c=t[s];c<r;c++)l.push(i);e[s]=e[s].append(z.from(l))}return{height:e.length,width:r,rows:e}}function np(n,e){const t=n.createAndFill();return new Sp(t).replace(0,t.content.size,e).doc}function uP({width:n,height:e,rows:t},r,s){if(n!=r){const i=[],l=[];for(let c=0;c<t.length;c++){const u=t[c],h=[];for(let f=i[c]||0,g=0;f<r;g++){let x=u.child(g%u.childCount);f+x.attrs.colspan>r&&(x=x.type.createChecked(Ws(x.attrs,x.attrs.colspan,f+x.attrs.colspan-r),x.content)),h.push(x),f+=x.attrs.colspan;for(let w=1;w<x.attrs.rowspan;w++)i[c+w]=(i[c+w]||0)+x.attrs.colspan}l.push(z.from(h))}t=l,n=r}if(e!=s){const i=[];for(let l=0,c=0;l<s;l++,c++){const u=[],h=t[c%e];for(let f=0;f<h.childCount;f++){let g=h.child(f);l+g.attrs.rowspan>s&&(g=g.type.create({...g.attrs,rowspan:Math.max(1,s-g.attrs.rowspan)},g.content)),u.push(g)}i.push(z.from(u))}t=i,e=s}return{width:n,height:e,rows:t}}function dP(n,e,t,r,s,i,l){const c=n.doc.type.schema,u=Rt(c);let h,f;if(s>e.width)for(let g=0,x=0;g<e.height;g++){const w=t.child(g);x+=w.nodeSize;const b=[];let k;w.lastChild==null||w.lastChild.type==u.cell?k=h||(h=u.cell.createAndFill()):k=f||(f=u.header_cell.createAndFill());for(let C=e.width;C<s;C++)b.push(k);n.insert(n.mapping.slice(l).map(x-1+r),b)}if(i>e.height){const g=[];for(let b=0,k=(e.height-1)*e.width;b<Math.max(e.width,s);b++){const C=b>=e.width?!1:t.nodeAt(e.map[k+b]).type==u.header_cell;g.push(C?f||(f=u.header_cell.createAndFill()):h||(h=u.cell.createAndFill()))}const x=u.row.create(null,z.from(g)),w=[];for(let b=e.height;b<i;b++)w.push(x);n.insert(n.mapping.slice(l).map(r+t.nodeSize-2),w)}return!!(h||f)}function uv(n,e,t,r,s,i,l,c){if(l==0||l==e.height)return!1;let u=!1;for(let h=s;h<i;h++){const f=l*e.width+h,g=e.map[f];if(e.map[f-e.width]==g){u=!0;const x=t.nodeAt(g),{top:w,left:b}=e.findCell(g);n.setNodeMarkup(n.mapping.slice(c).map(g+r),null,{...x.attrs,rowspan:l-w}),n.insert(n.mapping.slice(c).map(e.positionAt(l,b,t)),x.type.createAndFill({...x.attrs,rowspan:w+x.attrs.rowspan-l})),h+=x.attrs.colspan-1}}return u}function dv(n,e,t,r,s,i,l,c){if(l==0||l==e.width)return!1;let u=!1;for(let h=s;h<i;h++){const f=h*e.width+l,g=e.map[f];if(e.map[f-1]==g){u=!0;const x=t.nodeAt(g),w=e.colCount(g),b=n.mapping.slice(c).map(g+r);n.setNodeMarkup(b,null,Ws(x.attrs,l-w,x.attrs.colspan-(l-w))),n.insert(b+x.nodeSize,x.type.createAndFill(Ws(x.attrs,0,l-w))),h+=x.attrs.rowspan-1}}return u}function hv(n,e,t,r,s){let i=t?n.doc.nodeAt(t-1):n.doc;if(!i)throw new Error("No table found");let l=Xe.get(i);const{top:c,left:u}=r,h=u+s.width,f=c+s.height,g=n.tr;let x=0;function w(){if(i=t?g.doc.nodeAt(t-1):g.doc,!i)throw new Error("No table found");l=Xe.get(i),x=g.mapping.maps.length}dP(g,l,i,t,h,f,x)&&w(),uv(g,l,i,t,u,h,c,x)&&w(),uv(g,l,i,t,u,h,f,x)&&w(),dv(g,l,i,t,c,f,u,x)&&w(),dv(g,l,i,t,c,f,h,x)&&w();for(let b=c;b<f;b++){const k=l.positionAt(b,u,i),C=l.positionAt(b,h,i);g.replace(g.mapping.slice(x).map(k+t),g.mapping.slice(x).map(C+t),new G(s.rows[b-c],0,0))}w(),g.setSelection(new De(g.doc.resolve(t+l.positionAt(c,u,i)),g.doc.resolve(t+l.positionAt(f-1,h-1,i)))),e(g)}var hP=Pp({ArrowLeft:cc("horiz",-1),ArrowRight:cc("horiz",1),ArrowUp:cc("vert",-1),ArrowDown:cc("vert",1),"Shift-ArrowLeft":uc("horiz",-1),"Shift-ArrowRight":uc("horiz",1),"Shift-ArrowUp":uc("vert",-1),"Shift-ArrowDown":uc("vert",1),Backspace:ac,"Mod-Backspace":ac,Delete:ac,"Mod-Delete":ac});function xc(n,e,t){return t.eq(n.selection)?!1:(e&&e(n.tr.setSelection(t).scrollIntoView()),!0)}function cc(n,e){return(t,r,s)=>{if(!s)return!1;const i=t.selection;if(i instanceof De)return xc(t,r,he.near(i.$headCell,e));if(n!="horiz"&&!i.empty)return!1;const l=xb(s,n,e);if(l==null)return!1;if(n=="horiz")return xc(t,r,he.near(t.doc.resolve(i.head+e),e));{const c=t.doc.resolve(l),u=db(c,n,e);let h;return u?h=he.near(u,1):e<0?h=he.near(t.doc.resolve(c.before(-1)),-1):h=he.near(t.doc.resolve(c.after(-1)),1),xc(t,r,h)}}}function uc(n,e){return(t,r,s)=>{if(!s)return!1;const i=t.selection;let l;if(i instanceof De)l=i;else{const u=xb(s,n,e);if(u==null)return!1;l=new De(t.doc.resolve(u))}const c=db(l.$headCell,n,e);return c?xc(t,r,new De(l.$anchorCell,c)):!1}}function fP(n,e){const t=n.state.doc,r=eo(t.resolve(e));return r?(n.dispatch(n.state.tr.setSelection(new De(r))),!0):!1}function pP(n,e,t){if(!Mn(n.state))return!1;let r=aP(t);const s=n.state.selection;if(s instanceof De){r||(r={width:1,height:1,rows:[z.from(np(Rt(n.state.schema).cell,t))]});const i=s.$anchorCell.node(-1),l=s.$anchorCell.start(-1),c=Xe.get(i).rectBetween(s.$anchorCell.pos-l,s.$headCell.pos-l);return r=uP(r,c.right-c.left,c.bottom-c.top),hv(n.state,n.dispatch,l,c,r),!0}else if(r){const i=Nu(n.state),l=i.start(-1);return hv(n.state,n.dispatch,l,Xe.get(i.node(-1)).findCell(i.pos-l),r),!0}else return!1}function mP(n,e){var t;if(e.ctrlKey||e.metaKey)return;const r=fv(n,e.target);let s;if(e.shiftKey&&n.state.selection instanceof De)i(n.state.selection.$anchorCell,e),e.preventDefault();else if(e.shiftKey&&r&&(s=eo(n.state.selection.$anchor))!=null&&((t=Xh(n,e))==null?void 0:t.pos)!=s.pos)i(s,e),e.preventDefault();else if(!r)return;function i(u,h){let f=Xh(n,h);const g=qr.getState(n.state)==null;if(!f||!im(u,f))if(g)f=u;else return;const x=new De(u,f);if(g||!n.state.selection.eq(x)){const w=n.state.tr.setSelection(x);g&&w.setMeta(qr,u.pos),n.dispatch(w)}}function l(){n.root.removeEventListener("mouseup",l),n.root.removeEventListener("dragstart",l),n.root.removeEventListener("mousemove",c),qr.getState(n.state)!=null&&n.dispatch(n.state.tr.setMeta(qr,-1))}function c(u){const h=u,f=qr.getState(n.state);let g;if(f!=null)g=n.state.doc.resolve(f);else if(fv(n,h.target)!=r&&(g=Xh(n,e),!g))return l();g&&i(g,h)}n.root.addEventListener("mouseup",l),n.root.addEventListener("dragstart",l),n.root.addEventListener("mousemove",c)}function xb(n,e,t){if(!(n.state.selection instanceof ce))return null;const{$head:r}=n.state.selection;for(let s=r.depth-1;s>=0;s--){const i=r.node(s);if((t<0?r.index(s):r.indexAfter(s))!=(t<0?0:i.childCount))return null;if(i.type.spec.tableRole=="cell"||i.type.spec.tableRole=="header_cell"){const c=r.before(s),u=e=="vert"?t>0?"down":"up":t>0?"right":"left";return n.endOfTextblock(u)?c:null}}return null}function fv(n,e){for(;e&&e!=n.dom;e=e.parentNode)if(e.nodeName=="TD"||e.nodeName=="TH")return e;return null}function Xh(n,e){const t=n.posAtCoords({left:e.clientX,top:e.clientY});return t&&t?eo(n.state.doc.resolve(t.pos)):null}var gP=class{constructor(e,t){this.node=e,this.defaultCellMinWidth=t,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.table.style.setProperty("--default-cell-min-width",`${t}px`),this.colgroup=this.table.appendChild(document.createElement("colgroup")),rp(e,this.colgroup,this.table,t),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(e){return e.type!=this.node.type?!1:(this.node=e,rp(e,this.colgroup,this.table,this.defaultCellMinWidth),!0)}ignoreMutation(e){return e.type=="attributes"&&(e.target==this.table||this.colgroup.contains(e.target))}};function rp(n,e,t,r,s,i){var l;let c=0,u=!0,h=e.firstChild;const f=n.firstChild;if(f){for(let g=0,x=0;g<f.childCount;g++){const{colspan:w,colwidth:b}=f.child(g).attrs;for(let k=0;k<w;k++,x++){const C=s==x?i:b&&b[k],N=C?C+"px":"";if(c+=C||r,C||(u=!1),h)h.style.width!=N&&(h.style.width=N),h=h.nextSibling;else{const M=document.createElement("col");M.style.width=N,e.appendChild(M)}}}for(;h;){const g=h.nextSibling;(l=h.parentNode)==null||l.removeChild(h),h=g}u?(t.style.width=c+"px",t.style.minWidth=""):(t.style.width="",t.style.minWidth=c+"px")}}var sn=new It("tableColumnResizing");function yP({handleWidth:n=5,cellMinWidth:e=25,defaultCellMinWidth:t=100,View:r=gP,lastColumnResizable:s=!0}={}){const i=new ct({key:sn,state:{init(l,c){var u,h;const f=(h=(u=i.spec)==null?void 0:u.props)==null?void 0:h.nodeViews,g=Rt(c.schema).table.name;return r&&f&&(f[g]=(x,w)=>new r(x,t,w)),new xP(-1,!1)},apply(l,c){return c.apply(l)}},props:{attributes:l=>{const c=sn.getState(l);return c&&c.activeHandle>-1?{class:"resize-cursor"}:{}},handleDOMEvents:{mousemove:(l,c)=>{vP(l,c,n,s)},mouseleave:l=>{wP(l)},mousedown:(l,c)=>{bP(l,c,e,t)}},decorations:l=>{const c=sn.getState(l);if(c&&c.activeHandle>-1)return EP(l,c.activeHandle)},nodeViews:{}}});return i}var xP=class vc{constructor(e,t){this.activeHandle=e,this.dragging=t}apply(e){const t=this,r=e.getMeta(sn);if(r&&r.setHandle!=null)return new vc(r.setHandle,!1);if(r&&r.setDragging!==void 0)return new vc(t.activeHandle,r.setDragging);if(t.activeHandle>-1&&e.docChanged){let s=e.mapping.map(t.activeHandle,-1);return tp(e.doc.resolve(s))||(s=-1),new vc(s,t.dragging)}return t}};function vP(n,e,t,r){if(!n.editable)return;const s=sn.getState(n.state);if(s&&!s.dragging){const i=SP(e.target);let l=-1;if(i){const{left:c,right:u}=i.getBoundingClientRect();e.clientX-c<=t?l=pv(n,e,"left",t):u-e.clientX<=t&&(l=pv(n,e,"right",t))}if(l!=s.activeHandle){if(!r&&l!==-1){const c=n.state.doc.resolve(l),u=c.node(-1),h=Xe.get(u),f=c.start(-1);if(h.colCount(c.pos-f)+c.nodeAfter.attrs.colspan-1==h.width-1)return}vb(n,l)}}}function wP(n){if(!n.editable)return;const e=sn.getState(n.state);e&&e.activeHandle>-1&&!e.dragging&&vb(n,-1)}function bP(n,e,t,r){var s;if(!n.editable)return!1;const i=(s=n.dom.ownerDocument.defaultView)!=null?s:window,l=sn.getState(n.state);if(!l||l.activeHandle==-1||l.dragging)return!1;const c=n.state.doc.nodeAt(l.activeHandle),u=kP(n,l.activeHandle,c.attrs);n.dispatch(n.state.tr.setMeta(sn,{setDragging:{startX:e.clientX,startWidth:u}}));function h(g){i.removeEventListener("mouseup",h),i.removeEventListener("mousemove",f);const x=sn.getState(n.state);x!=null&&x.dragging&&(CP(n,x.activeHandle,mv(x.dragging,g,t)),n.dispatch(n.state.tr.setMeta(sn,{setDragging:null})))}function f(g){if(!g.which)return h(g);const x=sn.getState(n.state);if(x&&x.dragging){const w=mv(x.dragging,g,t);gv(n,x.activeHandle,w,r)}}return gv(n,l.activeHandle,u,r),i.addEventListener("mouseup",h),i.addEventListener("mousemove",f),e.preventDefault(),!0}function kP(n,e,{colspan:t,colwidth:r}){const s=r&&r[r.length-1];if(s)return s;const i=n.domAtPos(e);let c=i.node.childNodes[i.offset].offsetWidth,u=t;if(r)for(let h=0;h<t;h++)r[h]&&(c-=r[h],u--);return c/u}function SP(n){for(;n&&n.nodeName!="TD"&&n.nodeName!="TH";)n=n.classList&&n.classList.contains("ProseMirror")?null:n.parentNode;return n}function pv(n,e,t,r){const s=t=="right"?-r:r,i=n.posAtCoords({left:e.clientX+s,top:e.clientY});if(!i)return-1;const{pos:l}=i,c=eo(n.state.doc.resolve(l));if(!c)return-1;if(t=="right")return c.pos;const u=Xe.get(c.node(-1)),h=c.start(-1),f=u.map.indexOf(c.pos-h);return f%u.width==0?-1:h+u.map[f-1]}function mv(n,e,t){const r=e.clientX-n.startX;return Math.max(t,n.startWidth+r)}function vb(n,e){n.dispatch(n.state.tr.setMeta(sn,{setHandle:e}))}function CP(n,e,t){const r=n.state.doc.resolve(e),s=r.node(-1),i=Xe.get(s),l=r.start(-1),c=i.colCount(r.pos-l)+r.nodeAfter.attrs.colspan-1,u=n.state.tr;for(let h=0;h<i.height;h++){const f=h*i.width+c;if(h&&i.map[f]==i.map[f-i.width])continue;const g=i.map[f],x=s.nodeAt(g).attrs,w=x.colspan==1?0:c-i.colCount(g);if(x.colwidth&&x.colwidth[w]==t)continue;const b=x.colwidth?x.colwidth.slice():NP(x.colspan);b[w]=t,u.setNodeMarkup(l+g,null,{...x,colwidth:b})}u.docChanged&&n.dispatch(u)}function gv(n,e,t,r){const s=n.state.doc.resolve(e),i=s.node(-1),l=s.start(-1),c=Xe.get(i).colCount(s.pos-l)+s.nodeAfter.attrs.colspan-1;let u=n.domAtPos(s.start(-1)).node;for(;u&&u.nodeName!="TABLE";)u=u.parentNode;u&&rp(i,u.firstChild,u,r,c,t)}function NP(n){return Array(n).fill(0)}function EP(n,e){var t;const r=[],s=n.doc.resolve(e),i=s.node(-1);if(!i)return Qe.empty;const l=Xe.get(i),c=s.start(-1),u=l.colCount(s.pos-c)+s.nodeAfter.attrs.colspan-1;for(let h=0;h<l.height;h++){const f=u+h*l.width;if((u==l.width-1||l.map[f]!=l.map[f+1])&&(h==0||l.map[f]!=l.map[f-l.width])){const g=l.map[f],x=c+g+i.nodeAt(g).nodeSize-1,w=document.createElement("div");w.className="column-resize-handle",(t=sn.getState(n))!=null&&t.dragging&&r.push(zt.node(c+g,c+g+i.nodeAt(g).nodeSize,{class:"column-resize-dragging"})),r.push(zt.widget(x,w))}}return Qe.create(n.doc,r)}function jP({allowTableNodeSelection:n=!1}={}){return new ct({key:qr,state:{init(){return null},apply(e,t){const r=e.getMeta(qr);if(r!=null)return r==-1?null:r;if(t==null||!e.docChanged)return t;const{deleted:s,pos:i}=e.mapping.mapResult(t);return s?null:i}},props:{decorations:BR,handleDOMEvents:{mousedown:mP},createSelectionBetween(e){return qr.getState(e.state)!=null?e.state.selection:null},handleTripleClick:fP,handleKeyDown:hP,handlePaste:pP},appendTransaction(e,t,r){return HR(r,mb(r,t),n)}})}function sp(n,e){return e?["width",`${Math.max(e,n)}px`]:["min-width",`${n}px`]}function yv(n,e,t,r,s,i){var l;let c=0,u=!0,h=e.firstChild;const f=n.firstChild;if(f!==null)for(let g=0,x=0;g<f.childCount;g+=1){const{colspan:w,colwidth:b}=f.child(g).attrs;for(let k=0;k<w;k+=1,x+=1){const C=s===x?i:b&&b[k],N=C?`${C}px`:"";if(c+=C||r,C||(u=!1),h){if(h.style.width!==N){const[M,I]=sp(r,C);h.style.setProperty(M,I)}h=h.nextSibling}else{const M=document.createElement("col"),[I,V]=sp(r,C);M.style.setProperty(I,V),e.appendChild(M)}}}for(;h;){const g=h.nextSibling;(l=h.parentNode)===null||l===void 0||l.removeChild(h),h=g}u?(t.style.width=`${c}px`,t.style.minWidth=""):(t.style.width="",t.style.minWidth=`${c}px`)}class TP{constructor(e,t){this.node=e,this.cellMinWidth=t,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),yv(e,this.colgroup,this.table,t),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(e){return e.type!==this.node.type?!1:(this.node=e,yv(e,this.colgroup,this.table,this.cellMinWidth),!0)}ignoreMutation(e){return e.type==="attributes"&&(e.target===this.table||this.colgroup.contains(e.target))}}function _P(n,e,t,r){let s=0,i=!0;const l=[],c=n.firstChild;if(!c)return{};for(let g=0,x=0;g<c.childCount;g+=1){const{colspan:w,colwidth:b}=c.child(g).attrs;for(let k=0;k<w;k+=1,x+=1){const C=t===x?r:b&&b[k];s+=C||e,C||(i=!1);const[N,M]=sp(e,C);l.push(["col",{style:`${N}: ${M}`}])}}const u=i?`${s}px`:"",h=i?"":`${s}px`;return{colgroup:["colgroup",{},...l],tableWidth:u,tableMinWidth:h}}function xv(n,e){return n.createAndFill()}function AP(n){if(n.cached.tableNodeTypes)return n.cached.tableNodeTypes;const e={};return Object.keys(n.nodes).forEach(t=>{const r=n.nodes[t];r.spec.tableRole&&(e[r.spec.tableRole]=r)}),n.cached.tableNodeTypes=e,e}function MP(n,e,t,r,s){const i=AP(n),l=[],c=[];for(let h=0;h<t;h+=1){const f=xv(i.cell);if(f&&c.push(f),r){const g=xv(i.header_cell);g&&l.push(g)}}const u=[];for(let h=0;h<e;h+=1)u.push(i.row.createChecked(null,r&&h===0?l:c));return i.table.createChecked(null,u)}function OP(n){return n instanceof De}const dc=({editor:n})=>{const{selection:e}=n.state;if(!OP(e))return!1;let t=0;const r=Kw(e.ranges[0].$from,i=>i.type.name==="table");return r==null||r.node.descendants(i=>{if(i.type.name==="table")return!1;["tableCell","tableHeader"].includes(i.type.name)&&(t+=1)}),t===e.ranges.length?(n.commands.deleteTable(),!0):!1},RP=it.create({name:"table",addOptions(){return{HTMLAttributes:{},resizable:!1,handleWidth:5,cellMinWidth:25,View:TP,lastColumnResizable:!0,allowTableNodeSelection:!1}},content:"tableRow+",tableRole:"table",isolating:!0,group:"block",parseHTML(){return[{tag:"table"}]},renderHTML({node:n,HTMLAttributes:e}){const{colgroup:t,tableWidth:r,tableMinWidth:s}=_P(n,this.options.cellMinWidth);return["table",ze(this.options.HTMLAttributes,e,{style:r?`width: ${r}`:`min-width: ${s}`}),t,["tbody",0]]},addCommands(){return{insertTable:({rows:n=3,cols:e=3,withHeaderRow:t=!0}={})=>({tr:r,dispatch:s,editor:i})=>{const l=MP(i.schema,n,e,t);if(s){const c=r.selection.from+1;r.replaceSelectionWith(l).scrollIntoView().setSelection(ce.near(r.doc.resolve(c)))}return!0},addColumnBefore:()=>({state:n,dispatch:e})=>qR(n,e),addColumnAfter:()=>({state:n,dispatch:e})=>KR(n,e),deleteColumn:()=>({state:n,dispatch:e})=>GR(n,e),addRowBefore:()=>({state:n,dispatch:e})=>YR(n,e),addRowAfter:()=>({state:n,dispatch:e})=>XR(n,e),deleteRow:()=>({state:n,dispatch:e})=>eP(n,e),deleteTable:()=>({state:n,dispatch:e})=>lP(n,e),mergeCells:()=>({state:n,dispatch:e})=>ov(n,e),splitCell:()=>({state:n,dispatch:e})=>lv(n,e),toggleHeaderColumn:()=>({state:n,dispatch:e})=>jl("column")(n,e),toggleHeaderRow:()=>({state:n,dispatch:e})=>jl("row")(n,e),toggleHeaderCell:()=>({state:n,dispatch:e})=>iP(n,e),mergeOrSplit:()=>({state:n,dispatch:e})=>ov(n,e)?!0:lv(n,e),setCellAttribute:(n,e)=>({state:t,dispatch:r})=>rP(n,e)(t,r),goToNextCell:()=>({state:n,dispatch:e})=>cv(1)(n,e),goToPreviousCell:()=>({state:n,dispatch:e})=>cv(-1)(n,e),fixTables:()=>({state:n,dispatch:e})=>(e&&mb(n),!0),setCellSelection:n=>({tr:e,dispatch:t})=>{if(t){const r=De.create(e.doc,n.anchorCell,n.headCell);e.setSelection(r)}return!0}}},addKeyboardShortcuts(){return{Tab:()=>this.editor.commands.goToNextCell()?!0:this.editor.can().addRowAfter()?this.editor.chain().addRowAfter().goToNextCell().run():!1,"Shift-Tab":()=>this.editor.commands.goToPreviousCell(),Backspace:dc,"Mod-Backspace":dc,Delete:dc,"Mod-Delete":dc}},addProseMirrorPlugins(){return[...this.options.resizable&&this.editor.isEditable?[yP({handleWidth:this.options.handleWidth,cellMinWidth:this.options.cellMinWidth,defaultCellMinWidth:this.options.cellMinWidth,View:this.options.View,lastColumnResizable:this.options.lastColumnResizable})]:[],jP({allowTableNodeSelection:this.options.allowTableNodeSelection})]},extendNodeSchema(n){const e={name:n.name,options:n.options,storage:n.storage};return{tableRole:ge(ne(n,"tableRole",e))}}}),PP=it.create({name:"tableRow",addOptions(){return{HTMLAttributes:{}}},content:"(tableCell | tableHeader)*",tableRole:"row",parseHTML(){return[{tag:"tr"}]},renderHTML({HTMLAttributes:n}){return["tr",ze(this.options.HTMLAttributes,n),0]}}),IP=it.create({name:"tableCell",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:n=>{const e=n.getAttribute("colwidth");return e?e.split(",").map(r=>parseInt(r,10)):null}}}},tableRole:"cell",isolating:!0,parseHTML(){return[{tag:"td"}]},renderHTML({HTMLAttributes:n}){return["td",ze(this.options.HTMLAttributes,n),0]}}),LP=it.create({name:"tableHeader",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:n=>{const e=n.getAttribute("colwidth");return e?e.split(",").map(r=>parseInt(r,10)):null}}}},tableRole:"header_cell",isolating:!0,parseHTML(){return[{tag:"th"}]},renderHTML({HTMLAttributes:n}){return["th",ze(this.options.HTMLAttributes,n),0]}}),DP=/^((?:https?:)?\/\/)?((?:www|m|music)\.)?((?:youtube\.com|youtu.be|youtube-nocookie\.com))(\/(?:[\w-]+\?v=|embed\/|v\/)?)([\w-]+)(\S+)?$/,zP=/^((?:https?:)?\/\/)?((?:www|m|music)\.)?((?:youtube\.com|youtu.be|youtube-nocookie\.com))(\/(?:[\w-]+\?v=|embed\/|v\/)?)([\w-]+)(\S+)?$/g,wb=n=>n.match(DP),vv=n=>n?"https://www.youtube-nocookie.com/embed/":"https://www.youtube.com/embed/",$P=n=>{const{url:e,allowFullscreen:t,autoplay:r,ccLanguage:s,ccLoadPolicy:i,controls:l,disableKBcontrols:c,enableIFrameApi:u,endTime:h,interfaceLanguage:f,ivLoadPolicy:g,loop:x,modestBranding:w,nocookie:b,origin:k,playlist:C,progressBarColor:N,startAt:M}=n;if(!wb(e))return null;if(e.includes("/embed/"))return e;if(e.includes("youtu.be")){const B=e.split("/").pop();return B?`${vv(b)}${B}`:null}const V=/(?:v=|shorts\/)([-\w]+)/gm.exec(e);if(!V||!V[1])return null;let U=`${vv(b)}${V[1]}`;const D=[];return t===!1&&D.push("fs=0"),r&&D.push("autoplay=1"),s&&D.push(`cc_lang_pref=${s}`),i&&D.push("cc_load_policy=1"),l||D.push("controls=0"),c&&D.push("disablekb=1"),u&&D.push("enablejsapi=1"),h&&D.push(`end=${h}`),f&&D.push(`hl=${f}`),g&&D.push(`iv_load_policy=${g}`),x&&D.push("loop=1"),w&&D.push("modestbranding=1"),k&&D.push(`origin=${k}`),C&&D.push(`playlist=${C}`),M&&D.push(`start=${M}`),N&&D.push(`color=${N}`),D.length&&(U+=`?${D.join("&")}`),U},BP=it.create({name:"youtube",addOptions(){return{addPasteHandler:!0,allowFullscreen:!0,autoplay:!1,ccLanguage:void 0,ccLoadPolicy:void 0,controls:!0,disableKBcontrols:!1,enableIFrameApi:!1,endTime:0,height:480,interfaceLanguage:void 0,ivLoadPolicy:0,loop:!1,modestBranding:!1,HTMLAttributes:{},inline:!1,nocookie:!1,origin:"",playlist:"",progressBarColor:void 0,width:640}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},start:{default:0},width:{default:this.options.width},height:{default:this.options.height}}},parseHTML(){return[{tag:"div[data-youtube-video] iframe"}]},addCommands(){return{setYoutubeVideo:n=>({commands:e})=>wb(n.src)?e.insertContent({type:this.name,attrs:n}):!1}},addPasteRules(){return this.options.addPasteHandler?[jM({find:zP,type:this.type,getAttributes:n=>({src:n.input})})]:[]},renderHTML({HTMLAttributes:n}){const e=$P({url:n.src,allowFullscreen:this.options.allowFullscreen,autoplay:this.options.autoplay,ccLanguage:this.options.ccLanguage,ccLoadPolicy:this.options.ccLoadPolicy,controls:this.options.controls,disableKBcontrols:this.options.disableKBcontrols,enableIFrameApi:this.options.enableIFrameApi,endTime:this.options.endTime,interfaceLanguage:this.options.interfaceLanguage,ivLoadPolicy:this.options.ivLoadPolicy,loop:this.options.loop,modestBranding:this.options.modestBranding,nocookie:this.options.nocookie,origin:this.options.origin,playlist:this.options.playlist,progressBarColor:this.options.progressBarColor,startAt:n.start||0});return n.src=e,["div",{"data-youtube-video":""},["iframe",ze(this.options.HTMLAttributes,{width:this.options.width,height:this.options.height,allowfullscreen:this.options.allowFullscreen,autoplay:this.options.autoplay,ccLanguage:this.options.ccLanguage,ccLoadPolicy:this.options.ccLoadPolicy,disableKBcontrols:this.options.disableKBcontrols,enableIFrameApi:this.options.enableIFrameApi,endTime:this.options.endTime,interfaceLanguage:this.options.interfaceLanguage,ivLoadPolicy:this.options.ivLoadPolicy,loop:this.options.loop,modestBranding:this.options.modestBranding,origin:this.options.origin,playlist:this.options.playlist,progressBarColor:this.options.progressBarColor},n)]]}});function FP({onClose:n,onInsert:e}){const[t,r]=A.useState(3),[s,i]=A.useState(3),[l,c]=A.useState(!0),[u,h]=A.useState("thin"),f=(x,w)=>{const b=parseInt(x);!isNaN(b)&&b>=1&&b<=10&&w(b)},g=x=>{x.preventDefault(),e(t,s,l,u),n()};return p.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:p.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[p.jsxs("div",{className:"flex justify-between items-center mb-4",children:[p.jsx("h3",{className:"text-lg font-semibold",children:"Insert Table"}),p.jsx("button",{onClick:n,className:"text-gray-400 hover:text-gray-500",children:p.jsx(qn,{className:"h-5 w-5"})})]}),p.jsxs("form",{onSubmit:g,className:"space-y-4",children:[p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Rows"}),p.jsx("input",{type:"number",min:"1",max:"10",value:t,onChange:x=>f(x.target.value,r),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-nexius-teal focus:border-nexius-teal"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Columns"}),p.jsx("input",{type:"number",min:"1",max:"10",value:s,onChange:x=>f(x.target.value,i),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-nexius-teal focus:border-nexius-teal"})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Border Style"}),p.jsxs("select",{value:u,onChange:x=>h(x.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-nexius-teal focus:border-nexius-teal",children:[p.jsx("option",{value:"thin",children:"Thin"}),p.jsx("option",{value:"medium",children:"Medium"}),p.jsx("option",{value:"thick",children:"Thick"})]})]}),p.jsxs("div",{className:"flex items-center",children:[p.jsx("input",{type:"checkbox",id:"withHeader",checked:l,onChange:x=>c(x.target.checked),className:"h-4 w-4 text-nexius-teal focus:ring-nexius-teal border-gray-300 rounded"}),p.jsx("label",{htmlFor:"withHeader",className:"ml-2 text-sm text-gray-700",children:"Include header row"})]}),p.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[p.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg",children:"Cancel"}),p.jsx("button",{type:"submit",className:"px-4 py-2 bg-nexius-teal text-white rounded-lg hover:bg-nexius-teal/90",children:"Insert Table"})]})]})]})})}const UP=[{label:"Arial",value:"Arial"},{label:"Times New Roman",value:"Times New Roman"},{label:"Helvetica",value:"Helvetica"},{label:"Georgia",value:"Georgia"}],HP=[{label:"Small",value:"12px"},{label:"Normal",value:"16px"},{label:"Large",value:"20px"},{label:"Huge",value:"24px"}],VP=["#000000","#FF0000","#00FF00","#0000FF","#FFFF00","#FF00FF","#00FFFF"],WP=["#FFEB3B","#4CAF50","#2196F3","#F44336","#9C27B0"];function qP({onSave:n,article:e,onCancel:t}){const[r,s]=A.useState((e==null?void 0:e.title)||""),[i,l]=A.useState((e==null?void 0:e.description)||""),[c,u]=A.useState((e==null?void 0:e.featured_image)||""),[h,f]=A.useState(!1),[g,x]=A.useState(!1),[w,b]=A.useState(""),[k,C]=A.useState(!1),N=If({extensions:[Lf,Df,zf.configure({types:["heading","paragraph"]}),$f,Jf.configure({openOnClick:!1}),Gf,Qf,Yf,jR,AR.configure({multicolor:!0}),RP.configure({resizable:!0,HTMLAttributes:{class:"border-collapse border border-gray-300"}}),PP,IP,LP,BP.configure({HTMLAttributes:{class:"w-full aspect-video rounded-lg"}})],content:(e==null?void 0:e.content)||""}),M=()=>{N&&n({title:r,description:i,content:N.getHTML(),featuredImage:c})},I=()=>{if(!N)return;const B=N.getAttributes("link").href,oe=window.prompt("URL",B);if(oe!==null){if(oe===""){N.chain().focus().unsetLink().run();return}N.chain().focus().setLink({href:oe}).run()}},V=()=>{!N||!w||(N.commands.setYoutubeVideo({src:w,width:640,height:480}),b(""),x(!1))},U=(B,oe,se,Te)=>{if(!N)return;const Ze={thin:"1px",medium:"2px",thick:"3px"}[Te];N.chain().focus().insertTable({rows:B,cols:oe,withHeaderRow:se,HTMLAttributes:{class:"border-collapse",style:`border: ${Ze} solid #e5e7eb;`}}).run();const Re=`border: ${Ze} solid #e5e7eb; padding: 8px;`;N.state.doc.descendants((He,Ke)=>{(He.type.name==="tableCell"||He.type.name==="tableHeader")&&N.chain().setNodeSelection(Ke).updateAttributes(He.type.name,{style:Re}).run()}),N.chain().focus().run()},D=B=>{u(B),f(!1)};return p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:e?"Edit Article":"Create New Article"}),p.jsxs("button",{onClick:t,className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-nexius-teal",children:[p.jsx(qn,{className:"h-4 w-4 mr-2"}),"Cancel"]})]}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Featured Image"}),p.jsxs("button",{onClick:()=>f(!0),className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-nexius-teal",children:[p.jsx(gp,{className:"h-4 w-4 mr-2"}),c?"Change Image":"Add Image"]})]}),h?p.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:p.jsx(ml,{onUploadComplete:D})}):c&&p.jsx("div",{className:"relative aspect-video rounded-lg overflow-hidden bg-gray-100",children:p.jsx("img",{src:c,alt:"Featured",className:"w-full h-full object-cover"})})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700",children:"Title"}),p.jsx("input",{type:"text",id:"title",value:r,onChange:B=>s(B.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-nexius-teal focus:border-nexius-teal sm:text-sm",placeholder:"Enter article title"})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"Short Description"}),p.jsx("textarea",{id:"description",value:i,onChange:B=>l(B.target.value),rows:3,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-nexius-teal focus:border-nexius-teal sm:text-sm",placeholder:"Enter a brief description"})]}),N&&p.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[p.jsxs("div",{className:"bg-white border-b border-gray-200 p-2 flex flex-wrap gap-1",children:[p.jsxs("div",{className:"flex items-center border-r border-gray-200 pr-2 mr-2",children:[p.jsxs("select",{onChange:B=>N==null?void 0:N.chain().focus().setFontFamily(B.target.value).run(),className:"p-2 rounded hover:bg-gray-100 border border-gray-300",children:[p.jsx("option",{value:"",children:"Font Family"}),UP.map(B=>p.jsx("option",{value:B.value,children:B.label},B.value))]}),p.jsxs("select",{onChange:B=>N==null?void 0:N.chain().focus().setFontSize(B.target.value).run(),className:"ml-2 p-2 rounded hover:bg-gray-100 border border-gray-300",value:N.getAttributes("textStyle").fontSize||"",children:[p.jsx("option",{value:"",children:"Font Size"}),HP.map(B=>p.jsx("option",{value:B.value,children:B.label},B.value))]})]}),p.jsxs("div",{className:"flex items-center border-r border-gray-200 pr-2 mr-2",children:[p.jsxs("div",{className:"relative group",children:[p.jsx("button",{className:"p-2 rounded hover:bg-gray-100",children:p.jsx(I0,{className:"h-4 w-4"})}),p.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white border border-gray-200 rounded-lg p-2 hidden group-hover:block shadow-lg",children:p.jsx("div",{className:"grid grid-cols-7 gap-1",children:VP.map(B=>p.jsx("button",{onClick:()=>N==null?void 0:N.chain().focus().setColor(B).run(),className:"w-6 h-6 rounded-full",style:{backgroundColor:B}},B))})})]}),p.jsxs("div",{className:"relative group ml-2",children:[p.jsx("button",{className:"p-2 rounded hover:bg-gray-100",children:p.jsx(QN,{className:"h-4 w-4"})}),p.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white border border-gray-200 rounded-lg p-2 hidden group-hover:block shadow-lg",children:p.jsx("div",{className:"grid grid-cols-5 gap-1",children:WP.map(B=>p.jsx("button",{onClick:()=>N==null?void 0:N.chain().focus().toggleHighlight({color:B}).run(),className:"w-6 h-6 rounded-full",style:{backgroundColor:B}},B))})})]})]}),p.jsxs("div",{className:"flex items-center border-r border-gray-200 pr-2 mr-2",children:[p.jsx("button",{onClick:()=>N.chain().focus().toggleBold().run(),className:`p-2 rounded hover:bg-gray-100 ${N.isActive("bold")?"bg-gray-100":""}`,children:p.jsx(DN,{className:"h-4 w-4"})}),p.jsx("button",{onClick:()=>N.chain().focus().toggleItalic().run(),className:`p-2 rounded hover:bg-gray-100 ${N.isActive("italic")?"bg-gray-100":""}`,children:p.jsx(ZN,{className:"h-4 w-4"})}),p.jsx("button",{onClick:()=>N.chain().focus().toggleUnderline().run(),className:`p-2 rounded hover:bg-gray-100 ${N.isActive("underline")?"bg-gray-100":""}`,children:p.jsx(xE,{className:"h-4 w-4"})})]}),p.jsxs("div",{className:"flex items-center border-r border-gray-200 pr-2 mr-2",children:[p.jsx("button",{onClick:()=>N.chain().focus().setTextAlign("left").run(),className:`p-2 rounded hover:bg-gray-100 ${N.isActive({textAlign:"left"})?"bg-gray-100":""}`,children:p.jsx(PN,{className:"h-4 w-4"})}),p.jsx("button",{onClick:()=>N.chain().focus().setTextAlign("center").run(),className:`p-2 rounded hover:bg-gray-100 ${N.isActive({textAlign:"center"})?"bg-gray-100":""}`,children:p.jsx(ON,{className:"h-4 w-4"})}),p.jsx("button",{onClick:()=>N.chain().focus().setTextAlign("right").run(),className:`p-2 rounded hover:bg-gray-100 ${N.isActive({textAlign:"right"})?"bg-gray-100":""}`,children:p.jsx(IN,{className:"h-4 w-4"})}),p.jsx("button",{onClick:()=>N.chain().focus().setTextAlign("justify").run(),className:`p-2 rounded hover:bg-gray-100 ${N.isActive({textAlign:"justify"})?"bg-gray-100":""}`,children:p.jsx(RN,{className:"h-4 w-4"})})]}),p.jsxs("div",{className:"flex items-center border-r border-gray-200 pr-2 mr-2",children:[p.jsx("button",{onClick:()=>N.chain().focus().setParagraph().run(),className:`p-2 rounded hover:bg-gray-100 ${N.isActive("paragraph")?"bg-gray-100":""}`,children:p.jsx(I0,{className:"h-4 w-4"})}),p.jsx("button",{onClick:()=>N.chain().focus().toggleHeading({level:1}).run(),className:`p-2 rounded hover:bg-gray-100 ${N.isActive("heading",{level:1})?"bg-gray-100":""}`,children:p.jsx(JN,{className:"h-4 w-4"})}),p.jsx("button",{onClick:()=>N.chain().focus().toggleHeading({level:2}).run(),className:`p-2 rounded hover:bg-gray-100 ${N.isActive("heading",{level:2})?"bg-gray-100":""}`,children:p.jsx(GN,{className:"h-4 w-4"})})]}),p.jsxs("div",{className:"flex items-center border-r border-gray-200 pr-2 mr-2",children:[p.jsx("button",{onClick:()=>N.chain().focus().toggleBulletList().run(),className:`p-2 rounded hover:bg-gray-100 ${N.isActive("bulletList")?"bg-gray-100":""}`,children:p.jsx(rE,{className:"h-4 w-4"})}),p.jsx("button",{onClick:()=>N.chain().focus().toggleOrderedList().run(),className:`p-2 rounded hover:bg-gray-100 ${N.isActive("orderedList")?"bg-gray-100":""}`,children:p.jsx(nE,{className:"h-4 w-4"})}),p.jsx("button",{onClick:()=>N.chain().focus().toggleBlockquote().run(),className:`p-2 rounded hover:bg-gray-100 ${N.isActive("blockquote")?"bg-gray-100":""}`,children:p.jsx(cE,{className:"h-4 w-4"})})]}),p.jsx("div",{className:"flex items-center border-r border-gray-200 pr-2 mr-2",children:p.jsx("button",{onClick:I,className:`p-2 rounded hover:bg-gray-100 ${N.isActive("link")?"bg-gray-100":""}`,children:p.jsx(n1,{className:"h-4 w-4"})})}),p.jsxs("div",{className:"flex items-center border-r border-gray-200 pr-2 mr-2",children:[p.jsx("button",{onClick:()=>C(!0),className:"p-2 rounded hover:bg-gray-100",children:p.jsx(mE,{className:"h-4 w-4"})}),p.jsx("button",{onClick:()=>x(!0),className:"p-2 rounded hover:bg-gray-100",children:p.jsx(c1,{className:"h-4 w-4"})})]}),p.jsxs("div",{className:"flex items-center",children:[p.jsx("button",{onClick:()=>N.chain().focus().undo().run(),disabled:!N.can().undo(),className:"p-2 rounded hover:bg-gray-100 disabled:opacity-50",children:p.jsx(vE,{className:"h-4 w-4"})}),p.jsx("button",{onClick:()=>N.chain().focus().redo().run(),disabled:!N.can().redo(),className:"p-2 rounded hover:bg-gray-100 disabled:opacity-50",children:p.jsx(uE,{className:"h-4 w-4"})})]})]}),p.jsx("div",{className:"bg-white p-4",children:p.jsx(Rf,{editor:N,className:"prose max-w-none"})})]}),g&&p.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center",children:p.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[p.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Insert YouTube Video"}),p.jsx("input",{type:"text",value:w,onChange:B=>b(B.target.value),placeholder:"Enter YouTube URL",className:"w-full px-3 py-2 border border-gray-300 rounded-lg mb-4"}),p.jsxs("div",{className:"flex justify-end gap-2",children:[p.jsx("button",{onClick:()=>x(!1),className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg",children:"Cancel"}),p.jsx("button",{onClick:V,className:"px-4 py-2 bg-nexius-teal text-white rounded-lg hover:bg-nexius-teal/90",children:"Insert"})]})]})}),k&&p.jsx(FP,{onClose:()=>C(!1),onInsert:U}),p.jsx("div",{className:"flex justify-end",children:p.jsxs("button",{onClick:M,className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-nexius-teal hover:bg-nexius-teal/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-nexius-teal",children:[p.jsx(hE,{className:"h-4 w-4 mr-2"}),e?"Update Article":"Save Article"]})})]})}const Zh=[{id:"images",name:"Images",Icon:gp,description:"Upload and manage your website images."},{id:"articles",name:"Articles",Icon:t1,description:"Create and manage your blog articles."},{id:"store",name:"Store",Icon:pE,description:"Manage your products, categories, and orders."},{id:"courses",name:"Courses",Icon:KN,description:"Create and manage your online courses."},{id:"case-studies",name:"Case Studies",Icon:zN,description:"Share your success stories and client results."},{id:"events",name:"Events",Icon:Yi,description:"Organize and manage your upcoming events."},{id:"leads",name:"Leads",Icon:a1,description:"Manage and track your sales leads."},{id:"chat",name:"Chat",Icon:lE,description:"Manage live chat conversations with visitors."}],KP=({section:n,actionButton:e})=>p.jsxs("div",{className:"text-center py-16",children:[p.jsxs("div",{className:"relative inline-block mb-6",children:[p.jsx("div",{className:"absolute -inset-2 bg-nexius-teal/20 rounded-lg blur-lg opacity-50"}),p.jsx(n.Icon,{className:"relative h-16 w-16 text-nexius-teal"})]}),p.jsxs("h3",{className:"text-2xl font-display font-bold text-nexius-navy mb-3",children:["No ",n.name," Yet"]}),p.jsx("p",{className:"text-nexius-charcoal max-w-md mx-auto mb-8",children:n.description}),e]});function JP(){var io;const[n,e]=A.useState(null),[t,r]=A.useState("images"),[s,i]=A.useState(null),[l,c]=A.useState(!1),[u,h]=A.useState([]),[f,g]=A.useState([]),[x,w]=A.useState([]),[b,k]=A.useState([]),[C,N]=A.useState(null),[M,I]=A.useState([]),[V,U]=A.useState(!1),[D,B]=A.useState(""),[oe,se]=A.useState(!0),[Te,Ze]=A.useState(""),[Re,He]=A.useState(!1),[Ke,Ve]=A.useState(!1),[Ae,Se]=A.useState(null),[F,le]=A.useState(!1),[X,T]=A.useState(!1),[$,me]=A.useState(!1),[ye,be]=A.useState(!1),[ke,_e]=A.useState(!1),[Ne,Pe]=A.useState([]),[vt,On]=A.useState(null),to=async()=>{try{await pe.auth.signOut(),window.location.href="/"}catch(Z){console.error("Error signing out:",Z),alert("Error signing out. Please try again.")}};A.useEffect(()=>{pe.auth.getSession().then(({data:{session:L}})=>{e(L),L&&us()});const{data:{subscription:Z}}=pe.auth.onAuthStateChange((L,Ut)=>{e(Ut),Ut&&us()});return()=>Z.unsubscribe()},[]);const us=async()=>{try{se(!0),await Promise.all([hs(),pr(),no(),Pl(),ds()])}finally{se(!1)}},ds=async()=>{try{const{data:Z,error:L}=await pe.from("events").select("*").order("start_date",{ascending:!0});if(L)throw L;Pe(Z||[])}catch(Z){console.error("Error loading events:",Z)}},hs=async()=>{const Z=await ME();h(Z)},pr=async()=>{const Z=await yR();g(Z)},no=async()=>{se(!0);const Z=await kR();w(Z)},Pl=async()=>{U(!0);try{const{data:Z,error:L}=await pe.from("chat_sessions").select("*").order("last_message_at",{ascending:!1});if(L){console.error("Error loading chat sessions:",L);return}k(Z||[]),C&&await Qs(C.id);const{data:Ut,error:Rn}=await pe.from("leads").select("*").order("created_at",{ascending:!1});if(Rn){console.error("Error loading leads:",Rn);return}console.log("Loaded leads:",Ut),w(Ut||[])}catch(Z){console.error("Error loading leads:",Z)}finally{se(!1),U(!1)}},Qs=async Z=>{if(Z)try{const{data:L,error:Ut}=await pe.from("chat_messages").select("*").eq("session_id",Z).order("created_at",{ascending:!0});if(Ut){console.error("Error loading chat messages:",Ut);return}I(L||[]),L!=null&&L.length&&await ER(Z)}catch(L){console.error("Error loading chat messages:",L)}},mr=Z=>{N(Z),Qs(Z.id);const L=pe.channel(`chat:${Z.id}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"chat_messages",filter:`session_id=eq.${Z.id}`},Ut=>{I(Rn=>[...Rn,Ut.new])}).subscribe();return()=>{pe.removeChannel(L)}},Jn=async Z=>{if(Z.preventDefault(),!(!D.trim()||!C))try{const{data:{user:L}}=await pe.auth.getUser();if(!L)throw new Error("Not authenticated");const{data:Ut,error:Rn}=await pe.from("chat_messages").insert({session_id:C.id,visitor_id:C.visitor_id,content:D.trim(),is_from_visitor:!1,user_id:L.id,read:!0}).select().single();if(Rn)throw Rn;I(zl=>[...zl,Ut]),B("")}catch(L){console.error("Error sending message:",L),alert("Error sending message. Please try again.")}},ro=Z=>{hs(),le(!1)},Il=async Z=>{if(confirm("Are you sure you want to delete this image?"))try{await _E(Z.storage_path),await OE(Z.id),await hs()}catch(L){console.error("Error deleting image:",L),alert("Error deleting image")}},so=()=>{Ve(!0),Se(null)},Ll=async Z=>{try{const{data:{user:L}}=await pe.auth.getUser();if(!L)throw new Error("User not authenticated");Ae?await xR(Ae.id,{...Z,featured_image:Z.featuredImage}):await gR({...Z,featured_image:Z.featuredImage,status:"draft",author_id:L.id}),Ve(!1),Se(null),pr()}catch(L){console.error("Error saving article:",L),alert("Error saving article. Please try again.")}},Dl=async Z=>{if(s)try{await updateImage(s.id,{title:Z.title,description:Z.description,metadata:s.metadata,storage_path:s.storage_path,url:s.url}),i(null),await hs()}catch(L){console.error("Error updating image:",L),alert("Error updating image. Please try again.")}},ln=Z=>{let L;switch(Z.id){case"images":L=p.jsxs("button",{onClick:()=>le(!0),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-nexius-teal hover:bg-nexius-teal/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-nexius-teal",children:[p.jsx(rr,{className:"h-5 w-5 mr-2"}),"Upload Image"]});break;case"articles":L=p.jsxs("button",{onClick:so,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-nexius-teal hover:bg-nexius-teal/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-nexius-teal",children:[p.jsx(rr,{className:"h-5 w-5 mr-2"}),"Create Article"]});break;case"store":L=p.jsxs("button",{onClick:()=>T(!0),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-nexius-teal hover:bg-nexius-teal/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-nexius-teal",children:[p.jsx(rr,{className:"h-5 w-5 mr-2"}),"Add Product"]});break;case"courses":L=p.jsxs("button",{onClick:()=>me(!0),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-nexius-teal hover:bg-nexius-teal/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-nexius-teal",children:[p.jsx(rr,{className:"h-5 w-5 mr-2"}),"Create Course"]});break;case"case-studies":L=p.jsxs("button",{onClick:()=>be(!0),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-nexius-teal hover:bg-nexius-teal/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-nexius-teal",children:[p.jsx(rr,{className:"h-5 w-5 mr-2"}),"Add Case Study"]});break;case"events":L=p.jsxs("button",{onClick:()=>_e(!0),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-nexius-teal hover:bg-nexius-teal/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-nexius-teal",children:[p.jsx(rr,{className:"h-5 w-5 mr-2"}),"Create Event"]});break;case"leads":L=p.jsxs("div",{className:"space-y-4",children:[p.jsx("p",{className:"text-sm text-gray-500",children:"Leads will appear here when visitors submit the contact form."}),p.jsx("a",{href:"/",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-nexius-teal hover:bg-nexius-teal/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-nexius-teal",children:"View Contact Form"})]});break;case"chat":L=p.jsxs("div",{className:"space-y-4",children:[p.jsx("p",{className:"text-sm text-gray-500",children:"Chat sessions will appear here when visitors start conversations."}),p.jsx("a",{href:"/",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-nexius-teal hover:bg-nexius-teal/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-nexius-teal",children:"View Chat Widget"})]});break}return p.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:p.jsx(KP,{section:Z,actionButton:L})})},Ys=()=>{const Z=Zh.find(L=>L.id===t);if(!Z)return null;if(oe&&t==="leads")return p.jsx("div",{className:"flex items-center justify-center h-64",children:p.jsx(Xf,{events:Ne,onEventClick:L=>On(L)})});switch(t){case"images":return p.jsx("div",{children:F?p.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[p.jsxs("div",{className:"flex justify-between items-center mb-6",children:[p.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Upload Image"}),p.jsx("button",{onClick:()=>le(!1),className:"text-gray-400 hover:text-gray-500",children:p.jsx(qn,{className:"h-5 w-5"})})]}),p.jsx(ml,{onUploadComplete:ro})]}):u.length===0?ln(Z):p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{className:"mb-6 flex justify-between items-center",children:[p.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Images"}),p.jsxs("button",{onClick:()=>le(!0),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-nexius-teal hover:bg-nexius-teal/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-nexius-teal",children:[p.jsx(rr,{className:"h-5 w-5 mr-2"}),"Upload Image"]})]}),s&&p.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:p.jsx(ml,{onUploadComplete:()=>{},editMode:!0,initialData:{title:s.title,description:s.description||""},onSave:Dl,onCancel:()=>i(null)})}),p.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:u.map(L=>p.jsxs("div",{className:"relative group",children:[p.jsx("div",{className:"aspect-square bg-gray-100 rounded-lg overflow-hidden",children:p.jsx("img",{src:L.url,alt:L.title,className:"w-full h-full object-cover",crossOrigin:"anonymous"})}),p.jsxs("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity rounded-lg flex items-center justify-center gap-2",children:[p.jsx("button",{onClick:()=>i(L),className:"p-2 bg-white rounded-full text-nexius-teal hover:text-nexius-teal/90 hover:bg-white/90 transition-colors",children:p.jsx(R0,{className:"h-5 w-5"})}),p.jsx("button",{onClick:()=>Il(L),className:"p-2 bg-white rounded-full text-red-600 hover:text-red-700 hover:bg-white/90 transition-colors",children:p.jsx(P0,{className:"h-5 w-5"})})]}),p.jsxs("div",{className:"mt-2",children:[p.jsx("h3",{className:"text-sm font-medium text-gray-900 truncate",children:L.title}),p.jsx("p",{className:"text-sm text-gray-500 truncate",children:L.description||"No description"})]})]},L.id))})]})});case"articles":return Ke?p.jsx(qP,{onSave:Ll,article:Ae,onCancel:()=>{Ve(!1),Se(null)}}):f.length===0?ln(Z):p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{className:"flex justify-between items-center mb-6",children:[p.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Articles"}),p.jsxs("button",{onClick:so,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-nexius-teal hover:bg-nexius-teal/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-nexius-teal",children:[p.jsx(rr,{className:"h-5 w-5 mr-2"}),"Create Article"]})]}),p.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:f.map(L=>p.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 hover:border-nexius-teal/30 hover:shadow-lg transition-all",children:[L.featured_image&&p.jsxs("div",{className:"aspect-video relative overflow-hidden rounded-t-lg",children:[p.jsx("img",{src:L.featured_image,alt:L.title,className:"w-full h-full object-cover"}),p.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"})]}),p.jsxs("div",{className:"p-6",children:[p.jsxs("div",{className:"flex items-center justify-between mb-4",children:[p.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${L.status==="published"?"bg-green-100 text-green-800":L.status==="draft"?"bg-gray-100 text-gray-800":"bg-red-100 text-red-800"}`,children:L.status.charAt(0).toUpperCase()+L.status.slice(1)}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("button",{onClick:()=>{Se(L),Ve(!0)},className:"p-2 rounded-full text-gray-500 hover:text-gray-700 hover:bg-gray-100",children:p.jsx(R0,{className:"h-4 w-4"})}),p.jsx("button",{onClick:async()=>{window.confirm("Are you sure you want to delete this article?")&&(await vR(L.id),pr())},className:"p-2 rounded-full text-red-500 hover:text-red-700 hover:bg-red-50",children:p.jsx(P0,{className:"h-4 w-4"})})]})]}),p.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:L.title}),L.description&&p.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2",children:L.description}),p.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[p.jsx("span",{children:new Date(L.created_at).toLocaleDateString()}),L.status==="draft"?p.jsx("button",{onClick:async()=>{await wR(L.id),pr()},className:"text-nexius-teal hover:text-nexius-teal/90 font-medium",children:p.jsx(e1,{className:"h-4 w-4"})}):p.jsx("button",{onClick:async()=>{await bR(L.id),pr()},className:"text-gray-500 hover:text-gray-700 font-medium",children:p.jsx(Zv,{className:"h-4 w-4"})})]})]})]},L.id))})]});case"store":return ln(Z);case"courses":return ln(Z);case"case-studies":return ln(Z);case"events":return ke?p.jsx(sv,{event:vt,onClose:()=>_e(!1),onSave:()=>{_e(!1),On(null),ds()}}):vt?p.jsx(sv,{event:vt,onClose:()=>On(null),onSave:()=>{On(null),ds()}}):Ne.length===0?ln(Z):p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Events"}),p.jsxs("button",{onClick:()=>_e(!0),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-nexius-teal hover:bg-nexius-teal/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-nexius-teal",children:[p.jsx(rr,{className:"h-5 w-5 mr-2"}),"Create Event"]})]}),p.jsx(Xf,{events:Ne,onEventClick:L=>On(L)})]});case"leads":return x.length===0?ln(Z):p.jsxs("div",{className:"space-y-6",children:[p.jsx("div",{className:"flex justify-between items-center",children:p.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Leads"})}),p.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:p.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[p.jsx("thead",{className:"bg-gray-50",children:p.jsxs("tr",{children:[p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Phone"}),p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"})]})}),p.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:x.map(L=>p.jsxs("tr",{className:"hover:bg-gray-50",children:[p.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:p.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[L.first_name," ",L.last_name]})}),p.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:p.jsx("div",{className:"text-sm text-gray-900",children:L.email})}),p.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:p.jsx("div",{className:"text-sm text-gray-900",children:L.phone||"-"})}),p.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:p.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${L.status==="new"?"bg-green-100 text-green-800":L.status==="contacted"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:L.status})}),p.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(L.created_at).toLocaleDateString()})]},L.id))})]})})]});case"chat":return b.length===0?ln(Z):window.innerWidth<=690?p.jsxs("div",{className:"grid grid-cols-1",children:[p.jsxs("div",{className:`bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden ${C?"hidden":"block"}`,children:[p.jsx("div",{className:"p-4 border-b border-gray-200",children:p.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Chat Sessions"})}),p.jsx("div",{className:"divide-y divide-gray-200 max-h-[600px] overflow-y-auto",children:b.map(L=>p.jsxs("button",{onClick:()=>mr(L),className:`w-full p-4 text-left hover:bg-gray-50 transition-colors ${(C==null?void 0:C.id)===L.id?"bg-nexius-teal/10":""}`,children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("span",{className:"font-medium text-gray-900",children:L.visitor_name||"Anonymous Visitor"}),p.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${L.status==="active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:L.status})]}),p.jsx("p",{className:"text-sm text-gray-500 mt-1",children:new Date(L.last_message_at).toLocaleString()})]},`chat-session-${L.id}`))})]}),p.jsx("div",{className:`bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden ${C?"block":"hidden"}`,children:C?p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"p-4 border-b border-gray-200",children:[p.jsxs("button",{onClick:()=>N(null),className:"inline-flex items-center text-gray-500 hover:text-gray-700 mr-3",children:[p.jsx(A0,{className:"h-5 w-5"}),p.jsx("span",{children:"Back"})]}),p.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Chat with ",C.visitor_name||"Anonymous Visitor"]})]}),p.jsxs("div",{className:"flex flex-col h-[600px]",children:[p.jsx("div",{className:"flex-1 p-4 space-y-4 overflow-y-auto",children:M.map(L=>p.jsx("div",{className:`flex ${L.is_from_visitor?"justify-start":"justify-end"}`,children:p.jsxs("div",{className:`max-w-[75%] rounded-lg px-4 py-2 ${L.is_from_visitor?"bg-gray-100 text-gray-900":"bg-nexius-teal text-white"}`,children:[L.content,p.jsx("div",{className:"text-xs mt-1 opacity-70",children:new Date(L.created_at).toLocaleString()})]})},`chat-message-${L.id}`))}),p.jsx("form",{onSubmit:Jn,className:"p-4 border-t",children:p.jsxs("div",{className:"flex gap-2",children:[p.jsx("input",{type:"text",value:D,onChange:L=>B(L.target.value),placeholder:"Type your message...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-nexius-teal focus:border-nexius-teal"}),p.jsx("button",{type:"submit",disabled:!D.trim(),className:"px-4 py-2 bg-nexius-teal text-white rounded-lg hover:bg-nexius-teal/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:p.jsx(df,{className:"h-5 w-5"})})]})})]})]}):p.jsx("div",{className:"p-8 text-center text-gray-500",children:"Select a chat session to view messages"})})]}):p.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[p.jsxs("div",{className:"col-span-1 bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[p.jsx("div",{className:"p-4 border-b border-gray-200",children:p.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Chat Sessions"})}),p.jsx("div",{className:"divide-y divide-gray-200 max-h-[600px] overflow-y-auto",children:b.map(L=>p.jsxs("button",{onClick:()=>mr(L),className:`w-full p-4 text-left hover:bg-gray-50 transition-colors ${(C==null?void 0:C.id)===L.id?"bg-nexius-teal/10":""}`,children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("span",{className:"font-medium text-gray-900",children:L.visitor_name||"Anonymous Visitor"}),p.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${L.status==="active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:L.status})]}),p.jsx("p",{className:"text-sm text-gray-500 mt-1",children:new Date(L.last_message_at).toLocaleString()})]},`chat-session-${L.id}`))})]}),p.jsx("div",{className:"col-span-2 bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:C?p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"p-4 border-b border-gray-200",children:p.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Chat with ",C.visitor_name||"Anonymous Visitor"]})}),p.jsxs("div",{className:"flex flex-col h-[600px]",children:[p.jsx("div",{className:"flex-1 p-4 space-y-4 overflow-y-auto",children:M.map(L=>p.jsx("div",{className:`flex ${L.is_from_visitor?"justify-start":"justify-end"}`,children:p.jsxs("div",{className:`max-w-[75%] rounded-lg px-4 py-2 ${L.is_from_visitor?"bg-gray-100 text-gray-900":"bg-nexius-teal text-white"}`,children:[L.content,p.jsx("div",{className:"text-xs mt-1 opacity-70",children:new Date(L.created_at).toLocaleString()})]})},`chat-message-${L.id}`))}),p.jsx("form",{onSubmit:Jn,className:"p-4 border-t",children:p.jsxs("div",{className:"flex gap-2",children:[p.jsx("input",{type:"text",value:D,onChange:L=>B(L.target.value),placeholder:"Type your message...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-nexius-teal focus:border-nexius-teal"}),p.jsx("button",{type:"submit",disabled:!D.trim(),className:"px-4 py-2 bg-nexius-teal text-white rounded-lg hover:bg-nexius-teal/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:p.jsx(df,{className:"h-5 w-5"})})]})})]})]}):p.jsx("div",{className:"p-8 text-center text-gray-500",children:"Select a chat session to view messages"})})]});default:return null}};return n?p.jsxs("div",{className:"min-h-screen bg-gray-100",children:[p.jsx("header",{className:"bg-white border-b border-gray-200 fixed w-full z-10",children:p.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:p.jsxs("div",{className:"flex justify-between h-16",children:[p.jsx("div",{className:"flex",children:p.jsxs("div",{className:"flex-shrink-0 flex items-center",children:[p.jsx("img",{src:"https://tunidbyclygzipvbfzee.supabase.co/storage/v1/object/public/website-images/m04h4fs8wns-1739784195705.png",alt:"NEXIUS Labs",className:"h-8 w-8"}),p.jsx("span",{className:"ml-2 text-xl font-bold text-gray-900",children:"Admin Portal"})]})}),p.jsx("div",{className:"flex items-center",children:p.jsxs("button",{onClick:to,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-lg text-gray-500 hover:text-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-nexius-teal",children:[p.jsx(M0,{className:"h-5 w-5 mr-2"}),"Sign Out"]})})]})})}),p.jsx("div",{className:`fixed inset-y-0 left-0 pt-16 block ${l?"w-16":"w-64"} bg-white border-r border-gray-200 transition-all duration-300`,children:p.jsxs("div",{className:"h-full flex flex-col",children:[p.jsxs("nav",{className:"flex-1 px-2 py-4 space-y-1 relative",children:[p.jsx("button",{onClick:()=>c(!l),className:"absolute -right-3 top-2 bg-white border border-gray-200 rounded-full p-1 hover:bg-gray-50 transition-colors z-10",children:l?p.jsx(Yv,{className:"h-4 w-4 text-gray-500"}):p.jsx(A0,{className:"h-4 w-4 text-gray-500"})}),Zh.map(Z=>{const L=Z.Icon;return p.jsxs("button",{onClick:()=>r(Z.id),className:`w-full flex items-center ${l?"px-3":"px-4"} py-3 text-sm font-medium rounded-lg ${t===Z.id?"bg-nexius-teal/10 text-nexius-teal":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"} transition-colors`,title:Z.name,children:[p.jsx(L,{className:"h-5 w-5 mr-3"}),p.jsx("span",{className:`${l?"hidden":"block"} transition-opacity`,children:Z.name})]},Z.id)})]}),p.jsx("div",{className:"p-4 border-t border-gray-200",children:p.jsxs("button",{onClick:to,className:`w-full flex items-center ${l?"px-3 justify-center":"px-4"} py-3 text-sm font-medium text-gray-600 hover:bg-gray-50 hover:text-gray-900 rounded-lg transition-colors`,title:"Logout",children:[p.jsx(M0,{className:"h-5 w-5 mr-3"}),p.jsx("span",{className:`${l?"hidden":"block"} transition-opacity`,children:"Logout"})]})})]})}),p.jsx("main",{className:`${l?"pl-16":"pl-64"} pt-16 transition-all duration-300`,children:p.jsx("div",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:p.jsxs("div",{className:"px-4 sm:px-0",children:[p.jsx("h1",{className:"text-2xl font-semibold text-gray-900 mb-6",children:(io=Zh.find(Z=>Z.id===t))==null?void 0:io.name}),Ys()]})})})]}):p.jsx(PE,{})}function GP({event:n,isOpen:e,onClose:t}){const[r,s]=A.useState({fullName:"",email:"",phone:"",company:"",jobTitle:"",linkedIn:""}),[i,l]=A.useState(!1),c=async u=>{u.preventDefault();try{l(!0);const{error:h}=await pe.from("event_registrations").insert([{event_id:n.id,full_name:r.fullName,email:r.email,phone:r.phone,company:r.company,job_title:r.jobTitle,linkedin_url:r.linkedIn,status:"pending"}]);if(h)throw h;alert("Registration successful! You will receive a confirmation email shortly."),t(),s({fullName:"",email:"",phone:"",company:"",jobTitle:"",linkedIn:""})}catch(h){console.error("Error submitting registration:",h),alert("Error submitting registration. Please try again.")}finally{l(!1)}};return e?p.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:p.jsx("div",{className:"bg-white rounded-xl shadow-xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:p.jsxs("div",{className:"p-6",children:[p.jsxs("div",{className:"flex justify-between items-center mb-6",children:[p.jsx("h2",{className:"text-2xl font-display font-bold text-nexius-navy",children:"Register for Event"}),p.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:p.jsx(qn,{className:"h-6 w-6"})})]}),p.jsxs("form",{onSubmit:c,className:"space-y-6",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"fullName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name *"}),p.jsxs("div",{className:"relative",children:[p.jsx(vp,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),p.jsx("input",{type:"text",id:"fullName",required:!0,value:r.fullName,onChange:u=>s(h=>({...h,fullName:u.target.value})),className:"pl-10 pr-3 py-2 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-nexius-teal focus:border-nexius-teal",placeholder:"Enter your full name"})]})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address *"}),p.jsxs("div",{className:"relative",children:[p.jsx(s1,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),p.jsx("input",{type:"email",id:"email",required:!0,value:r.email,onChange:u=>s(h=>({...h,email:u.target.value})),className:"pl-10 pr-3 py-2 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-nexius-teal focus:border-nexius-teal",placeholder:"Enter your email"})]})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"}),p.jsxs("div",{className:"relative",children:[p.jsx(i1,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),p.jsx("input",{type:"tel",id:"phone",value:r.phone,onChange:u=>s(h=>({...h,phone:u.target.value})),className:"pl-10 pr-3 py-2 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-nexius-teal focus:border-nexius-teal",placeholder:"Enter your phone number"})]})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"company",className:"block text-sm font-medium text-gray-700 mb-1",children:"Company/School"}),p.jsx("input",{type:"text",id:"company",value:r.company,onChange:u=>s(h=>({...h,company:u.target.value})),className:"px-3 py-2 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-nexius-teal focus:border-nexius-teal",placeholder:"Enter your company or school name"})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"jobTitle",className:"block text-sm font-medium text-gray-700 mb-1",children:"Job Title"}),p.jsx("input",{type:"text",id:"jobTitle",value:r.jobTitle,onChange:u=>s(h=>({...h,jobTitle:u.target.value})),className:"px-3 py-2 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-nexius-teal focus:border-nexius-teal",placeholder:"Enter your job title"})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"linkedIn",className:"block text-sm font-medium text-gray-700 mb-1",children:"LinkedIn Profile"}),p.jsxs("div",{className:"relative",children:[p.jsx(n1,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),p.jsx("input",{type:"url",id:"linkedIn",value:r.linkedIn,onChange:u=>s(h=>({...h,linkedIn:u.target.value})),className:"pl-10 pr-3 py-2 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-nexius-teal focus:border-nexius-teal",placeholder:"Enter your LinkedIn profile URL"})]})]}),p.jsx("button",{type:"submit",disabled:i,className:"w-full bg-nexius-teal text-white py-3 rounded-lg hover:bg-nexius-teal/90 transition-colors font-display font-semibold tracking-wide uppercase text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:i?"Submitting...":"Request to Join"})]})]})})}):null}function QP(){const{slug:n}=up(),[e,t]=A.useState(null),[r,s]=A.useState(!0),[i,l]=A.useState(null),[c,u]=A.useState(!1);A.useEffect(()=>{h()},[n]);const h=async()=>{try{s(!0),l(null);const{data:g,error:x}=await pe.from("events").select("*").eq("slug",n).single();if(x)throw x;t(g)}catch(g){console.error("Error loading event:",g),l("Failed to load event details.")}finally{s(!1)}},f=g=>new Date(g).toLocaleString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0});return r?p.jsx("div",{className:"min-h-screen bg-white flex items-center justify-center",children:p.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-nexius-teal"})}):i||!e?p.jsx("div",{className:"min-h-screen bg-white py-32 px-4",children:p.jsxs("div",{className:"max-w-3xl mx-auto text-center",children:[p.jsx("h1",{className:"text-2xl font-display font-bold text-nexius-navy mb-4",children:"Event Not Found"}),p.jsxs(At,{to:"/events",className:"inline-flex items-center text-nexius-teal hover:text-nexius-teal/90",children:[p.jsx(pl,{className:"h-5 w-5 mr-2"}),"Back to Events"]})]})}):p.jsxs("div",{className:"min-h-screen bg-white",children:[p.jsx("div",{className:"relative bg-nexius-navy py-16",children:p.jsxs("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-full",children:[p.jsxs(At,{to:"/events",className:"inline-flex items-center text-white/80 hover:text-white pt-8 transition-colors",children:[p.jsx(pl,{className:"h-5 w-5 mr-2"}),"Back to Events"]}),p.jsxs("div",{className:"flex flex-col justify-center mt-8",children:[p.jsx("div",{className:"flex items-center gap-2 mb-4",children:p.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${e.status==="published"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:e.event_type.charAt(0).toUpperCase()+e.event_type.slice(1)})}),p.jsx("h1",{className:"text-4xl md:text-5xl font-display font-bold text-white max-w-4xl",children:e.title})]})]})}),p.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 md:py-16",children:p.jsxs("div",{className:"grid lg:grid-cols-3 gap-16",children:[p.jsx("div",{className:"lg:col-span-2 order-2 lg:order-1",children:p.jsxs("div",{className:"space-y-8",children:[e.featured_image&&p.jsx("div",{className:"relative aspect-[16/9] rounded-xl overflow-hidden bg-gray-100",children:p.jsx("img",{src:e.featured_image,alt:e.title,className:"w-full h-full object-cover"})}),e.description&&p.jsx("div",{className:"prose max-w-none mb-8",children:p.jsx("p",{className:"text-lg text-nexius-charcoal leading-relaxed",children:e.description})}),e.content&&p.jsx("div",{className:"prose max-w-none",children:p.jsx("div",{dangerouslySetInnerHTML:{__html:e.content}})})]})}),p.jsx("div",{className:"lg:col-span-1 order-1 lg:order-2",children:p.jsxs("div",{className:"sticky top-24 bg-nexius-gray rounded-xl p-4 md:p-6 space-y-6",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-display font-bold text-nexius-navy mb-4",children:"Event Details"}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"flex items-start gap-3",children:[p.jsx(Yi,{className:"h-5 w-5 text-nexius-teal shrink-0 mt-1"}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("div",{className:"font-medium text-nexius-navy",children:"Date & Time"}),p.jsxs("div",{className:"text-nexius-charcoal break-words",children:[f(e.start_date)," - ",f(e.end_date)]})]})]}),p.jsxs("div",{className:"flex items-start gap-3",children:[p.jsx(yp,{className:"h-5 w-5 text-nexius-teal shrink-0 mt-1"}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("div",{className:"font-medium text-nexius-navy",children:"Location"}),p.jsx("div",{className:"text-nexius-charcoal break-words",children:e.location})]})]})]})]}),p.jsx("div",{className:"pt-6 border-t border-gray-200",children:p.jsx("button",{onClick:()=>u(!0),className:"block w-full bg-nexius-teal text-white text-center px-6 py-3 rounded-lg hover:bg-nexius-teal/90 transition-colors font-display font-semibold tracking-wide uppercase text-sm",children:"Register Now"})})]})})]})}),p.jsx(GP,{event:e,isOpen:c,onClose:()=>u(!1)})]})}function YP(){const[n,e]=A.useState([]),[t,r]=A.useState(!0);A.useEffect(()=>{s()},[]);const s=async()=>{try{const{data:l,error:c}=await pe.from("articles").select("*").eq("status","published").order("published_at",{ascending:!1});if(c)throw c;e(l||[])}catch(l){console.error("Error loading articles:",l)}finally{r(!1)}},i=l=>new Date(l).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return p.jsxs("div",{className:"min-h-screen bg-white",children:[p.jsx("section",{className:"relative pt-32 pb-24 bg-gradient-to-b from-nexius-navy to-nexius-navy/95",children:p.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:p.jsxs("div",{className:"text-center",children:[p.jsx("h1",{className:"text-4xl md:text-5xl font-display font-bold text-white mb-6 tracking-tight",children:"NEXIUS Labs Blog"}),p.jsx("p",{className:"text-xl text-white/80 max-w-3xl mx-auto leading-relaxed",children:"Insights, tutorials, and updates from our team of AI experts"})]})})}),p.jsx("section",{className:"py-24",children:p.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:t?p.jsx("div",{className:"flex justify-center items-center h-64",children:p.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-nexius-teal"})}):n.length===0?p.jsxs("div",{className:"text-center py-16",children:[p.jsx("h2",{className:"text-2xl font-display font-bold text-nexius-navy mb-4",children:"No Articles Yet"}),p.jsx("p",{className:"text-nexius-charcoal",children:"Check back soon for our latest insights and updates."})]}):p.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:n.map(l=>p.jsx(At,{to:`/blog/${l.slug}`,className:"group block",children:p.jsxs("div",{className:"bg-white rounded-xl overflow-hidden border border-nexius-gray hover:border-nexius-teal/30 hover:shadow-lg transition-all",children:[l.featured_image&&p.jsxs("div",{className:"aspect-video relative overflow-hidden",children:[p.jsx("img",{src:l.featured_image,alt:l.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"}),p.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"})]}),p.jsxs("div",{className:"p-6",children:[p.jsxs("div",{className:"flex items-center gap-4 text-sm text-nexius-charcoal/80 mb-3",children:[p.jsxs("div",{className:"flex items-center",children:[p.jsx(Yi,{className:"h-4 w-4 mr-1"}),i(l.published_at||l.created_at)]}),p.jsxs("div",{className:"flex items-center",children:[p.jsx(vp,{className:"h-4 w-4 mr-1"}),"Author"]})]}),p.jsx("h3",{className:"text-xl font-display font-bold text-nexius-navy mb-3 group-hover:text-nexius-teal transition-colors",children:l.title}),l.description&&p.jsx("p",{className:"text-nexius-charcoal mb-4 line-clamp-3",children:l.description}),p.jsxs("div",{className:"flex items-center text-nexius-teal font-medium",children:["Read Article"," ",p.jsx(uu,{className:"ml-2 h-4 w-4 group-hover:translate-x-1 transition-transform"})]})]})]})},l.id))})})}),p.jsx("section",{className:"py-24 bg-nexius-navy",children:p.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[p.jsx("h2",{className:"text-3xl font-display font-bold text-white mb-4",children:"Want to Learn More?"}),p.jsx("p",{className:"text-white/80 mb-8 max-w-2xl mx-auto",children:"Schedule a discovery call to discuss how our AI solutions can help transform your business."}),p.jsxs("a",{href:"https://tidycal.com/melverick/discovery-call-via-zoom-30min",target:"_blank",rel:"noopener noreferrer",className:"bg-nexius-teal text-white px-8 py-4 rounded-lg hover:bg-nexius-teal/90 transition-colors inline-flex items-center font-display font-semibold tracking-wide uppercase text-sm",children:["Schedule A Call ",p.jsx(Al,{className:"ml-2 h-5 w-5"})]})]})})]})}function XP(){const{slug:n}=up(),e=cp(),[t,r]=A.useState(null),[s,i]=A.useState(!0);A.useEffect(()=>{l()},[n]);const l=async()=>{try{const{data:u,error:h}=await pe.from("articles").select("*").eq("slug",n).eq("status","published").single();if(h)throw h;if(!u){e("/blog");return}r(u)}catch(u){console.error("Error loading article:",u),e("/blog")}finally{i(!1)}},c=u=>new Date(u).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return s?p.jsx("div",{className:"min-h-screen bg-white flex items-center justify-center",children:p.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-nexius-teal"})}):t?p.jsxs("div",{className:"min-h-screen bg-white",children:[p.jsxs("div",{className:"relative h-[60vh] min-h-[400px] bg-nexius-navy",children:[t.featured_image&&p.jsxs("div",{className:"absolute inset-0",children:[p.jsx("img",{src:t.featured_image,alt:t.title,className:"w-full h-full object-cover opacity-20"}),p.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-nexius-navy/50 to-nexius-navy"})]}),p.jsxs("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-full",children:[p.jsxs(At,{to:"/blog",className:"inline-flex items-center text-white/80 hover:text-white pt-8 transition-colors",children:[p.jsx(pl,{className:"h-5 w-5 mr-2"}),"Back to Blog"]}),p.jsxs("div",{className:"flex flex-col justify-center h-full pb-16",children:[p.jsxs("div",{className:"flex items-center gap-4 text-white/80 mb-4",children:[p.jsxs("div",{className:"flex items-center",children:[p.jsx(Yi,{className:"h-4 w-4 mr-1"}),c(t.published_at||t.created_at)]}),p.jsxs("div",{className:"flex items-center",children:[p.jsx(vp,{className:"h-4 w-4 mr-1"}),"Author"]})]}),p.jsx("h1",{className:"text-4xl md:text-5xl font-display font-bold text-white max-w-4xl",children:t.title}),t.description&&p.jsx("p",{className:"text-xl text-white/80 mt-6 max-w-3xl",children:t.description})]})]})]}),p.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:p.jsx("article",{className:"prose prose-lg max-w-none",children:p.jsx("div",{dangerouslySetInnerHTML:{__html:t.content}})})}),p.jsx("section",{className:"py-24 bg-nexius-navy",children:p.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[p.jsx("h2",{className:"text-3xl font-display font-bold text-white mb-4",children:"Want to Learn More?"}),p.jsx("p",{className:"text-white/80 mb-8 max-w-2xl mx-auto",children:"Schedule a discovery call to discuss how our AI solutions can help transform your business."}),p.jsxs("a",{href:"https://tidycal.com/melverick/discovery-call-via-zoom-30min",target:"_blank",rel:"noopener noreferrer",className:"bg-nexius-teal text-white px-8 py-4 rounded-lg hover:bg-nexius-teal/90 transition-colors inline-flex items-center font-display font-semibold tracking-wide uppercase text-sm",children:["Schedule A Call ",p.jsx(Al,{className:"ml-2 h-5 w-5"})]})]})})]}):null}const ZP={website:qN,linkedin:r1,youtube:c1,twitter:qn,instagram:XN,facebook:VN,github:WN,calendar:Yi,external:Xv},eI=[{name:"Melverick Ng",title:"Co-Founder",image:"https://tunidbyclygzipvbfzee.supabase.co/storage/v1/object/public/website-images/darryl-1740396262527.jpeg",phone:"+65 8900-2130",email:"melverick@nexiuslabs.com",linkedin:"https://www.linkedin.com/in/melverick/"},{name:"Darryl Wong",title:"Co-Founder",image:"https://tunidbyclygzipvbfzee.supabase.co/storage/v1/object/public/website-images/darryl-1740395556131.jpeg",phone:"+65 8102-5863",email:"darryl@nexiuslabs.com",linkedin:"https://www.linkedin.com/in/darrylwongdq/"}],tI=[{id:"1",title:"Book a Discovery Call",url:"https://tidycal.com/melverick/discovery-call-via-zoom-30min",type:"calendar",icon:"calendar"},{id:"2",title:"Visit Our Website",url:"https://nexiuslabs.com",type:"external",icon:"website"},{id:"3",title:"Follow Us on LinkedIn",url:"https://www.linkedin.com/company/nexius-labs",type:"social",icon:"linkedin"},{id:"5",title:"Follow Us on Twitter",url:"https://x.com/nexiuslabs",type:"social",icon:"twitter"}];function nI(){const[n,e]=A.useState({});A.useEffect(()=>{(async()=>{const{data:s,error:i}=await pe.from("link_clicks").select("link_id, count");if(!i&&s){const l=s.reduce((c,u)=>({...c,[u.link_id]:u.count}),{});e(l)}})()},[]);const t=async r=>{e(s=>({...s,[r]:(s[r]||0)+1})),await pe.rpc("increment_link_click",{link_id:r})};return p.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-nexius-navy to-nexius-navy/95",children:[p.jsx(u1,{}),p.jsx("header",{className:"pt-12 px-4 sm:px-6 lg:px-8 flex justify-center",children:p.jsx("div",{className:"text-center",children:p.jsxs("a",{href:"/",className:"inline-flex items-center group",children:[p.jsx("img",{src:"https://tunidbyclygzipvbfzee.supabase.co/storage/v1/object/public/website-images/m04h4fs8wns-1739784195705.png",alt:"NEXIUS Labs",className:"relative h-12 w-12 object-contain group-hover:opacity-90 transition-opacity mb-3"}),p.jsx("h1",{className:"relative text-xl font-display font-bold text-white group-hover:text-nexius-teal transition-colors",children:"NEXIUS Labs"})]})})}),p.jsx("section",{className:"relative mt-16 mb-12",children:p.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 text-center",children:[p.jsx("img",{src:"/images/hero.png",alt:"NEXIUS Labs Cover",className:"relative w-full h-[200px] object-cover rounded-xl shadow-2xl mb-8"}),p.jsx("p",{className:"relative text-xl text-white/90 max-w-2xl mx-auto",children:"Empowering businesses with AI-driven automation and intelligent insights"})]})}),p.jsx("section",{className:"max-w-3xl mx-auto px-4 sm:px-6 py-12",children:p.jsx("div",{className:"space-y-4",children:p.jsx("div",{className:"relative",children:tI.map(r=>{const s=ZP[r.icon];return p.jsx("a",{href:r.url,target:"_blank",rel:"noopener noreferrer",onClick:()=>t(r.id),className:"block bg-white/10 hover:bg-white/20 border border-white/20 rounded-lg p-4 transition-all duration-300 transform hover:scale-[1.02] hover:shadow-lg group",children:p.jsxs("div",{className:"flex items-center",children:[p.jsx(s,{className:"h-6 w-6 text-nexius-teal mr-4"}),p.jsx("span",{className:"flex-1 text-white font-medium",children:r.title}),p.jsx(Xv,{className:"h-5 w-5 text-white/50 group-hover:text-white transition-colors"})]})},r.id)})})})}),p.jsxs("section",{className:"max-w-4xl mx-auto px-4 sm:px-6 py-12",children:[p.jsx("h2",{className:"text-2xl font-display font-bold text-white text-center mb-12",children:p.jsx("span",{className:"relative",children:"Meet Our Co-Founders"})}),p.jsx("div",{className:"grid md:grid-cols-2 gap-8 md:gap-12",children:eI.map(r=>p.jsxs("div",{className:"bg-white/10 border border-white/20 rounded-xl p-8 text-center",children:[p.jsx("img",{src:r.image,alt:r.name,className:"w-32 h-32 rounded-full mx-auto mb-6 object-cover",crossOrigin:"anonymous"}),p.jsx("h3",{className:"text-xl font-display font-bold text-white mb-2",children:r.name}),p.jsx("p",{className:"text-white/80 mb-6",children:"Co-Founder"}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("a",{href:`tel:${r.phone}`,className:"flex items-center justify-center text-white/80 hover:text-white transition-colors",children:[p.jsx(i1,{className:"h-5 w-5 mr-2"}),r.phone]}),p.jsxs("a",{href:`mailto:${r.email}`,className:"flex items-center justify-center text-white/80 hover:text-white transition-colors",children:[p.jsx(s1,{className:"h-5 w-5 mr-2"}),r.email]}),p.jsxs("a",{href:r.linkedin,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center justify-center px-4 py-2 bg-nexius-teal text-white rounded-lg hover:bg-nexius-teal/90 transition-colors",children:[p.jsx(r1,{className:"h-5 w-5 mr-2"}),"Connect on LinkedIn"]}),p.jsxs("a",{href:`data:text/vcard;charset=UTF-8,BEGIN:VCARD%0AVERSION:3.0%0AFN:${r.name}%0ATITLE:${r.title} at NEXIUS Labs%0ATEL:${r.phone}%0AEMAIL:${r.email}%0AURL:${r.linkedin}%0AEND:VCARD`,download:`${r.name.replace(" ","_")}.vcf`,className:"inline-flex items-center justify-center px-4 py-2 mt-2 bg-white/10 text-white rounded-lg hover:bg-white/20 transition-colors",children:[p.jsx(wE,{className:"h-5 w-5 mr-2"}),"Add to Contacts"]})]})]},r.name))})]}),p.jsx("footer",{className:"text-center py-8",children:p.jsxs("p",{className:"text-white/60",children:["© ",new Date().getFullYear()," NEXIUS Labs. All rights reserved."]})})]})}function rI(){const[n,e]=A.useState([]),[t,r]=A.useState(!0),[s,i]=A.useState(null);A.useEffect(()=>{l()},[]);const l=async()=>{try{r(!0),i(null);const{data:c,error:u}=await pe.from("events").select("*").gte("end_date",new Date().toISOString()).order("start_date",{ascending:!0});if(u)throw i("Failed to load events. Please try again later."),console.error("Error loading events:",u),u;console.log("Loaded events:",c),e(c||[])}catch(c){console.error("Error loading events:",c),i("Failed to load events. Please try again later.")}finally{r(!1)}};return p.jsxs("div",{className:"min-h-screen bg-white",children:[p.jsx("section",{className:"relative pt-32 pb-24 bg-gradient-to-b from-nexius-navy to-nexius-navy/95",children:p.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:p.jsxs("div",{className:"text-center",children:[p.jsx("h1",{className:"text-4xl md:text-5xl font-display font-bold text-white mb-6 tracking-tight",children:"Upcoming Events"}),p.jsx("p",{className:"text-xl text-white/80 max-w-3xl mx-auto leading-relaxed",children:"Join us for workshops, webinars, and conferences focused on AI innovation and business transformation."})]})})}),p.jsx("section",{className:"py-24",children:p.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s?p.jsxs("div",{className:"text-center py-16",children:[p.jsx("div",{className:"text-red-500 mb-4",children:s}),p.jsx("button",{onClick:l,className:"inline-flex items-center px-4 py-2 bg-nexius-teal text-white rounded-lg hover:bg-nexius-teal/90",children:"Try Again"})]}):t?p.jsx("div",{className:"flex justify-center items-center h-64",children:p.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-nexius-teal"})}):n.length===0?p.jsxs("div",{className:"text-center py-16",children:[p.jsx(Yi,{className:"h-16 w-16 text-nexius-teal mx-auto mb-6"}),p.jsx("h2",{className:"text-2xl font-display font-bold text-nexius-navy mb-4",children:"No Upcoming Events"}),p.jsx("p",{className:"text-nexius-charcoal max-w-md mx-auto mb-6",children:"Check back soon for our upcoming events and workshops."})]}):p.jsx("div",{className:"space-y-8",children:p.jsx("div",{className:"grid gap-6",children:p.jsx(Xf,{events:n})})})})}),p.jsx("section",{className:"py-24 bg-nexius-navy",children:p.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[p.jsx("h2",{className:"text-3xl font-display font-bold text-white mb-4",children:"Want to Learn More?"}),p.jsx("p",{className:"text-white/80 mb-8 max-w-2xl mx-auto",children:"Schedule a discovery call to discuss how our AI solutions can help transform your business."}),p.jsxs("a",{href:"https://tidycal.com/melverick/discovery-call-via-zoom-30min",target:"_blank",rel:"noopener noreferrer",className:"bg-nexius-teal text-white px-8 py-4 rounded-lg hover:bg-nexius-teal/90 transition-colors inline-flex items-center font-display font-semibold tracking-wide uppercase text-sm",children:["Schedule A Call ",p.jsx(Al,{className:"ml-2 h-5 w-5"})]})]})})]})}function sI(){return p.jsx("div",{className:"min-h-screen bg-gradient-to-b from-nexius-navy to-nexius-navy/95 flex items-center justify-center px-4",children:p.jsxs("div",{className:"max-w-md w-full text-center",children:[p.jsx("img",{src:"https://tunidbyclygzipvbfzee.supabase.co/storage/v1/object/public/website-images/m04h4fs8wns-1739784195705.png",alt:"NEXIUS Labs",className:"h-16 w-16 mx-auto mb-8"}),p.jsx("h1",{className:"text-6xl font-display font-bold text-white mb-4",children:"404"}),p.jsx("h2",{className:"text-2xl font-display font-semibold text-white mb-4",children:"Page Not Found"}),p.jsx("p",{className:"text-white/80 mb-8",children:"The page you're looking for doesn't exist or has been moved."}),p.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[p.jsxs(At,{to:"/",className:"inline-flex items-center justify-center px-6 py-3 bg-nexius-teal text-white rounded-lg hover:bg-nexius-teal/90 transition-colors font-display font-semibold tracking-wide text-sm",children:[p.jsx(YN,{className:"h-5 w-5 mr-2"}),"Go Home"]}),p.jsxs("button",{onClick:()=>window.history.back(),className:"inline-flex items-center justify-center px-6 py-3 bg-white/10 text-white rounded-lg hover:bg-white/20 transition-colors font-display font-semibold tracking-wide text-sm",children:[p.jsx(pl,{className:"h-5 w-5 mr-2"}),"Go Back"]})]})]})})}function iI(){const[n,e]=A.useState(!1),[t,r]=A.useState(!1),[s,i]=A.useState(""),[l,c]=A.useState([]),[u,h]=A.useState(""),[f,g]=A.useState(""),[x,w]=A.useState(!1),b=A.useRef(null),k=A.useRef(null),C=async D=>{if(D){console.log("Loading messages for session:",D);try{const{data:B,error:oe}=await pe.from("chat_messages").select("*").eq("session_id",D).order("created_at",{ascending:!0});if(oe){console.error("Error loading chat messages:",oe);return}console.log("Loaded messages:",B),c(B||[])}catch(B){console.error("Error loading chat messages:",B)}}};A.useEffect(()=>{const D=localStorage.getItem("visitorId");if(D)h(D);else{const B=crypto.randomUUID();localStorage.setItem("visitorId",B),h(B)}},[]),A.useEffect(()=>{if(f){C(f);const D=pe.channel(`chat_${f}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"chat_messages",filter:`session_id=eq.${f}`},B=>{console.log("New message received:",B),c(oe=>oe.some(Te=>Te.id===B.new.id)?oe:[...oe,B.new])}).subscribe();return()=>{pe.removeChannel(D)}}},[f]),A.useEffect(()=>{n&&!f&&N()},[n,u]),A.useEffect(()=>{l.length>0&&M()},[l]);const N=async()=>{w(!0);try{const D=await SR({visitor_id:u});g(D.id);const B=await CR(D.id);c(B)}catch(D){console.error("Error initializing chat:",D)}finally{w(!1)}},M=()=>{k.current&&(k.current.scrollTop=k.current.scrollHeight)},I=async D=>{if(D.preventDefault(),!s.trim()||!f)return;const B=s.trim();i("");const oe={session_id:f,visitor_id:u,content:B,is_from_visitor:!0,user_id:null,read:!1};try{const se=await NR(oe)}catch(se){console.error("Error sending message:",se),alert("Error sending message. Please try again."),i(B)}},V=()=>{e(!n),r(!1)},U=()=>{r(!t)};return p.jsx("div",{className:"fixed bottom-6 right-6 z-50",children:n?p.jsxs("div",{className:`bg-white rounded-lg shadow-xl transition-all duration-300 ${t?"h-14":"h-[500px]"} w-[350px] flex flex-col`,children:[p.jsxs("div",{className:"px-4 py-3 bg-nexius-navy text-white rounded-t-lg flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(O0,{className:"h-5 w-5"}),p.jsx("span",{className:"font-medium",children:"Chat with Us"})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("button",{onClick:U,className:"p-1 hover:bg-white/10 rounded-full transition-colors",children:t?p.jsx(iE,{className:"h-4 w-4"}):p.jsx(aE,{className:"h-4 w-4"})}),p.jsx("button",{onClick:V,className:"p-1 hover:bg-white/10 rounded-full transition-colors",children:p.jsx(qn,{className:"h-4 w-4"})})]})]}),!t&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{ref:k,className:"flex-1 p-4 overflow-y-auto space-y-4",children:[l.map((D,B)=>p.jsx("div",{className:`flex ${D.is_from_visitor?"justify-end":"justify-start"}`,children:p.jsx("div",{className:`max-w-[75%] rounded-lg px-4 py-2 ${D.is_from_visitor?"bg-nexius-teal text-white":"bg-gray-100 text-gray-900"}`,children:D.content})},D.id||B)),p.jsx("div",{ref:b})]}),p.jsx("form",{onSubmit:I,className:"p-4 border-t",children:p.jsxs("div",{className:"flex gap-2",children:[p.jsx("input",{type:"text",value:s,onChange:D=>i(D.target.value),placeholder:"Type your message...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-nexius-teal focus:border-nexius-teal"}),p.jsx("button",{type:"submit",disabled:!s.trim(),className:"px-4 py-2 bg-nexius-teal text-white rounded-lg hover:bg-nexius-teal/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:p.jsx(df,{className:"h-5 w-5"})})]})})]})]}):p.jsx("button",{onClick:V,className:"bg-nexius-teal text-white p-4 rounded-full shadow-lg hover:bg-nexius-teal/90 transition-colors",children:p.jsx(O0,{className:"h-6 w-6"})})})}const oI=[{title:"Custom AI Solutions",description:"Building AI-driven automation for business operations and accounting.",icon:BN},{title:"AI Consulting",description:"Helping businesses integrate AI tools for workflow optimization.",icon:LN},{title:"Workflow Automation",description:"Developing no-code and AI-powered automation strategies for SMEs.",icon:bE},{title:"AI Training & Workshops",description:"Educating business owners on the power of AI for growth.",icon:o1}],lI=[{title:"Document Processing",description:"Automate data extraction from invoices, receipts, and forms with AI-powered OCR.",icon:t1,metrics:"60% faster processing"},{title:"Financial Analysis",description:"AI-driven insights for better financial decision-making and forecasting.",icon:xp,metrics:"85% accuracy rate"},{title:"Customer Service",description:"Intelligent chatbots and automation for 24/7 customer support.",icon:Xi,metrics:"3x faster response time"},{title:"Data Management",description:"Smart data organization and analysis for better business insights.",icon:UN,metrics:"50% less manual work"},{title:"Process Automation",description:"Streamline repetitive tasks with intelligent workflow automation.",icon:fE,metrics:"40% cost reduction"},{title:"Innovation Strategy",description:"AI-powered insights to drive product and service innovation.",icon:eE,metrics:"2x faster development"}],aI=[{title:"Automate Repetitive Tasks",description:"Let AI handle routine operations while your team focuses on strategic work.",icon:$N},{title:"Cut Operational Costs",description:"Reduce expenses through intelligent process optimization.",icon:HN},{title:"Boost Productivity",description:"Accelerate workflows and eliminate bottlenecks with AI assistance.",icon:dE},{title:"Enhance Decision-Making",description:"Make data-driven decisions with AI-powered insights.",icon:tE},{title:"Improve Customer Experience",description:"Deliver personalized service through AI-driven interactions.",icon:Xi},{title:"Optimize Workforce",description:"Empower employees with AI tools to maximize their potential.",icon:a1},{title:"Gain Competitive Edge",description:"Stay ahead of the market with cutting-edge AI capabilities.",icon:yE},{title:"Scale Operations",description:"Grow your business efficiently with automated processes.",icon:kE}],cI=[{quote:"NEXIUS Labs' AI automation solution has transformed our operations. What used to take our team hours now happens in minutes, and with better accuracy. This has allowed us to focus on strategic initiatives and growth.",author:"Vincent Sim",title:"Operations Director",company:"Serial Company",image:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?auto=format&fit=crop&q=80&w=150&h=150"},{quote:"The AI solution from NEXIUS Labs has revolutionized our accounting processes. Our team now focuses on analysis and strategy instead of manual data entry.",author:"Kate Yap",title:"CFO",company:"Daisy Accounting",image:"https://tunidbyclygzipvbfzee.supabase.co/storage/v1/object/public/website-images//kate_yap.jpeg"},{quote:"NEXIUS Labs' AI solution has transformed how we understand and serve our customers. The results have exceeded our expectations.",author:"Michael Zhang",title:"CEO",company:"GreenCart",image:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?auto=format&fit=crop&q=80&w=150&h=150"}];function uI({onContactClick:n}){const[e,t]=A.useState(!1);return p.jsx("nav",{className:"fixed w-full bg-white/80 backdrop-blur-md z-50 border-b border-gray-100",children:p.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[p.jsxs("div",{className:"flex justify-between h-16",children:[p.jsxs(At,{to:"/",className:"flex items-center focus:outline-none group",children:[p.jsx("img",{src:"https://tunidbyclygzipvbfzee.supabase.co/storage/v1/object/public/website-images/m04h4fs8wns-1739784195705.png",alt:"NEXIUS Labs",className:"h-8 w-8 object-contain group-hover:opacity-90 transition-opacity"}),p.jsx("span",{className:"ml-3 text-xl font-display font-extrabold text-nexius-navy tracking-tight uppercase group-hover:text-nexius-teal transition-colors",children:"NEXIUS Labs"})]}),p.jsx("button",{onClick:()=>t(!e),className:"md:hidden p-2 rounded-lg hover:bg-gray-100",children:e?p.jsx(qn,{className:"h-6 w-6"}):p.jsx(oE,{className:"h-6 w-6"})}),p.jsxs("div",{className:"hidden md:flex items-center space-x-8 relative",children:[p.jsx("a",{href:"/#services",className:"font-body font-medium text-nexius-charcoal hover:text-nexius-navy transition-colors",children:"Services"}),p.jsx("a",{href:"/#benefits",className:"font-body font-medium text-nexius-charcoal hover:text-nexius-navy transition-colors",children:"Benefits"}),p.jsx(At,{to:"/blog",className:"font-body font-medium text-nexius-charcoal hover:text-nexius-navy transition-colors",children:"Blog"}),p.jsx(At,{to:"/case-studies",className:"font-body font-medium text-nexius-charcoal hover:text-nexius-navy transition-colors",children:"Case Studies"}),p.jsx(At,{to:"/events",className:"font-body font-medium text-nexius-charcoal hover:text-nexius-navy transition-colors",children:"Events"}),p.jsx("a",{href:"/#testimonials",className:"font-body font-medium text-nexius-charcoal hover:text-nexius-navy transition-colors",children:"Testimonials"}),p.jsx("button",{onClick:n,"data-contact":"true",className:"bg-nexius-teal text-white px-4 py-2 rounded-lg hover:bg-nexius-teal/90 transition-colors font-display font-semibold tracking-wide uppercase text-sm",children:"Let's Talk"})]})]}),p.jsx("div",{className:`md:hidden ${e?"block":"hidden"}`,children:p.jsxs("div",{className:"px-2 pt-2 pb-3 space-y-1 border-t border-gray-200",children:[p.jsx("a",{href:"/#services",onClick:()=>t(!1),className:"block px-3 py-2 rounded-md text-base font-medium text-nexius-charcoal hover:text-nexius-navy hover:bg-gray-50",children:"Services"}),p.jsx("a",{href:"/#benefits",onClick:()=>t(!1),className:"block px-3 py-2 rounded-md text-base font-medium text-nexius-charcoal hover:text-nexius-navy hover:bg-gray-50",children:"Benefits"}),p.jsx(At,{to:"/blog",onClick:()=>t(!1),className:"block px-3 py-2 rounded-md text-base font-medium text-nexius-charcoal hover:text-nexius-navy hover:bg-gray-50",children:"Blog"}),p.jsx(At,{to:"/case-studies",onClick:()=>t(!1),className:"block px-3 py-2 rounded-md text-base font-medium text-nexius-charcoal hover:text-nexius-navy hover:bg-gray-50",children:"Case Studies"}),p.jsx(At,{to:"/events",onClick:()=>t(!1),className:"block px-3 py-2 rounded-md text-base font-medium text-nexius-charcoal hover:text-nexius-navy hover:bg-gray-50",children:"Events"}),p.jsx("a",{href:"/#testimonials",onClick:()=>t(!1),className:"block px-3 py-2 rounded-md text-base font-medium text-nexius-charcoal hover:text-nexius-navy hover:bg-gray-50",children:"Testimonials"}),p.jsx("button",{onClick:()=>{t(!1),n()},className:"w-full mt-2 px-3 py-2 bg-nexius-teal text-white rounded-lg hover:bg-nexius-teal/90 transition-colors font-display font-semibold tracking-wide uppercase text-sm",children:"Let's Talk"})]})})]})})}function dI(){const n=()=>{window.scrollTo({top:0,behavior:"smooth"})};return p.jsxs("div",{className:"min-h-screen bg-white",children:[p.jsxs("section",{className:"relative pt-32 pb-24 bg-gradient-to-b from-nexius-navy to-nexius-navy/95",children:[p.jsx(u1,{}),p.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:p.jsxs("div",{className:"text-center",children:[p.jsx("h1",{className:"relative text-5xl font-display font-extrabold text-white mb-6 tracking-tight",children:"AI Automation & Business Process Optimization for Growth"}),p.jsx("p",{className:"relative text-xl font-body text-white/80 mb-8 max-w-3xl mx-auto leading-relaxed",children:"At Nexius Labs, we turn AI into a powerful growth engine for businesses—automating operations, streamlining workflows, and maximizing efficiency."}),p.jsx("div",{className:"relative flex justify-center gap-4",children:p.jsxs("button",{onClick:()=>{const e=document.querySelector('button[data-contact="true"]');e instanceof HTMLButtonElement&&e.click()},className:"bg-nexius-teal text-white px-6 py-3 rounded-lg hover:bg-nexius-teal/90 transition-colors flex items-center group font-display font-semibold tracking-wide uppercase text-sm",children:["Let's Talk ",p.jsx(uu,{className:"ml-2 h-5 w-5 group-hover:translate-x-1 transition-transform"})]})}),p.jsx("div",{className:"relative mt-16",children:p.jsx("img",{src:"/images/hero.png",alt:"AI Executive Intelligence",className:"rounded-xl shadow-2xl border border-white/10"})})]})})]}),p.jsx("section",{id:"services",className:"py-24",children:p.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[p.jsxs("div",{className:"text-center mb-16",children:[p.jsx("h2",{className:"text-3xl font-display font-bold text-nexius-navy mb-4 tracking-tight",children:"BUSINESSES STRUGGLE TO ADOPT AI"}),p.jsx("p",{className:"font-body text-nexius-charcoal max-w-2xl mx-auto leading-relaxed",children:"Nexius simplifies AI adoption with tailored automation, expert consulting, and no-code solutions - helping businesses unlock efficiency, reduce costs, and scale seamlessly."})]}),p.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-8",children:oI.map(e=>p.jsxs("div",{className:"group p-6 bg-white rounded-xl border border-nexius-gray hover:border-nexius-teal/30 hover:shadow-lg transition-all",children:[p.jsxs("div",{className:"relative inline-block",children:[p.jsx("div",{className:"absolute -inset-2 bg-nexius-teal/20 rounded-lg blur opacity-0 group-hover:opacity-100 transition-opacity"}),p.jsx(e.icon,{className:"relative h-12 w-12 text-nexius-teal mb-4"})]}),p.jsx("h3",{className:"text-xl font-semibold text-nexius-navy mb-2",children:e.title}),p.jsx("p",{className:"text-nexius-charcoal",children:e.description})]},e.title))})]})}),p.jsx("section",{id:"benefits",className:"py-24 bg-nexius-gray",children:p.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[p.jsxs("div",{className:"text-center mb-16",children:[p.jsx("h2",{className:"text-3xl font-display font-bold text-nexius-navy mb-4 tracking-tight",children:"HOW AI CAN HELP YOUR BUSINESS?"}),p.jsx("p",{className:"font-body text-nexius-charcoal max-w-2xl mx-auto leading-relaxed",children:"Discover the transformative power of AI and how it can revolutionize your business operations, boost efficiency, and drive sustainable growth."})]}),p.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-8",children:aI.map(e=>p.jsxs("div",{className:"benefit-card",children:[p.jsx(e.icon,{className:"benefit-icon"}),p.jsx("h3",{className:"text-lg font-semibold text-nexius-navy mb-2",children:e.title}),p.jsx("p",{className:"text-sm text-nexius-charcoal",children:e.description})]},e.title))})]})}),p.jsx("section",{className:"py-24",children:p.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[p.jsxs("div",{className:"text-center mb-16",children:[p.jsx("h2",{className:"text-3xl font-display font-bold text-nexius-navy mb-4 tracking-tight",children:"AI SOLUTIONS IN ACTION"}),p.jsx("p",{className:"font-body text-nexius-charcoal max-w-2xl mx-auto leading-relaxed",children:"Explore how our AI solutions are transforming different aspects of business operations and delivering measurable results."})]}),p.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:lI.map(e=>p.jsxs("div",{className:"group p-6 bg-white rounded-xl border border-nexius-gray hover:border-nexius-teal/30 hover:shadow-lg transition-all",children:[p.jsxs("div",{className:"relative inline-block",children:[p.jsx("div",{className:"absolute -inset-2 bg-nexius-teal/20 rounded-lg blur opacity-0 group-hover:opacity-100 transition-opacity"}),p.jsx(e.icon,{className:"relative h-12 w-12 text-nexius-teal mb-4"})]}),p.jsx("h3",{className:"text-xl font-semibold text-nexius-navy mb-2",children:e.title}),p.jsx("p",{className:"text-nexius-charcoal mb-4",children:e.description}),p.jsx("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-nexius-teal/10 text-nexius-teal",children:e.metrics})]},e.title))})]})}),p.jsx("section",{id:"testimonials",className:"py-24 bg-nexius-gray",children:p.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[p.jsxs("div",{className:"text-center mb-16",children:[p.jsx("h2",{className:"text-3xl font-display font-bold text-nexius-navy mb-4 tracking-tight",children:"Visionary Leaders Trust Nexius"}),p.jsx("p",{className:"font-body text-nexius-charcoal max-w-2xl mx-auto leading-relaxed",children:"Join forward-thinking executives who've transformed their decision-making process with NEXIUS Labs' intelligent insights."})]}),p.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:cI.map(e=>p.jsxs("div",{className:"p-8 bg-white rounded-xl border border-nexius-gray hover:border-nexius-teal/30 transition-colors",children:[p.jsxs("p",{className:"text-nexius-charcoal mb-6 text-lg italic",children:['"',e.quote,'"']}),p.jsxs("div",{className:"flex items-center",children:[p.jsx("img",{src:e.image,alt:e.author,className:"h-12 w-12 rounded-full object-cover",crossOrigin:"anonymous"}),p.jsxs("div",{className:"ml-4",children:[p.jsx("h4",{className:"text-nexius-navy font-semibold",children:e.author}),p.jsxs("p",{className:"text-nexius-charcoal",children:[e.title,", ",e.company]})]})]})]},e.author))})]})}),p.jsx("section",{className:"py-24 bg-nexius-navy",children:p.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[p.jsx("h2",{className:"text-3xl font-display font-bold text-white mb-4 tracking-tight",children:"Ready to adopt AI to grow your business?"}),p.jsx("p",{className:"font-body text-white/80 mb-8 max-w-2xl mx-auto leading-relaxed",children:"Join industry leaders who are already leveraging NEXIUS Labs to illuminate opportunities and drive unprecedented growth."}),p.jsxs("a",{href:"https://tidycal.com/melverick/discovery-call-via-zoom-30min",target:"_blank",rel:"noopener noreferrer",className:"bg-nexius-teal text-white px-8 py-4 rounded-lg hover:bg-nexius-teal/90 transition-colors font-display font-semibold tracking-wide uppercase text-sm inline-flex items-center",children:["Schedule A Call ",p.jsx(Al,{className:"ml-2 h-5 w-5"})]})]})}),p.jsx("footer",{className:"bg-gray-900 text-gray-400 py-12",children:p.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[p.jsxs("div",{className:"grid md:grid-cols-4 gap-8",children:[p.jsxs("div",{children:[p.jsxs("button",{onClick:n,className:"flex items-center text-white mb-4 group focus:outline-none",children:[p.jsx("img",{src:"https://tunidbyclygzipvbfzee.supabase.co/storage/v1/object/public/website-images/m04h4fs8wns-1739784195705.png",alt:"NEXIUS Labs",className:"h-6 w-6 object-contain group-hover:opacity-90 transition-opacity"}),p.jsx("span",{className:"ml-2 text-lg font-bold group-hover:text-nexius-teal transition-colors",children:"NEXIUS Labs"})]}),p.jsx("p",{className:"text-sm",children:"Empower Your Business With AI-Driven Automation"})]}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-white font-semibold mb-4",children:"Product"}),p.jsxs("ul",{className:"space-y-2",children:[p.jsx("li",{children:p.jsx("a",{href:"#services",className:"hover:text-white transition-colors",children:"Services"})}),p.jsx("li",{children:p.jsx("a",{href:"#benefits",className:"hover:text-white transition-colors",children:"Benefits"})}),p.jsx("li",{children:p.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Security"})})]})]}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-white font-semibold mb-4",children:"Company"}),p.jsxs("ul",{className:"space-y-2",children:[p.jsx("li",{children:p.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"About Us"})}),p.jsx("li",{children:p.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Contact"})}),p.jsx("li",{children:p.jsx(At,{to:"/case-studies",className:"hover:text-white transition-colors",children:"Case Studies"})})]})]}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-white font-semibold mb-4",children:"Legal"}),p.jsxs("ul",{className:"space-y-2",children:[p.jsx("li",{children:p.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Privacy Policy"})}),p.jsx("li",{children:p.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Terms of Service"})}),p.jsx("li",{children:p.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Cookie Policy"})})]})]})]}),p.jsxs("div",{className:"border-t border-gray-800 mt-12 pt-8 text-sm text-center",children:["© ",new Date().getFullYear()," NEXIUS Labs. All rights reserved."]})]})})]})}function hI(){const[n,e]=A.useState(!1),[t,r]=A.useState(!1),i=Gi().pathname!=="/links";return A.useEffect(()=>{pe.auth.getSession().then(()=>{r(!0)}).catch(l=>{console.error("Auth check failed:",l),r(!0)})},[]),t?p.jsxs(p.Fragment,{children:[i&&p.jsx(uI,{onContactClick:()=>e(!0)}),p.jsx(SE,{isOpen:n,onClose:()=>e(!1)}),p.jsxs(v2,{children:[p.jsx(mn,{path:"/",element:p.jsx(dI,{})}),p.jsx(mn,{path:"/case-studies",element:p.jsx(jE,{})}),p.jsx(mn,{path:"/case-study/:id",element:p.jsx(NE,{})}),p.jsx(mn,{path:"/blog",element:p.jsx(YP,{})}),p.jsx(mn,{path:"/blog/:slug",element:p.jsx(XP,{})}),p.jsx(mn,{path:"/upload",element:p.jsx(RE,{})}),p.jsx(mn,{path:"/admin",element:p.jsx(JP,{})}),p.jsx(mn,{path:"/event/:slug",element:p.jsx(QP,{})}),p.jsx(mn,{path:"/events",element:p.jsx(rI,{})}),p.jsx(mn,{path:"/links",element:p.jsx(nI,{})}),p.jsx(mn,{path:"*",element:p.jsx(sI,{})})]}),p.jsx(iI,{})]}):p.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-white",children:p.jsx(sE,{className:"w-8 h-8 text-nexius-teal animate-spin"})})}ES.createRoot(document.getElementById("root")).render(p.jsx(A.StrictMode,{children:p.jsx(E2,{children:p.jsx(hI,{})})}));export{ip as g};
